2025-05-14 02:17:34,733 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-14 02:17:34,736 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-14 02:17:34,736 - main_orchestrator - INFO - Se usará la fecha proporcionada: 16042025
2025-05-14 02:17:34,736 - main_orchestrator - INFO - ==================================================
2025-05-14 02:17:34,736 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-14 02:17:34,736 - main_orchestrator - INFO - Usando fecha: 16042025
2025-05-14 02:17:34,736 - main_orchestrator - INFO - ==================================================
2025-05-14 02:17:34,736 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-14 02:17:34,736 - lib.config_manager - WARNING - Archivo de credenciales no encontrado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-14 02:17:34,736 - lib.config_manager - WARNING - Clave API de Gemini no configurada. La funcionalidad de API de imágenes fallará.
2025-05-14 02:17:34,736 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-14 02:17:34,736 - lib.history_tracker - INFO - Archivo de historial no encontrado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json. Se creará uno nuevo al guardar.
2025-05-14 02:17:34,736 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-14 02:17:34,736 - lib.image_processor - WARNING - No se pudo inicializar Gemini API: No se encontró GOOGLE_API_KEY en variables de entorno o .env
2025-05-14 02:17:34,736 - lib.image_processor - WARNING - API de extracción de texto de imágenes no configurada. No se procesarán imágenes con API.
2025-05-14 02:17:34,740 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-14 02:17:34,741 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-14 02:17:34,742 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025.pdf (6 páginas)
2025-05-14 02:17:34,842 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-05-14 02:17:34,842 - main_orchestrator - INFO - PDF procesado en 0.10 seg. Enlaces encontrados: 59
2025-05-14 02:17:34,846 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_16042025.csv
2025-05-14 02:17:34,847 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-14 02:17:34,848 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025.pdf (6 páginas)
2025-05-14 02:17:34,880 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-14 02:17:34,880 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-14 02:17:34,881 - main_orchestrator - INFO - Texto del PDF extraído en 0.03 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-14 02:17:34,882 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-14 02:17:34,882 - main_orchestrator - INFO - URLs nuevas para procesar: 59 (de 59 total)
2025-05-14 02:17:34,882 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-14 02:17:34,882 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-14 02:17:34,882 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-14 02:17:34,882 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-14 02:17:34,882 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-14 02:17:34,884 - lib.url_manager - INFO - Clasificación de 59 URLs:
2025-05-14 02:17:34,884 - lib.url_manager - INFO -  - HTML: 33
2025-05-14 02:17:34,884 - lib.url_manager - INFO -  - IMAGES: 12
2025-05-14 02:17:34,884 - lib.url_manager - INFO -  - SOCIAL: 14
2025-05-14 02:17:34,884 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_16042025_unprocessed.json
2025-05-14 02:17:34,887 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_16042025_unprocessed.json
2025-05-14 02:17:34,887 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-14 02:17:34,887 - lib.image_processor - INFO - Iniciando descarga paralela de 12 imágenes para la fecha 16042025...
2025-05-14 02:17:36,978 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_94815644_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (185015 bytes)
2025-05-14 02:17:37,142 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_135386b4_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (329609 bytes)
2025-05-14 02:17:37,340 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_edfc8ed9_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (284407 bytes)
2025-05-14 02:17:37,355 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_3ce873be_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (297977 bytes)
2025-05-14 02:17:37,893 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_5872ca8a_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (396505 bytes)
2025-05-14 02:17:38,809 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_bb44165b_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (159855 bytes)
2025-05-14 02:17:39,504 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_9b807dd9_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (707746 bytes)
2025-05-14 02:17:40,421 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_2e3ad109_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (1054067 bytes)
2025-05-14 02:17:40,672 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_1e67714b_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (951901 bytes)
2025-05-14 02:17:41,184 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_141a2c9a_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (1040422 bytes)
2025-05-14 02:17:41,771 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_f5bc9928_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (1049210 bytes)
2025-05-14 02:17:41,884 - lib.image_processor - INFO - Progreso descarga imágenes: 10/12 en 7.00 seg.
2025-05-14 02:17:43,368 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_bd4e765a_16042025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\16042025 (2109336 bytes)
2025-05-14 02:17:43,655 - lib.image_processor - INFO - Progreso descarga imágenes: 12/12 en 8.77 seg.
2025-05-14 02:17:43,659 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_16042025.json
2025-05-14 02:17:43,659 - lib.image_processor - INFO - Descarga de imágenes completada para 12/12 URLs en 8.77 segundos.
2025-05-14 02:17:43,660 - main_orchestrator - INFO - Descarga de imágenes completada en 8.77 seg.
2025-05-14 02:17:43,660 - lib.history_tracker - INFO - Añadidas 12 nuevas URLs al historial.
2025-05-14 02:17:43,661 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 12 URLs.
2025-05-14 02:17:43,662 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-14 02:17:43,663 - lib.html_scraper - INFO - Iniciando scraping paralelo de 33 URLs...
2025-05-14 02:17:50,058 - lib.html_scraper - INFO - Progreso: 20/33 URLs procesadas en 6.40 seg.
2025-05-14 02:18:05,448 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=3, read=2, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='lahora.pe', port=443): Read timed out. (read timeout=20)")': /ultimas-noticias/no-al-alza-en-recibos-de-agua-piura-ciudadanos-rechazan-posible-alza-en-la-tarifa-del-agua/
2025-05-14 02:18:07,842 - lib.html_scraper - INFO - Progreso: 33/33 URLs procesadas en 24.18 seg.
2025-05-14 02:18:07,842 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_16042025.json
2025-05-14 02:18:07,842 - lib.html_scraper - INFO - Scraping completado para 33/33 URLs en 24.18 segundos.
2025-05-14 02:18:07,842 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_16042025.json
2025-05-14 02:18:07,851 - main_orchestrator - INFO - Scraping HTML completado en 24.19 seg.
2025-05-14 02:18:07,851 - lib.history_tracker - INFO - Añadidas 31 nuevas URLs al historial.
2025-05-14 02:18:07,853 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 43 URLs.
2025-05-14 02:18:07,854 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-14 02:18:07,855 - lib.image_processor - WARNING - Cliente API no inicializado. Saltando procesamiento de texto de imágenes.
2025-05-14 02:18:07,855 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 0.00 seg.
2025-05-14 02:18:07,855 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-14 02:18:07,855 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-05-14 02:18:07,856 - main_orchestrator - INFO - Encontradas 9 URLs de Facebook para procesar
2025-05-14 02:18:07,856 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-14 02:18:07,856 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 9 URLs de Facebook para la fecha 16042025...
2025-05-14 02:18:07,856 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/watch/?mibextid=wwXIfr&v=3007796432728360&rdid=dwTFhLT54rEu7lo1
2025-05-14 02:18:07,856 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-05-14 02:18:07,856 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654
2025-05-14 02:18:07,862 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737
2025-05-14 02:18:07,863 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648
2025-05-14 02:18:32,794 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-4.pdf
2025-05-14 02:18:36,128 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-2.pdf
2025-05-14 02:18:37,907 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/permalink.php?story_fbid=pfbid02jjxa5vMavsFyt2VVpMfg7aLimbMDQw21agnBHdsiyWfSL6BomtXekrcmNyiKkviNl&id=100062993063417
2025-05-14 02:18:38,405 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-3.pdf
2025-05-14 02:18:38,764 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-1.pdf
2025-05-14 02:18:39,720 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-5.pdf
2025-05-14 02:18:40,027 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/permalink.php?story_fbid=pfbid02ozZBtnBo2bLjaHnXZ4TTZygwN3fjLhwdZEwab7R7vyUj8k8DKoUsC4rey5YfaEbel&id=100072108931277
2025-05-14 02:18:42,286 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/v/15kkoxxenF/
2025-05-14 02:18:43,329 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/larepublicanorte/posts/980634487518628
2025-05-14 02:18:43,773 - lib.facebook_processor - INFO - Progreso Facebook: 5/9 en 35.92 seg.
2025-05-14 02:18:52,953 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-6.pdf
2025-05-14 02:18:56,266 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-7.pdf
2025-05-14 02:19:01,009 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-9.pdf
2025-05-14 02:19:07,951 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-8.pdf
2025-05-14 02:19:11,744 - lib.facebook_processor - INFO - Progreso Facebook: 9/9 en 63.89 seg.
2025-05-14 02:19:11,746 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_16042025.json
2025-05-14 02:19:11,748 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 9/9 exitosos en 63.89 segundos.
2025-05-14 02:19:11,750 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 63.89 seg.
2025-05-14 02:19:11,751 - lib.history_tracker - INFO - Añadidas 9 nuevas URLs al historial.
2025-05-14 02:19:11,752 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 52 URLs.
2025-05-14 02:19:11,753 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-14 02:19:12,421 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-4.pdf
2025-05-14 02:19:13,152 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-2.pdf
2025-05-14 02:19:13,878 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-3.pdf
2025-05-14 02:19:14,035 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-1.pdf
2025-05-14 02:19:14,742 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-5.pdf
2025-05-14 02:19:15,416 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-6.pdf
2025-05-14 02:19:16,123 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-7.pdf
2025-05-14 02:19:16,845 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-9.pdf
2025-05-14 02:19:16,906 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\16042025\16042025-8.pdf
2025-05-14 02:19:16,906 - lib.facebook_processor - INFO - Texto extraído de 9 PDFs de Facebook
2025-05-14 02:19:16,907 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 5.15 seg.
2025-05-14 02:19:16,907 - main_orchestrator - INFO - Texto extraído de 9 PDFs de Facebook
2025-05-14 02:19:16,908 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_16042025.json
2025-05-14 02:19:16,909 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_16042025.json
2025-05-14 02:19:16,909 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-14 02:19:16,909 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_16042025.json
2025-05-14 02:19:16,910 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_16042025.json
2025-05-14 02:19:16,910 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:19:16.909908', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 59, 'history_total_urls': 52, 'categories': {'html': 33, 'images': 12, 'social': 14}, 'html_processing': {'attempted': 33, 'processed': 31, 'successful': 31, 'relevant (>=0.3)': 17, 'average_relevance': 0.48387096774193544}, 'image_processing': {'attempted_download': 12, 'successful_download': 12, 'attempted_api': 12, 'successful_api': 0}, 'facebook_processing': {'attempted': 9, 'successful': 9, 'extracted_texts': 9}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 5.15, 'image_download': 8.77, 'html_scraping': 24.19, 'image_api': 0.0, 'facebook_processing': 63.89, 'facebook_text_extraction': 5.15, 'stats_consolidation': 0.0}}
2025-05-14 02:19:16,911 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-14 02:19:16,911 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-14 02:19:16,912 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-14 02:19:16,918 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_16042025.json
2025-05-14 02:19:16,919 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_16042025.json
2025-05-14 02:19:16,919 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-14 02:19:16,942 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-14 02:19:16,942 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-14 02:19:16,942 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-14 02:19:16,942 - semantic_cleaner - INFO - Extraídos 31 textos de HTML
2025-05-14 02:19:16,942 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-14 02:19:16,942 - semantic_cleaner - INFO - Extraídos 9 textos de Facebook
2025-05-14 02:19:23,516 - semantic_cleaner - INFO - Se identificaron 46 grupos de textos similares
2025-05-14 02:19:23,516 - semantic_cleaner - INFO - Se seleccionaron 46 textos representativos
2025-05-14 02:19:23,516 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-14 02:19:23,517 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_16042025.json
2025-05-14 02:19:23,517 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_16042025.json
2025-05-14 02:19:23,520 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_16042025.md
2025-05-14 02:19:23,528 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_16042025.md
2025-05-14 02:19:23,529 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_16042025.json
2025-05-14 02:19:23,529 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_16042025.json
2025-05-14 02:19:23,529 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:19:16.909908', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 59, 'history_total_urls': 52, 'categories': {'html': 33, 'images': 12, 'social': 14}, 'html_processing': {'attempted': 33, 'processed': 31, 'successful': 31, 'relevant (>=0.3)': 17, 'average_relevance': 0.48387096774193544}, 'image_processing': {'attempted_download': 12, 'successful_download': 12, 'attempted_api': 12, 'successful_api': 0}, 'facebook_processing': {'attempted': 9, 'successful': 9, 'extracted_texts': 9}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 5.15, 'image_download': 8.77, 'html_scraping': 24.19, 'image_api': 0.0, 'facebook_processing': 63.89, 'facebook_text_extraction': 5.15, 'stats_consolidation': 0.0, 'semantic_cleaning': 6.61}}
2025-05-14 02:19:23,532 - main_orchestrator - INFO - Limpieza semántica completada en 6.61 seg.
2025-05-14 02:19:23,532 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-14 02:19:23,532 - facebook_extractor_fix - ERROR - No se encontró el archivo de textos de Facebook: C:\Jerson\SUNASS\2025\5_May\output\facebook_texts_16042025.json
2025-05-14 02:19:23,532 - main_orchestrator - WARNING - No se pudieron integrar los textos de Facebook en archivos limpios
2025-05-14 02:19:23,532 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-14 02:19:23,532 - main_orchestrator - INFO - ==================================================
2025-05-14 02:19:23,532 - main_orchestrator - INFO - PIPELINE FINALIZADO en 108.80 segundos.
2025-05-14 02:19:23,532 - main_orchestrator - INFO - ==================================================
2025-05-14 02:41:00,943 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-14 02:41:00,943 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-14 02:41:00,943 - main_orchestrator - INFO - Se usará la fecha proporcionada: 06052025
2025-05-14 02:41:00,943 - main_orchestrator - INFO - ==================================================
2025-05-14 02:41:00,943 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-14 02:41:00,943 - main_orchestrator - INFO - Usando fecha: 06052025
2025-05-14 02:41:00,943 - main_orchestrator - INFO - ==================================================
2025-05-14 02:41:00,943 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-14 02:41:00,963 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-14 02:41:00,964 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-14 02:41:00,965 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 52 URLs.
2025-05-14 02:41:00,965 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-14 02:41:00,965 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-14 02:41:00,966 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-14 02:41:00,966 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-14 02:41:00,966 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-14 02:41:00,966 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-14 02:41:00,997 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:41:01,102 - lib.pdf_processor - INFO - Se extrajeron 57 enlaces URI (no mailto) de 06052025.pdf.
2025-05-14 02:41:01,102 - main_orchestrator - INFO - PDF procesado en 0.14 seg. Enlaces encontrados: 57
2025-05-14 02:41:01,107 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_06052025.csv
2025-05-14 02:41:01,107 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-14 02:41:01,110 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:41:01,130 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:41:01,130 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-14 02:41:01,130 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:41:01,130 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-14 02:41:01,130 - main_orchestrator - INFO - URLs nuevas para procesar: 57 (de 57 total)
2025-05-14 02:41:01,130 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-14 02:41:01,130 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-14 02:41:01,130 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-14 02:41:01,130 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-14 02:41:01,130 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-14 02:41:01,134 - lib.url_manager - INFO - Clasificación de 57 URLs:
2025-05-14 02:41:01,134 - lib.url_manager - INFO -  - HTML: 21
2025-05-14 02:41:01,134 - lib.url_manager - INFO -  - IMAGES: 6
2025-05-14 02:41:01,134 - lib.url_manager - INFO -  - SOCIAL: 30
2025-05-14 02:41:01,134 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_06052025_unprocessed.json
2025-05-14 02:41:01,136 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_06052025_unprocessed.json
2025-05-14 02:41:01,136 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-14 02:41:01,136 - lib.image_processor - INFO - Iniciando descarga paralela de 6 imágenes para la fecha 06052025...
2025-05-14 02:41:02,155 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-C4-ANIEGO-EN-VENTANILLA-AFECTO-A-COLEGIO-PRIMERA-EDICION.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-14 02:41:02,171 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-EXITOSA-ANIEGO-EN-AV-TOMAS-VALLE-EN-EL-CALLAO.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-14 02:41:03,102 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_9e84a0e9_06052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (331801 bytes)
2025-05-14 02:41:04,722 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_391db554_06052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (936303 bytes)
2025-05-14 02:41:05,205 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_c180ea3a_06052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (1122167 bytes)
2025-05-14 02:41:05,250 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_7b273d74_06052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (858252 bytes)
2025-05-14 02:41:07,731 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_c92d4982_06052025.mp3' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (1604336 bytes)
2025-05-14 02:41:08,158 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-EXITOSA-ANIEGO-EN-AV-TOMAS-VALLE-EN-EL-CALLAO.mp3: Content type 'audio/mpeg' is not an image
2025-05-14 02:41:49,214 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_be57c13d_06052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025 (34572743 bytes)
2025-05-14 02:41:49,995 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-C4-ANIEGO-EN-VENTANILLA-AFECTO-A-COLEGIO-PRIMERA-EDICION.mp4: Content type 'video/mp4' is not an image
2025-05-14 02:41:49,995 - lib.image_processor - INFO - Progreso descarga imágenes: 6/6 en 48.86 seg.
2025-05-14 02:41:49,995 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_06052025.json
2025-05-14 02:41:49,995 - lib.image_processor - INFO - Descarga de imágenes completada para 6/6 URLs en 48.86 segundos.
2025-05-14 02:41:49,995 - main_orchestrator - INFO - Descarga de imágenes completada en 48.86 seg.
2025-05-14 02:41:49,995 - lib.history_tracker - INFO - Añadidas 6 nuevas URLs al historial.
2025-05-14 02:41:49,995 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 58 URLs.
2025-05-14 02:41:49,995 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-14 02:41:49,995 - lib.html_scraper - INFO - Iniciando scraping paralelo de 21 URLs...
2025-05-14 02:41:59,281 - lib.html_scraper - INFO - Progreso: 20/21 URLs procesadas en 9.29 seg.
2025-05-14 02:41:59,594 - lib.html_scraper - INFO - Progreso: 21/21 URLs procesadas en 9.60 seg.
2025-05-14 02:41:59,604 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_06052025.json
2025-05-14 02:41:59,613 - lib.html_scraper - INFO - Scraping completado para 21/21 URLs en 9.61 segundos.
2025-05-14 02:41:59,613 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_06052025.json
2025-05-14 02:41:59,613 - main_orchestrator - INFO - Scraping HTML completado en 9.62 seg.
2025-05-14 02:41:59,613 - lib.history_tracker - INFO - Añadidas 20 nuevas URLs al historial.
2025-05-14 02:41:59,616 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 78 URLs.
2025-05-14 02:41:59,616 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-14 02:42:02,458 - lib.api_client - INFO - Texto extraído de tmp2sotv_rd.jpg (4 chars).
2025-05-14 02:42:02,458 - lib.image_processor - INFO - Procesando 6 imágenes con API (batch_size=3, pausa=60s)
2025-05-14 02:42:02,458 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-14 02:42:02,458 - lib.image_processor - INFO - Procesando imagen con API: img_4_9e84a0e9_06052025.jpg
2025-05-14 02:42:15,671 - lib.api_client - INFO - Texto extraído de img_4_9e84a0e9_06052025.jpg (3033 chars).
2025-05-14 02:42:17,869 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_9e84a0e9_06052025.jpg
2025-05-14 02:42:18,774 - lib.image_processor - INFO - Procesando imagen con API: img_5_391db554_06052025.jpg
2025-05-14 02:42:39,742 - lib.api_client - INFO - Texto extraído de img_5_391db554_06052025.jpg (4526 chars).
2025-05-14 02:42:41,984 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_391db554_06052025.jpg
2025-05-14 02:42:42,728 - lib.image_processor - INFO - Procesando imagen con API: img_3_7b273d74_06052025.jpg
2025-05-14 02:43:01,354 - lib.api_client - INFO - Texto extraído de img_3_7b273d74_06052025.jpg (3842 chars).
2025-05-14 02:43:02,725 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_7b273d74_06052025.jpg
2025-05-14 02:43:03,332 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-14 02:44:03,334 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-14 02:44:03,335 - lib.image_processor - INFO - Procesando imagen con API: img_6_c180ea3a_06052025.jpg
2025-05-14 02:44:36,992 - lib.api_client - INFO - Texto extraído de img_6_c180ea3a_06052025.jpg (9639 chars).
2025-05-14 02:44:39,706 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_c180ea3a_06052025.jpg
2025-05-14 02:44:40,460 - lib.image_processor - INFO - Procesando imagen con API: img_2_c92d4982_06052025.mp3
2025-05-14 02:44:40,554 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\img_2_c92d4982_06052025.mp3 (formato detectado: None)
2025-05-14 02:44:40,554 - lib.image_processor - WARNING - Error procesando imagen img_2_c92d4982_06052025.mp3: File is not a valid image
2025-05-14 02:44:41,163 - lib.image_processor - INFO - Procesando imagen con API: img_1_be57c13d_06052025.mp4
2025-05-14 02:44:41,165 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\img_1_be57c13d_06052025.mp4 (32.97 MB)
2025-05-14 02:44:41,166 - lib.image_processor - WARNING - Error procesando imagen img_1_be57c13d_06052025.mp4: Image file too large
2025-05-14 02:44:42,147 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\texto_imagenes_api.json
2025-05-14 02:44:42,147 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\texto_imagenes_api.json
2025-05-14 02:44:42,147 - lib.image_processor - INFO - Procesamiento API completado para 4/6 imágenes en 159.69 segundos.
2025-05-14 02:44:42,147 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 162.53 seg.
2025-05-14 02:44:42,147 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-14 02:44:42,147 - main_orchestrator - INFO - Leyendo archivo social para la fecha 06052025: social_links_06052025_unprocessed.json
2025-05-14 02:44:42,147 - main_orchestrator - INFO - Encontradas 30 URLs de Facebook para procesar
2025-05-14 02:44:42,147 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025
2025-05-14 02:44:42,152 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-14 02:44:42,152 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 30 URLs de Facebook para la fecha 06052025...
2025-05-14 02:44:42,152 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/1AVpMfDczs/
2025-05-14 02:44:42,152 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/15kUeKXC6H/
2025-05-14 02:44:42,154 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/15qghShx33/
2025-05-14 02:44:42,157 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/1F8gx4wghr/
2025-05-14 02:44:42,160 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/100066732634603/posts/1028868266014252/?rdid=0TcKPOXhtH3yWKZy
2025-05-14 02:45:15,707 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-3.pdf
2025-05-14 02:45:16,234 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-4.pdf
2025-05-14 02:45:16,762 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-5.pdf
2025-05-14 02:45:17,321 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-2.pdf
2025-05-14 02:45:18,115 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-1.pdf
2025-05-14 02:45:19,964 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/v/1XctzAahok/
2025-05-14 02:45:20,079 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/p/192GFaU29S/
2025-05-14 02:45:21,064 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/p/1EhkoFiaV2/
2025-05-14 02:45:22,393 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/share/1BocxKr6Qn/
2025-05-14 02:45:23,310 - lib.facebook_processor - INFO - Progreso Facebook: 5/30 en 41.16 seg.
2025-05-14 02:45:23,310 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/share/p/15hTeYeevY/
2025-05-14 02:45:36,834 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-7.pdf
2025-05-14 02:45:40,734 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-8.pdf
2025-05-14 02:45:41,862 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/share/p/1HKaVAnoJ2/
2025-05-14 02:45:44,372 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-6.pdf
2025-05-14 02:45:44,987 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-9.pdf
2025-05-14 02:45:45,314 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/p/1BHpQk4mih/
2025-05-14 02:45:47,647 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-10.pdf
2025-05-14 02:45:48,496 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/p/19dJjceBSW/
2025-05-14 02:45:49,233 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/19dJjceBSW/
2025-05-14 02:45:51,737 - lib.facebook_processor - INFO - Progreso Facebook: 10/30 en 69.59 seg.
2025-05-14 02:45:51,739 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/share/p/1AFoGitX4y/
2025-05-14 02:45:59,655 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-11.pdf
2025-05-14 02:46:02,175 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-12.pdf
2025-05-14 02:46:03,922 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/share/p/18sg1mx7nx/
2025-05-14 02:46:07,308 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-13.pdf
2025-05-14 02:46:07,607 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/share/p/1AF49nK1oy/
2025-05-14 02:46:10,992 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/share/p/199xMHfuQ1/
2025-05-14 02:46:11,256 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-14.pdf
2025-05-14 02:46:14,147 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-15.pdf
2025-05-14 02:46:15,116 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/share/p/199xMHfuQ1/
2025-05-14 02:46:21,008 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/share/p/16NkHjJEFu/
2025-05-14 02:46:21,008 - lib.facebook_processor - INFO - Progreso Facebook: 15/30 en 98.86 seg.
2025-05-14 02:46:26,421 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-16.pdf
2025-05-14 02:46:30,766 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-18.pdf
2025-05-14 02:46:31,508 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/share/p/1BWGygN4TC/
2025-05-14 02:46:31,786 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-17.pdf
2025-05-14 02:46:33,973 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-19.pdf
2025-05-14 02:46:35,164 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/share/p/1Sjz8hsc8Y/
2025-05-14 02:46:36,809 - lib.facebook_processor - INFO - Procesando URL de Facebook (23): https://www.facebook.com/share/p/1JjuDqfNCm/
2025-05-14 02:46:37,588 - lib.facebook_processor - INFO - Procesando URL de Facebook (24): https://www.facebook.com/share/p/1Bf7UDZiQk/
2025-05-14 02:46:41,175 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-20.pdf
2025-05-14 02:46:46,231 - lib.facebook_processor - INFO - Progreso Facebook: 20/30 en 124.08 seg.
2025-05-14 02:46:46,232 - lib.facebook_processor - INFO - Procesando URL de Facebook (25): https://www.facebook.com/share/p/1Bf7UDZiQk/
2025-05-14 02:46:49,064 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-21.pdf
2025-05-14 02:46:54,676 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-22.pdf
2025-05-14 02:46:55,698 - lib.facebook_processor - INFO - Procesando URL de Facebook (26): https://www.facebook.com/story.php?story_fbid=1196662068921517&id=100057332054648&rdid=jk2mBuzI4yy4LORe
2025-05-14 02:46:58,741 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-23.pdf
2025-05-14 02:46:58,803 - lib.facebook_processor - INFO - Procesando URL de Facebook (27): https://www.facebook.com/story.php?story_fbid=1242392167888479&id=100063531222092&rdid=RHrPxg3nx2KofPcH
2025-05-14 02:47:02,375 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-24.pdf
2025-05-14 02:47:03,100 - lib.facebook_processor - INFO - Procesando URL de Facebook (28): https://www.facebook.com/share/p/15VZ5ExH6Q/
2025-05-14 02:47:07,052 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-25.pdf
2025-05-14 02:47:07,081 - lib.facebook_processor - INFO - Procesando URL de Facebook (29): https://www.facebook.com/share/p/1Edis5Q4Wn/
2025-05-14 02:47:12,376 - lib.facebook_processor - INFO - Procesando URL de Facebook (30): https://www.facebook.com/share/p/1Edis5Q4Wn/
2025-05-14 02:47:12,376 - lib.facebook_processor - INFO - Progreso Facebook: 25/30 en 150.22 seg.
2025-05-14 02:47:15,384 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-26.pdf
2025-05-14 02:47:16,573 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-27.pdf
2025-05-14 02:47:20,792 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-28.pdf
2025-05-14 02:47:24,633 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-29.pdf
2025-05-14 02:47:31,038 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-30.pdf
2025-05-14 02:47:35,776 - lib.facebook_processor - INFO - Progreso Facebook: 30/30 en 173.62 seg.
2025-05-14 02:47:35,777 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_06052025.json
2025-05-14 02:47:35,777 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 26/30 exitosos en 173.62 segundos.
2025-05-14 02:47:35,777 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 173.63 seg.
2025-05-14 02:47:35,777 - lib.history_tracker - INFO - Añadidas 26 nuevas URLs al historial.
2025-05-14 02:47:35,777 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 104 URLs.
2025-05-14 02:47:35,777 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-14 02:47:36,468 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-3.pdf
2025-05-14 02:47:36,682 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-5.pdf
2025-05-14 02:47:37,452 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-4.pdf
2025-05-14 02:47:38,102 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-1.pdf
2025-05-14 02:47:38,841 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-2.pdf
2025-05-14 02:47:39,081 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-7.pdf
2025-05-14 02:47:39,383 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-8.pdf
2025-05-14 02:47:39,532 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-6.pdf
2025-05-14 02:47:39,695 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-9.pdf
2025-05-14 02:47:39,826 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-10.pdf
2025-05-14 02:47:39,984 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-11.pdf
2025-05-14 02:47:40,126 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-12.pdf
2025-05-14 02:47:40,830 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-14.pdf
2025-05-14 02:47:41,617 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-15.pdf
2025-05-14 02:47:41,771 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-16.pdf
2025-05-14 02:47:41,920 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-19.pdf
2025-05-14 02:47:42,066 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-17.pdf
2025-05-14 02:47:42,220 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-20.pdf
2025-05-14 02:47:42,421 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-21.pdf
2025-05-14 02:47:42,590 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-22.pdf
2025-05-14 02:47:43,259 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-23.pdf
2025-05-14 02:47:43,519 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-25.pdf
2025-05-14 02:47:43,596 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-26.pdf
2025-05-14 02:47:43,673 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-27.pdf
2025-05-14 02:47:44,384 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-28.pdf
2025-05-14 02:47:44,555 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-30.pdf
2025-05-14 02:47:44,555 - lib.facebook_processor - INFO - Texto extraído de 26 PDFs de Facebook
2025-05-14 02:47:44,555 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 8.78 seg.
2025-05-14 02:47:44,555 - main_orchestrator - INFO - Texto extraído de 26 PDFs de Facebook
2025-05-14 02:47:44,555 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_06052025.json
2025-05-14 02:47:44,555 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_06052025.json
2025-05-14 02:47:44,555 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-14 02:47:44,565 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:47:44,566 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:47:44,567 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:47:44.555435', 'date_processed': '06052025', 'total_urls_in_pdf': 57, 'new_urls_processed_count': 57, 'history_total_urls': 104, 'categories': {'html': 21, 'images': 6, 'social': 30}, 'html_processing': {'attempted': 21, 'processed': 20, 'successful': 20, 'relevant (>=0.3)': 13, 'average_relevance': 0.55}, 'image_processing': {'attempted_download': 6, 'successful_download': 4, 'attempted_api': 4, 'successful_api': 4}, 'facebook_processing': {'attempted': 30, 'successful': 26, 'extracted_texts': 26}, 'timings_seconds': {'pdf_extraction': 0.14, 'pdf_text_extraction': 8.78, 'image_download': 48.86, 'html_scraping': 9.62, 'image_api': 162.53, 'facebook_processing': 173.63, 'facebook_text_extraction': 8.78, 'stats_consolidation': 0.0}}
2025-05-14 02:47:44,567 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-14 02:47:44,568 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-14 02:47:44,569 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:47:44,571 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_06052025.json
2025-05-14 02:47:44,571 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_06052025.json
2025-05-14 02:47:44,571 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-14 02:47:44,605 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-14 02:47:44,614 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-14 02:47:44,615 - semantic_cleaner - INFO - Extraídos 4 textos de PDF
2025-05-14 02:47:44,615 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-14 02:47:44,616 - main_orchestrator - ERROR - Error durante la limpieza semántica: 'list' object has no attribute 'items'
Traceback (most recent call last):
  File "C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\main3.py", line 637, in run_pipeline
    cleaned_json = cleaner.clean_consolidated_json(json_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\semantic_cleaner\semantic_cleaner.py", line 338, in clean_consolidated_json
    image_texts = self._extract_texts_from_images(image_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\semantic_cleaner\semantic_cleaner.py", line 121, in _extract_texts_from_images
    for image_key, image_info in image_data.items():
                                 ^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'items'
2025-05-14 02:47:44,621 - main_orchestrator - WARNING - La limpieza semántica falló, pero el proceso principal continúa.
2025-05-14 02:47:44,621 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-14 02:47:44,621 - main_orchestrator - INFO - ==================================================
2025-05-14 02:47:44,621 - main_orchestrator - INFO - PIPELINE FINALIZADO en 403.68 segundos.
2025-05-14 02:47:44,621 - main_orchestrator - INFO - ==================================================
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Se usará la fecha proporcionada: 06052025
2025-05-14 02:57:40,290 - main_orchestrator - INFO - ==================================================
2025-05-14 02:57:40,290 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Usando fecha: 06052025
2025-05-14 02:57:40,290 - main_orchestrator - INFO - ==================================================
2025-05-14 02:57:40,290 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-14 02:57:40,290 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-14 02:57:40,290 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 104 URLs.
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-14 02:57:40,290 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-14 02:57:40,290 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-14 02:57:40,290 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-14 02:57:40,290 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-14 02:57:40,290 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-14 02:57:40,296 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:57:40,391 - lib.pdf_processor - INFO - Se extrajeron 57 enlaces URI (no mailto) de 06052025.pdf.
2025-05-14 02:57:40,391 - main_orchestrator - INFO - PDF procesado en 0.10 seg. Enlaces encontrados: 57
2025-05-14 02:57:40,399 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_06052025.csv
2025-05-14 02:57:40,399 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-14 02:57:40,400 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:57:40,416 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:57:40,416 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-14 02:57:40,416 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:57:40,416 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-14 02:57:40,416 - lib.history_tracker - INFO - Filtradas 57 URLs ya procesadas del lote actual.
2025-05-14 02:57:40,416 - main_orchestrator - INFO - URLs nuevas para procesar: 0 (de 57 total)
2025-05-14 02:57:40,416 - main_orchestrator - INFO - No hay URLs nuevas para procesar en esta ejecución.
2025-05-14 02:57:40,417 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:57:40,417 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:57:40,417 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:57:40.416852', 'date_processed': '06052025', 'total_urls_in_pdf': 57, 'new_urls_processed_count': 0, 'history_total_urls': 104, 'info': 'No new URLs to process in this run.'}
2025-05-14 02:57:40,417 - main_orchestrator - INFO - Estadísticas guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:57:40,417 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-14 02:57:40,417 - main_orchestrator - INFO - ==================================================
2025-05-14 02:57:40,417 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.13 segundos.
2025-05-14 02:57:40,417 - main_orchestrator - INFO - ==================================================
2025-05-14 02:58:11,770 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Se usará la fecha proporcionada: 06052025
2025-05-14 02:58:11,778 - main_orchestrator - INFO - ==================================================
2025-05-14 02:58:11,778 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Usando fecha: 06052025
2025-05-14 02:58:11,778 - main_orchestrator - INFO - ==================================================
2025-05-14 02:58:11,778 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-14 02:58:11,778 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-14 02:58:11,778 - lib.history_tracker - INFO - Archivo de historial no encontrado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json. Se creará uno nuevo al guardar.
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-14 02:58:11,778 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-14 02:58:11,778 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-14 02:58:11,778 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-14 02:58:11,778 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-14 02:58:11,778 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-14 02:58:11,778 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:58:11,874 - lib.pdf_processor - INFO - Se extrajeron 57 enlaces URI (no mailto) de 06052025.pdf.
2025-05-14 02:58:11,874 - main_orchestrator - INFO - PDF procesado en 0.10 seg. Enlaces encontrados: 57
2025-05-14 02:58:11,884 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_06052025.csv
2025-05-14 02:58:11,884 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-14 02:58:11,885 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025.pdf (4 páginas)
2025-05-14 02:58:11,903 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:58:11,903 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-14 02:58:11,903 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:58:11,903 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-14 02:58:11,903 - main_orchestrator - INFO - URLs nuevas para procesar: 57 (de 57 total)
2025-05-14 02:58:11,903 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-14 02:58:11,903 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-14 02:58:11,904 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-14 02:58:11,904 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-14 02:58:11,904 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-14 02:58:11,905 - lib.url_manager - INFO - Clasificación de 57 URLs:
2025-05-14 02:58:11,905 - lib.url_manager - INFO -  - HTML: 21
2025-05-14 02:58:11,905 - lib.url_manager - INFO -  - IMAGES: 6
2025-05-14 02:58:11,906 - lib.url_manager - INFO -  - SOCIAL: 30
2025-05-14 02:58:11,906 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_06052025_unprocessed.json
2025-05-14 02:58:11,907 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_06052025_unprocessed.json
2025-05-14 02:58:11,907 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-14 02:58:11,907 - lib.image_processor - INFO - Iniciando descarga paralela de 6 imágenes para la fecha 06052025...
2025-05-14 02:58:11,923 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-C4-ANIEGO-EN-VENTANILLA-AFECTO-A-COLEGIO-PRIMERA-EDICION.mp4: Content type 'video/mp4' is not an image
2025-05-14 02:58:11,926 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-EXITOSA-ANIEGO-EN-AV-TOMAS-VALLE-EN-EL-CALLAO.mp3: Content type 'audio/mpeg' is not an image
2025-05-14 02:58:11,930 - lib.image_processor - INFO - Progreso descarga imágenes: 6/6 en 0.02 seg.
2025-05-14 02:58:11,931 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_06052025.json
2025-05-14 02:58:11,932 - lib.image_processor - INFO - Descarga de imágenes completada para 6/6 URLs en 0.03 segundos.
2025-05-14 02:58:11,932 - main_orchestrator - INFO - Descarga de imágenes completada en 0.03 seg.
2025-05-14 02:58:11,932 - lib.history_tracker - INFO - Añadidas 6 nuevas URLs al historial.
2025-05-14 02:58:11,932 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 6 URLs.
2025-05-14 02:58:11,933 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-14 02:58:11,933 - lib.html_scraper - INFO - Iniciando scraping paralelo de 21 URLs...
2025-05-14 02:58:12,021 - lib.html_scraper - INFO - Progreso: 20/21 URLs procesadas en 0.09 seg.
2025-05-14 02:58:12,021 - lib.html_scraper - INFO - Progreso: 21/21 URLs procesadas en 0.09 seg.
2025-05-14 02:58:12,026 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_06052025.json
2025-05-14 02:58:12,026 - lib.html_scraper - INFO - Scraping completado para 21/21 URLs en 0.09 segundos.
2025-05-14 02:58:12,026 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_06052025.json
2025-05-14 02:58:12,026 - main_orchestrator - INFO - Scraping HTML completado en 0.09 seg.
2025-05-14 02:58:12,026 - lib.history_tracker - INFO - Añadidas 20 nuevas URLs al historial.
2025-05-14 02:58:12,027 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 26 URLs.
2025-05-14 02:58:12,028 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-14 02:58:14,952 - lib.api_client - INFO - Texto extraído de tmp8yl84xd4.jpg (4 chars).
2025-05-14 02:58:14,955 - lib.image_processor - INFO - Procesando 6 imágenes con API (batch_size=3, pausa=60s)
2025-05-14 02:58:14,955 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-14 02:58:14,955 - lib.image_processor - INFO - Procesando imagen con API: img_1_be57c13d_06052025.mp4
2025-05-14 02:58:14,955 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\img_1_be57c13d_06052025.mp4 (32.97 MB)
2025-05-14 02:58:14,955 - lib.image_processor - WARNING - Error procesando imagen img_1_be57c13d_06052025.mp4: Image file too large
2025-05-14 02:58:15,508 - lib.image_processor - INFO - Procesando imagen con API: img_2_c92d4982_06052025.mp3
2025-05-14 02:58:15,552 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\img_2_c92d4982_06052025.mp3 (formato detectado: None)
2025-05-14 02:58:15,552 - lib.image_processor - WARNING - Error procesando imagen img_2_c92d4982_06052025.mp3: File is not a valid image
2025-05-14 02:58:16,139 - lib.image_processor - INFO - Procesando imagen con API: img_6_c180ea3a_06052025.jpg
2025-05-14 02:58:16,214 - lib.image_processor - INFO - Imagen img_6_c180ea3a_06052025.jpg visualmente similar a otra ya procesada
2025-05-14 02:58:16,232 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_c180ea3a_06052025.jpg
2025-05-14 02:58:17,175 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-14 02:59:17,176 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-14 02:59:17,176 - lib.image_processor - INFO - Procesando imagen con API: img_3_7b273d74_06052025.jpg
2025-05-14 02:59:17,245 - lib.image_processor - INFO - Imagen img_3_7b273d74_06052025.jpg visualmente similar a otra ya procesada
2025-05-14 02:59:17,262 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_7b273d74_06052025.jpg
2025-05-14 02:59:17,942 - lib.image_processor - INFO - Procesando imagen con API: img_4_9e84a0e9_06052025.jpg
2025-05-14 02:59:17,979 - lib.image_processor - INFO - Imagen img_4_9e84a0e9_06052025.jpg visualmente similar a otra ya procesada
2025-05-14 02:59:17,994 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_9e84a0e9_06052025.jpg
2025-05-14 02:59:18,599 - lib.image_processor - INFO - Procesando imagen con API: img_5_391db554_06052025.jpg
2025-05-14 02:59:18,686 - lib.image_processor - INFO - Imagen img_5_391db554_06052025.jpg visualmente similar a otra ya procesada
2025-05-14 02:59:18,704 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_391db554_06052025.jpg
2025-05-14 02:59:19,461 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\texto_imagenes_api.json
2025-05-14 02:59:19,461 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\06052025\texto_imagenes_api.json
2025-05-14 02:59:19,461 - lib.image_processor - INFO - Procesamiento API completado para 4/6 imágenes en 64.51 segundos.
2025-05-14 02:59:19,461 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 67.43 seg.
2025-05-14 02:59:19,461 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-14 02:59:19,462 - main_orchestrator - INFO - Leyendo archivo social para la fecha 06052025: social_links_06052025_unprocessed.json
2025-05-14 02:59:19,462 - main_orchestrator - INFO - Encontradas 30 URLs de Facebook para procesar
2025-05-14 02:59:19,462 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-14 02:59:19,462 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 30 URLs de Facebook para la fecha 06052025...
2025-05-14 02:59:19,495 - lib.facebook_processor - INFO - Progreso Facebook: 5/30 en 0.03 seg.
2025-05-14 02:59:19,512 - lib.facebook_processor - INFO - Progreso Facebook: 10/30 en 0.05 seg.
2025-05-14 02:59:19,528 - lib.facebook_processor - INFO - Progreso Facebook: 15/30 en 0.07 seg.
2025-05-14 02:59:19,540 - lib.facebook_processor - INFO - Progreso Facebook: 20/30 en 0.08 seg.
2025-05-14 02:59:19,550 - lib.facebook_processor - INFO - Progreso Facebook: 25/30 en 0.09 seg.
2025-05-14 02:59:19,560 - lib.facebook_processor - INFO - Progreso Facebook: 30/30 en 0.10 seg.
2025-05-14 02:59:19,564 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_06052025.json
2025-05-14 02:59:19,564 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 26/30 exitosos en 0.10 segundos.
2025-05-14 02:59:19,564 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 0.10 seg.
2025-05-14 02:59:19,564 - lib.history_tracker - INFO - Añadidas 26 nuevas URLs al historial.
2025-05-14 02:59:19,565 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 52 URLs.
2025-05-14 02:59:19,565 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-14 02:59:19,630 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-3.pdf
2025-05-14 02:59:19,669 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-2.pdf
2025-05-14 02:59:19,711 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-1.pdf
2025-05-14 02:59:19,755 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-4.pdf
2025-05-14 02:59:19,800 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-9.pdf
2025-05-14 02:59:19,937 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-7.pdf
2025-05-14 02:59:19,968 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-6.pdf
2025-05-14 02:59:20,015 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-5.pdf
2025-05-14 02:59:20,050 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-8.pdf
2025-05-14 02:59:20,092 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-10.pdf
2025-05-14 02:59:20,132 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-14.pdf
2025-05-14 02:59:20,169 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-11.pdf
2025-05-14 02:59:20,206 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-12.pdf
2025-05-14 02:59:20,247 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-17.pdf
2025-05-14 02:59:20,285 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-15.pdf
2025-05-14 02:59:20,399 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-16.pdf
2025-05-14 02:59:20,441 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-19.pdf
2025-05-14 02:59:20,482 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-21.pdf
2025-05-14 02:59:20,529 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-20.pdf
2025-05-14 02:59:20,573 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-25.pdf
2025-05-14 02:59:20,611 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-22.pdf
2025-05-14 02:59:20,647 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-23.pdf
2025-05-14 02:59:20,656 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-26.pdf
2025-05-14 02:59:20,691 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-30.pdf
2025-05-14 02:59:20,700 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-27.pdf
2025-05-14 02:59:20,735 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\06052025\06052025-28.pdf
2025-05-14 02:59:20,735 - lib.facebook_processor - INFO - Texto extraído de 26 PDFs de Facebook
2025-05-14 02:59:20,735 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.17 seg.
2025-05-14 02:59:20,735 - main_orchestrator - INFO - Texto extraído de 26 PDFs de Facebook
2025-05-14 02:59:20,736 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_06052025.json
2025-05-14 02:59:20,737 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_06052025.json
2025-05-14 02:59:20,737 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-14 02:59:20,737 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:59:20,738 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:59:20,738 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:59:20.737237', 'date_processed': '06052025', 'total_urls_in_pdf': 57, 'new_urls_processed_count': 57, 'history_total_urls': 52, 'categories': {'html': 21, 'images': 6, 'social': 30}, 'html_processing': {'attempted': 21, 'processed': 20, 'successful': 20, 'relevant (>=0.3)': 13, 'average_relevance': 0.55}, 'image_processing': {'attempted_download': 6, 'successful_download': 4, 'attempted_api': 4, 'successful_api': 4}, 'facebook_processing': {'attempted': 30, 'successful': 26, 'extracted_texts': 26}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 1.17, 'image_download': 0.03, 'html_scraping': 0.09, 'image_api': 67.43, 'facebook_processing': 0.1, 'facebook_text_extraction': 1.17, 'stats_consolidation': 0.0}}
2025-05-14 02:59:20,738 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-14 02:59:20,738 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-14 02:59:20,738 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_06052025\pdf_text_06052025.json
2025-05-14 02:59:20,741 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_06052025.json
2025-05-14 02:59:20,741 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_06052025.json
2025-05-14 02:59:20,741 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-14 02:59:20,757 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-14 02:59:20,757 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-14 02:59:20,757 - semantic_cleaner - INFO - Extraídos 4 textos de PDF
2025-05-14 02:59:20,757 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-14 02:59:20,757 - semantic_cleaner - INFO - Extraídos 4 textos de imágenes
2025-05-14 02:59:20,757 - semantic_cleaner - INFO - Extraídos 26 textos de Facebook
2025-05-14 02:59:29,408 - semantic_cleaner - INFO - Se identificaron 53 grupos de textos similares
2025-05-14 02:59:29,408 - semantic_cleaner - INFO - Se seleccionaron 53 textos representativos
2025-05-14 02:59:29,408 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-14 02:59:29,408 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_06052025.json
2025-05-14 02:59:29,412 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_06052025.json
2025-05-14 02:59:29,412 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_06052025.md
2025-05-14 02:59:29,418 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_06052025.md
2025-05-14 02:59:29,418 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:59:29,418 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_06052025.json
2025-05-14 02:59:29,418 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T02:59:20.737237', 'date_processed': '06052025', 'total_urls_in_pdf': 57, 'new_urls_processed_count': 57, 'history_total_urls': 52, 'categories': {'html': 21, 'images': 6, 'social': 30}, 'html_processing': {'attempted': 21, 'processed': 20, 'successful': 20, 'relevant (>=0.3)': 13, 'average_relevance': 0.55}, 'image_processing': {'attempted_download': 6, 'successful_download': 4, 'attempted_api': 4, 'successful_api': 4}, 'facebook_processing': {'attempted': 30, 'successful': 26, 'extracted_texts': 26}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 1.17, 'image_download': 0.03, 'html_scraping': 0.09, 'image_api': 67.43, 'facebook_processing': 0.1, 'facebook_text_extraction': 1.17, 'stats_consolidation': 0.0, 'semantic_cleaning': 8.68}}
2025-05-14 02:59:29,419 - main_orchestrator - INFO - Limpieza semántica completada en 8.68 seg.
2025-05-14 02:59:29,419 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-14 02:59:29,419 - facebook_extractor_fix - ERROR - No se encontró el archivo de textos de Facebook: C:\Jerson\SUNASS\2025\5_May\output\facebook_texts_06052025.json
2025-05-14 02:59:29,419 - main_orchestrator - WARNING - No se pudieron integrar los textos de Facebook en archivos limpios
2025-05-14 02:59:29,419 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-14 02:59:29,419 - main_orchestrator - INFO - ==================================================
2025-05-14 02:59:29,419 - main_orchestrator - INFO - PIPELINE FINALIZADO en 77.64 segundos.
2025-05-14 02:59:29,419 - main_orchestrator - INFO - ==================================================
2025-05-14 02:59:56,285 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-14 02:59:56,285 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-14 02:59:56,285 - main_orchestrator - INFO - Se usará la fecha proporcionada: 07052025
2025-05-14 02:59:56,285 - main_orchestrator - INFO - ==================================================
2025-05-14 02:59:56,285 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-14 02:59:56,285 - main_orchestrator - INFO - Usando fecha: 07052025
2025-05-14 02:59:56,285 - main_orchestrator - INFO - ==================================================
2025-05-14 02:59:56,292 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-14 02:59:56,292 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-14 02:59:56,292 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-14 02:59:56,295 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 52 URLs.
2025-05-14 02:59:56,297 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-14 02:59:56,297 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-14 02:59:56,297 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-14 02:59:56,297 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-14 02:59:56,298 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-14 02:59:56,298 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-14 02:59:56,324 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025.pdf (4 páginas)
2025-05-14 02:59:56,528 - lib.pdf_processor - INFO - Se extrajeron 99 enlaces URI (no mailto) de 07052025.pdf.
2025-05-14 02:59:56,528 - main_orchestrator - INFO - PDF procesado en 0.23 seg. Enlaces encontrados: 99
2025-05-14 02:59:56,533 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_07052025.csv
2025-05-14 02:59:56,533 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-14 02:59:56,533 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025.pdf (4 páginas)
2025-05-14 02:59:56,561 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_07052025\pdf_text_07052025.json
2025-05-14 02:59:56,564 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-14 02:59:56,564 - main_orchestrator - INFO - Texto del PDF extraído en 0.03 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_07052025\pdf_text_07052025.json
2025-05-14 02:59:56,564 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-14 02:59:56,564 - lib.history_tracker - INFO - Filtradas 2 URLs ya procesadas del lote actual.
2025-05-14 02:59:56,564 - main_orchestrator - INFO - URLs nuevas para procesar: 97 (de 99 total)
2025-05-14 02:59:56,565 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-14 02:59:56,565 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-14 02:59:56,565 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-14 02:59:56,566 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-14 02:59:56,566 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-14 02:59:56,566 - lib.url_manager - INFO - Clasificación de 97 URLs:
2025-05-14 02:59:56,566 - lib.url_manager - INFO -  - HTML: 28
2025-05-14 02:59:56,566 - lib.url_manager - INFO -  - IMAGES: 7
2025-05-14 02:59:56,566 - lib.url_manager - INFO -  - SOCIAL: 62
2025-05-14 02:59:56,566 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_07052025_unprocessed.json
2025-05-14 02:59:56,570 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_07052025_unprocessed.json
2025-05-14 02:59:56,571 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-14 02:59:56,571 - lib.image_processor - INFO - Iniciando descarga paralela de 7 imágenes para la fecha 07052025...
2025-05-14 02:59:57,440 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-14 02:59:58,623 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_58337370_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (181882 bytes)
2025-05-14 02:59:58,645 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_acc2869d_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (189683 bytes)
2025-05-14 02:59:59,208 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_2574b789_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (266961 bytes)
2025-05-14 03:00:05,925 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_2f0f4648_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (929524 bytes)
2025-05-14 03:00:05,946 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_3b1a9efd_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (770580 bytes)
2025-05-14 03:00:06,828 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_4259ce81_07052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (265440 bytes)
2025-05-14 03:01:03,383 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_0940cb8a_07052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025 (60376403 bytes)
2025-05-14 03:01:03,766 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/06-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4: Content type 'video/mp4' is not an image
2025-05-14 03:01:03,767 - lib.image_processor - INFO - Progreso descarga imágenes: 7/7 en 67.20 seg.
2025-05-14 03:01:03,770 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_07052025.json
2025-05-14 03:01:03,770 - lib.image_processor - INFO - Descarga de imágenes completada para 7/7 URLs en 67.20 segundos.
2025-05-14 03:01:03,770 - main_orchestrator - INFO - Descarga de imágenes completada en 67.20 seg.
2025-05-14 03:01:03,771 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-14 03:01:03,772 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 59 URLs.
2025-05-14 03:01:03,772 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-14 03:01:03,772 - lib.html_scraper - INFO - Iniciando scraping paralelo de 28 URLs...
2025-05-14 03:01:10,561 - lib.html_scraper - INFO - Progreso: 20/28 URLs procesadas en 6.79 seg.
2025-05-14 03:01:14,022 - lib.html_scraper - INFO - Progreso: 28/28 URLs procesadas en 10.25 seg.
2025-05-14 03:01:14,037 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_07052025.json
2025-05-14 03:01:14,038 - lib.html_scraper - INFO - Scraping completado para 28/28 URLs en 10.27 segundos.
2025-05-14 03:01:14,039 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_07052025.json
2025-05-14 03:01:14,039 - main_orchestrator - INFO - Scraping HTML completado en 10.27 seg.
2025-05-14 03:01:14,040 - lib.history_tracker - INFO - Añadidas 28 nuevas URLs al historial.
2025-05-14 03:01:14,042 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 87 URLs.
2025-05-14 03:01:14,043 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-14 03:01:16,403 - lib.api_client - INFO - Texto extraído de tmpjfbhoq57.jpg (4 chars).
2025-05-14 03:01:16,406 - lib.image_processor - INFO - Procesando 7 imágenes con API (batch_size=3, pausa=60s)
2025-05-14 03:01:16,407 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-14 03:01:16,408 - lib.image_processor - INFO - Procesando imagen con API: img_4_acc2869d_07052025.jpg
2025-05-14 03:01:27,979 - lib.api_client - INFO - Texto extraído de img_4_acc2869d_07052025.jpg (2588 chars).
2025-05-14 03:01:30,452 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_acc2869d_07052025.jpg
2025-05-14 03:01:31,351 - lib.image_processor - INFO - Procesando imagen con API: img_3_58337370_07052025.jpg
2025-05-14 03:01:41,497 - lib.api_client - INFO - Texto extraído de img_3_58337370_07052025.jpg (2350 chars).
2025-05-14 03:01:43,414 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_58337370_07052025.jpg
2025-05-14 03:01:44,048 - lib.image_processor - INFO - Procesando imagen con API: img_7_2574b789_07052025.jpg
2025-05-14 03:02:04,701 - lib.api_client - INFO - Texto extraído de img_7_2574b789_07052025.jpg (4389 chars).
2025-05-14 03:02:07,004 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_2574b789_07052025.jpg
2025-05-14 03:02:07,525 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-14 03:03:07,526 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-14 03:03:07,526 - lib.image_processor - INFO - Procesando imagen con API: img_5_3b1a9efd_07052025.jpg
2025-05-14 03:03:25,143 - lib.api_client - INFO - Texto extraído de img_5_3b1a9efd_07052025.jpg (3521 chars).
2025-05-14 03:03:27,925 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_3b1a9efd_07052025.jpg
2025-05-14 03:03:28,872 - lib.image_processor - INFO - Procesando imagen con API: img_6_2f0f4648_07052025.jpg
2025-05-14 03:04:00,250 - lib.api_client - INFO - Texto extraído de img_6_2f0f4648_07052025.jpg (5162 chars).
2025-05-14 03:04:03,161 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_2f0f4648_07052025.jpg
2025-05-14 03:04:03,819 - lib.image_processor - INFO - Procesando imagen con API: img_1_4259ce81_07052025.jpg
2025-05-14 03:04:10,596 - lib.api_client - INFO - Texto extraído de img_1_4259ce81_07052025.jpg (468 chars).
2025-05-14 03:04:12,353 - lib.image_processor - INFO - Imagen procesada exitosamente: img_1_4259ce81_07052025.jpg
2025-05-14 03:04:12,946 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-14 03:05:12,948 - lib.image_processor - INFO - Procesando batch 3 (1 imágenes)
2025-05-14 03:05:12,949 - lib.image_processor - INFO - Procesando imagen con API: img_2_0940cb8a_07052025.mp4
2025-05-14 03:05:12,950 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025\img_2_0940cb8a_07052025.mp4 (57.58 MB)
2025-05-14 03:05:12,952 - lib.image_processor - WARNING - Error procesando imagen img_2_0940cb8a_07052025.mp4: Image file too large
2025-05-14 03:05:13,872 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025\texto_imagenes_api.json
2025-05-14 03:05:13,873 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\07052025\texto_imagenes_api.json
2025-05-14 03:05:13,873 - lib.image_processor - INFO - Procesamiento API completado para 6/7 imágenes en 237.47 segundos.
2025-05-14 03:05:13,875 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 239.83 seg.
2025-05-14 03:05:13,875 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-14 03:05:13,876 - main_orchestrator - INFO - Leyendo archivo social para la fecha 07052025: social_links_07052025_unprocessed.json
2025-05-14 03:05:13,877 - main_orchestrator - INFO - Encontradas 58 URLs de Facebook para procesar
2025-05-14 03:05:13,878 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025
2025-05-14 03:05:13,884 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-14 03:05:13,884 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 58 URLs de Facebook para la fecha 07052025...
2025-05-14 03:05:13,886 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16iwL3twkz/
2025-05-14 03:05:13,886 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/19cHPJySEs/
2025-05-14 03:05:13,887 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/1Bzsx8UpCj/
2025-05-14 03:05:13,893 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/1AfwHc2Ao6/
2025-05-14 03:05:13,897 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/19FijZnYbE/
2025-05-14 03:05:36,983 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-4.pdf
2025-05-14 03:05:37,340 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-3.pdf
2025-05-14 03:05:38,121 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-1.pdf
2025-05-14 03:05:39,258 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-2.pdf
2025-05-14 03:05:40,175 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/151JiRn2mdc/
2025-05-14 03:05:41,670 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-5.pdf
2025-05-14 03:05:42,174 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/16FhGTQ4xe/
2025-05-14 03:05:42,822 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/p/1PkSia3LZe/
2025-05-14 03:05:42,899 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/share/p/19XYVoXWnC/
2025-05-14 03:05:46,499 - lib.facebook_processor - INFO - Progreso Facebook: 5/58 en 32.62 seg.
2025-05-14 03:05:46,501 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/share/p/16jQUMgBZY/
2025-05-14 03:05:59,078 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-6.pdf
2025-05-14 03:06:00,710 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-7.pdf
2025-05-14 03:06:02,714 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-8.pdf
2025-05-14 03:06:03,151 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/share/p/1KgyzLtm5E/
2025-05-14 03:06:04,340 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-9.pdf
2025-05-14 03:06:05,637 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/p/18jqJiJ7co/
2025-05-14 03:06:07,905 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/p/1CJGwmUQxx/
2025-05-14 03:06:08,321 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-10.pdf
2025-05-14 03:06:09,246 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/18R3okUHFm/
2025-05-14 03:06:12,159 - lib.facebook_processor - INFO - Progreso Facebook: 10/58 en 58.27 seg.
2025-05-14 03:06:12,159 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/share/p/16ZUTYkfny/
2025-05-14 03:06:21,294 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-11.pdf
2025-05-14 03:06:24,394 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-12.pdf
2025-05-14 03:06:26,399 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/share/p/16QKBykzv2/
2025-05-14 03:06:27,717 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-13.pdf
2025-05-14 03:06:28,460 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/share/p/191igBA3W4/
2025-05-14 03:06:30,835 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-14.pdf
2025-05-14 03:06:31,883 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/share/p/1BFia5qfMJ/
2025-05-14 03:06:35,271 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-15.pdf
2025-05-14 03:06:36,546 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/share/p/16bNRnqUZ4/
2025-05-14 03:06:39,622 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/share/p/16QEvZcXvs/
2025-05-14 03:06:39,623 - lib.facebook_processor - INFO - Progreso Facebook: 15/58 en 85.74 seg.
2025-05-14 03:06:46,962 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-16.pdf
2025-05-14 03:06:54,975 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-18.pdf
2025-05-14 03:06:57,796 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/share/p/1EeY3aeaor/
2025-05-14 03:06:58,637 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-20.pdf
2025-05-14 03:06:59,554 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/share/p/1AKQuNKUvf/
2025-05-14 03:07:01,129 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-17.pdf
2025-05-14 03:07:02,491 - lib.facebook_processor - INFO - Procesando URL de Facebook (23): https://www.facebook.com/share/p/1938F6wWHd/
2025-05-14 03:07:03,040 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-19.pdf
2025-05-14 03:07:05,839 - lib.facebook_processor - INFO - Procesando URL de Facebook (24): https://www.facebook.com/share/p/16Xz2MbJVk/
2025-05-14 03:07:07,078 - lib.facebook_processor - INFO - Progreso Facebook: 20/58 en 113.19 seg.
2025-05-14 03:07:07,079 - lib.facebook_processor - INFO - Procesando URL de Facebook (25): https://www.facebook.com/share/p/1AoMu16tF4/
2025-05-14 03:07:15,089 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-21.pdf
2025-05-14 03:07:18,434 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-22.pdf
2025-05-14 03:07:21,692 - lib.facebook_processor - INFO - Procesando URL de Facebook (26): https://www.facebook.com/share/p/1GdJnM6nCT/
2025-05-14 03:07:21,713 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-23.pdf
2025-05-14 03:07:23,905 - lib.facebook_processor - INFO - Procesando URL de Facebook (27): https://www.facebook.com/share/p/1GdJnM6nCT/
2025-05-14 03:07:25,336 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-24.pdf
2025-05-14 03:07:25,433 - lib.facebook_processor - INFO - Procesando URL de Facebook (28): https://www.facebook.com/share/p/16TM7vLoR2/
2025-05-14 03:07:27,245 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-25.pdf
2025-05-14 03:07:31,461 - lib.facebook_processor - INFO - Procesando URL de Facebook (29): https://www.facebook.com/share/p/15CPtY2RBG/
2025-05-14 03:07:32,171 - lib.facebook_processor - INFO - Progreso Facebook: 25/58 en 138.29 seg.
2025-05-14 03:07:32,172 - lib.facebook_processor - INFO - Procesando URL de Facebook (30): https://www.facebook.com/share/p/1D4iAu7a73/
2025-05-14 03:07:42,302 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-26.pdf
2025-05-14 03:07:45,046 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-28.pdf
2025-05-14 03:07:45,569 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-27.pdf
2025-05-14 03:07:46,826 - lib.facebook_processor - INFO - Procesando URL de Facebook (31): https://www.facebook.com/share/p/198Ld13uPp/
2025-05-14 03:07:49,242 - lib.facebook_processor - INFO - Procesando URL de Facebook (32): https://www.facebook.com/photo/?fbid=1238350431629492&set=a.498407755623767
2025-05-14 03:07:50,636 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-29.pdf
2025-05-14 03:07:51,091 - lib.facebook_processor - INFO - Procesando URL de Facebook (33): https://www.facebook.com/photo?fbid=9319136754881022&set=a.740299552764828
2025-05-14 03:07:53,603 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-30.pdf
2025-05-14 03:07:55,466 - lib.facebook_processor - INFO - Procesando URL de Facebook (34): https://www.facebook.com/photo?fbid=9319136754881022&set=a.740299552764828
2025-05-14 03:07:57,812 - lib.facebook_processor - INFO - Progreso Facebook: 30/58 en 163.93 seg.
2025-05-14 03:07:57,812 - lib.facebook_processor - INFO - Procesando URL de Facebook (35): https://www.facebook.com/riberenalajoya/posts/pfbid02eAbjnjMVjknzUntJHjxzzdCTj3yqC8u9vuMBg9QgBTyMFFNXdu6cu4QqZo46tMfml
2025-05-14 03:08:07,526 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-31.pdf
2025-05-14 03:08:09,408 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-32.pdf
2025-05-14 03:08:15,088 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-33.pdf
2025-05-14 03:08:17,784 - lib.facebook_processor - INFO - Procesando URL de Facebook (36): https://www.facebook.com/permalink.php?story_fbid=pfbid02gWMA3t8TYMyhSjwaBXJZxo5YoP7C48YALuvWzPsDQhDD6Djvfh3cVTqseAQfPGMEl&id=61575120090485
2025-05-14 03:08:19,395 - lib.facebook_processor - INFO - Procesando URL de Facebook (37): https://www.facebook.com/permalink.php?story_fbid=pfbid0f7kb1Y2wqNijz6GvyFvV7Pxz5fa2eNJSgj8UR9GVUUZmHcPRsEudRKnkoLufGJbLl&id=100047283977319
2025-05-14 03:08:19,791 - lib.facebook_processor - INFO - Procesando URL de Facebook (38): https://www.facebook.com/permalink.php?story_fbid=pfbid0f7kb1Y2wqNijz6GvyFvV7Pxz5fa2eNJSgj8UR9GVUUZmHcPRsEudRKnkoLufGJbLl&id=100047283977319
2025-05-14 03:08:21,542 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-34.pdf
2025-05-14 03:08:22,305 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-35.pdf
2025-05-14 03:08:26,893 - lib.facebook_processor - INFO - Procesando URL de Facebook (39): https://www.facebook.com/DiarioEP.pe/posts/pfbid02Kgp4Nz2QZFNp2bb8g52rSZMK7j1v5YFGRTBFpRiizSdiZxezN3nnASdgKqvEKZwbl
2025-05-14 03:08:28,472 - lib.facebook_processor - INFO - Progreso Facebook: 35/58 en 194.59 seg.
2025-05-14 03:08:28,473 - lib.facebook_processor - INFO - Procesando URL de Facebook (40): https://www.facebook.com/photo?fbid=660818233449061&set=a.107006905496866
2025-05-14 03:08:37,791 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-36.pdf
2025-05-14 03:08:39,674 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-38.pdf
2025-05-14 03:08:43,238 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-37.pdf
2025-05-14 03:08:44,972 - lib.facebook_processor - INFO - Procesando URL de Facebook (41): https://www.facebook.com/permalink.php?story_fbid=pfbid02PhkrU3Eaw2YsGZD1vBEJmD7LWVLEFipc7d7Eo5Kkv97TQrXeTBG7mU6pmYh9sbL8l&id=61575464192731
2025-05-14 03:08:46,801 - lib.facebook_processor - INFO - Procesando URL de Facebook (42): https://www.facebook.com/PaoDavilaCanaElTigre/posts/pfbid033JTuk9RSTGkd9mPtzkEnkFwuRSeGhNtz1Wwt9XcRNLPTpVcNmGCV3mbW3TFqSTVxl
2025-05-14 03:08:46,825 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-40.pdf
2025-05-14 03:08:47,188 - lib.facebook_processor - INFO - Procesando URL de Facebook (43): https://www.facebook.com/PaoDavilaCanaElTigre/posts/pfbid033JTuk9RSTGkd9mPtzkEnkFwuRSeGhNtz1Wwt9XcRNLPTpVcNmGCV3mbW3TFqSTVxl
2025-05-14 03:08:50,914 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-39.pdf
2025-05-14 03:08:51,756 - lib.facebook_processor - INFO - Procesando URL de Facebook (44): https://www.facebook.com/permalink.php?story_fbid=pfbid0AL3DJwtfzUNKag7DYMh632AuPcC2rWCBF5daFgwNxpLZLNKRwsFfPKFK3oqGThxsl&id=100067011262342
2025-05-14 03:08:57,418 - lib.facebook_processor - INFO - Progreso Facebook: 40/58 en 223.53 seg.
2025-05-14 03:08:57,419 - lib.facebook_processor - INFO - Procesando URL de Facebook (45): https://www.facebook.com/Losprotagonistasdelanoticia/posts/pfbid021oeGT1ffzTghb6Qq1nRmLYdZpn7pxUm6LQQ3JAXAFguLDepLRubsYpNKVsc9gbaYl
2025-05-14 03:09:07,008 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-41.pdf
2025-05-14 03:09:09,169 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-42.pdf
2025-05-14 03:09:09,535 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-43.pdf
2025-05-14 03:09:12,787 - lib.facebook_processor - INFO - Procesando URL de Facebook (46): https://www.facebook.com/Arequipa.pe/posts/pfbid02YN87NK1sS2RmZwsM7iU7djS1r2s7iNWbxfztnGHy423rnpv4fGWdrR2nCPeJ1D1jl
2025-05-14 03:09:12,949 - lib.facebook_processor - INFO - Procesando URL de Facebook (47): https://www.facebook.com/Arequipa.pe/posts/pfbid02YN87NK1sS2RmZwsM7iU7djS1r2s7iNWbxfztnGHy423rnpv4fGWdrR2nCPeJ1D1jl
2025-05-14 03:09:13,734 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-44.pdf
2025-05-14 03:09:14,893 - lib.facebook_processor - INFO - Procesando URL de Facebook (48): https://www.facebook.com/Arequipa.pe/posts/pfbid02YN87NK1sS2RmZwsM7iU7djS1r2s7iNWbxfztnGHy423rnpv4fGWdrR2nCPeJ1D1jl
2025-05-14 03:09:20,736 - lib.facebook_processor - INFO - Procesando URL de Facebook (49): https://www.facebook.com/universaltvarequipa/posts/pfbid02Yg9GxzBnT5fdLqBuwZkCD8Lzo6F7Go644a4tcLHUuNyg5qheoD87KuDCjJw5CNAql
2025-05-14 03:09:22,987 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-45.pdf
2025-05-14 03:09:32,754 - lib.facebook_processor - INFO - Progreso Facebook: 45/58 en 258.87 seg.
2025-05-14 03:09:32,754 - lib.facebook_processor - INFO - Procesando URL de Facebook (50): https://www.facebook.com/permalink.php?story_fbid=pfbid0wfvjCA2NDiJRn6aqadGmf2hiikE8znPQSYA6wXEEH9VbVeNpeNwu1dkeYXzJkZ4tl&id=100083119487359
2025-05-14 03:09:37,356 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-47.pdf
2025-05-14 03:09:38,569 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-46.pdf
2025-05-14 03:09:41,166 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-49.pdf
2025-05-14 03:09:41,472 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-48.pdf
2025-05-14 03:09:44,510 - lib.facebook_processor - INFO - Procesando URL de Facebook (51): https://www.facebook.com/photo?fbid=1262239625904066&set=a.524736176321085
2025-05-14 03:09:44,543 - lib.facebook_processor - INFO - Procesando URL de Facebook (52): https://www.facebook.com/EntreVocesArequipa/posts/pfbid0sT5UwmuepMsdVpximSDTuU4cjX5QK5yy8zhGFdQ4Gt6NkbeXojHw45Nu3aqdpbC9l
2025-05-14 03:09:45,696 - lib.facebook_processor - INFO - Procesando URL de Facebook (53): https://www.facebook.com/permalink.php?story_fbid=pfbid02PME2VwLxQ4htjKAMQTJJArLUZWWAas41UE6XV17Vveg4fbGBBbyFXGEGgWD4QeLkl&id=100064303594358
2025-05-14 03:09:46,183 - lib.facebook_processor - INFO - Procesando URL de Facebook (54): https://www.facebook.com/permalink.php?story_fbid=pfbid02PME2VwLxQ4htjKAMQTJJArLUZWWAas41UE6XV17Vveg4fbGBBbyFXGEGgWD4QeLkl&id=100064303594358
2025-05-14 03:09:54,856 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-50.pdf
2025-05-14 03:10:03,374 - lib.facebook_processor - INFO - Progreso Facebook: 50/58 en 289.49 seg.
2025-05-14 03:10:03,375 - lib.facebook_processor - INFO - Procesando URL de Facebook (55): https://www.facebook.com/photo/?fbid=656482207213066&set=a.114708711390421
2025-05-14 03:10:05,140 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-52.pdf
2025-05-14 03:10:05,224 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-51.pdf
2025-05-14 03:10:08,605 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-53.pdf
2025-05-14 03:10:10,256 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-54.pdf
2025-05-14 03:10:10,498 - lib.facebook_processor - INFO - Procesando URL de Facebook (56): https://www.facebook.com/watch/?v=1386577492667461
2025-05-14 03:10:11,853 - lib.facebook_processor - INFO - Procesando URL de Facebook (57): https://www.facebook.com/impetudiario/posts/pfbid0MXWbQyfHAkNacHYzxhBhTvj72XDXiuvGgAdFNo9YmKVXQ7oc5Uj2oRqAfuA6J4akl
2025-05-14 03:10:13,894 - lib.facebook_processor - INFO - Procesando URL de Facebook (58): https://www.facebook.com/plusnoticias.pe/videos/997867349135424
2025-05-14 03:10:23,143 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-55.pdf
2025-05-14 03:10:32,434 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-56.pdf
2025-05-14 03:10:35,487 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-57.pdf
2025-05-14 03:10:37,130 - lib.facebook_processor - INFO - Progreso Facebook: 55/58 en 323.25 seg.
2025-05-14 03:10:41,334 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-58.pdf
2025-05-14 03:10:46,816 - lib.facebook_processor - INFO - Progreso Facebook: 58/58 en 332.93 seg.
2025-05-14 03:10:46,827 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_07052025.json
2025-05-14 03:10:46,827 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 51/58 exitosos en 332.94 segundos.
2025-05-14 03:10:46,827 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 332.95 seg.
2025-05-14 03:10:46,827 - lib.history_tracker - INFO - Añadidas 51 nuevas URLs al historial.
2025-05-14 03:10:46,834 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 138 URLs.
2025-05-14 03:10:46,834 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-14 03:10:47,738 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-4.pdf
2025-05-14 03:10:48,469 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-3.pdf
2025-05-14 03:10:49,205 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-2.pdf
2025-05-14 03:10:50,645 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-1.pdf
2025-05-14 03:10:51,936 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-5.pdf
2025-05-14 03:10:53,683 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-6.pdf
2025-05-14 03:10:54,569 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-7.pdf
2025-05-14 03:10:55,164 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-8.pdf
2025-05-14 03:10:55,783 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-9.pdf
2025-05-14 03:10:56,457 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-10.pdf
2025-05-14 03:10:57,102 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-11.pdf
2025-05-14 03:10:57,914 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-12.pdf
2025-05-14 03:10:58,594 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-13.pdf
2025-05-14 03:10:59,234 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-14.pdf
2025-05-14 03:11:00,088 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-15.pdf
2025-05-14 03:11:00,645 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-16.pdf
2025-05-14 03:11:01,252 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-18.pdf
2025-05-14 03:11:01,321 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-20.pdf
2025-05-14 03:11:01,904 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-17.pdf
2025-05-14 03:11:02,594 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-19.pdf
2025-05-14 03:11:02,676 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-21.pdf
2025-05-14 03:11:03,380 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-22.pdf
2025-05-14 03:11:04,011 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-23.pdf
2025-05-14 03:11:04,680 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-25.pdf
2025-05-14 03:11:05,338 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-24.pdf
2025-05-14 03:11:05,964 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-27.pdf
2025-05-14 03:11:06,752 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-28.pdf
2025-05-14 03:11:07,315 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-29.pdf
2025-05-14 03:11:07,991 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-30.pdf
2025-05-14 03:11:08,134 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-32.pdf
2025-05-14 03:11:08,755 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-31.pdf
2025-05-14 03:11:08,867 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-34.pdf
2025-05-14 03:11:09,652 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-35.pdf
2025-05-14 03:11:10,414 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-37.pdf
2025-05-14 03:11:10,554 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-36.pdf
2025-05-14 03:11:10,677 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-40.pdf
2025-05-14 03:11:10,886 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-39.pdf
2025-05-14 03:11:11,585 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-41.pdf
2025-05-14 03:11:12,217 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-43.pdf
2025-05-14 03:11:12,404 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-44.pdf
2025-05-14 03:11:13,615 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-45.pdf
2025-05-14 03:11:13,804 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-48.pdf
2025-05-14 03:11:14,605 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-49.pdf
2025-05-14 03:11:14,734 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-50.pdf
2025-05-14 03:11:14,870 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-52.pdf
2025-05-14 03:11:15,111 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-51.pdf
2025-05-14 03:11:15,827 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-54.pdf
2025-05-14 03:11:15,970 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-56.pdf
2025-05-14 03:11:16,092 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-55.pdf
2025-05-14 03:11:16,901 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-57.pdf
2025-05-14 03:11:17,078 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\07052025\07052025-58.pdf
2025-05-14 03:11:17,080 - lib.facebook_processor - INFO - Texto extraído de 51 PDFs de Facebook
2025-05-14 03:11:17,080 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 30.25 seg.
2025-05-14 03:11:17,081 - main_orchestrator - INFO - Texto extraído de 51 PDFs de Facebook
2025-05-14 03:11:17,087 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_07052025.json
2025-05-14 03:11:17,089 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_07052025.json
2025-05-14 03:11:17,089 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-14 03:11:17,116 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_07052025.json
2025-05-14 03:11:17,135 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_07052025.json
2025-05-14 03:11:17,145 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T03:11:17.104948', 'date_processed': '07052025', 'total_urls_in_pdf': 99, 'new_urls_processed_count': 97, 'history_total_urls': 138, 'categories': {'html': 28, 'images': 7, 'social': 62}, 'html_processing': {'attempted': 28, 'processed': 28, 'successful': 28, 'relevant (>=0.3)': 20, 'average_relevance': 0.5535714285714285}, 'image_processing': {'attempted_download': 7, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 58, 'successful': 51, 'extracted_texts': 51}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 30.25, 'image_download': 67.2, 'html_scraping': 10.27, 'image_api': 239.83, 'facebook_processing': 332.95, 'facebook_text_extraction': 30.25, 'stats_consolidation': 0.0}}
2025-05-14 03:11:17,146 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-14 03:11:17,152 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-14 03:11:17,170 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_07052025\pdf_text_07052025.json
2025-05-14 03:11:17,213 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_07052025.json
2025-05-14 03:11:17,224 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_07052025.json
2025-05-14 03:11:17,227 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-14 03:11:17,292 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-14 03:11:17,302 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-14 03:11:17,302 - semantic_cleaner - INFO - Extraídos 4 textos de PDF
2025-05-14 03:11:17,302 - semantic_cleaner - INFO - Extraídos 28 textos de HTML
2025-05-14 03:11:17,302 - semantic_cleaner - INFO - Extraídos 6 textos de imágenes
2025-05-14 03:11:17,302 - semantic_cleaner - INFO - Extraídos 51 textos de Facebook
2025-05-14 03:12:07,999 - semantic_cleaner - INFO - Se identificaron 87 grupos de textos similares
2025-05-14 03:12:08,000 - semantic_cleaner - INFO - Se seleccionaron 87 textos representativos
2025-05-14 03:12:08,000 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-14 03:12:08,002 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_07052025.json
2025-05-14 03:12:08,008 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_07052025.json
2025-05-14 03:12:08,011 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_07052025.md
2025-05-14 03:12:08,034 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_07052025.md
2025-05-14 03:12:08,034 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_07052025.json
2025-05-14 03:12:08,034 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_07052025.json
2025-05-14 03:12:08,034 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-14T03:11:17.104948', 'date_processed': '07052025', 'total_urls_in_pdf': 99, 'new_urls_processed_count': 97, 'history_total_urls': 138, 'categories': {'html': 28, 'images': 7, 'social': 62}, 'html_processing': {'attempted': 28, 'processed': 28, 'successful': 28, 'relevant (>=0.3)': 20, 'average_relevance': 0.5535714285714285}, 'image_processing': {'attempted_download': 7, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 58, 'successful': 51, 'extracted_texts': 51}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 30.25, 'image_download': 67.2, 'html_scraping': 10.27, 'image_api': 239.83, 'facebook_processing': 332.95, 'facebook_text_extraction': 30.25, 'stats_consolidation': 0.0, 'semantic_cleaning': 50.79}}
2025-05-14 03:12:08,034 - main_orchestrator - INFO - Limpieza semántica completada en 50.79 seg.
2025-05-14 03:12:08,034 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-14 03:12:08,034 - facebook_extractor_fix - ERROR - No se encontró el archivo de textos de Facebook: C:\Jerson\SUNASS\2025\5_May\output\facebook_texts_07052025.json
2025-05-14 03:12:08,034 - main_orchestrator - WARNING - No se pudieron integrar los textos de Facebook en archivos limpios
2025-05-14 03:12:08,042 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-14 03:12:08,042 - main_orchestrator - INFO - ==================================================
2025-05-14 03:12:08,042 - main_orchestrator - INFO - PIPELINE FINALIZADO en 731.76 segundos.
2025-05-14 03:12:08,042 - main_orchestrator - INFO - ==================================================
2025-05-20 15:27:56,894 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-20 15:27:56,902 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-20 15:27:56,903 - main_orchestrator - INFO - ==================================================
2025-05-20 15:27:56,903 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-20 15:27:56,903 - main_orchestrator - INFO - Usando fecha: 20052025
2025-05-20 15:27:56,904 - main_orchestrator - INFO - ==================================================
2025-05-20 15:27:56,915 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-20 15:27:56,916 - lib.config_manager - WARNING - No se encontró 'google_api_key' o 'api_key' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-20 15:27:56,917 - lib.config_manager - WARNING - Clave API de Gemini no configurada. La funcionalidad de API de imágenes fallará.
2025-05-20 15:27:56,918 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-20 15:27:56,919 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 138 URLs.
2025-05-20 15:27:56,920 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-20 15:27:56,921 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-20 15:27:56,921 - lib.image_processor - WARNING - No se pudo inicializar Gemini API: No se encontró GOOGLE_API_KEY en variables de entorno o .env
2025-05-20 15:27:56,922 - lib.image_processor - WARNING - API de extracción de texto de imágenes no configurada. No se procesarán imágenes con API.
2025-05-20 15:27:56,922 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-20 15:27:56,922 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-20 15:27:56,922 - lib.pdf_processor - ERROR - Archivo PDF no encontrado: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\20052025.pdf
2025-05-20 15:27:56,923 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\20052025.pdf. Terminando proceso para esta fecha.
2025-05-20 15:27:56,924 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_20052025.json
2025-05-20 15:27:56,924 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_20052025.json
2025-05-20 15:27:56,924 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T15:27:56.923408', 'date_processed': '20052025', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-20 15:27:56,925 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-20 15:27:56,925 - main_orchestrator - INFO - ==================================================
2025-05-20 15:27:56,925 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.02 segundos.
2025-05-20 15:27:56,925 - main_orchestrator - INFO - ==================================================
2025-05-20 15:47:31,713 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-20 15:47:31,718 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-20 15:47:31,718 - main_orchestrator - INFO - Se usará la fecha proporcionada: 22042025
2025-05-20 15:47:31,719 - main_orchestrator - INFO - ==================================================
2025-05-20 15:47:31,719 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-20 15:47:31,719 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-20 15:47:31,719 - main_orchestrator - INFO - ==================================================
2025-05-20 15:47:31,720 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-20 15:47:31,721 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-20 15:47:31,722 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-20 15:47:31,724 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 138 URLs.
2025-05-20 15:47:31,724 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-20 15:47:31,725 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-20 15:47:31,725 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-20 15:47:31,725 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-20 15:47:31,726 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-20 15:47:31,726 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-20 15:47:31,751 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-20 15:47:32,188 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-20 15:47:32,189 - main_orchestrator - INFO - PDF procesado en 0.46 seg. Enlaces encontrados: 103
2025-05-20 15:47:32,201 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-20 15:47:32,201 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-20 15:47:32,203 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-20 15:47:32,282 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-20 15:47:32,282 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-20 15:47:32,282 - main_orchestrator - INFO - Texto del PDF extraído en 0.08 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-20 15:47:32,283 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-20 15:47:32,283 - main_orchestrator - INFO - URLs nuevas para procesar: 103 (de 103 total)
2025-05-20 15:47:32,283 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-20 15:47:32,284 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-20 15:47:32,284 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-20 15:47:32,285 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-20 15:47:32,285 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-20 15:47:32,288 - lib.url_manager - INFO - Clasificación de 103 URLs:
2025-05-20 15:47:32,288 - lib.url_manager - INFO -  - HTML: 39
2025-05-20 15:47:32,288 - lib.url_manager - INFO -  - IMAGES: 14
2025-05-20 15:47:32,288 - lib.url_manager - INFO -  - SOCIAL: 50
2025-05-20 15:47:32,290 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22042025_unprocessed.json
2025-05-20 15:47:32,292 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-20 15:47:32,293 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-20 15:47:32,293 - lib.image_processor - INFO - Iniciando descarga paralela de 14 imágenes para la fecha 22042025...
2025-05-20 15:47:32,293 - lib.image_processor - WARNING - URL duplicada detectada: https://imacorpplataforma.com/wp-content/uploads/2025/04/HILDEBRANDT-EN-SUS-TRECE-30-31-MAL-AGUA-18-04-2025-scaled.jpg. Primera ocurrencia: #3, segunda: #4
2025-05-20 15:47:32,296 - lib.image_processor - INFO - Omitiendo URL duplicada #4: https://imacorpplataforma.com/wp-content/uploads/2025/04/HILDEBRANDT-EN-SUS-TRECE-30-31-MAL-AGUA-18-04-2025-scaled.jpg
2025-05-20 15:47:33,164 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/20-04-2025-RPP-CIUDADANOS-DE-LAMBAYEQUE-REPORTAN-FALTA-DE-AGUA-DEBIDO-A-FALTA-DE-CISTERNAS.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-20 15:47:35,157 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/17-04-2025-RPP-ENTREVISTA-A-GABRIELA-CORIMANYA-SOBRE-COMO-AHORRAR-EL-AGUA-QUE-LLEGA-A-NUESTRAS-CASAS-ROTATIVA-DEL-CAMPO.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-20 15:47:35,913 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_2dfc1883_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (441187 bytes)
2025-05-20 15:47:39,360 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_9bbb0695_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (361100 bytes)
2025-05-20 15:47:42,065 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_95ae401c_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (271113 bytes)
2025-05-20 15:47:42,557 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_1f526d7d_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (466784 bytes)
2025-05-20 15:47:46,802 - lib.image_processor - INFO - Imagen 14 guardada como 'img_14_6b7e17b8_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (562472 bytes)
2025-05-20 15:47:49,507 - lib.image_processor - INFO - Imagen 13 guardada como 'img_13_d71ed522_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (439104 bytes)
2025-05-20 15:47:51,849 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_e2ae2485_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1245561 bytes)
2025-05-20 15:47:55,692 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_1301b08d_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1394922 bytes)
2025-05-20 15:47:56,352 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_dfac0f97_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1320851 bytes)
2025-05-20 15:47:56,823 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_4ab090c1_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (887403 bytes)
2025-05-20 15:47:57,233 - lib.image_processor - INFO - Progreso descarga imágenes: 10/14 en 24.94 seg.
2025-05-20 15:48:00,657 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_49a4d12a_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1059563 bytes)
2025-05-20 15:48:03,317 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_ba0f95b8_22042025.mp3' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (2551484 bytes)
2025-05-20 15:48:03,548 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/04/20-04-2025-RPP-CIUDADANOS-DE-LAMBAYEQUE-REPORTAN-FALTA-DE-AGUA-DEBIDO-A-FALTA-DE-CISTERNAS.mp3: Content type 'audio/mpeg' is not an image
2025-05-20 15:48:13,757 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_6a69548f_22042025.mp3' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (3223249 bytes)
2025-05-20 15:48:14,404 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/04/17-04-2025-RPP-ENTREVISTA-A-GABRIELA-CORIMANYA-SOBRE-COMO-AHORRAR-EL-AGUA-QUE-LLEGA-A-NUESTRAS-CASAS-ROTATIVA-DEL-CAMPO.mp3: Content type 'audio/mpeg' is not an image
2025-05-20 15:48:14,408 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22042025.json
2025-05-20 15:48:14,408 - lib.image_processor - INFO - Descarga de imágenes completada para 13/14 URLs en 42.12 segundos.
2025-05-20 15:48:14,409 - main_orchestrator - INFO - Descarga de imágenes completada en 42.12 seg.
2025-05-20 15:48:14,409 - lib.history_tracker - INFO - Añadidas 13 nuevas URLs al historial.
2025-05-20 15:48:14,411 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 151 URLs.
2025-05-20 15:48:14,412 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-20 15:48:14,412 - lib.html_scraper - INFO - Iniciando scraping paralelo de 39 URLs...
2025-05-20 15:48:19,119 - lib.html_scraper - WARNING - Error HTTP 404 scrapeando https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento: 404 Client Error: Not Found for url: https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento
2025-05-20 15:48:19,157 - lib.html_scraper - WARNING - Error procesando https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento: HTTP Error: 404
2025-05-20 15:48:22,801 - lib.html_scraper - INFO - Progreso: 20/39 URLs procesadas en 8.39 seg.
2025-05-20 15:48:46,895 - lib.html_scraper - INFO - Contenido no es HTML para https://epdoc2.elperuano.pe/EpPo/VistaNLSE.asp?Referencias=MjM5MTk5Mi0xMjAyNTA0MTk= (application/pdf; charset=utf-8). Omitiendo body.
2025-05-20 15:48:51,268 - lib.html_scraper - INFO - Contenido no es HTML para https://epdoc2.elperuano.pe/EpPo/VistaNLSE.asp?Referencias=MjM5MTk5Mi0xMjAyNTA0MTk= (application/pdf; charset=utf-8). Omitiendo body.
2025-05-20 15:48:52,135 - lib.html_scraper - INFO - Progreso: 39/39 URLs procesadas en 37.72 seg.
2025-05-20 15:48:52,140 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-20 15:48:52,140 - lib.html_scraper - INFO - Scraping completado para 39/39 URLs en 37.73 segundos.
2025-05-20 15:48:52,140 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-20 15:48:52,141 - main_orchestrator - INFO - Scraping HTML completado en 37.73 seg.
2025-05-20 15:48:52,141 - lib.history_tracker - INFO - Añadidas 34 nuevas URLs al historial.
2025-05-20 15:48:52,142 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 185 URLs.
2025-05-20 15:48:52,142 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-20 15:48:53,708 - lib.api_client - ERROR - Error procesando tmpalcgy_et.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 3
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 3
}
]
2025-05-20 15:48:53,761 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 3
}
]
2025-05-20 15:48:53,761 - lib.image_processor - INFO - Procesando 13 imágenes con API (batch_size=3, pausa=60s)
2025-05-20 15:48:53,762 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-20 15:48:53,762 - lib.image_processor - INFO - Procesando imagen con API: img_5_2dfc1883_22042025.jpg
2025-05-20 15:48:56,578 - lib.api_client - ERROR - Error procesando img_5_2dfc1883_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
}
]
2025-05-20 15:48:57,855 - lib.image_processor - WARNING - Imagen img_5_2dfc1883_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:48:57,857 - lib.image_processor - WARNING - Error procesando imagen img_5_2dfc1883_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
}
]
2025-05-20 15:48:58,711 - lib.image_processor - INFO - Procesando imagen con API: img_11_9bbb0695_22042025.jpg
2025-05-20 15:49:00,956 - lib.api_client - ERROR - Error procesando img_11_9bbb0695_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-20 15:49:02,141 - lib.image_processor - WARNING - Imagen img_11_9bbb0695_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:49:02,144 - lib.image_processor - WARNING - Error procesando imagen img_11_9bbb0695_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-20 15:49:02,951 - lib.image_processor - INFO - Procesando imagen con API: img_12_95ae401c_22042025.jpg
2025-05-20 15:49:04,767 - lib.api_client - ERROR - Error procesando img_12_95ae401c_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-05-20 15:49:07,363 - lib.image_processor - WARNING - Imagen img_12_95ae401c_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:49:07,366 - lib.image_processor - WARNING - Error procesando imagen img_12_95ae401c_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-05-20 15:49:08,300 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 15:50:08,301 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-20 15:50:08,302 - lib.image_processor - INFO - Procesando imagen con API: img_6_1f526d7d_22042025.jpg
2025-05-20 15:50:11,161 - lib.api_client - ERROR - Error procesando img_6_1f526d7d_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-05-20 15:50:12,331 - lib.image_processor - WARNING - Imagen img_6_1f526d7d_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:50:12,335 - lib.image_processor - WARNING - Error procesando imagen img_6_1f526d7d_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-05-20 15:50:13,076 - lib.image_processor - INFO - Procesando imagen con API: img_14_6b7e17b8_22042025.jpg
2025-05-20 15:50:16,488 - lib.api_client - ERROR - Error procesando img_14_6b7e17b8_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
2025-05-20 15:50:17,756 - lib.image_processor - WARNING - Imagen img_14_6b7e17b8_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:50:17,759 - lib.image_processor - WARNING - Error procesando imagen img_14_6b7e17b8_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
2025-05-20 15:50:18,418 - lib.image_processor - INFO - Procesando imagen con API: img_13_d71ed522_22042025.jpg
2025-05-20 15:50:21,238 - lib.api_client - ERROR - Error procesando img_13_d71ed522_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
2025-05-20 15:50:22,778 - lib.image_processor - WARNING - Imagen img_13_d71ed522_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:50:22,781 - lib.image_processor - WARNING - Error procesando imagen img_13_d71ed522_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
2025-05-20 15:50:23,324 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 15:51:23,324 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-20 15:51:23,325 - lib.image_processor - INFO - Procesando imagen con API: img_10_e2ae2485_22042025.jpg
2025-05-20 15:51:30,643 - lib.api_client - ERROR - Error procesando img_10_e2ae2485_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 26
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 26
}
]
2025-05-20 15:51:33,128 - lib.image_processor - WARNING - Imagen img_10_e2ae2485_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:51:33,131 - lib.image_processor - WARNING - Error procesando imagen img_10_e2ae2485_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 26
}
]
2025-05-20 15:51:34,058 - lib.image_processor - INFO - Procesando imagen con API: img_3_1301b08d_22042025.jpg
2025-05-20 15:51:42,017 - lib.api_client - ERROR - Error procesando img_3_1301b08d_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-20 15:51:43,625 - lib.image_processor - WARNING - Imagen img_3_1301b08d_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:51:43,628 - lib.image_processor - WARNING - Error procesando imagen img_3_1301b08d_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-20 15:51:44,262 - lib.image_processor - INFO - Procesando imagen con API: img_9_dfac0f97_22042025.jpg
2025-05-20 15:51:51,906 - lib.api_client - ERROR - Error procesando img_9_dfac0f97_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 5
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 5
}
]
2025-05-20 15:51:54,880 - lib.image_processor - WARNING - Imagen img_9_dfac0f97_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:51:54,882 - lib.image_processor - WARNING - Error procesando imagen img_9_dfac0f97_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 5
}
]
2025-05-20 15:51:55,546 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 15:52:55,547 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-05-20 15:52:55,548 - lib.image_processor - INFO - Procesando imagen con API: img_2_4ab090c1_22042025.jpg
2025-05-20 15:53:00,810 - lib.api_client - ERROR - Error procesando img_2_4ab090c1_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-20 15:53:02,329 - lib.image_processor - WARNING - Imagen img_2_4ab090c1_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:53:02,332 - lib.image_processor - WARNING - Error procesando imagen img_2_4ab090c1_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-20 15:53:02,952 - lib.image_processor - INFO - Procesando imagen con API: img_8_49a4d12a_22042025.jpg
2025-05-20 15:53:09,302 - lib.api_client - ERROR - Error procesando img_8_49a4d12a_22042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
2025-05-20 15:53:11,150 - lib.image_processor - WARNING - Imagen img_8_49a4d12a_22042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 15:53:11,152 - lib.image_processor - WARNING - Error procesando imagen img_8_49a4d12a_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
2025-05-20 15:53:11,789 - lib.image_processor - INFO - Procesando imagen con API: img_7_ba0f95b8_22042025.mp3
2025-05-20 15:53:11,937 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\img_7_ba0f95b8_22042025.mp3 (formato detectado: None)
2025-05-20 15:53:11,937 - lib.image_processor - WARNING - Error procesando imagen img_7_ba0f95b8_22042025.mp3: File is not a valid image
2025-05-20 15:53:12,811 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 15:54:12,811 - lib.image_processor - INFO - Procesando batch 5 (1 imágenes)
2025-05-20 15:54:12,812 - lib.image_processor - INFO - Procesando imagen con API: img_1_6a69548f_22042025.mp3
2025-05-20 15:54:12,823 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\img_1_6a69548f_22042025.mp3 (formato detectado: None)
2025-05-20 15:54:12,824 - lib.image_processor - WARNING - Error procesando imagen img_1_6a69548f_22042025.mp3: File is not a valid image
2025-05-20 15:54:13,342 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-20 15:54:13,342 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-20 15:54:13,343 - lib.image_processor - INFO - Procesamiento API completado para 0/13 imágenes en 319.58 segundos.
2025-05-20 15:54:13,343 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 321.20 seg.
2025-05-20 15:54:13,343 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-20 15:54:13,344 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-20 15:54:13,369 - main_orchestrator - INFO - Encontradas 49 URLs de Facebook para procesar
2025-05-20 15:54:13,370 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025
2025-05-20 15:54:13,371 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-20 15:54:13,371 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 49 URLs de Facebook para la fecha 22042025...
2025-05-20 15:54:13,372 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/agenciandina/posts/pfbid0GoGrkSAmt6xy7bqZVtLhDRpmyYXpe9CQ8dS641ippmAcjbMuQtkK4o6yd75Gyoztl?rdid=1aMJtw9YNRZJfAlm
2025-05-20 15:54:13,373 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-20 15:54:13,373 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-20 15:54:13,374 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/SoemPeru/posts/pfbid023SyRCJCWJy3mfy5XUMsPjeiwFe38gGsj49sZJm9ckuD2uo5vHZ9GAWCh3PW2GLkml?rdid=9g14DZuhU7mq60uh
2025-05-20 15:54:13,375 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/decanaradio/posts/pfbid02DnD9Woi5x9YE7RFXhdsbqMELhCuecheDYfZZyKax2CNPtqMij1U1B1gr3x63G7ePl?rdid=OnJio5eiGkW6ZSGE
2025-05-20 15:54:57,968 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-20 15:55:03,077 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/diplomaciaciudadana/posts/pfbid0zABeJhxS8GzRQidm7mR4RzzFVzXGzwG3htiXKS712a6AVBP3ztQhvqgtCSpjGZa3l?rdid=ReVxRKJ9evbT34Px
2025-05-20 15:55:09,330 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-20 15:55:10,905 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-5.pdf
2025-05-20 15:55:12,586 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-20 15:55:13,831 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/permalink.php?story_fbid=pfbid021PPZL5gbG9z13hAZLaPhAGULcR3VNipJMfCLH4VDJn8aQ9k7KvgC6yQeAsujyKepl&id=100064089484737&rdid=E1OEnXv4iVTbRGro
2025-05-20 15:55:14,130 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/groups/142925476261791/permalink/1713016105919379/?rdid=qlREPYVsMHdGHPMI&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F1EaGLriuJo%2F
2025-05-20 15:55:14,148 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-4.pdf
2025-05-20 15:55:17,536 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/permalink.php?story_fbid=pfbid06u3kqH3zC7LaCNYixodwUjR7dpgY84Y2HkdEmXaPnNrvy5WSWkCeVUtYzix4ork8l&id=100062993063417&rdid=W7M6TZM9WxOnYRNM
2025-05-20 15:55:18,624 - lib.facebook_processor - INFO - Progreso Facebook: 5/49 en 65.25 seg.
2025-05-20 15:55:18,624 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/permalink.php?story_fbid=pfbid0reYaJGKSrrrM5sH1sZBTvPsm8im1uhSwyjzjmE433Meqhw21yPtjcWuFU6LZfnb1l&id=100072108931277&rdid=h4uCPExW0ybiyePi
2025-05-20 15:55:29,035 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-6.pdf
2025-05-20 15:55:33,056 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/permalink.php?story_fbid=pfbid0gdz3Jt9XeV6CqoTTNaicfRqxFMk6MWSbX8L6CTS62eJjBpGkZjMWC4T2ym5HrUTHl&id=100065273659654&rdid=uFgc1hNpAT2S3DpG
2025-05-20 15:55:35,524 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-7.pdf
2025-05-20 15:55:39,090 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/diarioprimiciahyo/posts/pfbid0MyvvUrEXMwK9JweVexky3uoJu9xYaG5CrP4wLPi25vuo4i4su39fj8bZe4HjAyAYl?rdid=WQIs6UTvdY7Bm09T
2025-05-20 15:55:44,734 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-10.pdf
2025-05-20 15:55:48,933 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/permalink.php?story_fbid=pfbid0rR7UDLVAfscSqNLjgQEC4tLSMNvwUxiU7ZJJpmgaDRvitJ25FWysDbgdHfqvTMYsl&id=100066844274567&rdid=YWZjIZXhyCZwg75K
2025-05-20 15:55:52,373 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-9.pdf
2025-05-20 15:55:55,615 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid02wzvGm2NmrehqThvWApngvHX3QKMNV14n3C4h3Edi4B8bTsEytcqU2gwbCk8B5C8ml?rdid=Wpa8rNsRaAuEefKp
2025-05-20 15:56:07,083 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-8.pdf
2025-05-20 15:56:09,587 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-12.pdf
2025-05-20 15:56:11,761 - lib.facebook_processor - INFO - Progreso Facebook: 10/49 en 118.39 seg.
2025-05-20 15:56:11,761 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/permalink.php?story_fbid=pfbid02MfN5NQfmwvb4W9kQZX93BVp21WugQWTryig2tQerHE7kFb2KrZfwx6NbpxTxpR1sl&id=100063616446639&rdid=vTNwRKdtFe2BIznu
2025-05-20 15:56:14,296 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/permalink.php?story_fbid=pfbid0e49Y6pejvWGo3v1yMUo98TeE65wKFp9r6VGNfVWyCzZQ4qaxtRvpSwBAo7cJEaFEl&id=61559613183648&rdid=P8fBqLGKDPDzeFaQ
2025-05-20 15:56:20,592 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-11.pdf
2025-05-20 15:56:24,326 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/PorSuPuertoNoticiasChimbote/posts/pfbid02oVqM6Gq2kMtaW9FPJugkPAwryZLVSvcAdX7LWdJHqei9qU7CBbHTf4aWmPEW1dhal?rdid=dMzYD3xKAFmcOzaM&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F16fnxz3UG6%2F
2025-05-20 15:56:24,529 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-13.pdf
2025-05-20 15:56:24,681 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-14.pdf
2025-05-20 15:56:28,031 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/permalink.php?story_fbid=pfbid0TzCZwTAWQvxGLNMQ77dhngX98TVYedA6pB4XL5ksMGojoTp6ju7V5YawYRwedsACl&id=100092180403233&rdid=fGJGXkUs6xgloihe
2025-05-20 15:56:29,817 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/rct.toquepala/posts/pfbid0PnmjyQnAbbFL8AgHwo3q94vSGszTBMhdysJMoKRKWFMmboBRRjMmhPRs3d1cGjekl?rdid=2LhTafC5kKyz68Dm
2025-05-20 15:56:36,072 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-15.pdf
2025-05-20 15:56:39,454 - lib.facebook_processor - INFO - Progreso Facebook: 15/49 en 146.08 seg.
2025-05-20 15:56:39,455 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455
2025-05-20 15:56:47,105 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-16.pdf
2025-05-20 15:56:51,740 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455
2025-05-20 15:57:00,139 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-17.pdf
2025-05-20 15:57:02,240 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-19.pdf
2025-05-20 15:57:03,456 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/photo?fbid=629540879905471&set=a.115323967993834
2025-05-20 15:57:06,352 - lib.facebook_processor - INFO - Procesando URL de Facebook (23): https://www.facebook.com/photo?fbid=1169198698550401&set=a.479540714182873
2025-05-20 15:57:25,649 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-21.pdf
2025-05-20 15:57:30,265 - lib.facebook_processor - INFO - Procesando URL de Facebook (24): https://www.facebook.com/photo?fbid=9169253469869352&set=a.740299552764828
2025-05-20 15:57:39,702 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-18.pdf
2025-05-20 15:57:40,290 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-20.pdf
2025-05-20 15:57:40,835 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-23.pdf
2025-05-20 15:57:42,989 - lib.facebook_processor - INFO - Progreso Facebook: 20/49 en 209.62 seg.
2025-05-20 15:57:42,989 - lib.facebook_processor - INFO - Procesando URL de Facebook (25): https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-20 15:57:45,081 - lib.facebook_processor - INFO - Procesando URL de Facebook (26): https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-20 15:57:45,557 - lib.facebook_processor - INFO - Procesando URL de Facebook (27): https://www.facebook.com/photo?fbid=122113948808817608&set=a.122095373924817608
2025-05-20 15:58:03,758 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-22.pdf
2025-05-20 15:58:07,410 - lib.facebook_processor - INFO - Procesando URL de Facebook (28): https://www.facebook.com/photo/?fbid=1237408555057217&set=a.487862856678461
2025-05-20 15:58:07,686 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-25.pdf
2025-05-20 15:58:11,757 - lib.facebook_processor - INFO - Procesando URL de Facebook (29): https://www.facebook.com/photo/?fbid=960858089464459&set=a.411299177753689
2025-05-20 15:58:13,578 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-26.pdf
2025-05-20 15:58:17,508 - lib.facebook_processor - INFO - Progreso Facebook: 25/49 en 244.14 seg.
2025-05-20 15:58:17,508 - lib.facebook_processor - INFO - Procesando URL de Facebook (30): https://www.facebook.com/photo/?fbid=1238539827994284&set=a.679333793914893
2025-05-20 15:58:29,808 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-27.pdf
2025-05-20 15:58:31,700 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo?fbid=9169253469869352&set=a.740299552764828
2025-05-20 15:58:34,022 - lib.facebook_processor - INFO - Procesando URL de Facebook (31): https://www.facebook.com/photo/?fbid=1280481786925630&set=a.545355187104964
2025-05-20 15:58:35,745 - lib.facebook_processor - INFO - Procesando URL de Facebook (32): https://www.facebook.com/photo/?fbid=1280481786925630&set=a.545355187104964
2025-05-20 15:58:51,062 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-30.pdf
2025-05-20 15:58:52,213 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-29.pdf
2025-05-20 15:58:53,607 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-28.pdf
2025-05-20 15:58:55,816 - lib.facebook_processor - INFO - Procesando URL de Facebook (33): https://www.facebook.com/photo?fbid=1221031636698408&set=a.449832287151684
2025-05-20 15:58:56,369 - lib.facebook_processor - INFO - Procesando URL de Facebook (34): https://www.facebook.com/photo?fbid=1226748526117403&set=a.533177645474498
2025-05-20 15:58:57,419 - lib.facebook_processor - INFO - Procesando URL de Facebook (35): https://www.facebook.com/photo/?fbid=665063799607597&set=a.639907132123264
2025-05-20 15:58:57,420 - lib.facebook_processor - INFO - Progreso Facebook: 30/49 en 284.05 seg.
2025-05-20 15:59:10,274 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-32.pdf
2025-05-20 15:59:15,166 - lib.facebook_processor - INFO - Procesando URL de Facebook (36): https://www.facebook.com/photo/?fbid=665063799607597&set=a.639907132123264
2025-05-20 15:59:22,035 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-31.pdf
2025-05-20 15:59:22,373 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-33.pdf
2025-05-20 15:59:26,488 - lib.facebook_processor - INFO - Procesando URL de Facebook (37): https://www.facebook.com/photo/?fbid=637559772594411&set=a.102388759444851
2025-05-20 15:59:27,372 - lib.facebook_processor - INFO - Procesando URL de Facebook (38): https://www.facebook.com/photo/?fbid=1114765144012473&set=a.467617325393928
2025-05-20 15:59:42,217 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-35.pdf
2025-05-20 15:59:42,661 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-36.pdf
2025-05-20 15:59:44,935 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-34.pdf
2025-05-20 15:59:46,407 - lib.facebook_processor - INFO - Procesando URL de Facebook (39): https://www.facebook.com/diarioprimiciahyo/posts/pfbid02RhqT532dku4YWMgG9rR7xk6zinb8p88hSDNmufVtcq3B7CPeLxDDsMBzAcJp2YtKl
2025-05-20 15:59:47,759 - lib.facebook_processor - INFO - Progreso Facebook: 35/49 en 334.39 seg.
2025-05-20 15:59:47,759 - lib.facebook_processor - INFO - Procesando URL de Facebook (40): https://www.facebook.com/permalink.php?story_fbid=pfbid021jouJF85dPagGf9hj1URuvz9sQ3aZHTDMfa21ysQyodLPtTowsiz32GEnAEEW9nel&id=100064089484737
2025-05-20 15:59:48,452 - lib.facebook_processor - INFO - Procesando URL de Facebook (41): https://www.facebook.com/permalink.php?story_fbid=pfbid02N1nRLa7GK2U8dPUq5Usshmcu1QCB1w8aNrm3eEcLJ4GKt33PQta8s9UPTAYqgGu5l&id=100063616446639
2025-05-20 16:00:00,125 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-38.pdf
2025-05-20 16:00:04,285 - lib.facebook_processor - INFO - Procesando URL de Facebook (42): https://www.facebook.com/permalink.php?story_fbid=pfbid02AcxHRTr6b1iFcHj3ggcnUA5qrrD5ffsJPLHJRqcxKgWtkxqURyGpmQJRZBVgDWBnl&id=100062993063417
2025-05-20 16:00:10,537 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-37.pdf
2025-05-20 16:00:14,236 - lib.facebook_processor - INFO - Procesando URL de Facebook (43): https://www.facebook.com/permalink.php?story_fbid=pfbid0rX1PhnBjQNstoQsQRsxAmLQZAVqseMC62eZSwBEbx4YNZDZLYabRqpkEkV4vKgYfl&id=100072108931277
2025-05-20 16:00:26,387 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-39.pdf
2025-05-20 16:00:28,890 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-42.pdf
2025-05-20 16:00:29,434 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-41.pdf
2025-05-20 16:00:29,838 - lib.facebook_processor - INFO - Procesando URL de Facebook (44): https://www.facebook.com/permalink.php?story_fbid=pfbid02hn44h1SrKMRtWAV4KJwrcNn3chKoJUJkKhtR9tm13BJ4ZwJtJQsw8Exc7YD525rnl&id=61559613183648
2025-05-20 16:00:32,466 - lib.facebook_processor - INFO - Progreso Facebook: 40/49 en 379.09 seg.
2025-05-20 16:00:32,466 - lib.facebook_processor - INFO - Procesando URL de Facebook (45): https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0tKjuFNchYjzV4Sb3Tj8N4esSxErQhbHGhYpvKEvtbnBzjRhSR5vzXbrsx2r16Q74l
2025-05-20 16:00:33,020 - lib.facebook_processor - INFO - Procesando URL de Facebook (46): https://www.facebook.com/share/v/15kkoxxenF/
2025-05-20 16:00:34,649 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-40.pdf
2025-05-20 16:00:37,953 - lib.facebook_processor - INFO - Procesando URL de Facebook (47): https://www.facebook.com/share/v/18i7auJett/
2025-05-20 16:01:00,590 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-45.pdf
2025-05-20 16:01:01,456 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-43.pdf
2025-05-20 16:01:03,000 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-46.pdf
2025-05-20 16:01:04,074 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-47.pdf
2025-05-20 16:01:05,389 - lib.facebook_processor - INFO - Procesando URL de Facebook (48): https://www.facebook.com/share/p/16NS3V5NCt/
2025-05-20 16:01:05,658 - lib.facebook_processor - INFO - Procesando URL de Facebook (49): https://www.facebook.com/larepublicape/posts/pfbid0uqz2JPrmET9KxDugQG5sz6fQ7GiMgk4NmoNzGAXjaCvkY8EST5CAiDYgM8eWWkf4l?rdid=eENdOaqDW0ifabAR
2025-05-20 16:01:07,398 - lib.facebook_processor - INFO - Progreso Facebook: 45/49 en 414.03 seg.
2025-05-20 16:01:14,984 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-44.pdf
2025-05-20 16:01:30,978 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-48.pdf
2025-05-20 16:01:33,505 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-49.pdf
2025-05-20 16:01:38,591 - lib.facebook_processor - INFO - Progreso Facebook: 49/49 en 445.22 seg.
2025-05-20 16:01:38,595 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-20 16:01:38,596 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 43/49 exitosos en 445.23 segundos.
2025-05-20 16:01:38,596 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 445.23 seg.
2025-05-20 16:01:38,597 - lib.history_tracker - INFO - Añadidas 44 nuevas URLs al historial.
2025-05-20 16:01:38,599 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 229 URLs.
2025-05-20 16:01:38,599 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-20 16:01:39,219 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-20 16:01:39,787 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-20 16:01:40,322 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-5.pdf
2025-05-20 16:01:40,677 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-4.pdf
2025-05-20 16:01:40,768 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-6.pdf
2025-05-20 16:01:40,892 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-7.pdf
2025-05-20 16:01:40,981 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-10.pdf
2025-05-20 16:01:41,088 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-9.pdf
2025-05-20 16:01:41,646 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-8.pdf
2025-05-20 16:01:42,019 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-12.pdf
2025-05-20 16:01:42,385 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-11.pdf
2025-05-20 16:01:42,890 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-13.pdf
2025-05-20 16:01:43,288 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-14.pdf
2025-05-20 16:01:43,681 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-15.pdf
2025-05-20 16:01:43,782 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-16.pdf
2025-05-20 16:01:44,185 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-17.pdf
2025-05-20 16:01:44,560 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-19.pdf
2025-05-20 16:01:44,765 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-20.pdf
2025-05-20 16:01:45,095 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-18.pdf
2025-05-20 16:01:45,174 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-23.pdf
2025-05-20 16:01:45,246 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-22.pdf
2025-05-20 16:01:45,339 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-26.pdf
2025-05-20 16:01:45,428 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-27.pdf
2025-05-20 16:01:45,512 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-30.pdf
2025-05-20 16:01:45,593 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-29.pdf
2025-05-20 16:01:45,697 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-28.pdf
2025-05-20 16:01:45,773 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-31.pdf
2025-05-20 16:01:45,860 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-33.pdf
2025-05-20 16:01:45,935 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-36.pdf
2025-05-20 16:01:46,016 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-34.pdf
2025-05-20 16:01:46,095 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-38.pdf
2025-05-20 16:01:46,174 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-37.pdf
2025-05-20 16:01:46,535 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-39.pdf
2025-05-20 16:01:46,646 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-42.pdf
2025-05-20 16:01:47,028 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-41.pdf
2025-05-20 16:01:47,156 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-40.pdf
2025-05-20 16:01:47,601 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-45.pdf
2025-05-20 16:01:47,700 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-43.pdf
2025-05-20 16:01:48,117 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-46.pdf
2025-05-20 16:01:48,183 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-47.pdf
2025-05-20 16:01:48,281 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-44.pdf
2025-05-20 16:01:48,956 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-48.pdf
2025-05-20 16:01:50,052 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-49.pdf
2025-05-20 16:01:50,052 - lib.facebook_processor - INFO - Texto extraído de 43 PDFs de Facebook
2025-05-20 16:01:50,052 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 11.45 seg.
2025-05-20 16:01:50,053 - main_orchestrator - INFO - Texto extraído de 43 PDFs de Facebook
2025-05-20 16:01:50,055 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-20 16:01:50,056 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-20 16:01:50,056 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-20 16:01:50,057 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-20 16:01:50,058 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-20 16:01:50,058 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T16:01:50.056780', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 103, 'history_total_urls': 229, 'categories': {'html': 39, 'images': 14, 'social': 50}, 'html_processing': {'attempted': 39, 'processed': 34, 'successful': 33, 'relevant (>=0.3)': 22, 'average_relevance': 0.48484848484848486}, 'image_processing': {'attempted_download': 14, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 49, 'successful': 43, 'extracted_texts': 43}, 'timings_seconds': {'pdf_extraction': 0.46, 'pdf_text_extraction': 11.45, 'image_download': 42.12, 'html_scraping': 37.73, 'image_api': 321.2, 'facebook_processing': 445.23, 'facebook_text_extraction': 11.45, 'stats_consolidation': 0.0}}
2025-05-20 16:01:50,058 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-20 16:01:50,059 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-20 16:01:50,074 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-20 16:01:50,078 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-20 16:01:50,079 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-20 16:01:50,079 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-20 16:01:50,107 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-20 16:01:50,107 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-20 16:01:50,107 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-20 16:01:50,107 - semantic_cleaner - INFO - Extraídos 32 textos de HTML
2025-05-20 16:01:50,108 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-20 16:01:50,108 - semantic_cleaner - INFO - Extraídos 43 textos de Facebook
2025-05-20 16:02:03,659 - semantic_cleaner - INFO - Se identificaron 75 grupos de textos similares
2025-05-20 16:02:03,660 - semantic_cleaner - INFO - Se seleccionaron 75 textos representativos
2025-05-20 16:02:03,660 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-20 16:02:03,660 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-20 16:02:03,665 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-20 16:02:03,666 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-20 16:02:03,681 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-20 16:02:03,682 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-20 16:02:03,683 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-20 16:02:03,683 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T16:01:50.056780', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 103, 'history_total_urls': 229, 'categories': {'html': 39, 'images': 14, 'social': 50}, 'html_processing': {'attempted': 39, 'processed': 34, 'successful': 33, 'relevant (>=0.3)': 22, 'average_relevance': 0.48484848484848486}, 'image_processing': {'attempted_download': 14, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 49, 'successful': 43, 'extracted_texts': 43}, 'timings_seconds': {'pdf_extraction': 0.46, 'pdf_text_extraction': 11.45, 'image_download': 42.12, 'html_scraping': 37.73, 'image_api': 321.2, 'facebook_processing': 445.23, 'facebook_text_extraction': 11.45, 'stats_consolidation': 0.0, 'semantic_cleaning': 13.6}}
2025-05-20 16:02:03,683 - main_orchestrator - INFO - Limpieza semántica completada en 13.60 seg.
2025-05-20 16:02:03,683 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-20 16:02:03,684 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-20 16:02:03,684 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-20 16:02:03,706 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/agenciandina/posts/pfbid0GoGrkSAmt6xy7bqZVtLhDRpmyYXpe9CQ8dS641ippmAcjbMuQtkK4o6yd75Gyoztl?rdid=1aMJtw9YNRZJfAlm
2025-05-20 16:02:03,707 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-20 16:02:03,723 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-20 16:02:03,724 - facebook_extractor_fix - INFO - Se han añadido 43 textos de Facebook al archivo limpio
2025-05-20 16:02:03,724 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-20 16:02:03,725 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-20 16:02:03,725 - main_orchestrator - INFO - ==================================================
2025-05-20 16:02:03,725 - main_orchestrator - INFO - PIPELINE FINALIZADO en 872.01 segundos.
2025-05-20 16:02:03,726 - main_orchestrator - INFO - ==================================================
2025-05-20 18:55:42,863 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-20 18:55:42,869 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-20 18:55:42,872 - main_orchestrator - INFO - ==================================================
2025-05-20 18:55:42,874 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-20 18:55:42,875 - main_orchestrator - INFO - Usando fecha: 09042025
2025-05-20 18:55:42,875 - main_orchestrator - INFO - ==================================================
2025-05-20 18:55:42,891 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-20 18:55:42,893 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-20 18:55:42,897 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-20 18:55:42,902 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 229 URLs.
2025-05-20 18:55:42,904 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-20 18:55:42,906 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-20 18:55:42,907 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-20 18:55:42,908 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-20 18:55:42,909 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-20 18:55:42,910 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-20 18:55:42,911 - lib.pdf_processor - ERROR - Archivo PDF no encontrado: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\09042025.pdf
2025-05-20 18:55:42,912 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\09042025.pdf. Terminando proceso para esta fecha.
2025-05-20 18:55:42,915 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_09042025.json
2025-05-20 18:55:42,917 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_09042025.json
2025-05-20 18:55:42,919 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T18:55:42.913776', 'date_processed': '09042025', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-20 18:55:42,921 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-20 18:55:42,922 - main_orchestrator - INFO - ==================================================
2025-05-20 18:55:42,923 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.05 segundos.
2025-05-20 18:55:42,923 - main_orchestrator - INFO - ==================================================
2025-05-20 18:58:23,338 - main_orchestrator - INFO - ==================================================
2025-05-20 18:58:23,340 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-20 18:58:23,340 - main_orchestrator - INFO - Usando fecha: 16042025
2025-05-20 18:58:23,343 - main_orchestrator - INFO - ==================================================
2025-05-20 18:58:23,349 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-20 18:58:23,352 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-20 18:58:23,356 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-20 18:58:23,359 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 229 URLs.
2025-05-20 18:58:23,362 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-20 18:58:23,364 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-20 18:58:23,366 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-20 18:58:23,367 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-20 18:58:23,370 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-20 18:58:23,406 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025.pdf (6 páginas)
2025-05-20 18:58:23,812 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-05-20 18:58:23,813 - main_orchestrator - INFO - PDF procesado en 0.44 seg. Enlaces encontrados: 59
2025-05-20 18:58:23,833 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_16042025.csv
2025-05-20 18:58:23,836 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-20 18:58:23,839 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025.pdf (6 páginas)
2025-05-20 18:58:23,907 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-20 18:58:23,909 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-20 18:58:23,910 - main_orchestrator - INFO - Texto del PDF extraído en 0.07 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-20 18:58:23,911 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-20 18:58:23,912 - lib.history_tracker - INFO - Filtradas 4 URLs ya procesadas del lote actual.
2025-05-20 18:58:23,914 - main_orchestrator - INFO - URLs nuevas para procesar: 55 (de 59 total)
2025-05-20 18:58:23,917 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-20 18:58:23,919 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-20 18:58:23,921 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-20 18:58:23,924 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-20 18:58:23,925 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-20 18:58:23,928 - lib.url_manager - INFO - Clasificación de 55 URLs:
2025-05-20 18:58:23,930 - lib.url_manager - INFO -  - HTML: 30
2025-05-20 18:58:23,932 - lib.url_manager - INFO -  - IMAGES: 12
2025-05-20 18:58:23,933 - lib.url_manager - INFO -  - SOCIAL: 13
2025-05-20 18:58:23,939 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_16042025_unprocessed.json
2025-05-20 18:58:23,944 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_16042025_unprocessed.json
2025-05-20 18:58:23,946 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-20 18:58:23,949 - lib.image_processor - INFO - Iniciando descarga paralela de 12 imágenes para la fecha 16042025...
2025-05-20 18:58:25,752 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_94815644_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (185015 bytes)
2025-05-20 18:58:25,879 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/16-04-2025-RPP-MONICA-MUNOZ-NAJAR-COMENTA-CIFRAS-DE-SUNASS-PARA-CERRAR-BRECHA-DE-AGUA-Y-SANEAMIENTO-QUE-SUMA-138-MIL-SOLES.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-20 18:58:30,450 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_3ce873be_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (297977 bytes)
2025-05-20 18:58:31,479 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_135386b4_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (329609 bytes)
2025-05-20 18:58:32,351 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_5872ca8a_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (396505 bytes)
2025-05-20 18:58:32,542 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_edfc8ed9_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (284407 bytes)
2025-05-20 18:58:35,379 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_bb44165b_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (159855 bytes)
2025-05-20 18:58:37,302 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_9b807dd9_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (707746 bytes)
2025-05-20 18:58:38,456 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_f5bc9928_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (1049210 bytes)
2025-05-20 18:58:39,313 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_2e3ad109_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (1054067 bytes)
2025-05-20 18:58:39,313 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_141a2c9a_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (1040422 bytes)
2025-05-20 18:58:39,841 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_1e67714b_16042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (951901 bytes)
2025-05-20 18:58:39,972 - lib.image_processor - INFO - Progreso descarga imágenes: 10/12 en 16.02 seg.
2025-05-20 18:58:47,747 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_bd4e765a_16042025.mp3' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025 (2109336 bytes)
2025-05-20 18:58:48,221 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/04/16-04-2025-RPP-MONICA-MUNOZ-NAJAR-COMENTA-CIFRAS-DE-SUNASS-PARA-CERRAR-BRECHA-DE-AGUA-Y-SANEAMIENTO-QUE-SUMA-138-MIL-SOLES.mp3: Content type 'audio/mpeg' is not an image
2025-05-20 18:58:48,223 - lib.image_processor - INFO - Progreso descarga imágenes: 12/12 en 24.27 seg.
2025-05-20 18:58:48,231 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_16042025.json
2025-05-20 18:58:48,234 - lib.image_processor - INFO - Descarga de imágenes completada para 12/12 URLs en 24.29 segundos.
2025-05-20 18:58:48,235 - main_orchestrator - INFO - Descarga de imágenes completada en 24.29 seg.
2025-05-20 18:58:48,236 - lib.history_tracker - INFO - Añadidas 12 nuevas URLs al historial.
2025-05-20 18:58:48,239 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 241 URLs.
2025-05-20 18:58:48,241 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-20 18:58:48,244 - lib.html_scraper - INFO - Iniciando scraping paralelo de 30 URLs...
2025-05-20 18:58:56,478 - lib.html_scraper - INFO - Progreso: 20/30 URLs procesadas en 8.23 seg.
2025-05-20 18:59:08,592 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=3, read=2, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='eltiempo.pe', port=443): Read timed out. (read timeout=20)")': /local/piura-ciudadanos-rechazan-posible-alza-en-la-tarifa-del-agua/
2025-05-20 18:59:20,151 - lib.html_scraper - INFO - Progreso: 30/30 URLs procesadas en 31.91 seg.
2025-05-20 18:59:20,159 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_16042025.json
2025-05-20 18:59:20,160 - lib.html_scraper - INFO - Scraping completado para 30/30 URLs en 31.92 segundos.
2025-05-20 18:59:20,161 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_16042025.json
2025-05-20 18:59:20,162 - main_orchestrator - INFO - Scraping HTML completado en 31.92 seg.
2025-05-20 18:59:20,163 - lib.history_tracker - INFO - Añadidas 29 nuevas URLs al historial.
2025-05-20 18:59:20,168 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 270 URLs.
2025-05-20 18:59:20,170 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-20 18:59:21,655 - lib.api_client - ERROR - Error procesando tmpdmgv6h7f.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
2025-05-20 18:59:21,664 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
2025-05-20 18:59:21,665 - lib.image_processor - INFO - Procesando 12 imágenes con API (batch_size=3, pausa=60s)
2025-05-20 18:59:21,667 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-20 18:59:21,668 - lib.image_processor - INFO - Procesando imagen con API: img_9_94815644_16042025.jpg
2025-05-20 18:59:23,013 - lib.api_client - ERROR - Error procesando img_9_94815644_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
2025-05-20 18:59:24,558 - lib.image_processor - WARNING - Imagen img_9_94815644_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 18:59:24,561 - lib.image_processor - WARNING - Error procesando imagen img_9_94815644_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
2025-05-20 18:59:25,068 - lib.image_processor - INFO - Procesando imagen con API: img_8_3ce873be_16042025.jpg
2025-05-20 18:59:27,123 - lib.api_client - ERROR - Error procesando img_8_3ce873be_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 30
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 30
}
]
2025-05-20 18:59:28,385 - lib.image_processor - WARNING - Imagen img_8_3ce873be_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 18:59:28,389 - lib.image_processor - WARNING - Error procesando imagen img_8_3ce873be_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 30
}
]
2025-05-20 18:59:29,362 - lib.image_processor - INFO - Procesando imagen con API: img_7_135386b4_16042025.jpg
2025-05-20 18:59:31,582 - lib.api_client - ERROR - Error procesando img_7_135386b4_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
2025-05-20 18:59:33,201 - lib.image_processor - WARNING - Imagen img_7_135386b4_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 18:59:33,207 - lib.image_processor - WARNING - Error procesando imagen img_7_135386b4_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
2025-05-20 18:59:34,159 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 19:00:34,160 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-20 19:00:34,161 - lib.image_processor - INFO - Procesando imagen con API: img_4_edfc8ed9_16042025.jpg
2025-05-20 19:00:36,077 - lib.api_client - ERROR - Error procesando img_4_edfc8ed9_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
2025-05-20 19:00:38,386 - lib.image_processor - WARNING - Imagen img_4_edfc8ed9_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:00:38,391 - lib.image_processor - WARNING - Error procesando imagen img_4_edfc8ed9_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
2025-05-20 19:00:39,298 - lib.image_processor - INFO - Procesando imagen con API: img_5_5872ca8a_16042025.jpg
2025-05-20 19:00:41,898 - lib.api_client - ERROR - Error procesando img_5_5872ca8a_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-20 19:00:43,325 - lib.image_processor - WARNING - Imagen img_5_5872ca8a_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:00:43,329 - lib.image_processor - WARNING - Error procesando imagen img_5_5872ca8a_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-20 19:00:44,295 - lib.image_processor - INFO - Procesando imagen con API: img_12_bb44165b_16042025.jpg
2025-05-20 19:00:45,447 - lib.api_client - ERROR - Error procesando img_12_bb44165b_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
2025-05-20 19:00:47,632 - lib.image_processor - WARNING - Imagen img_12_bb44165b_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:00:47,636 - lib.image_processor - WARNING - Error procesando imagen img_12_bb44165b_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
2025-05-20 19:00:48,428 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 19:01:48,430 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-20 19:01:48,431 - lib.image_processor - INFO - Procesando imagen con API: img_6_9b807dd9_16042025.jpg
2025-05-20 19:01:52,904 - lib.api_client - ERROR - Error procesando img_6_9b807dd9_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]
2025-05-20 19:01:54,442 - lib.image_processor - WARNING - Imagen img_6_9b807dd9_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:01:54,445 - lib.image_processor - WARNING - Error procesando imagen img_6_9b807dd9_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]
2025-05-20 19:01:55,437 - lib.image_processor - INFO - Procesando imagen con API: img_3_f5bc9928_16042025.jpg
2025-05-20 19:02:01,536 - lib.api_client - ERROR - Error procesando img_3_f5bc9928_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 55
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 55
}
]
2025-05-20 19:02:04,439 - lib.image_processor - WARNING - Imagen img_3_f5bc9928_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:02:04,443 - lib.image_processor - WARNING - Error procesando imagen img_3_f5bc9928_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 55
}
]
2025-05-20 19:02:05,184 - lib.image_processor - INFO - Procesando imagen con API: img_10_2e3ad109_16042025.jpg
2025-05-20 19:02:11,505 - lib.api_client - ERROR - Error procesando img_10_2e3ad109_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-05-20 19:02:13,883 - lib.image_processor - WARNING - Imagen img_10_2e3ad109_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:02:13,889 - lib.image_processor - WARNING - Error procesando imagen img_10_2e3ad109_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-05-20 19:02:14,414 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-20 19:03:14,415 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-05-20 19:03:14,416 - lib.image_processor - INFO - Procesando imagen con API: img_11_141a2c9a_16042025.jpg
2025-05-20 19:03:20,523 - lib.api_client - ERROR - Error procesando img_11_141a2c9a_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 36
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 36
}
]
2025-05-20 19:03:22,179 - lib.image_processor - WARNING - Imagen img_11_141a2c9a_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:03:22,182 - lib.image_processor - WARNING - Error procesando imagen img_11_141a2c9a_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 36
}
]
2025-05-20 19:03:23,035 - lib.image_processor - INFO - Procesando imagen con API: img_2_1e67714b_16042025.jpg
2025-05-20 19:03:28,889 - lib.api_client - ERROR - Error procesando img_2_1e67714b_16042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
2025-05-20 19:03:31,359 - lib.image_processor - WARNING - Imagen img_2_1e67714b_16042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-20 19:03:31,363 - lib.image_processor - WARNING - Error procesando imagen img_2_1e67714b_16042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
2025-05-20 19:03:31,955 - lib.image_processor - INFO - Procesando imagen con API: img_1_bd4e765a_16042025.mp3
2025-05-20 19:03:32,080 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025\img_1_bd4e765a_16042025.mp3 (formato detectado: None)
2025-05-20 19:03:32,081 - lib.image_processor - WARNING - Error procesando imagen img_1_bd4e765a_16042025.mp3: File is not a valid image
2025-05-20 19:03:32,690 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025\texto_imagenes_api.json
2025-05-20 19:03:32,691 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\16042025\texto_imagenes_api.json
2025-05-20 19:03:32,692 - lib.image_processor - INFO - Procesamiento API completado para 0/12 imágenes en 251.03 segundos.
2025-05-20 19:03:32,693 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 252.52 seg.
2025-05-20 19:03:32,694 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-20 19:03:32,697 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-05-20 19:03:32,723 - main_orchestrator - INFO - Encontradas 8 URLs de Facebook para procesar
2025-05-20 19:03:32,725 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025
2025-05-20 19:03:32,727 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-20 19:03:32,729 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 8 URLs de Facebook para la fecha 16042025...
2025-05-20 19:03:32,733 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/watch/?mibextid=wwXIfr&v=3007796432728360&rdid=dwTFhLT54rEu7lo1
2025-05-20 19:03:32,738 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-05-20 19:03:32,742 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737
2025-05-20 19:03:32,742 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654
2025-05-20 19:03:32,743 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648
2025-05-20 19:04:15,910 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-2.pdf
2025-05-20 19:04:19,395 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/permalink.php?story_fbid=pfbid02jjxa5vMavsFyt2VVpMfg7aLimbMDQw21agnBHdsiyWfSL6BomtXekrcmNyiKkviNl&id=100062993063417
2025-05-20 19:04:21,616 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-3.pdf
2025-05-20 19:04:25,685 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/permalink.php?story_fbid=pfbid02ozZBtnBo2bLjaHnXZ4TTZygwN3fjLhwdZEwab7R7vyUj8k8DKoUsC4rey5YfaEbel&id=100072108931277
2025-05-20 19:04:37,160 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-5.pdf
2025-05-20 19:04:41,217 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/larepublicanorte/posts/980634487518628
2025-05-20 19:04:44,554 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-1.pdf
2025-05-20 19:04:47,666 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-4.pdf
2025-05-20 19:04:52,256 - lib.facebook_processor - INFO - Progreso Facebook: 5/8 en 79.53 seg.
2025-05-20 19:05:04,543 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-6.pdf
2025-05-20 19:05:05,611 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-8.pdf
2025-05-20 19:05:08,605 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-7.pdf
2025-05-20 19:05:13,382 - lib.facebook_processor - INFO - Progreso Facebook: 8/8 en 100.65 seg.
2025-05-20 19:05:13,386 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_16042025.json
2025-05-20 19:05:13,387 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 8/8 exitosos en 100.66 segundos.
2025-05-20 19:05:13,388 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 100.66 seg.
2025-05-20 19:05:13,389 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-20 19:05:13,394 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 278 URLs.
2025-05-20 19:05:13,396 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-20 19:05:14,027 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-2.pdf
2025-05-20 19:05:14,560 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-3.pdf
2025-05-20 19:05:15,092 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-5.pdf
2025-05-20 19:05:15,254 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-1.pdf
2025-05-20 19:05:15,774 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-4.pdf
2025-05-20 19:05:16,293 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-6.pdf
2025-05-20 19:05:16,731 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-8.pdf
2025-05-20 19:05:17,193 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\16042025\16042025-7.pdf
2025-05-20 19:05:17,194 - lib.facebook_processor - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-20 19:05:17,195 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.80 seg.
2025-05-20 19:05:17,195 - main_orchestrator - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-20 19:05:17,198 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_16042025.json
2025-05-20 19:05:17,200 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_16042025.json
2025-05-20 19:05:17,202 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-20 19:05:17,205 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_16042025.json
2025-05-20 19:05:17,207 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_16042025.json
2025-05-20 19:05:17,209 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T19:05:17.204043', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 55, 'history_total_urls': 278, 'categories': {'html': 30, 'images': 12, 'social': 13}, 'html_processing': {'attempted': 30, 'processed': 29, 'successful': 29, 'relevant (>=0.3)': 16, 'average_relevance': 0.4620689655172414}, 'image_processing': {'attempted_download': 12, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.44, 'pdf_text_extraction': 3.8, 'image_download': 24.29, 'html_scraping': 31.92, 'image_api': 252.52, 'facebook_processing': 100.66, 'facebook_text_extraction': 3.8, 'stats_consolidation': 0.0}}
2025-05-20 19:05:17,211 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-20 19:05:17,212 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-20 19:05:17,233 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_16042025\pdf_text_16042025.json
2025-05-20 19:05:17,240 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_16042025.json
2025-05-20 19:05:17,241 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_16042025.json
2025-05-20 19:05:17,242 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-20 19:05:17,267 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-20 19:05:17,268 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-20 19:05:17,269 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-20 19:05:17,270 - semantic_cleaner - INFO - Extraídos 29 textos de HTML
2025-05-20 19:05:17,272 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-20 19:05:17,274 - semantic_cleaner - INFO - Extraídos 8 textos de Facebook
2025-05-20 19:05:23,239 - semantic_cleaner - INFO - Se identificaron 43 grupos de textos similares
2025-05-20 19:05:23,240 - semantic_cleaner - INFO - Se seleccionaron 43 textos representativos
2025-05-20 19:05:23,241 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-20 19:05:23,242 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_16042025.json
2025-05-20 19:05:23,249 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_16042025.json
2025-05-20 19:05:23,250 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_16042025.md
2025-05-20 19:05:23,263 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_16042025.md
2025-05-20 19:05:23,266 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_16042025.json
2025-05-20 19:05:23,267 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_16042025.json
2025-05-20 19:05:23,268 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-20T19:05:17.204043', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 55, 'history_total_urls': 278, 'categories': {'html': 30, 'images': 12, 'social': 13}, 'html_processing': {'attempted': 30, 'processed': 29, 'successful': 29, 'relevant (>=0.3)': 16, 'average_relevance': 0.4620689655172414}, 'image_processing': {'attempted_download': 12, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.44, 'pdf_text_extraction': 3.8, 'image_download': 24.29, 'html_scraping': 31.92, 'image_api': 252.52, 'facebook_processing': 100.66, 'facebook_text_extraction': 3.8, 'stats_consolidation': 0.0, 'semantic_cleaning': 6.02}}
2025-05-20 19:05:23,270 - main_orchestrator - INFO - Limpieza semántica completada en 6.02 seg.
2025-05-20 19:05:23,271 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-20 19:05:23,275 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-20 19:05:23,276 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_16042025.json
2025-05-20 19:05:23,306 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-05-20 19:05:23,307 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-20 19:05:23,327 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_16042025.md
2025-05-20 19:05:23,328 - facebook_extractor_fix - INFO - Se han añadido 8 textos de Facebook al archivo limpio
2025-05-20 19:05:23,328 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-20 19:05:23,329 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-20 19:05:23,330 - main_orchestrator - INFO - ==================================================
2025-05-20 19:05:23,332 - main_orchestrator - INFO - PIPELINE FINALIZADO en 419.99 segundos.
2025-05-20 19:05:23,334 - main_orchestrator - INFO - ==================================================
2025-05-21 16:54:30,262 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 16:54:30,267 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 16:54:35,897 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 16:54:35,901 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 16:55:37,510 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 16:55:37,515 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 17:16:58,948 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 17:16:58,953 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 17:18:08,246 - main_orchestrator - INFO - ==================================================
2025-05-21 17:18:08,247 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 17:18:08,247 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-21 17:18:08,248 - main_orchestrator - INFO - ==================================================
2025-05-21 17:18:08,271 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-21 17:18:08,272 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-21 17:18:08,274 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 17:18:08,275 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 278 URLs.
2025-05-21 17:18:08,275 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 17:18:08,276 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 17:18:08,276 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 17:18:08,277 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 17:18:08,277 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 17:18:08,277 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 17:18:08,316 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-21 17:18:08,619 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-21 17:18:08,619 - main_orchestrator - INFO - PDF procesado en 0.34 seg. Enlaces encontrados: 52
2025-05-21 17:18:08,635 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-21 17:18:08,636 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 17:18:08,637 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-21 17:18:08,690 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:18:08,690 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-21 17:18:08,690 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:18:08,691 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 17:18:08,691 - lib.history_tracker - INFO - Filtradas 2 URLs ya procesadas del lote actual.
2025-05-21 17:18:08,691 - main_orchestrator - INFO - URLs nuevas para procesar: 50 (de 52 total)
2025-05-21 17:18:08,692 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 17:18:08,692 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-21 17:18:08,692 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 17:18:08,692 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 17:18:08,693 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 17:18:08,694 - lib.url_manager - INFO - Clasificación de 50 URLs:
2025-05-21 17:18:08,694 - lib.url_manager - INFO -  - HTML: 20
2025-05-21 17:18:08,695 - lib.url_manager - INFO -  - IMAGES: 6
2025-05-21 17:18:08,695 - lib.url_manager - INFO -  - SOCIAL: 24
2025-05-21 17:18:08,696 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_15042025_unprocessed.json
2025-05-21 17:18:08,698 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-21 17:18:08,699 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 17:18:08,699 - lib.image_processor - INFO - Iniciando descarga paralela de 6 imágenes para la fecha 15042025...
2025-05-21 17:18:11,547 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_8107240a_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (208128 bytes)
2025-05-21 17:18:12,910 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_c20487c6_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (220092 bytes)
2025-05-21 17:18:15,942 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_7bbd95cb_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (798934 bytes)
2025-05-21 17:18:16,810 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_45955483_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (511584 bytes)
2025-05-21 17:18:17,524 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_7af72526_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (488907 bytes)
2025-05-21 17:18:20,907 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_2353b10e_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (1134418 bytes)
2025-05-21 17:18:21,452 - lib.image_processor - INFO - Progreso descarga imágenes: 6/6 en 12.75 seg.
2025-05-21 17:18:21,456 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_15042025.json
2025-05-21 17:18:21,456 - lib.image_processor - INFO - Descarga de imágenes completada para 6/6 URLs en 12.76 segundos.
2025-05-21 17:18:21,456 - main_orchestrator - INFO - Descarga de imágenes completada en 12.76 seg.
2025-05-21 17:18:21,457 - lib.history_tracker - INFO - Añadidas 6 nuevas URLs al historial.
2025-05-21 17:18:21,459 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 284 URLs.
2025-05-21 17:18:21,459 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 17:18:21,459 - lib.html_scraper - INFO - Iniciando scraping paralelo de 20 URLs...
2025-05-21 17:18:32,405 - lib.html_scraper - INFO - Progreso: 20/20 URLs procesadas en 10.95 seg.
2025-05-21 17:18:32,411 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-21 17:18:32,411 - lib.html_scraper - INFO - Scraping completado para 20/20 URLs en 10.95 segundos.
2025-05-21 17:18:32,412 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-21 17:18:32,412 - main_orchestrator - INFO - Scraping HTML completado en 10.95 seg.
2025-05-21 17:18:32,413 - lib.history_tracker - INFO - Añadidas 19 nuevas URLs al historial.
2025-05-21 17:18:32,415 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 303 URLs.
2025-05-21 17:18:32,415 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 17:18:34,074 - lib.api_client - ERROR - Error procesando tmpjwqwwwi4.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
2025-05-21 17:18:34,165 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 25
}
]
2025-05-21 17:18:34,166 - lib.image_processor - INFO - Procesando 6 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 17:18:34,166 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 17:18:34,166 - lib.image_processor - INFO - Procesando imagen con API: img_5_8107240a_15042025.jpg
2025-05-21 17:18:35,673 - lib.api_client - ERROR - Error procesando img_5_8107240a_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-05-21 17:18:37,470 - lib.image_processor - WARNING - Imagen img_5_8107240a_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:18:37,473 - lib.image_processor - WARNING - Error procesando imagen img_5_8107240a_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-05-21 17:18:38,212 - lib.image_processor - INFO - Procesando imagen con API: img_4_c20487c6_15042025.jpg
2025-05-21 17:18:39,764 - lib.api_client - ERROR - Error procesando img_4_c20487c6_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-05-21 17:18:42,155 - lib.image_processor - WARNING - Imagen img_4_c20487c6_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:18:42,157 - lib.image_processor - WARNING - Error procesando imagen img_4_c20487c6_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-05-21 17:18:42,809 - lib.image_processor - INFO - Procesando imagen con API: img_2_7bbd95cb_15042025.jpg
2025-05-21 17:18:43,538 - main_orchestrator - INFO - ==================================================
2025-05-21 17:18:43,538 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 17:18:43,539 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-21 17:18:43,539 - main_orchestrator - INFO - ==================================================
2025-05-21 17:18:43,540 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-21 17:18:43,542 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-21 17:18:43,543 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 17:18:43,578 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 303 URLs.
2025-05-21 17:18:43,579 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 17:18:43,580 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 17:18:43,580 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 17:18:43,581 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 17:18:43,581 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 17:18:43,583 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-21 17:18:43,859 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-21 17:18:43,860 - main_orchestrator - INFO - PDF procesado en 0.28 seg. Enlaces encontrados: 52
2025-05-21 17:18:43,863 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-21 17:18:43,863 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 17:18:43,864 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-21 17:18:43,910 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:18:43,911 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-21 17:18:43,911 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:18:43,911 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 17:18:43,911 - lib.history_tracker - INFO - Filtradas 28 URLs ya procesadas del lote actual.
2025-05-21 17:18:43,911 - main_orchestrator - INFO - URLs nuevas para procesar: 24 (de 52 total)
2025-05-21 17:18:43,912 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 17:18:43,912 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-21 17:18:43,912 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 17:18:43,913 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 17:18:43,913 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 17:18:43,914 - lib.url_manager - INFO - Clasificación de 24 URLs:
2025-05-21 17:18:43,914 - lib.url_manager - INFO -  - SOCIAL: 24
2025-05-21 17:18:43,915 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-21 17:18:43,916 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 17:18:43,916 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-21 17:18:43,916 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 17:18:43,916 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-21 17:18:43,917 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 17:18:43,917 - main_orchestrator - INFO - Encontradas 6 imágenes existentes sin procesar en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025
2025-05-21 17:18:45,252 - lib.api_client - ERROR - Error procesando tmpntulew4b.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 14
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 14
}
]
2025-05-21 17:18:45,255 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 14
}
]
2025-05-21 17:18:45,256 - lib.image_processor - INFO - Procesando 6 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 17:18:45,256 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 17:18:45,256 - lib.image_processor - INFO - Procesando imagen con API: img_1_7af72526_15042025.jpg
2025-05-21 17:18:50,425 - lib.api_client - ERROR - Error procesando img_2_7bbd95cb_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:18:50,466 - lib.api_client - ERROR - Error procesando img_1_7af72526_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:18:51,994 - lib.image_processor - WARNING - Imagen img_1_7af72526_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:18:51,996 - lib.image_processor - WARNING - Error procesando imagen img_1_7af72526_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:18:52,714 - lib.image_processor - INFO - Procesando imagen con API: img_2_7bbd95cb_15042025.jpg
2025-05-21 17:18:52,769 - lib.image_processor - WARNING - Imagen img_2_7bbd95cb_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:18:52,771 - lib.image_processor - WARNING - Error procesando imagen img_2_7bbd95cb_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:18:52,809 - lib.image_processor - INFO - Imagen img_2_7bbd95cb_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:18:52,824 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_2_7bbd95cb_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:18:52,824 - lib.image_processor - WARNING - Error procesando imagen img_2_7bbd95cb_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:18:53,428 - lib.image_processor - INFO - Procesando imagen con API: img_3_2353b10e_15042025.jpg
2025-05-21 17:18:53,764 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 17:19:00,142 - lib.api_client - ERROR - Error procesando img_3_2353b10e_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 59
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 59
}
]
2025-05-21 17:19:02,140 - lib.image_processor - WARNING - Imagen img_3_2353b10e_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:19:02,143 - lib.image_processor - WARNING - Error procesando imagen img_3_2353b10e_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 59
}
]
2025-05-21 17:19:03,021 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 17:19:53,765 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 17:19:53,765 - lib.image_processor - INFO - Procesando imagen con API: img_6_45955483_15042025.jpg
2025-05-21 17:19:57,012 - lib.api_client - ERROR - Error procesando img_6_45955483_15042025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-21 17:19:58,503 - lib.image_processor - WARNING - Imagen img_6_45955483_15042025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-21 17:19:58,506 - lib.image_processor - WARNING - Error procesando imagen img_6_45955483_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-21 17:19:59,187 - lib.image_processor - INFO - Procesando imagen con API: img_1_7af72526_15042025.jpg
2025-05-21 17:19:59,274 - lib.image_processor - INFO - Imagen img_1_7af72526_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:19:59,290 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_1_7af72526_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:19:59,290 - lib.image_processor - WARNING - Error procesando imagen img_1_7af72526_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-21 17:20:00,008 - lib.image_processor - INFO - Procesando imagen con API: img_3_2353b10e_15042025.jpg
2025-05-21 17:20:00,133 - lib.image_processor - INFO - Imagen img_3_2353b10e_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:20:00,147 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_3_2353b10e_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:20:00,148 - lib.image_processor - WARNING - Error procesando imagen img_3_2353b10e_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 59
}
]
2025-05-21 17:20:00,698 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-21 17:20:00,699 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-21 17:20:00,699 - lib.image_processor - INFO - Procesamiento API completado para 0/6 imágenes en 86.53 segundos.
2025-05-21 17:20:00,699 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 88.28 seg.
2025-05-21 17:20:00,700 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 17:20:00,700 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-21 17:20:00,728 - main_orchestrator - INFO - Encontradas 22 URLs de Facebook para procesar
2025-05-21 17:20:00,729 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025
2025-05-21 17:20:00,730 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-21 17:20:00,730 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 22 URLs de Facebook para la fecha 15042025...
2025-05-21 17:20:00,732 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-21 17:20:00,733 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:20:00,734 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:20:00,736 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-21 17:20:00,738 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468
2025-05-21 17:20:03,021 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 17:20:03,022 - lib.image_processor - INFO - Procesando imagen con API: img_4_c20487c6_15042025.jpg
2025-05-21 17:20:03,044 - lib.image_processor - INFO - Imagen img_4_c20487c6_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:20:03,060 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_4_c20487c6_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:20:03,061 - lib.image_processor - WARNING - Error procesando imagen img_4_c20487c6_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-05-21 17:20:03,681 - lib.image_processor - INFO - Procesando imagen con API: img_5_8107240a_15042025.jpg
2025-05-21 17:20:03,700 - lib.image_processor - INFO - Imagen img_5_8107240a_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:20:03,717 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_5_8107240a_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:20:03,717 - lib.image_processor - WARNING - Error procesando imagen img_5_8107240a_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-05-21 17:20:04,246 - lib.image_processor - INFO - Procesando imagen con API: img_6_45955483_15042025.jpg
2025-05-21 17:20:04,354 - lib.image_processor - INFO - Imagen img_6_45955483_15042025.jpg visualmente similar a otra ya procesada
2025-05-21 17:20:04,370 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_6_45955483_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-21 17:20:04,371 - lib.image_processor - WARNING - Error procesando imagen img_6_45955483_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-21 17:20:05,356 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-21 17:20:05,356 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-21 17:20:05,356 - lib.image_processor - INFO - Procesamiento API completado para 0/6 imágenes en 80.10 segundos.
2025-05-21 17:20:05,356 - main_orchestrator - INFO - Procesamiento API de imágenes existentes completado en 81.44 seg.
2025-05-21 17:20:05,357 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 17:20:05,357 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-21 17:20:05,358 - main_orchestrator - INFO - Encontradas 22 URLs de Facebook para procesar
2025-05-21 17:20:05,358 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-21 17:20:05,359 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 22 URLs de Facebook para la fecha 15042025...
2025-05-21 17:20:05,360 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-21 17:20:05,360 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:20:05,362 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:20:05,363 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-21 17:20:05,367 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468
2025-05-21 17:22:08,250 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-21 17:22:11,518 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:22:16,714 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-4.pdf
2025-05-21 17:22:18,830 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-21 17:22:20,076 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:22:23,494 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:22:27,469 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-21 17:22:27,751 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:22:27,760 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-21 17:22:27,816 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-21 17:22:29,979 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-21 17:22:31,408 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:22:31,502 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/photo/?fbid=653165420904914&set=a.108066292081499
2025-05-21 17:22:31,844 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/photo/?fbid=980118311000784&set=a.407743561571598
2025-05-21 17:22:31,917 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-21 17:22:31,987 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/photo/?fbid=653165420904914&set=a.108066292081499
2025-05-21 17:22:33,849 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/photo/?fbid=980118311000784&set=a.407743561571598
2025-05-21 17:22:35,059 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-21 17:22:36,271 - lib.facebook_processor - INFO - Progreso Facebook: 5/22 en 155.54 seg.
2025-05-21 17:22:36,271 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/photo/?fbid=122129948282693859&set=a.122108624150693859
2025-05-21 17:22:39,767 - lib.facebook_processor - INFO - Progreso Facebook: 5/22 en 154.41 seg.
2025-05-21 17:22:39,767 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/photo/?fbid=122129948282693859&set=a.122108624150693859
2025-05-21 17:23:17,276 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-9.pdf
2025-05-21 17:23:21,755 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-9.pdf
2025-05-21 17:23:21,804 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:23:22,052 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/photo/?fbid=646737408228204&set=a.111572665078017
2025-05-21 17:23:24,002 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-10.pdf
2025-05-21 17:23:25,116 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:23:25,169 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/photo/?fbid=646737408228204&set=a.111572665078017
2025-05-21 17:23:25,853 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:23:26,324 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/p/1CoMomk1ZQ/
2025-05-21 17:23:28,054 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/p/18wm18gWd3/
2025-05-21 17:23:29,611 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-21 17:23:30,597 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/p/1CoMomk1ZQ/
2025-05-21 17:23:33,298 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-21 17:23:34,118 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=653165420904914&set=a.108066292081499
2025-05-21 17:23:37,574 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-21 17:23:37,576 - lib.facebook_processor - INFO - Progreso Facebook: 10/22 en 216.85 seg.
2025-05-21 17:23:37,694 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/p/18wm18gWd3/
2025-05-21 17:23:41,216 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=122129948282693859&set=a.122108624150693859
2025-05-21 17:23:43,248 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-8.pdf
2025-05-21 17:23:45,016 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-21 17:23:47,494 - lib.facebook_processor - INFO - Progreso Facebook: 10/22 en 222.14 seg.
2025-05-21 17:23:47,494 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-21 17:24:09,668 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-13.pdf
2025-05-21 17:24:14,700 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/share/p/16UHriKBu6/
2025-05-21 17:24:21,863 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-14.pdf
2025-05-21 17:24:22,252 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-11.pdf
2025-05-21 17:24:23,689 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/photo/?fbid=646737408228204&set=a.111572665078017
2025-05-21 17:24:25,666 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-15.pdf
2025-05-21 17:24:25,703 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/share/p/16UHriKBu6/
2025-05-21 17:24:26,351 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/share/p/19V7khzxSr/
2025-05-21 17:24:26,969 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/share/p/19V7khzxSr/
2025-05-21 17:24:30,462 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/share/p/15wrXuXmpw/
2025-05-21 17:24:31,622 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-15.pdf
2025-05-21 17:24:35,197 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-12.pdf
2025-05-21 17:24:36,516 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-12.pdf
2025-05-21 17:24:36,630 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/share/p/15wrXuXmpw/
2025-05-21 17:24:37,583 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/p/18wm18gWd3/
2025-05-21 17:24:39,943 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/share/p/15wpT2Whf7/
2025-05-21 17:24:41,232 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/share/p/15wpT2Whf7/
2025-05-21 17:24:41,536 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-21 17:24:41,538 - lib.facebook_processor - INFO - Progreso Facebook: 15/22 en 280.81 seg.
2025-05-21 17:24:54,141 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-21 17:24:54,284 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-16.pdf
2025-05-21 17:24:57,527 - lib.facebook_processor - INFO - Progreso Facebook: 15/22 en 292.17 seg.
2025-05-21 17:24:57,528 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-21 17:24:59,450 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-21 17:25:18,087 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-17.pdf
2025-05-21 17:25:23,296 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/JuanNunuraPeriodista/videos/2501259376893949
2025-05-21 17:25:26,588 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-16.pdf
2025-05-21 17:25:29,282 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-18.pdf
2025-05-21 17:25:29,390 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/p/19V7khzxSr/
2025-05-21 17:25:31,108 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-21 17:25:33,541 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/JuanNunuraPeriodista/videos/2501259376893949
2025-05-21 17:25:38,591 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-20.pdf
2025-05-21 17:25:38,707 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/p/15wrXuXmpw/
2025-05-21 17:25:44,146 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-21 17:25:48,944 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-19.pdf
2025-05-21 17:25:51,217 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-22.pdf
2025-05-21 17:25:52,348 - lib.facebook_processor - INFO - Progreso Facebook: 20/22 en 351.62 seg.
2025-05-21 17:25:55,040 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-19.pdf
2025-05-21 17:25:58,754 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-22.pdf
2025-05-21 17:25:58,961 - lib.facebook_processor - INFO - Progreso Facebook: 20/22 en 353.60 seg.
2025-05-21 17:26:01,339 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-21.pdf
2025-05-21 17:26:05,610 - lib.facebook_processor - INFO - Progreso Facebook: 22/22 en 364.88 seg.
2025-05-21 17:26:05,616 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-21 17:26:05,616 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 13/22 exitosos en 364.89 segundos.
2025-05-21 17:26:05,617 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 364.89 seg.
2025-05-21 17:26:05,617 - lib.history_tracker - INFO - Añadidas 18 nuevas URLs al historial.
2025-05-21 17:26:05,619 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-21 17:26:05,620 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 17:26:05,765 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-4.pdf
2025-05-21 17:26:05,850 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-21 17:26:05,941 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-21 17:26:06,036 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-9.pdf
2025-05-21 17:26:06,139 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-10.pdf
2025-05-21 17:26:06,249 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-11.pdf
2025-05-21 17:26:06,652 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-15.pdf
2025-05-21 17:26:07,075 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-12.pdf
2025-05-21 17:26:07,593 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-16.pdf
2025-05-21 17:26:08,068 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-21.pdf
2025-05-21 17:26:08,204 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-17.pdf
2025-05-21 17:26:08,644 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-21.pdf
2025-05-21 17:26:08,749 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-19.pdf
2025-05-21 17:26:09,350 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-22.pdf
2025-05-21 17:26:09,350 - lib.facebook_processor - INFO - Texto extraído de 13 PDFs de Facebook
2025-05-21 17:26:09,351 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.73 seg.
2025-05-21 17:26:09,351 - main_orchestrator - INFO - Texto extraído de 13 PDFs de Facebook
2025-05-21 17:26:09,352 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:09,353 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:09,353 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 17:26:09,354 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:09,355 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:09,355 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T17:26:09.353823', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 50, 'history_total_urls': 321, 'categories': {'html': 20, 'images': 6, 'social': 24}, 'html_processing': {'attempted': 20, 'processed': 19, 'successful': 19, 'relevant (>=0.3)': 14, 'average_relevance': 0.47368421052631576}, 'image_processing': {'attempted_download': 6, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 13, 'extracted_texts': 13}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 3.73, 'image_download': 12.76, 'html_scraping': 10.95, 'image_api': 88.28, 'facebook_processing': 364.89, 'facebook_text_extraction': 3.73, 'stats_consolidation': 0.0}}
2025-05-21 17:26:09,356 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 17:26:09,356 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 17:26:09,377 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:26:09,382 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-21 17:26:09,383 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-21 17:26:09,383 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 17:26:09,422 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 17:26:09,423 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 17:26:09,423 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-21 17:26:09,423 - semantic_cleaner - INFO - Extraídos 19 textos de HTML
2025-05-21 17:26:09,423 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-21 17:26:09,424 - semantic_cleaner - INFO - Extraídos 13 textos de Facebook
2025-05-21 17:26:12,508 - lib.facebook_processor - INFO - Progreso Facebook: 22/22 en 367.15 seg.
2025-05-21 17:26:12,791 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-21 17:26:12,824 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 12/22 exitosos en 367.47 segundos.
2025-05-21 17:26:12,853 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 367.49 seg.
2025-05-21 17:26:12,876 - lib.history_tracker - INFO - Añadidas 18 nuevas URLs al historial.
2025-05-21 17:26:13,008 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-21 17:26:13,028 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 17:26:14,491 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-21 17:26:16,025 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-21 17:26:16,994 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-21 17:26:17,669 - semantic_cleaner - INFO - Se identificaron 38 grupos de textos similares
2025-05-21 17:26:17,670 - semantic_cleaner - INFO - Se seleccionaron 38 textos representativos
2025-05-21 17:26:17,671 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 17:26:17,672 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-21 17:26:17,682 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-9.pdf
2025-05-21 17:26:17,686 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-21 17:26:17,686 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:17,701 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:17,703 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:17,703 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:17,703 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T17:26:09.353823', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 50, 'history_total_urls': 321, 'categories': {'html': 20, 'images': 6, 'social': 24}, 'html_processing': {'attempted': 20, 'processed': 19, 'successful': 19, 'relevant (>=0.3)': 14, 'average_relevance': 0.47368421052631576}, 'image_processing': {'attempted_download': 6, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 13, 'extracted_texts': 13}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 3.73, 'image_download': 12.76, 'html_scraping': 10.95, 'image_api': 88.28, 'facebook_processing': 364.89, 'facebook_text_extraction': 3.73, 'stats_consolidation': 0.0, 'semantic_cleaning': 8.32}}
2025-05-21 17:26:17,704 - main_orchestrator - INFO - Limpieza semántica completada en 8.32 seg.
2025-05-21 17:26:17,705 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 17:26:17,705 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-21 17:26:17,705 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:17,804 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-8.pdf
2025-05-21 17:26:17,805 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-21 17:26:17,805 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 17:26:17,827 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:17,827 - facebook_extractor_fix - INFO - Se han añadido 13 textos de Facebook al archivo limpio
2025-05-21 17:26:17,827 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 17:26:17,828 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 17:26:17,828 - main_orchestrator - INFO - ==================================================
2025-05-21 17:26:17,829 - main_orchestrator - INFO - PIPELINE FINALIZADO en 489.58 segundos.
2025-05-21 17:26:17,829 - main_orchestrator - INFO - ==================================================
2025-05-21 17:26:18,323 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-13.pdf
2025-05-21 17:26:18,592 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-12.pdf
2025-05-21 17:26:18,668 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-16.pdf
2025-05-21 17:26:18,792 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-18.pdf
2025-05-21 17:26:18,881 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-21.pdf
2025-05-21 17:26:18,982 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-19.pdf
2025-05-21 17:26:19,065 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-22.pdf
2025-05-21 17:26:19,066 - lib.facebook_processor - INFO - Texto extraído de 12 PDFs de Facebook
2025-05-21 17:26:19,066 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 5.97 seg.
2025-05-21 17:26:19,066 - main_orchestrator - INFO - Texto extraído de 12 PDFs de Facebook
2025-05-21 17:26:19,067 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:19,068 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:19,068 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 17:26:19,069 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:19,069 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:19,070 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T17:26:19.068745', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 24, 'history_total_urls': 321, 'categories': {'social': 24}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 12, 'extracted_texts': 12}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 5.97, 'image_download': 0, 'html_scraping': 0, 'image_api': 81.44, 'facebook_processing': 367.49, 'facebook_text_extraction': 5.97, 'stats_consolidation': 0.0}}
2025-05-21 17:26:19,070 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 17:26:19,070 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 17:26:19,087 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-21 17:26:19,088 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-21 17:26:19,091 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-21 17:26:19,092 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-21 17:26:19,092 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 17:26:19,111 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 17:26:19,111 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 17:26:19,111 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-21 17:26:19,111 - semantic_cleaner - INFO - Extraídos 19 textos de HTML
2025-05-21 17:26:19,112 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-21 17:26:19,112 - semantic_cleaner - INFO - Extraídos 12 textos de Facebook
2025-05-21 17:26:26,647 - semantic_cleaner - INFO - Se identificaron 37 grupos de textos similares
2025-05-21 17:26:26,647 - semantic_cleaner - INFO - Se seleccionaron 37 textos representativos
2025-05-21 17:26:26,648 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 17:26:26,648 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-21 17:26:26,653 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-21 17:26:26,653 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:26,667 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:26,669 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:26,669 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-21 17:26:26,669 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T17:26:19.068745', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 24, 'history_total_urls': 321, 'categories': {'social': 24}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 12, 'extracted_texts': 12}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 5.97, 'image_download': 0, 'html_scraping': 0, 'image_api': 81.44, 'facebook_processing': 367.49, 'facebook_text_extraction': 5.97, 'stats_consolidation': 0.0, 'semantic_cleaning': 7.58}}
2025-05-21 17:26:26,670 - main_orchestrator - INFO - Limpieza semántica completada en 7.58 seg.
2025-05-21 17:26:26,670 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 17:26:26,670 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-21 17:26:26,671 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-21 17:26:26,694 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-21 17:26:26,694 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 17:26:26,715 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-21 17:26:26,715 - facebook_extractor_fix - INFO - Se han añadido 12 textos de Facebook al archivo limpio
2025-05-21 17:26:26,715 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 17:26:26,716 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 17:26:26,716 - main_orchestrator - INFO - ==================================================
2025-05-21 17:26:26,716 - main_orchestrator - INFO - PIPELINE FINALIZADO en 463.18 segundos.
2025-05-21 17:26:26,717 - main_orchestrator - INFO - ==================================================
2025-05-21 17:47:24,053 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 17:47:24,059 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 17:47:30,987 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 17:47:30,990 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 17:47:37,297 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 17:47:37,301 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 17:53:16,577 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 17:53:16,580 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 18:45:53,005 - main_orchestrator - INFO - ==================================================
2025-05-21 18:45:53,006 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 18:45:53,006 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-21 18:45:53,007 - main_orchestrator - INFO - ==================================================
2025-05-21 18:45:53,014 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-21 18:45:53,015 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-21 18:45:53,016 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 18:45:53,018 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-21 18:45:53,019 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 18:45:53,026 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 18:45:53,028 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 18:45:53,028 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 18:45:53,029 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 18:45:53,030 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 18:45:53,086 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-21 18:45:53,692 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-21 18:45:53,692 - main_orchestrator - INFO - PDF procesado en 0.66 seg. Enlaces encontrados: 103
2025-05-21 18:45:53,731 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-21 18:45:53,732 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 18:45:53,734 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-21 18:45:53,864 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:45:53,864 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-21 18:45:53,864 - main_orchestrator - INFO - Texto del PDF extraído en 0.13 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:45:53,865 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 18:45:53,865 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-21 18:45:53,865 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-21 18:45:53,865 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 18:45:53,866 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-21 18:45:53,866 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 18:45:53,866 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 18:45:53,867 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 18:45:53,867 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-21 18:45:53,868 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-21 18:45:53,869 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-21 18:45:53,869 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 18:45:53,869 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-21 18:45:53,870 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 18:45:53,870 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-21 18:45:53,870 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 18:45:53,872 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-21 18:45:53,872 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 18:45:53,872 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-21 18:45:53,892 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-21 18:45:53,892 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 18:45:53,892 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-21 18:45:53,893 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 18:45:53,894 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:45:53,895 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:45:53,895 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T18:45:53.893621', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.13, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.13, 'stats_consolidation': 0.0}}
2025-05-21 18:45:53,896 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 18:45:53,896 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 18:45:53,913 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-21 18:45:53,933 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-21 18:45:53,951 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:45:53,958 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-21 18:45:53,959 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-21 18:45:53,960 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 18:45:53,988 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 18:45:53,989 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 18:45:53,989 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-21 18:45:53,989 - semantic_cleaner - INFO - Extraídos 32 textos de HTML
2025-05-21 18:45:53,990 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-21 18:45:53,990 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-21 18:45:59,853 - semantic_cleaner - INFO - Se identificaron 39 grupos de textos similares
2025-05-21 18:45:59,854 - semantic_cleaner - INFO - Se seleccionaron 39 textos representativos
2025-05-21 18:45:59,854 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 18:45:59,854 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-21 18:45:59,860 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-21 18:45:59,860 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-21 18:45:59,872 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-21 18:45:59,874 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:45:59,874 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:45:59,875 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T18:45:53.893621', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.13, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.13, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.91}}
2025-05-21 18:45:59,875 - main_orchestrator - INFO - Limpieza semántica completada en 5.91 seg.
2025-05-21 18:45:59,875 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 18:45:59,876 - main_orchestrator - INFO - ==================================================
2025-05-21 18:45:59,876 - main_orchestrator - INFO - PIPELINE FINALIZADO en 6.87 segundos.
2025-05-21 18:45:59,876 - main_orchestrator - INFO - ==================================================
2025-05-21 18:54:05,953 - main_orchestrator - INFO - ==================================================
2025-05-21 18:54:05,953 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 18:54:05,953 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-21 18:54:05,954 - main_orchestrator - INFO - ==================================================
2025-05-21 18:54:05,956 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-21 18:54:05,957 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-21 18:54:05,958 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 18:54:05,960 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-21 18:54:05,961 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 18:54:05,961 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 18:54:05,962 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 18:54:05,963 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 18:54:05,963 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 18:54:05,966 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-21 18:54:06,449 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-21 18:54:06,449 - main_orchestrator - INFO - PDF procesado en 0.49 seg. Enlaces encontrados: 103
2025-05-21 18:54:06,454 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-21 18:54:06,455 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 18:54:06,456 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-21 18:54:06,574 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:54:06,574 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-21 18:54:06,575 - main_orchestrator - INFO - Texto del PDF extraído en 0.12 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:54:06,575 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 18:54:06,576 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-21 18:54:06,576 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-21 18:54:06,577 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 18:54:06,577 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-21 18:54:06,577 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 18:54:06,578 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 18:54:06,578 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 18:54:06,579 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-21 18:54:06,580 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-21 18:54:06,582 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-21 18:54:06,583 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 18:54:06,584 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-21 18:54:06,584 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 18:54:06,585 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-21 18:54:06,585 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 18:54:06,586 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-21 18:54:06,586 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 18:54:06,587 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-21 18:54:06,589 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-21 18:54:06,590 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 18:54:06,590 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-21 18:54:06,591 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 18:54:06,592 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:54:06,593 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:54:06,593 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T18:54:06.591535', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.49, 'pdf_text_extraction': 0.12, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.12, 'stats_consolidation': 0.0}}
2025-05-21 18:54:06,594 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 18:54:06,594 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 18:54:06,597 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-21 18:54:06,598 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-21 18:54:06,620 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-21 18:54:06,626 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-21 18:54:06,626 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-21 18:54:06,627 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 18:54:06,648 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 18:54:06,649 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 18:54:06,649 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-21 18:54:06,650 - semantic_cleaner - INFO - Extraídos 32 textos de HTML
2025-05-21 18:54:06,650 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-21 18:54:06,651 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-21 18:54:12,419 - semantic_cleaner - INFO - Se identificaron 39 grupos de textos similares
2025-05-21 18:54:12,419 - semantic_cleaner - INFO - Se seleccionaron 39 textos representativos
2025-05-21 18:54:12,420 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 18:54:12,420 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-21 18:54:12,425 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-21 18:54:12,426 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-21 18:54:12,441 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-21 18:54:12,443 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:54:12,444 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-21 18:54:12,444 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T18:54:06.591535', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.49, 'pdf_text_extraction': 0.12, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.12, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.81}}
2025-05-21 18:54:12,445 - main_orchestrator - INFO - Limpieza semántica completada en 5.81 seg.
2025-05-21 18:54:12,445 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 18:54:12,446 - main_orchestrator - INFO - ==================================================
2025-05-21 18:54:12,446 - main_orchestrator - INFO - PIPELINE FINALIZADO en 6.49 segundos.
2025-05-21 18:54:12,446 - main_orchestrator - INFO - ==================================================
2025-05-21 21:08:36,546 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:08:36,550 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:21:46,351 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:21:46,354 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:21:54,118 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:21:54,121 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:22:09,635 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:22:09,638 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:22:19,233 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:22:19,237 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:22:24,746 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:22:24,749 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:23:31,854 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:23:31,859 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:23:44,254 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:23:44,257 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:24:08,744 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:24:08,747 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:24:32,738 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:24:32,741 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:24:32,745 - fastapi - ERROR - Form data requires "python-multipart" to be installed. 
You can install "python-multipart" with: 

pip install python-multipart

2025-05-21 21:24:57,539 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:24:57,543 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:24:57,549 - fastapi - ERROR - Form data requires "python-multipart" to be installed. 
You can install "python-multipart" with: 

pip install python-multipart

2025-05-21 21:37:36,270 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 21:37:36,273 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 21:37:36,277 - fastapi - ERROR - Form data requires "python-multipart" to be installed. 
You can install "python-multipart" with: 

pip install python-multipart

2025-05-21 22:42:06,561 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:42:06,565 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:49:56,436 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:49:56,440 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:51:19,084 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:51:19,087 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:53:22,634 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:53:22,637 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:53:28,315 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:53:28,319 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:53:33,802 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:53:33,805 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:53:43,305 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:53:43,308 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:54:17,315 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:54:17,318 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:54:22,620 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:54:22,623 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:54:58,698 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:54:58,701 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:55:28,356 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:55:28,359 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:55:47,502 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:55:47,505 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 22:56:37,495 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 22:56:37,498 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:42:57,077 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:42:57,080 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:43:26,190 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:43:26,196 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:50:22,253 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:50:22,256 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:50:36,183 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:50:36,186 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:50:50,087 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:50:50,092 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:50:56,167 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:50:56,170 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:51:01,884 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:51:01,887 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:51:12,071 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:51:12,076 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:51:28,817 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:51:28,820 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:56:14,031 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:56:14,034 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:59:13,520 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:59:13,523 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 23:59:38,203 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 23:59:38,206 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:01:27,293 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:01:27,296 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:02:40,825 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:02:40,828 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:03:15,818 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:03:15,821 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:03:22,964 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:03:22,967 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:03:39,318 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:03:39,322 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:03:58,550 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:03:58,553 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:04:26,028 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:04:26,033 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:04:32,740 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:04:32,744 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:04:38,405 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:04:38,408 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:19:47,722 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:19:47,726 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:21:19,571 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:21:19,574 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 00:21:49,818 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 00:21:49,821 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 08:48:30,104 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 08:48:30,108 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 08:59:08,892 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 08:59:08,895 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:10:24,627 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:10:24,631 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:18:58,816 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:18:58,821 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:19:06,416 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:19:06,419 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:19:11,966 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:19:11,969 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:21:56,850 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:21:56,856 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:22:02,566 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:22:02,573 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:22:39,809 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:22:39,832 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:22:49,354 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:22:49,358 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:27:21,890 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:27:21,893 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:29:18,321 - main_orchestrator - INFO - ==================================================
2025-05-22 11:29:18,322 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 11:29:18,322 - main_orchestrator - INFO - Usando fecha: 22042025.pdf
2025-05-22 11:29:18,323 - main_orchestrator - INFO - ==================================================
2025-05-22 11:29:18,340 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 11:29:18,341 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 11:29:18,342 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 11:29:18,343 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 11:29:18,343 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 11:29:18,344 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 11:29:18,345 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 11:29:18,345 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 11:29:18,345 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 11:29:18,346 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 11:29:18,346 - lib.pdf_processor - ERROR - Archivo PDF no encontrado: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf.pdf
2025-05-22 11:29:18,346 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf.pdf. Terminando proceso para esta fecha.
2025-05-22 11:29:18,348 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.pdf.json
2025-05-22 11:29:18,348 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.pdf.json
2025-05-22 11:29:18,349 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T11:29:18.347232', 'date_processed': '22042025.pdf', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-22 11:29:18,349 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 11:29:18,349 - main_orchestrator - INFO - ==================================================
2025-05-22 11:29:18,349 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.03 segundos.
2025-05-22 11:29:18,350 - main_orchestrator - INFO - ==================================================
2025-05-22 11:46:49,145 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 11:46:49,148 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 11:59:57,870 - main_orchestrator - INFO - ==================================================
2025-05-22 11:59:57,870 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 11:59:57,870 - main_orchestrator - INFO - Usando fecha: 22042025.pdf
2025-05-22 11:59:57,871 - main_orchestrator - INFO - ==================================================
2025-05-22 11:59:57,872 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 11:59:57,874 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 11:59:57,874 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 11:59:57,875 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 11:59:57,876 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 11:59:57,877 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 11:59:57,877 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 11:59:57,878 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 11:59:57,878 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 11:59:57,878 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 11:59:57,879 - lib.pdf_processor - ERROR - Archivo PDF no encontrado: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf.pdf
2025-05-22 11:59:57,879 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf.pdf. Terminando proceso para esta fecha.
2025-05-22 11:59:57,881 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.pdf.json
2025-05-22 11:59:57,882 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.pdf.json
2025-05-22 11:59:57,883 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T11:59:57.880380', 'date_processed': '22042025.pdf', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-22 11:59:57,883 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 11:59:57,884 - main_orchestrator - INFO - ==================================================
2025-05-22 11:59:57,884 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.01 segundos.
2025-05-22 11:59:57,884 - main_orchestrator - INFO - ==================================================
2025-05-22 12:02:32,414 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:02:32,418 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:02:41,715 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:02:41,718 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:03:34,904 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:03:34,908 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:04:27,830 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:04:27,834 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:05:28,563 - main_orchestrator - INFO - ==================================================
2025-05-22 12:05:28,564 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 12:05:28,564 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 12:05:28,564 - main_orchestrator - INFO - ==================================================
2025-05-22 12:05:28,566 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 12:05:28,567 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 12:05:28,568 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 12:05:28,569 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 12:05:28,570 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 12:05:28,570 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 12:05:28,571 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 12:05:28,571 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 12:05:28,572 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 12:05:28,572 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 12:05:28,617 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:05:29,073 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 12:05:29,074 - main_orchestrator - INFO - PDF procesado en 0.50 seg. Enlaces encontrados: 103
2025-05-22 12:05:29,086 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 12:05:29,086 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 12:05:29,088 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:05:29,170 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:05:29,170 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 12:05:29,171 - main_orchestrator - INFO - Texto del PDF extraído en 0.08 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:05:29,171 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 12:05:29,171 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 12:05:29,171 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 12:05:29,172 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 12:05:29,172 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 12:05:29,172 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 12:05:29,172 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 12:05:29,173 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 12:05:29,173 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 12:05:29,173 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 12:05:29,175 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 12:05:29,175 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 12:05:29,175 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 12:05:29,176 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 12:05:29,176 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 12:05:29,176 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 12:05:29,177 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 12:05:29,177 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 12:05:29,178 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 12:05:29,180 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 12:05:29,180 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 12:05:29,180 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 12:05:29,180 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 12:05:29,182 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:05:29,182 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:05:29,182 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:05:29.181101', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.5, 'pdf_text_extraction': 0.08, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.08, 'stats_consolidation': 0.0}}
2025-05-22 12:05:29,183 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 12:05:29,183 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 12:05:29,198 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:05:29,200 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:05:29,201 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:05:29,201 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 12:05:29,228 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 12:05:29,228 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 12:05:29,229 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 12:05:29,229 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 12:05:29,229 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 12:05:29,229 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 12:05:29,427 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 12:05:29,427 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 12:05:29,427 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 12:05:29,428 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:05:29,430 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:05:29,430 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:05:29,433 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:05:29,434 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:05:29,435 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:05:29,435 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:05:29.181101', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.5, 'pdf_text_extraction': 0.08, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.08, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.23}}
2025-05-22 12:05:29,436 - main_orchestrator - INFO - Limpieza semántica completada en 0.23 seg.
2025-05-22 12:05:29,436 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 12:05:29,436 - main_orchestrator - INFO - ==================================================
2025-05-22 12:05:29,437 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.87 segundos.
2025-05-22 12:05:29,437 - main_orchestrator - INFO - ==================================================
2025-05-22 12:10:47,825 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:10:47,828 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:11:29,544 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:11:29,547 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:11:34,936 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:11:34,941 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:12:18,427 - main_orchestrator - INFO - ==================================================
2025-05-22 12:12:18,428 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 12:12:18,428 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 12:12:18,429 - main_orchestrator - INFO - ==================================================
2025-05-22 12:12:18,430 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 12:12:18,431 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 12:12:18,432 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 12:12:18,433 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 12:12:18,433 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 12:12:18,434 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 12:12:18,435 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 12:12:18,435 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 12:12:18,435 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 12:12:18,436 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 12:12:18,453 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:12:18,945 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 12:12:18,946 - main_orchestrator - INFO - PDF procesado en 0.51 seg. Enlaces encontrados: 103
2025-05-22 12:12:18,953 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 12:12:18,953 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 12:12:18,955 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:12:19,035 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:12:19,036 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 12:12:19,036 - main_orchestrator - INFO - Texto del PDF extraído en 0.08 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:12:19,037 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 12:12:19,037 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 12:12:19,037 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 12:12:19,038 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 12:12:19,038 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 12:12:19,038 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 12:12:19,038 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 12:12:19,039 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 12:12:19,039 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 12:12:19,039 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 12:12:19,040 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 12:12:19,041 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 12:12:19,041 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 12:12:19,041 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 12:12:19,041 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 12:12:19,041 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 12:12:19,042 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 12:12:19,042 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 12:12:19,043 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 12:12:19,045 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 12:12:19,045 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 12:12:19,045 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 12:12:19,045 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 12:12:19,047 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:12:19,047 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:12:19,048 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:12:19.046181', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.51, 'pdf_text_extraction': 0.08, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.08, 'stats_consolidation': 0.0}}
2025-05-22 12:12:19,048 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 12:12:19,048 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 12:12:19,064 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:12:19,066 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:12:19,066 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:12:19,067 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 12:12:19,086 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 12:12:19,086 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 12:12:19,086 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 12:12:19,086 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 12:12:19,087 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 12:12:19,087 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 12:12:19,311 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 12:12:19,311 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 12:12:19,312 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 12:12:19,312 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:12:19,313 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:12:19,314 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:12:19,318 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:12:19,320 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:12:19,321 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:12:19,321 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:12:19.046181', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.51, 'pdf_text_extraction': 0.08, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.08, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.25}}
2025-05-22 12:12:19,322 - main_orchestrator - INFO - Limpieza semántica completada en 0.25 seg.
2025-05-22 12:12:19,322 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 12:12:19,323 - main_orchestrator - INFO - ==================================================
2025-05-22 12:12:19,323 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.90 segundos.
2025-05-22 12:12:19,324 - main_orchestrator - INFO - ==================================================
2025-05-22 12:16:13,446 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:16:13,450 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:17:03,845 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:17:03,850 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:17:11,997 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:17:12,000 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:20:12,415 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:20:12,419 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:20:25,989 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:20:25,992 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:20:32,308 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:20:32,311 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:20:38,245 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:20:38,248 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:20:50,368 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 12:20:50,371 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 12:54:31,798 - main_orchestrator - INFO - ==================================================
2025-05-22 12:54:31,799 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 12:54:31,799 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 12:54:31,800 - main_orchestrator - INFO - ==================================================
2025-05-22 12:54:31,802 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 12:54:31,804 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 12:54:31,805 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 12:54:31,806 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 12:54:31,807 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 12:54:31,808 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 12:54:31,808 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 12:54:31,809 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 12:54:31,809 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 12:54:31,809 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 12:54:31,831 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:54:32,499 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 12:54:32,500 - main_orchestrator - INFO - PDF procesado en 0.69 seg. Enlaces encontrados: 103
2025-05-22 12:54:32,510 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 12:54:32,511 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 12:54:32,512 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 12:54:32,624 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:54:32,624 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 12:54:32,624 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:54:32,625 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 12:54:32,625 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 12:54:32,625 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 12:54:32,626 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 12:54:32,626 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 12:54:32,626 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 12:54:32,627 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 12:54:32,627 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 12:54:32,628 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 12:54:32,628 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 12:54:32,629 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 12:54:32,630 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 12:54:32,630 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 12:54:32,631 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 12:54:32,631 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 12:54:32,631 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 12:54:32,631 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 12:54:32,632 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 12:54:32,633 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 12:54:32,635 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 12:54:32,636 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 12:54:32,636 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 12:54:32,637 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 12:54:32,638 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:54:32,639 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:54:32,639 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:54:32.637464', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.69, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-05-22 12:54:32,640 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 12:54:32,640 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 12:54:32,661 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 12:54:32,663 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:54:32,664 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 12:54:32,664 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 12:54:32,687 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 12:54:32,687 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 12:54:32,688 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 12:54:32,688 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 12:54:32,689 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 12:54:32,689 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 12:54:33,022 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 12:54:33,022 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 12:54:33,023 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 12:54:33,023 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:54:33,025 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 12:54:33,025 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:54:33,030 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 12:54:33,032 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:54:33,032 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 12:54:33,033 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T12:54:32.637464', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.69, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.37}}
2025-05-22 12:54:33,033 - main_orchestrator - INFO - Limpieza semántica completada en 0.37 seg.
2025-05-22 12:54:33,034 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 12:54:33,034 - main_orchestrator - INFO - ==================================================
2025-05-22 12:54:33,035 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.24 segundos.
2025-05-22 12:54:33,035 - main_orchestrator - INFO - ==================================================
2025-05-22 13:08:03,491 - main_orchestrator - INFO - ==================================================
2025-05-22 13:08:03,491 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 13:08:03,491 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 13:08:03,492 - main_orchestrator - INFO - ==================================================
2025-05-22 13:08:03,493 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 13:08:03,494 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 13:08:03,495 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 13:08:03,495 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 13:08:03,496 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 13:08:03,496 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 13:08:03,497 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 13:08:03,497 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 13:08:03,497 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 13:08:03,528 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 13:08:04,111 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 13:08:04,111 - main_orchestrator - INFO - PDF procesado en 0.61 seg. Enlaces encontrados: 103
2025-05-22 13:08:04,116 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 13:08:04,116 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 13:08:04,118 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 13:08:04,217 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:08:04,218 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 13:08:04,218 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:08:04,218 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 13:08:04,219 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 13:08:04,219 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 13:08:04,219 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 13:08:04,219 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 13:08:04,220 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 13:08:04,220 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 13:08:04,220 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 13:08:04,220 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 13:08:04,221 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 13:08:04,222 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 13:08:04,222 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 13:08:04,222 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 13:08:04,223 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 13:08:04,223 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 13:08:04,223 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 13:08:04,224 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 13:08:04,224 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 13:08:04,224 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 13:08:04,226 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 13:08:04,227 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 13:08:04,227 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 13:08:04,227 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 13:08:04,228 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:08:04,229 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:08:04,229 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T13:08:04.227909', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.61, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-05-22 13:08:04,229 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 13:08:04,230 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 13:08:04,243 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:08:04,245 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 13:08:04,246 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 13:08:04,246 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 13:08:04,267 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 13:08:04,267 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 13:08:04,267 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 13:08:04,268 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 13:08:04,268 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 13:08:04,268 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 13:08:04,500 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 13:08:04,501 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 13:08:04,501 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 13:08:04,501 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 13:08:04,504 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 13:08:04,504 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 13:08:04,507 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 13:08:04,508 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:08:04,509 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:08:04,509 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T13:08:04.227909', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.61, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.26}}
2025-05-22 13:08:04,510 - main_orchestrator - INFO - Limpieza semántica completada en 0.26 seg.
2025-05-22 13:08:04,510 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 13:08:04,510 - main_orchestrator - INFO - ==================================================
2025-05-22 13:08:04,511 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.02 segundos.
2025-05-22 13:08:04,511 - main_orchestrator - INFO - ==================================================
2025-05-22 13:14:52,577 - main_orchestrator - INFO - ==================================================
2025-05-22 13:14:52,578 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 13:14:52,578 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 13:14:52,578 - main_orchestrator - INFO - ==================================================
2025-05-22 13:14:52,591 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 13:14:52,602 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 13:14:52,603 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 13:14:52,638 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 13:14:52,642 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 13:14:52,644 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 13:14:52,646 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 13:14:52,649 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 13:14:52,651 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 13:14:52,689 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 13:14:53,340 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 13:14:53,341 - main_orchestrator - INFO - PDF procesado en 0.69 seg. Enlaces encontrados: 103
2025-05-22 13:14:53,345 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 13:14:53,345 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 13:14:53,346 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 13:14:53,455 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:14:53,456 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 13:14:53,456 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:14:53,456 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 13:14:53,457 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 13:14:53,457 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 13:14:53,457 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 13:14:53,458 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 13:14:53,458 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 13:14:53,458 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 13:14:53,459 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 13:14:53,459 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 13:14:53,459 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 13:14:53,460 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 13:14:53,460 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 13:14:53,461 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 13:14:53,461 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 13:14:53,461 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 13:14:53,462 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 13:14:53,462 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 13:14:53,462 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 13:14:53,463 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 13:14:53,475 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 13:14:53,476 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 13:14:53,476 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 13:14:53,476 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 13:14:53,477 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:14:53,478 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:14:53,478 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T13:14:53.476652', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.69, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-05-22 13:14:53,478 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 13:14:53,478 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 13:14:53,492 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 13:14:53,495 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 13:14:53,495 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 13:14:53,495 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 13:14:53,523 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 13:14:53,523 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 13:14:53,523 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 13:14:53,524 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 13:14:53,524 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 13:14:53,524 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 13:14:53,763 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 13:14:53,763 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 13:14:53,763 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 13:14:53,763 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 13:14:53,765 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 13:14:53,766 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 13:14:53,769 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 13:14:53,770 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:14:53,771 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 13:14:53,771 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T13:14:53.476652', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.69, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.27}}
2025-05-22 13:14:53,771 - main_orchestrator - INFO - Limpieza semántica completada en 0.27 seg.
2025-05-22 13:14:53,772 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 13:14:53,772 - main_orchestrator - INFO - ==================================================
2025-05-22 13:14:53,772 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.19 segundos.
2025-05-22 13:14:53,773 - main_orchestrator - INFO - ==================================================
2025-05-22 14:28:51,816 - main_orchestrator - INFO - ==================================================
2025-05-22 14:28:51,816 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 14:28:51,817 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 14:28:51,817 - main_orchestrator - INFO - ==================================================
2025-05-22 14:28:51,821 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 14:28:51,822 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 14:28:51,822 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 14:28:51,843 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 14:28:51,844 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 14:28:51,844 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 14:28:51,845 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 14:28:51,845 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 14:28:51,845 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 14:28:51,861 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 14:28:52,246 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 14:28:52,246 - main_orchestrator - INFO - PDF procesado en 0.40 seg. Enlaces encontrados: 103
2025-05-22 14:28:52,250 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 14:28:52,251 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 14:28:52,252 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 14:28:52,364 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:28:52,365 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 14:28:52,365 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:28:52,365 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 14:28:52,365 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 14:28:52,366 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 14:28:52,366 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 14:28:52,366 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 14:28:52,367 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 14:28:52,367 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 14:28:52,367 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 14:28:52,368 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 14:28:52,368 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 14:28:52,369 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 14:28:52,370 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 14:28:52,370 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 14:28:52,370 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 14:28:52,371 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 14:28:52,371 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 14:28:52,371 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 14:28:52,372 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 14:28:52,372 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 14:28:52,374 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 14:28:52,374 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 14:28:52,374 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 14:28:52,374 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 14:28:52,375 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:28:52,376 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:28:52,376 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T14:28:52.374974', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.4, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-05-22 14:28:52,376 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 14:28:52,377 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 14:28:52,389 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:28:52,391 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 14:28:52,391 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 14:28:52,391 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 14:28:52,405 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 14:28:52,405 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 14:28:52,405 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 14:28:52,405 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 14:28:52,406 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 14:28:52,406 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 14:28:52,603 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 14:28:52,603 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 14:28:52,603 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 14:28:52,604 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 14:28:52,606 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 14:28:52,607 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 14:28:52,610 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 14:28:52,611 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:28:52,611 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:28:52,612 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T14:28:52.374974', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.4, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.22}}
2025-05-22 14:28:52,612 - main_orchestrator - INFO - Limpieza semántica completada en 0.22 seg.
2025-05-22 14:28:52,612 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 14:28:52,612 - main_orchestrator - INFO - ==================================================
2025-05-22 14:28:52,613 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.80 segundos.
2025-05-22 14:28:52,613 - main_orchestrator - INFO - ==================================================
2025-05-22 14:41:38,687 - main_orchestrator - INFO - ==================================================
2025-05-22 14:41:38,687 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 14:41:38,688 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 14:41:38,688 - main_orchestrator - INFO - ==================================================
2025-05-22 14:41:38,690 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 14:41:38,692 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 14:41:38,692 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 14:41:38,693 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 14:41:38,694 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 14:41:38,695 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 14:41:38,696 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 14:41:38,696 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 14:41:38,696 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 14:41:38,717 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 14:41:39,228 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 14:41:39,229 - main_orchestrator - INFO - PDF procesado en 0.53 seg. Enlaces encontrados: 103
2025-05-22 14:41:39,233 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 14:41:39,233 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 14:41:39,235 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 14:41:39,404 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:41:39,407 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 14:41:39,407 - main_orchestrator - INFO - Texto del PDF extraído en 0.17 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:41:39,408 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 14:41:39,409 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 14:41:39,409 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 14:41:39,409 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 14:41:39,410 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 14:41:39,410 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 14:41:39,411 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 14:41:39,411 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 14:41:39,412 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 14:41:39,412 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 14:41:39,413 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 14:41:39,414 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 14:41:39,414 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 14:41:39,414 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 14:41:39,414 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 14:41:39,415 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 14:41:39,416 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 14:41:39,416 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 14:41:39,417 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 14:41:39,419 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 14:41:39,419 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 14:41:39,419 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 14:41:39,420 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 14:41:39,421 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:41:39,422 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:41:39,423 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T14:41:39.420603', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.17, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.17, 'stats_consolidation': 0.0}}
2025-05-22 14:41:39,423 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 14:41:39,424 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 14:41:39,437 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 14:41:39,439 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 14:41:39,440 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 14:41:39,440 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 14:41:39,457 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 14:41:39,458 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 14:41:39,458 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 14:41:39,458 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 14:41:39,458 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 14:41:39,459 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 14:41:39,669 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 14:41:39,669 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 14:41:39,669 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 14:41:39,669 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 14:41:39,671 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 14:41:39,672 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 14:41:39,675 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 14:41:39,676 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:41:39,676 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 14:41:39,677 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T14:41:39.420603', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.17, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.17, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.23}}
2025-05-22 14:41:39,677 - main_orchestrator - INFO - Limpieza semántica completada en 0.23 seg.
2025-05-22 14:41:39,677 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 14:41:39,678 - main_orchestrator - INFO - ==================================================
2025-05-22 14:41:39,678 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.99 segundos.
2025-05-22 14:41:39,678 - main_orchestrator - INFO - ==================================================
2025-05-22 14:49:50,753 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:49:50,757 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:51:22,049 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:51:22,054 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:51:36,328 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:51:36,331 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:51:43,244 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:51:43,247 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:51:49,548 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:51:49,551 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:51:55,143 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:51:55,146 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:53:58,935 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:53:58,938 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:54:11,876 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:54:11,879 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:54:24,931 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:54:24,936 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:54:35,300 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:54:35,304 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:56:49,651 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:56:49,657 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:57:02,693 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:57:02,696 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:57:39,461 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:57:39,466 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 14:57:48,892 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 14:57:48,896 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:09:52,263 - main_orchestrator - INFO - ==================================================
2025-05-22 15:09:52,263 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 15:09:52,264 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 15:09:52,264 - main_orchestrator - INFO - ==================================================
2025-05-22 15:09:52,266 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 15:09:52,267 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 15:09:52,268 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 15:09:52,269 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 15:09:52,270 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 15:09:52,271 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 15:09:52,271 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 15:09:52,272 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 15:09:52,272 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 15:09:52,272 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 15:09:52,294 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 15:09:52,927 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 15:09:52,927 - main_orchestrator - INFO - PDF procesado en 0.66 seg. Enlaces encontrados: 103
2025-05-22 15:09:52,935 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 15:09:52,935 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 15:09:52,937 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 15:09:53,045 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:09:53,046 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 15:09:53,046 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:09:53,047 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 15:09:53,047 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 15:09:53,047 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 15:09:53,047 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 15:09:53,048 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 15:09:53,048 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 15:09:53,048 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 15:09:53,049 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 15:09:53,049 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 15:09:53,049 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 15:09:53,050 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 15:09:53,051 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 15:09:53,051 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 15:09:53,051 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 15:09:53,051 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 15:09:53,052 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 15:09:53,052 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 15:09:53,053 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 15:09:53,053 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 15:09:53,056 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 15:09:53,056 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 15:09:53,056 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 15:09:53,057 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 15:09:53,058 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:09:53,059 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:09:53,059 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T15:09:53.057564', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-05-22 15:09:53,059 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 15:09:53,060 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 15:09:53,078 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:09:53,080 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 15:09:53,080 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 15:09:53,081 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 15:09:53,102 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 15:09:53,102 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 15:09:53,103 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 15:09:53,103 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 15:09:53,103 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 15:09:53,103 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 15:09:53,403 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 15:09:53,404 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 15:09:53,404 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 15:09:53,404 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 15:09:53,406 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 15:09:53,406 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 15:09:53,410 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 15:09:53,411 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:09:53,412 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:09:53,412 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T15:09:53.057564', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.33}}
2025-05-22 15:09:53,413 - main_orchestrator - INFO - Limpieza semántica completada en 0.33 seg.
2025-05-22 15:09:53,413 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 15:09:53,413 - main_orchestrator - INFO - ==================================================
2025-05-22 15:09:53,414 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.15 segundos.
2025-05-22 15:09:53,414 - main_orchestrator - INFO - ==================================================
2025-05-22 15:24:50,760 - main_orchestrator - INFO - ==================================================
2025-05-22 15:24:50,760 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 15:24:50,761 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 15:24:50,761 - main_orchestrator - INFO - ==================================================
2025-05-22 15:24:50,763 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 15:24:50,764 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 15:24:50,765 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 15:24:50,766 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 15:24:50,767 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 15:24:50,768 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 15:24:50,768 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 15:24:50,769 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 15:24:50,769 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 15:24:50,793 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 15:24:51,428 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 15:24:51,428 - main_orchestrator - INFO - PDF procesado en 0.66 seg. Enlaces encontrados: 103
2025-05-22 15:24:51,433 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 15:24:51,433 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 15:24:51,435 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 15:24:51,553 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:24:51,554 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 15:24:51,554 - main_orchestrator - INFO - Texto del PDF extraído en 0.12 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:24:51,555 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 15:24:51,555 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 15:24:51,555 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 15:24:51,556 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 15:24:51,556 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-22 15:24:51,557 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 15:24:51,557 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 15:24:51,558 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 15:24:51,558 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 15:24:51,558 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 15:24:51,560 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 15:24:51,560 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 15:24:51,560 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 15:24:51,561 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 15:24:51,561 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 15:24:51,561 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 15:24:51,561 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 15:24:51,562 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 15:24:51,562 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 15:24:51,564 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 15:24:51,564 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 15:24:51,564 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 15:24:51,565 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 15:24:51,567 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:24:51,567 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:24:51,568 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T15:24:51.565481', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.12, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.12, 'stats_consolidation': 0.0}}
2025-05-22 15:24:51,568 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 15:24:51,568 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 15:24:51,582 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 15:24:51,585 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 15:24:51,585 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 15:24:51,585 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 15:24:51,609 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 15:24:51,610 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 15:24:51,610 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 15:24:51,610 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 15:24:51,610 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 15:24:51,611 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 15:24:51,954 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 15:24:51,954 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 15:24:51,954 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 15:24:51,955 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 15:24:51,957 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 15:24:51,957 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 15:24:51,960 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 15:24:51,962 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:24:51,962 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 15:24:51,962 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T15:24:51.565481', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.66, 'pdf_text_extraction': 0.12, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.12, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.37}}
2025-05-22 15:24:51,963 - main_orchestrator - INFO - Limpieza semántica completada en 0.37 seg.
2025-05-22 15:24:51,963 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 15:24:51,963 - main_orchestrator - INFO - ==================================================
2025-05-22 15:24:51,964 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.20 segundos.
2025-05-22 15:24:51,964 - main_orchestrator - INFO - ==================================================
2025-05-22 15:44:15,289 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:44:15,293 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:47:26,339 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:47:26,343 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:53:49,760 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:53:49,763 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:54:02,926 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:54:02,929 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:56:02,784 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:56:02,788 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 15:56:45,590 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-22 15:56:45,593 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-22 16:04:06,440 - main_orchestrator - INFO - ==================================================
2025-05-22 16:04:06,441 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 16:04:06,441 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 16:04:06,441 - main_orchestrator - INFO - ==================================================
2025-05-22 16:04:06,443 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 16:04:06,444 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 16:04:06,445 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 16:04:06,446 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 321 URLs.
2025-05-22 16:04:06,447 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 16:04:06,447 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-22 16:04:06,447 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 16:04:06,448 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 16:04:06,448 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 16:04:06,448 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 16:04:06,468 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:04:06,939 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 16:04:06,939 - main_orchestrator - INFO - PDF procesado en 0.49 seg. Enlaces encontrados: 103
2025-05-22 16:04:06,946 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 16:04:06,946 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 16:04:06,947 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:04:07,038 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:04:07,039 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 16:04:07,039 - main_orchestrator - INFO - Texto del PDF extraído en 0.09 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:04:07,039 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 16:04:07,040 - lib.history_tracker - INFO - Filtradas 102 URLs ya procesadas del lote actual.
2025-05-22 16:04:07,040 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 103 total)
2025-05-22 16:04:07,040 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 16:04:07,042 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-22 16:04:07,042 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-22 16:04:07,043 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-22 16:04:07,043 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-22 16:04:07,043 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-22 16:04:07,043 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-22 16:04:07,044 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-22 16:04:07,045 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:04:07,045 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-22 16:04:07,045 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-22 16:04:07,046 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:04:07,046 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 16:04:07,046 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 16:04:07,046 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 16:04:07,047 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-22 16:04:07,047 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-22 16:04:07,048 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 16:04:07,048 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 16:04:07,048 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 16:04:07,049 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 16:04:07,049 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-22 16:04:07,049 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 16:04:07,049 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 16:04:07,050 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 16:04:07,050 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 16:04:07,052 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-22 16:04:07,052 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 16:04:07,052 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-22 16:04:07,053 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 16:04:07,054 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:04:07,054 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:04:07,054 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:04:07.053449', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.49, 'pdf_text_extraction': 0.09, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.09, 'stats_consolidation': 0.0}}
2025-05-22 16:04:07,055 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 16:04:07,055 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 16:04:07,072 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:04:07,074 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:04:07,074 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:04:07,075 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 16:04:07,093 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 16:04:07,093 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 16:04:07,093 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 16:04:07,093 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-22 16:04:07,094 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 16:04:07,094 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-22 16:04:07,342 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-05-22 16:04:07,342 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-05-22 16:04:07,343 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 16:04:07,343 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:04:07,344 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:04:07,345 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:04:07,347 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:04:07,349 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:04:07,349 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:04:07,349 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:04:07.053449', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 1, 'history_total_urls': 321, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.49, 'pdf_text_extraction': 0.09, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.09, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.27}}
2025-05-22 16:04:07,350 - main_orchestrator - INFO - Limpieza semántica completada en 0.27 seg.
2025-05-22 16:04:07,350 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 16:04:07,350 - main_orchestrator - INFO - ==================================================
2025-05-22 16:04:07,351 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.91 segundos.
2025-05-22 16:04:07,351 - main_orchestrator - INFO - ==================================================
2025-05-22 16:17:26,034 - main_orchestrator - INFO - ==================================================
2025-05-22 16:17:26,035 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 16:17:26,035 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 16:17:26,035 - main_orchestrator - INFO - ==================================================
2025-05-22 16:17:26,037 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 16:17:26,038 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 16:17:26,039 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 16:17:26,040 - lib.history_tracker - INFO - Archivo de historial no encontrado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json. Se creará uno nuevo al guardar.
2025-05-22 16:17:26,040 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 16:17:26,041 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 16:17:26,041 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 16:17:26,041 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 16:17:26,042 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 16:17:26,061 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:17:26,552 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 16:17:26,553 - main_orchestrator - INFO - PDF procesado en 0.51 seg. Enlaces encontrados: 103
2025-05-22 16:17:26,556 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 16:17:26,556 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 16:17:26,557 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:17:26,664 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:17:26,665 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 16:17:26,665 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:17:26,665 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 16:17:26,666 - main_orchestrator - INFO - URLs nuevas para procesar: 103 (de 103 total)
2025-05-22 16:17:26,666 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 16:17:26,666 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-22 16:17:26,667 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-22 16:17:26,667 - content_deduplicator - INFO - Analizando 103 URLs para encontrar duplicados...
2025-05-22 16:17:26,669 - content_deduplicator - WARNING - Demasiados dominios (22). Limitando a los 20 más grandes.
2025-05-22 16:17:26,669 - content_deduplicator - INFO - Procesando 49 URLs del dominio facebook.com
2025-05-22 16:17:26,671 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/agenciandina/posts/pfbid0GoGrkSAmt6xy7bqZVtLhDRpmyYXpe9CQ8dS641ippmAcjbMuQtkK4o6yd75Gyoztl?rdid=1aMJtw9YNRZJfAlm (tipo: facebook)
2025-05-22 16:17:45,045 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/agenciandina/posts/pfbid0GoGrkSAmt6xy7bqZVtLhDRpmyYXpe9CQ8dS641ippmAcjbMuQtkK4o6yd75Gyoztl?rdid=1aMJtw9YNRZJfAlm
2025-05-22 16:17:47,380 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ (tipo: facebook)
2025-05-22 16:18:03,845 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-22 16:18:06,090 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/SoemPeru/posts/pfbid023SyRCJCWJy3mfy5XUMsPjeiwFe38gGsj49sZJm9ckuD2uo5vHZ9GAWCh3PW2GLkml?rdid=9g14DZuhU7mq60uh (tipo: facebook)
2025-05-22 16:18:15,276 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/SoemPeru/posts/pfbid023SyRCJCWJy3mfy5XUMsPjeiwFe38gGsj49sZJm9ckuD2uo5vHZ9GAWCh3PW2GLkml?rdid=9g14DZuhU7mq60uh
2025-05-22 16:18:17,538 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/decanaradio/posts/pfbid02DnD9Woi5x9YE7RFXhdsbqMELhCuecheDYfZZyKax2CNPtqMij1U1B1gr3x63G7ePl?rdid=OnJio5eiGkW6ZSGE (tipo: facebook)
2025-05-22 16:18:26,754 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/decanaradio/posts/pfbid02DnD9Woi5x9YE7RFXhdsbqMELhCuecheDYfZZyKax2CNPtqMij1U1B1gr3x63G7ePl?rdid=OnJio5eiGkW6ZSGE
2025-05-22 16:18:28,937 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diplomaciaciudadana/posts/pfbid0zABeJhxS8GzRQidm7mR4RzzFVzXGzwG3htiXKS712a6AVBP3ztQhvqgtCSpjGZa3l?rdid=ReVxRKJ9evbT34Px (tipo: facebook)
2025-05-22 16:18:38,138 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diplomaciaciudadana/posts/pfbid0zABeJhxS8GzRQidm7mR4RzzFVzXGzwG3htiXKS712a6AVBP3ztQhvqgtCSpjGZa3l?rdid=ReVxRKJ9evbT34Px
2025-05-22 16:18:40,361 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid021PPZL5gbG9z13hAZLaPhAGULcR3VNipJMfCLH4VDJn8aQ9k7KvgC6yQeAsujyKepl&id=100064089484737&rdid=E1OEnXv4iVTbRGro (tipo: facebook)
2025-05-22 16:18:49,920 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid021PPZL5gbG9z13hAZLaPhAGULcR3VNipJMfCLH4VDJn8aQ9k7KvgC6yQeAsujyKepl&id=100064089484737&rdid=E1OEnXv4iVTbRGro
2025-05-22 16:18:52,116 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/groups/142925476261791/permalink/1713016105919379/?rdid=qlREPYVsMHdGHPMI&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F1EaGLriuJo%2F (tipo: facebook)
2025-05-22 16:19:01,640 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/groups/142925476261791/permalink/1713016105919379/?rdid=qlREPYVsMHdGHPMI&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F1EaGLriuJo%2F
2025-05-22 16:19:03,840 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid06u3kqH3zC7LaCNYixodwUjR7dpgY84Y2HkdEmXaPnNrvy5WSWkCeVUtYzix4ork8l&id=100062993063417&rdid=W7M6TZM9WxOnYRNM (tipo: facebook)
2025-05-22 16:19:13,252 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid06u3kqH3zC7LaCNYixodwUjR7dpgY84Y2HkdEmXaPnNrvy5WSWkCeVUtYzix4ork8l&id=100062993063417&rdid=W7M6TZM9WxOnYRNM
2025-05-22 16:19:15,440 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0reYaJGKSrrrM5sH1sZBTvPsm8im1uhSwyjzjmE433Meqhw21yPtjcWuFU6LZfnb1l&id=100072108931277&rdid=h4uCPExW0ybiyePi (tipo: facebook)
2025-05-22 16:19:24,177 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0reYaJGKSrrrM5sH1sZBTvPsm8im1uhSwyjzjmE433Meqhw21yPtjcWuFU6LZfnb1l&id=100072108931277&rdid=h4uCPExW0ybiyePi
2025-05-22 16:19:26,382 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0gdz3Jt9XeV6CqoTTNaicfRqxFMk6MWSbX8L6CTS62eJjBpGkZjMWC4T2ym5HrUTHl&id=100065273659654&rdid=uFgc1hNpAT2S3DpG (tipo: facebook)
2025-05-22 16:19:35,365 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0gdz3Jt9XeV6CqoTTNaicfRqxFMk6MWSbX8L6CTS62eJjBpGkZjMWC4T2ym5HrUTHl&id=100065273659654&rdid=uFgc1hNpAT2S3DpG
2025-05-22 16:19:37,565 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid0MyvvUrEXMwK9JweVexky3uoJu9xYaG5CrP4wLPi25vuo4i4su39fj8bZe4HjAyAYl?rdid=WQIs6UTvdY7Bm09T (tipo: facebook)
2025-05-22 16:19:46,482 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid0MyvvUrEXMwK9JweVexky3uoJu9xYaG5CrP4wLPi25vuo4i4su39fj8bZe4HjAyAYl?rdid=WQIs6UTvdY7Bm09T
2025-05-22 16:19:48,704 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rR7UDLVAfscSqNLjgQEC4tLSMNvwUxiU7ZJJpmgaDRvitJ25FWysDbgdHfqvTMYsl&id=100066844274567&rdid=YWZjIZXhyCZwg75K (tipo: facebook)
2025-05-22 16:19:58,316 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rR7UDLVAfscSqNLjgQEC4tLSMNvwUxiU7ZJJpmgaDRvitJ25FWysDbgdHfqvTMYsl&id=100066844274567&rdid=YWZjIZXhyCZwg75K
2025-05-22 16:20:00,534 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid02wzvGm2NmrehqThvWApngvHX3QKMNV14n3C4h3Edi4B8bTsEytcqU2gwbCk8B5C8ml?rdid=Wpa8rNsRaAuEefKp (tipo: facebook)
2025-05-22 16:20:10,411 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid02wzvGm2NmrehqThvWApngvHX3QKMNV14n3C4h3Edi4B8bTsEytcqU2gwbCk8B5C8ml?rdid=Wpa8rNsRaAuEefKp
2025-05-22 16:20:12,579 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02MfN5NQfmwvb4W9kQZX93BVp21WugQWTryig2tQerHE7kFb2KrZfwx6NbpxTxpR1sl&id=100063616446639&rdid=vTNwRKdtFe2BIznu (tipo: facebook)
2025-05-22 16:20:21,095 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02MfN5NQfmwvb4W9kQZX93BVp21WugQWTryig2tQerHE7kFb2KrZfwx6NbpxTxpR1sl&id=100063616446639&rdid=vTNwRKdtFe2BIznu
2025-05-22 16:20:23,372 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0e49Y6pejvWGo3v1yMUo98TeE65wKFp9r6VGNfVWyCzZQ4qaxtRvpSwBAo7cJEaFEl&id=61559613183648&rdid=P8fBqLGKDPDzeFaQ (tipo: facebook)
2025-05-22 16:20:33,078 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0e49Y6pejvWGo3v1yMUo98TeE65wKFp9r6VGNfVWyCzZQ4qaxtRvpSwBAo7cJEaFEl&id=61559613183648&rdid=P8fBqLGKDPDzeFaQ
2025-05-22 16:20:35,282 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/PorSuPuertoNoticiasChimbote/posts/pfbid02oVqM6Gq2kMtaW9FPJugkPAwryZLVSvcAdX7LWdJHqei9qU7CBbHTf4aWmPEW1dhal?rdid=dMzYD3xKAFmcOzaM&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F16fnxz3UG6%2F (tipo: facebook)
2025-05-22 16:20:45,142 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/PorSuPuertoNoticiasChimbote/posts/pfbid02oVqM6Gq2kMtaW9FPJugkPAwryZLVSvcAdX7LWdJHqei9qU7CBbHTf4aWmPEW1dhal?rdid=dMzYD3xKAFmcOzaM&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F16fnxz3UG6%2F
2025-05-22 16:20:47,348 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0TzCZwTAWQvxGLNMQ77dhngX98TVYedA6pB4XL5ksMGojoTp6ju7V5YawYRwedsACl&id=100092180403233&rdid=fGJGXkUs6xgloihe (tipo: facebook)
2025-05-22 16:20:55,850 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0TzCZwTAWQvxGLNMQ77dhngX98TVYedA6pB4XL5ksMGojoTp6ju7V5YawYRwedsACl&id=100092180403233&rdid=fGJGXkUs6xgloihe
2025-05-22 16:20:58,097 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/rct.toquepala/posts/pfbid0PnmjyQnAbbFL8AgHwo3q94vSGszTBMhdysJMoKRKWFMmboBRRjMmhPRs3d1cGjekl?rdid=2LhTafC5kKyz68Dm (tipo: facebook)
2025-05-22 16:21:07,870 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/rct.toquepala/posts/pfbid0PnmjyQnAbbFL8AgHwo3q94vSGszTBMhdysJMoKRKWFMmboBRRjMmhPRs3d1cGjekl?rdid=2LhTafC5kKyz68Dm
2025-05-22 16:21:10,057 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455 (tipo: facebook)
2025-05-22 16:21:20,917 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455
2025-05-22 16:21:23,125 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=629540879905471&set=a.115323967993834 (tipo: facebook)
2025-05-22 16:21:31,460 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=629540879905471&set=a.115323967993834
2025-05-22 16:21:33,660 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=1169198698550401&set=a.479540714182873 (tipo: facebook)
2025-05-22 16:21:46,515 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=1169198698550401&set=a.479540714182873
2025-05-22 16:21:48,858 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=9169253469869352&set=a.740299552764828 (tipo: facebook)
2025-05-22 16:21:59,593 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=9169253469869352&set=a.740299552764828
2025-05-22 16:22:01,826 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092 (tipo: facebook)
2025-05-22 16:22:12,408 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-22 16:22:14,616 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=122113948808817608&set=a.122095373924817608 (tipo: facebook)
2025-05-22 16:22:28,127 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=122113948808817608&set=a.122095373924817608
2025-05-22 16:22:30,361 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1237408555057217&set=a.487862856678461 (tipo: facebook)
2025-05-22 16:22:38,985 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1237408555057217&set=a.487862856678461
2025-05-22 16:22:41,293 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=960858089464459&set=a.411299177753689 (tipo: facebook)
2025-05-22 16:22:51,885 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=960858089464459&set=a.411299177753689
2025-05-22 16:22:54,082 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1238539827994284&set=a.679333793914893 (tipo: facebook)
2025-05-22 16:23:04,233 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1238539827994284&set=a.679333793914893
2025-05-22 16:23:06,440 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1280481786925630&set=a.545355187104964 (tipo: facebook)
2025-05-22 16:23:14,863 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1280481786925630&set=a.545355187104964
2025-05-22 16:23:18,634 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=1221031636698408&set=a.449832287151684 (tipo: facebook)
2025-05-22 16:23:32,126 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=1221031636698408&set=a.449832287151684
2025-05-22 16:23:34,341 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=1226748526117403&set=a.533177645474498 (tipo: facebook)
2025-05-22 16:23:46,426 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=1226748526117403&set=a.533177645474498
2025-05-22 16:23:48,659 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=665063799607597&set=a.639907132123264 (tipo: facebook)
2025-05-22 16:24:00,440 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=665063799607597&set=a.639907132123264
2025-05-22 16:24:02,672 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=637559772594411&set=a.102388759444851 (tipo: facebook)
2025-05-22 16:24:19,379 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=637559772594411&set=a.102388759444851
2025-05-22 16:24:21,594 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1114765144012473&set=a.467617325393928 (tipo: facebook)
2025-05-22 16:24:30,733 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1114765144012473&set=a.467617325393928
2025-05-22 16:24:32,938 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid02RhqT532dku4YWMgG9rR7xk6zinb8p88hSDNmufVtcq3B7CPeLxDDsMBzAcJp2YtKl (tipo: facebook)
2025-05-22 16:24:41,767 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid02RhqT532dku4YWMgG9rR7xk6zinb8p88hSDNmufVtcq3B7CPeLxDDsMBzAcJp2YtKl
2025-05-22 16:24:44,014 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid021jouJF85dPagGf9hj1URuvz9sQ3aZHTDMfa21ysQyodLPtTowsiz32GEnAEEW9nel&id=100064089484737 (tipo: facebook)
2025-05-22 16:24:53,635 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid021jouJF85dPagGf9hj1URuvz9sQ3aZHTDMfa21ysQyodLPtTowsiz32GEnAEEW9nel&id=100064089484737
2025-05-22 16:24:55,836 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02N1nRLa7GK2U8dPUq5Usshmcu1QCB1w8aNrm3eEcLJ4GKt33PQta8s9UPTAYqgGu5l&id=100063616446639 (tipo: facebook)
2025-05-22 16:25:06,227 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02N1nRLa7GK2U8dPUq5Usshmcu1QCB1w8aNrm3eEcLJ4GKt33PQta8s9UPTAYqgGu5l&id=100063616446639
2025-05-22 16:25:08,452 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02AcxHRTr6b1iFcHj3ggcnUA5qrrD5ffsJPLHJRqcxKgWtkxqURyGpmQJRZBVgDWBnl&id=100062993063417 (tipo: facebook)
2025-05-22 16:25:16,376 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02AcxHRTr6b1iFcHj3ggcnUA5qrrD5ffsJPLHJRqcxKgWtkxqURyGpmQJRZBVgDWBnl&id=100062993063417
2025-05-22 16:25:18,611 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rX1PhnBjQNstoQsQRsxAmLQZAVqseMC62eZSwBEbx4YNZDZLYabRqpkEkV4vKgYfl&id=100072108931277 (tipo: facebook)
2025-05-22 16:25:26,886 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rX1PhnBjQNstoQsQRsxAmLQZAVqseMC62eZSwBEbx4YNZDZLYabRqpkEkV4vKgYfl&id=100072108931277
2025-05-22 16:25:29,095 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02hn44h1SrKMRtWAV4KJwrcNn3chKoJUJkKhtR9tm13BJ4ZwJtJQsw8Exc7YD525rnl&id=61559613183648 (tipo: facebook)
2025-05-22 16:25:37,626 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02hn44h1SrKMRtWAV4KJwrcNn3chKoJUJkKhtR9tm13BJ4ZwJtJQsw8Exc7YD525rnl&id=61559613183648
2025-05-22 16:25:39,863 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0tKjuFNchYjzV4Sb3Tj8N4esSxErQhbHGhYpvKEvtbnBzjRhSR5vzXbrsx2r16Q74l (tipo: facebook)
2025-05-22 16:25:48,219 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0tKjuFNchYjzV4Sb3Tj8N4esSxErQhbHGhYpvKEvtbnBzjRhSR5vzXbrsx2r16Q74l
2025-05-22 16:25:50,460 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/15kkoxxenF/ (tipo: facebook)
2025-05-22 16:25:59,741 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/15kkoxxenF/
2025-05-22 16:26:01,945 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/18i7auJett/ (tipo: facebook)
2025-05-22 16:26:12,846 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/18i7auJett/
2025-05-22 16:26:15,114 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16NS3V5NCt/ (tipo: facebook)
2025-05-22 16:26:25,310 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16NS3V5NCt/
2025-05-22 16:26:27,532 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/larepublicape/posts/pfbid0uqz2JPrmET9KxDugQG5sz6fQ7GiMgk4NmoNzGAXjaCvkY8EST5CAiDYgM8eWWkf4l?rdid=eENdOaqDW0ifabAR (tipo: facebook)
2025-05-22 16:26:36,273 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/larepublicape/posts/pfbid0uqz2JPrmET9KxDugQG5sz6fQ7GiMgk4NmoNzGAXjaCvkY8EST5CAiDYgM8eWWkf4l?rdid=eENdOaqDW0ifabAR
2025-05-22 16:26:38,992 - content_deduplicator - INFO - Progreso: 40/103 URLs procesadas en 552.32 seg.
2025-05-22 16:26:39,000 - content_deduplicator - INFO - Procesando 18 URLs del dominio imacorpplataforma.com
2025-05-22 16:26:39,013 - selenium_extractor - INFO - Extrayendo contenido de URL: https://imacorpplataforma.com/agua-y-saneamiento/exitosa-rotura-de-tuberia-genera-aniego-en-surco-18-04-2025/ (tipo: other)
2025-05-22 16:26:52,436 - selenium_extractor - INFO - Extrayendo contenido de URL: https://imacorpplataforma.com/agua-y-saneamiento/exitosa-piura-piden-transparencia-en-proyecto-de-agua-potable-y-alcantarillado-20-04-2025/ (tipo: other)
2025-05-22 16:27:05,146 - selenium_extractor - INFO - Extrayendo contenido de URL: https://imacorpplataforma.com/agua-y-saneamiento/policia-motorizada-cae-a-forado-creado-por-sedapal-en-el-callao-c5-24-horas-domingo-20-04-2025/ (tipo: other)
2025-05-22 16:27:29,488 - selenium_extractor - INFO - Extrayendo contenido de URL: https://imacorpplataforma.com/agua-y-saneamiento/panorama-el-via-crucis-del-departamento-propio-los-estafados-de-villamar-20-04-2025/ (tipo: other)
2025-05-22 16:27:42,685 - content_deduplicator - INFO - Progreso: 60/103 URLs procesadas en 616.02 seg.
2025-05-22 16:27:42,686 - content_deduplicator - INFO - Procesando 11 URLs del dominio elperuano.pe
2025-05-22 16:27:42,686 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391832-1 (tipo: news)
2025-05-22 16:27:56,546 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391899-1 (tipo: news)
2025-05-22 16:28:09,230 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391957-1 (tipo: news)
2025-05-22 16:28:22,092 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391302-1 (tipo: news)
2025-05-22 16:28:34,848 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391917-1 (tipo: news)
2025-05-22 16:28:47,463 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391919-4 (tipo: news)
2025-05-22 16:29:00,282 - selenium_extractor - INFO - Extrayendo contenido de URL: https://epdoc2.elperuano.pe/EpPo/VistaNLSE.asp?Referencias=MjM5MTk5Mi0xMjAyNTA0MTk= (tipo: news)
2025-05-22 16:29:07,450 - selenium_extractor - INFO - Extrayendo contenido de URL: https://elperuano.pe/noticia/268614-cerrar-deficit-hidrico-demandara-s-138000-millones (tipo: news)
2025-05-22 16:29:23,307 - content_deduplicator - INFO - Procesando 3 URLs del dominio sharepoint.com
2025-05-22 16:29:23,307 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe.sharepoint.com/:v:/s/ActividadesyEventos2021/EbzjkA-uGbtKpGIVD983W-oBtDFbX4IYRK2XAPRMLnBFiw?e=YVozaO (tipo: twitter)
2025-05-22 16:29:34,256 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/:i:/g/personal/esosa_sunass_gob_pe/ERqcborhTGBCthpiQ2XbBf8BoLKfRPR81n5luqftb2drLg?e=yZe4SH (tipo: twitter)
2025-05-22 16:29:45,987 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/:i:/g/personal/esosa_sunass_gob_pe/ER10yKXiAGFDk3Y3HVPDDjcBemKwffCNIdO1u8xcwuWm3w?e=bIAHlN (tipo: twitter)
2025-05-22 16:29:57,356 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-05-22 16:29:57,357 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/la-libertad-sedalib-tiene-nivel-de-inversion-critico-noticia/ (tipo: news)
2025-05-22 16:30:13,218 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/piura/piura-culminan-trabajos-de-mantenimiento-del-alcantarillado-en-urb-las-casuarinas-noticia/ (tipo: news)
2025-05-22 16:30:29,833 - content_deduplicator - INFO - Procesando 2 URLs del dominio radiosanmartin.pe
2025-05-22 16:30:29,834 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radiosanmartin.pe/2025/04/14/el-89-de-usuarios-de-sedapar-desconoce-cuanta-agua-potable-consume-al-mes/ (tipo: other)
2025-05-22 16:30:49,527 - content_deduplicator - INFO - Procesando 2 URLs del dominio infobae.com
2025-05-22 16:30:49,527 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.infobae.com/peru/2025/04/19/sedapal-defiende-la-calidad-del-agua-en-lima-y-callao-tras-alerta-de-contaminacion-en-informe-de-digesa/ (tipo: news)
2025-05-22 16:31:06,338 - content_deduplicator - INFO - Procesando 2 URLs del dominio gob.pe
2025-05-22 16:31:06,339 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/noticias/pleno-aprueba-dictamen-para-garantizar-acceso-de-emergencia-al-agua-potable-en-zonas-vulnerables/ (tipo: other)
2025-05-22 16:31:31,018 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/damos-cuenta/aprueban-proyecto-de-la-congresista-norma-yarrow-que-garantiza-el-acceso-al-agua-potable-de-emergencia-en-zonas-vulnerables/ (tipo: other)
2025-05-22 16:31:44,115 - content_deduplicator - INFO - Análisis completado en 857.45 segundos
2025-05-22 16:31:44,115 - content_deduplicator - INFO - URLs totales: 103, Únicas: 54, En grupos: 36
2025-05-22 16:31:44,116 - content_deduplicator - INFO - Se realizaron 448 comparaciones (0.5/seg), evitando 0
2025-05-22 16:31:44,116 - content_deduplicator - INFO - Grupos de duplicados encontrados: 4
2025-05-22 16:31:44,118 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:31:44,118 - main_orchestrator - INFO - Análisis de duplicados completado: 37 URLs duplicadas filtradas
2025-05-22 16:31:44,118 - main_orchestrator - INFO - URLs después de filtrar duplicados: 66
2025-05-22 16:31:44,119 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:31:44,119 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 16:31:44,119 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 16:31:44,119 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 16:31:44,122 - lib.url_manager - INFO - Clasificación de 66 URLs:
2025-05-22 16:31:44,123 - lib.url_manager - INFO -  - HTML: 36
2025-05-22 16:31:44,123 - lib.url_manager - INFO -  - IMAGES: 14
2025-05-22 16:31:44,123 - lib.url_manager - INFO -  - SOCIAL: 16
2025-05-22 16:31:44,126 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22042025_unprocessed.json
2025-05-22 16:31:44,128 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 16:31:44,129 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 16:31:44,130 - lib.image_processor - INFO - Iniciando descarga paralela de 14 imágenes para la fecha 22042025...
2025-05-22 16:31:44,130 - lib.image_processor - WARNING - URL duplicada detectada: https://imacorpplataforma.com/wp-content/uploads/2025/04/HILDEBRANDT-EN-SUS-TRECE-30-31-MAL-AGUA-18-04-2025-scaled.jpg. Primera ocurrencia: #3, segunda: #4
2025-05-22 16:31:44,150 - lib.image_processor - INFO - Omitiendo URL duplicada #4: https://imacorpplataforma.com/wp-content/uploads/2025/04/HILDEBRANDT-EN-SUS-TRECE-30-31-MAL-AGUA-18-04-2025-scaled.jpg
2025-05-22 16:31:45,065 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/20-04-2025-RPP-CIUDADANOS-DE-LAMBAYEQUE-REPORTAN-FALTA-DE-AGUA-DEBIDO-A-FALTA-DE-CISTERNAS.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-22 16:31:45,083 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/17-04-2025-RPP-ENTREVISTA-A-GABRIELA-CORIMANYA-SOBRE-COMO-AHORRAR-EL-AGUA-QUE-LLEGA-A-NUESTRAS-CASAS-ROTATIVA-DEL-CAMPO.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-22 16:31:54,215 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_9bbb0695_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (361100 bytes)
2025-05-22 16:31:54,665 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_2dfc1883_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (441187 bytes)
2025-05-22 16:31:58,796 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_95ae401c_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (271113 bytes)
2025-05-22 16:32:00,939 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_1f526d7d_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (466784 bytes)
2025-05-22 16:32:04,538 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_4ab090c1_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (887403 bytes)
2025-05-22 16:32:04,942 - lib.image_processor - INFO - Imagen 13 guardada como 'img_13_d71ed522_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (439104 bytes)
2025-05-22 16:32:09,378 - lib.image_processor - INFO - Imagen 14 guardada como 'img_14_6b7e17b8_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (562472 bytes)
2025-05-22 16:32:11,383 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_49a4d12a_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1059563 bytes)
2025-05-22 16:32:16,189 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_1301b08d_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1394922 bytes)
2025-05-22 16:32:17,658 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_dfac0f97_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1320851 bytes)
2025-05-22 16:32:18,026 - lib.image_processor - INFO - Progreso descarga imágenes: 10/14 en 33.90 seg.
2025-05-22 16:32:18,258 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_ba0f95b8_22042025.mp3' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (2551484 bytes)
2025-05-22 16:32:18,969 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/04/20-04-2025-RPP-CIUDADANOS-DE-LAMBAYEQUE-REPORTAN-FALTA-DE-AGUA-DEBIDO-A-FALTA-DE-CISTERNAS.mp3: Content type 'audio/mpeg' is not an image
2025-05-22 16:32:20,045 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_e2ae2485_22042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (1245561 bytes)
2025-05-22 16:32:23,498 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_6a69548f_22042025.mp3' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025 (3223249 bytes)
2025-05-22 16:32:23,723 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/04/17-04-2025-RPP-ENTREVISTA-A-GABRIELA-CORIMANYA-SOBRE-COMO-AHORRAR-EL-AGUA-QUE-LLEGA-A-NUESTRAS-CASAS-ROTATIVA-DEL-CAMPO.mp3: Content type 'audio/mpeg' is not an image
2025-05-22 16:32:23,728 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22042025.json
2025-05-22 16:32:23,729 - lib.image_processor - INFO - Descarga de imágenes completada para 13/14 URLs en 39.60 segundos.
2025-05-22 16:32:23,729 - main_orchestrator - INFO - Descarga de imágenes completada en 39.60 seg.
2025-05-22 16:32:23,729 - lib.history_tracker - INFO - Añadidas 13 nuevas URLs al historial.
2025-05-22 16:32:23,731 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 13 URLs.
2025-05-22 16:32:23,731 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 16:32:23,732 - lib.html_scraper - INFO - Iniciando scraping paralelo de 36 URLs...
2025-05-22 16:32:23,764 - lib.cache_utils - WARNING - Error al decodificar JSON de caché: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\1be1ef500524520cbd5b7f1b9e2d1223.json. Se tratará como MISS.
2025-05-22 16:32:23,766 - lib.cache_utils - WARNING - Error al decodificar JSON de caché: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\1be1ef500524520cbd5b7f1b9e2d1223.json. Se tratará como MISS.
2025-05-22 16:32:26,616 - lib.html_scraper - WARNING - Error HTTP 404 scrapeando https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento: 404 Client Error: Not Found for url: https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento
2025-05-22 16:32:26,616 - lib.html_scraper - WARNING - Error procesando https://diarioactualidad.net/contenido/441/peru-necesita-s-138000-millones-para-cerrar-brecha-en-agua-y-saneamiento: HTTP Error: 404
2025-05-22 16:32:30,593 - lib.html_scraper - INFO - Progreso: 20/36 URLs procesadas en 6.86 seg.
2025-05-22 16:32:56,659 - lib.html_scraper - INFO - Contenido no es HTML para https://epdoc2.elperuano.pe/EpPo/VistaNLSE.asp?Referencias=MjM5MTk5Mi0xMjAyNTA0MTk= (application/pdf; charset=utf-8). Omitiendo body.
2025-05-22 16:33:00,186 - lib.html_scraper - INFO - Contenido no es HTML para https://epdoc2.elperuano.pe/EpPo/VistaNLSE.asp?Referencias=MjM5MTk5Mi0xMjAyNTA0MTk= (application/pdf; charset=utf-8). Omitiendo body.
2025-05-22 16:33:01,139 - lib.html_scraper - INFO - Progreso: 36/36 URLs procesadas en 37.41 seg.
2025-05-22 16:33:01,148 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-22 16:33:01,148 - lib.html_scraper - INFO - Scraping completado para 36/36 URLs en 37.42 segundos.
2025-05-22 16:33:01,149 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-22 16:33:01,150 - main_orchestrator - INFO - Scraping HTML completado en 37.42 seg.
2025-05-22 16:33:01,150 - lib.history_tracker - INFO - Añadidas 31 nuevas URLs al historial.
2025-05-22 16:33:01,152 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 44 URLs.
2025-05-22 16:33:01,152 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 16:33:03,054 - lib.api_client - ERROR - Error procesando tmp81hsg212.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 58
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 58
}
]
2025-05-22 16:33:03,211 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 58
}
]
2025-05-22 16:33:03,212 - lib.image_processor - INFO - Procesando 13 imágenes con API (batch_size=3, pausa=60s)
2025-05-22 16:33:03,212 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-22 16:33:03,212 - lib.image_processor - INFO - Procesando imagen con API: img_11_9bbb0695_22042025.jpg
2025-05-22 16:33:03,358 - lib.image_processor - INFO - Imagen img_11_9bbb0695_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:33:03,375 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_11_9bbb0695_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:33:03,376 - lib.image_processor - WARNING - Error procesando imagen img_11_9bbb0695_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-22 16:33:03,900 - lib.image_processor - INFO - Procesando imagen con API: img_5_2dfc1883_22042025.jpg
2025-05-22 16:33:03,971 - lib.image_processor - INFO - Imagen img_5_2dfc1883_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:33:03,989 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_5_2dfc1883_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:33:03,989 - lib.image_processor - WARNING - Error procesando imagen img_5_2dfc1883_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
}
]
2025-05-22 16:33:04,844 - lib.image_processor - INFO - Procesando imagen con API: img_12_95ae401c_22042025.jpg
2025-05-22 16:33:04,958 - lib.image_processor - INFO - Imagen img_12_95ae401c_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:33:04,980 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_12_95ae401c_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:33:04,981 - lib.image_processor - WARNING - Error procesando imagen img_12_95ae401c_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-05-22 16:33:05,602 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-22 16:34:05,603 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-22 16:34:05,603 - lib.image_processor - INFO - Procesando imagen con API: img_6_1f526d7d_22042025.jpg
2025-05-22 16:34:05,725 - lib.image_processor - INFO - Imagen img_6_1f526d7d_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:34:05,743 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_6_1f526d7d_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:34:05,744 - lib.image_processor - WARNING - Error procesando imagen img_6_1f526d7d_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 46
}
]
2025-05-22 16:34:06,433 - lib.image_processor - INFO - Procesando imagen con API: img_2_4ab090c1_22042025.jpg
2025-05-22 16:34:06,559 - lib.image_processor - INFO - Imagen img_2_4ab090c1_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:34:06,573 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_2_4ab090c1_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:34:06,574 - lib.image_processor - WARNING - Error procesando imagen img_2_4ab090c1_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 56
}
]
2025-05-22 16:34:07,200 - lib.image_processor - INFO - Procesando imagen con API: img_13_d71ed522_22042025.jpg
2025-05-22 16:34:07,275 - lib.image_processor - INFO - Imagen img_13_d71ed522_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:34:07,286 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_13_d71ed522_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:34:07,287 - lib.image_processor - WARNING - Error procesando imagen img_13_d71ed522_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 35
}
]
2025-05-22 16:34:08,176 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-22 16:35:08,178 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-22 16:35:08,179 - lib.image_processor - INFO - Procesando imagen con API: img_14_6b7e17b8_22042025.jpg
2025-05-22 16:35:08,285 - lib.image_processor - INFO - Imagen img_14_6b7e17b8_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:35:08,305 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_14_6b7e17b8_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:35:08,306 - lib.image_processor - WARNING - Error procesando imagen img_14_6b7e17b8_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 40
}
]
2025-05-22 16:35:08,857 - lib.image_processor - INFO - Procesando imagen con API: img_8_49a4d12a_22042025.jpg
2025-05-22 16:35:09,036 - lib.image_processor - INFO - Imagen img_8_49a4d12a_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:35:09,051 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_8_49a4d12a_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:35:09,052 - lib.image_processor - WARNING - Error procesando imagen img_8_49a4d12a_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 47
}
]
2025-05-22 16:35:09,751 - lib.image_processor - INFO - Procesando imagen con API: img_3_1301b08d_22042025.jpg
2025-05-22 16:35:09,933 - lib.image_processor - INFO - Imagen img_3_1301b08d_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:35:09,950 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_3_1301b08d_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:35:09,951 - lib.image_processor - WARNING - Error procesando imagen img_3_1301b08d_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-22 16:35:10,563 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-22 16:36:10,564 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-05-22 16:36:10,564 - lib.image_processor - INFO - Procesando imagen con API: img_9_dfac0f97_22042025.jpg
2025-05-22 16:36:10,719 - lib.image_processor - INFO - Imagen img_9_dfac0f97_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:36:10,737 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_9_dfac0f97_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:36:10,738 - lib.image_processor - WARNING - Error procesando imagen img_9_dfac0f97_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 5
}
]
2025-05-22 16:36:11,421 - lib.image_processor - INFO - Procesando imagen con API: img_7_ba0f95b8_22042025.mp3
2025-05-22 16:36:11,570 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\img_7_ba0f95b8_22042025.mp3 (formato detectado: None)
2025-05-22 16:36:11,571 - lib.image_processor - WARNING - Error procesando imagen img_7_ba0f95b8_22042025.mp3: File is not a valid image
2025-05-22 16:36:12,208 - lib.image_processor - INFO - Procesando imagen con API: img_10_e2ae2485_22042025.jpg
2025-05-22 16:36:12,391 - lib.image_processor - INFO - Imagen img_10_e2ae2485_22042025.jpg visualmente similar a otra ya procesada
2025-05-22 16:36:12,413 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_10_e2ae2485_22042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-22 16:36:12,415 - lib.image_processor - WARNING - Error procesando imagen img_10_e2ae2485_22042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 26
}
]
2025-05-22 16:36:13,269 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-22 16:37:13,270 - lib.image_processor - INFO - Procesando batch 5 (1 imágenes)
2025-05-22 16:37:13,270 - lib.image_processor - INFO - Procesando imagen con API: img_1_6a69548f_22042025.mp3
2025-05-22 16:37:13,286 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\img_1_6a69548f_22042025.mp3 (formato detectado: None)
2025-05-22 16:37:13,287 - lib.image_processor - WARNING - Error procesando imagen img_1_6a69548f_22042025.mp3: File is not a valid image
2025-05-22 16:37:13,945 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-22 16:37:13,945 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-22 16:37:13,945 - lib.image_processor - INFO - Procesamiento API completado para 0/13 imágenes en 250.73 segundos.
2025-05-22 16:37:13,946 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 252.79 seg.
2025-05-22 16:37:13,946 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 16:37:13,946 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 16:37:13,966 - main_orchestrator - INFO - Encontradas 15 URLs de Facebook para procesar
2025-05-22 16:37:13,967 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025
2025-05-22 16:37:13,968 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-22 16:37:13,968 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 15 URLs de Facebook para la fecha 22042025...
2025-05-22 16:37:13,969 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/agenciandina/posts/pfbid0GoGrkSAmt6xy7bqZVtLhDRpmyYXpe9CQ8dS641ippmAcjbMuQtkK4o6yd75Gyoztl?rdid=1aMJtw9YNRZJfAlm
2025-05-22 16:37:13,994 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-22 16:37:13,994 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-22 16:37:13,996 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/SoemPeru/posts/pfbid023SyRCJCWJy3mfy5XUMsPjeiwFe38gGsj49sZJm9ckuD2uo5vHZ9GAWCh3PW2GLkml?rdid=9g14DZuhU7mq60uh
2025-05-22 16:37:13,998 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/decanaradio/posts/pfbid02DnD9Woi5x9YE7RFXhdsbqMELhCuecheDYfZZyKax2CNPtqMij1U1B1gr3x63G7ePl?rdid=OnJio5eiGkW6ZSGE
2025-05-22 16:37:42,350 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-22 16:37:43,232 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-22 16:37:46,654 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/diplomaciaciudadana/posts/pfbid0zABeJhxS8GzRQidm7mR4RzzFVzXGzwG3htiXKS712a6AVBP3ztQhvqgtCSpjGZa3l?rdid=ReVxRKJ9evbT34Px
2025-05-22 16:37:46,739 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/permalink.php?story_fbid=pfbid021PPZL5gbG9z13hAZLaPhAGULcR3VNipJMfCLH4VDJn8aQ9k7KvgC6yQeAsujyKepl&id=100064089484737&rdid=E1OEnXv4iVTbRGro
2025-05-22 16:37:47,536 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-4.pdf
2025-05-22 16:37:50,796 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-22 16:37:52,784 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/PorSuPuertoNoticiasChimbote/posts/pfbid02oVqM6Gq2kMtaW9FPJugkPAwryZLVSvcAdX7LWdJHqei9qU7CBbHTf4aWmPEW1dhal?rdid=dMzYD3xKAFmcOzaM&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F16fnxz3UG6%2F
2025-05-22 16:37:54,739 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/rct.toquepala/posts/pfbid0PnmjyQnAbbFL8AgHwo3q94vSGszTBMhdysJMoKRKWFMmboBRRjMmhPRs3d1cGjekl?rdid=2LhTafC5kKyz68Dm
2025-05-22 16:37:59,814 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-5.pdf
2025-05-22 16:38:03,110 - lib.facebook_processor - INFO - Progreso Facebook: 5/15 en 49.14 seg.
2025-05-22 16:38:03,126 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455
2025-05-22 16:38:22,784 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-6.pdf
2025-05-22 16:38:26,521 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/photo?fbid=1242232614579107&set=a.419399216862455
2025-05-22 16:38:28,776 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-7.pdf
2025-05-22 16:38:33,240 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/v/15kkoxxenF/
2025-05-22 16:38:33,519 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-8.pdf
2025-05-22 16:38:37,877 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/v/18i7auJett/
2025-05-22 16:38:47,898 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-9.pdf
2025-05-22 16:38:49,385 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-10.pdf
2025-05-22 16:38:51,953 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/16NS3V5NCt/
2025-05-22 16:38:52,947 - lib.facebook_processor - INFO - Progreso Facebook: 10/15 en 98.98 seg.
2025-05-22 16:38:53,017 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/larepublicape/posts/pfbid0uqz2JPrmET9KxDugQG5sz6fQ7GiMgk4NmoNzGAXjaCvkY8EST5CAiDYgM8eWWkf4l?rdid=eENdOaqDW0ifabAR
2025-05-22 16:39:03,397 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-11.pdf
2025-05-22 16:39:05,422 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-12.pdf
2025-05-22 16:39:25,057 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-13.pdf
2025-05-22 16:39:25,566 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-14.pdf
2025-05-22 16:39:26,747 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-15.pdf
2025-05-22 16:39:31,985 - lib.facebook_processor - INFO - Progreso Facebook: 15/15 en 138.02 seg.
2025-05-22 16:39:31,990 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-22 16:39:31,990 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 13/15 exitosos en 138.02 segundos.
2025-05-22 16:39:31,991 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 138.02 seg.
2025-05-22 16:39:31,991 - lib.history_tracker - INFO - Añadidas 13 nuevas URLs al historial.
2025-05-22 16:39:31,993 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 57 URLs.
2025-05-22 16:39:31,993 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 16:39:32,810 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-22 16:39:33,216 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-4.pdf
2025-05-22 16:39:33,820 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-22 16:39:34,456 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-5.pdf
2025-05-22 16:39:34,573 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-6.pdf
2025-05-22 16:39:34,728 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-7.pdf
2025-05-22 16:39:35,165 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-8.pdf
2025-05-22 16:39:35,708 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-9.pdf
2025-05-22 16:39:35,792 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-11.pdf
2025-05-22 16:39:36,127 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-12.pdf
2025-05-22 16:39:36,202 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-13.pdf
2025-05-22 16:39:37,013 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-14.pdf
2025-05-22 16:39:38,473 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-15.pdf
2025-05-22 16:39:38,473 - lib.facebook_processor - INFO - Texto extraído de 13 PDFs de Facebook
2025-05-22 16:39:38,474 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 6.48 seg.
2025-05-22 16:39:38,474 - main_orchestrator - INFO - Texto extraído de 13 PDFs de Facebook
2025-05-22 16:39:38,476 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:39:38,476 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:39:38,476 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 16:39:38,478 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:39:38,478 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:39:38,478 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:39:38.477118', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 66, 'history_total_urls': 57, 'categories': {'html': 36, 'images': 14, 'social': 16}, 'html_processing': {'attempted': 36, 'processed': 31, 'successful': 30, 'relevant (>=0.3)': 22, 'average_relevance': 0.52}, 'image_processing': {'attempted_download': 14, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 15, 'successful': 13, 'extracted_texts': 13}, 'timings_seconds': {'pdf_extraction': 0.51, 'pdf_text_extraction': 6.48, 'image_download': 39.6, 'html_scraping': 37.42, 'image_api': 252.79, 'facebook_processing': 138.02, 'facebook_text_extraction': 6.48, 'stats_consolidation': 0.0}}
2025-05-22 16:39:38,478 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 16:39:38,479 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 16:39:38,501 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:39:38,512 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:39:38,512 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:39:38,514 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 16:39:38,545 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 16:39:38,545 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 16:39:38,546 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 16:39:38,546 - semantic_cleaner - INFO - Extraídos 29 textos de HTML
2025-05-22 16:39:38,546 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 16:39:38,547 - semantic_cleaner - INFO - Extraídos 13 textos de Facebook
2025-05-22 16:39:45,761 - semantic_cleaner - INFO - Se identificaron 50 grupos de textos similares
2025-05-22 16:39:45,761 - semantic_cleaner - INFO - Se seleccionaron 50 textos representativos
2025-05-22 16:39:45,762 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 16:39:45,762 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:39:45,767 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:39:45,767 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:39:45,783 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:39:45,785 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:39:45,785 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:39:45,786 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:39:38.477118', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 66, 'history_total_urls': 57, 'categories': {'html': 36, 'images': 14, 'social': 16}, 'html_processing': {'attempted': 36, 'processed': 31, 'successful': 30, 'relevant (>=0.3)': 22, 'average_relevance': 0.52}, 'image_processing': {'attempted_download': 14, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 0}, 'facebook_processing': {'attempted': 15, 'successful': 13, 'extracted_texts': 13}, 'timings_seconds': {'pdf_extraction': 0.51, 'pdf_text_extraction': 6.48, 'image_download': 39.6, 'html_scraping': 37.42, 'image_api': 252.79, 'facebook_processing': 138.02, 'facebook_text_extraction': 6.48, 'stats_consolidation': 0.0, 'semantic_cleaning': 7.27}}
2025-05-22 16:39:45,786 - main_orchestrator - INFO - Limpieza semántica completada en 7.27 seg.
2025-05-22 16:39:45,786 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-22 16:39:45,787 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-22 16:39:45,787 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:39:45,815 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/RADIOTACNA104.3FM/posts/pfbid02yz2TNAb2gA7zXCCsuXxcnXknTvK3AhJptqtGP1C2uD1gxYNGqxME8NFGVf2n4EbJl?rdid=bhe3XVHyig6ZXpOJ
2025-05-22 16:39:45,815 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-22 16:39:45,834 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:39:45,834 - facebook_extractor_fix - INFO - Se han añadido 13 textos de Facebook al archivo limpio
2025-05-22 16:39:45,834 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-22 16:39:45,835 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 16:39:45,835 - main_orchestrator - INFO - ==================================================
2025-05-22 16:39:45,835 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1339.80 segundos.
2025-05-22 16:39:45,836 - main_orchestrator - INFO - ==================================================
2025-05-22 16:41:30,710 - main_orchestrator - INFO - ==================================================
2025-05-22 16:41:30,710 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-22 16:41:30,710 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-22 16:41:30,711 - main_orchestrator - INFO - ==================================================
2025-05-22 16:41:30,713 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-22 16:41:30,714 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-22 16:41:30,715 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-22 16:41:30,716 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 57 URLs.
2025-05-22 16:41:30,716 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-22 16:41:30,718 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-22 16:41:30,718 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-22 16:41:30,718 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-22 16:41:30,718 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-22 16:41:30,740 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:41:31,268 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-22 16:41:31,268 - main_orchestrator - INFO - PDF procesado en 0.55 seg. Enlaces encontrados: 103
2025-05-22 16:41:31,272 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-22 16:41:31,273 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-22 16:41:31,274 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-22 16:41:31,379 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:41:31,380 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-22 16:41:31,380 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:41:31,380 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-22 16:41:31,381 - lib.history_tracker - INFO - Filtradas 65 URLs ya procesadas del lote actual.
2025-05-22 16:41:31,381 - main_orchestrator - INFO - URLs nuevas para procesar: 38 (de 103 total)
2025-05-22 16:41:31,381 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-22 16:41:31,382 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-22 16:41:31,399 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-22 16:41:31,399 - content_deduplicator - INFO - Analizando 38 URLs para encontrar duplicados...
2025-05-22 16:41:31,400 - content_deduplicator - INFO - Procesando 34 URLs del dominio facebook.com
2025-05-22 16:41:31,423 - content_deduplicator - INFO - Realizadas 50 comparaciones (0 evitadas)
2025-05-22 16:41:31,424 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-05-22 16:41:31,425 - content_deduplicator - INFO - URLs totales: 38, Únicas: 5, En grupos: 30
2025-05-22 16:41:31,425 - content_deduplicator - INFO - Se realizaron 57 comparaciones (2316.0/seg), evitando 0
2025-05-22 16:41:31,425 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-22 16:41:31,426 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:41:31,427 - main_orchestrator - INFO - Análisis de duplicados completado: 31 URLs duplicadas filtradas
2025-05-22 16:41:31,427 - main_orchestrator - INFO - URLs después de filtrar duplicados: 7
2025-05-22 16:41:31,428 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-22 16:41:31,428 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-22 16:41:31,428 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-22 16:41:31,428 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-22 16:41:31,429 - lib.url_manager - INFO - Clasificación de 7 URLs:
2025-05-22 16:41:31,429 - lib.url_manager - INFO -  - HTML: 3
2025-05-22 16:41:31,429 - lib.url_manager - INFO -  - SOCIAL: 4
2025-05-22 16:41:31,431 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-22 16:41:31,431 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-22 16:41:31,431 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-22 16:41:31,431 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-22 16:41:31,432 - lib.html_scraper - INFO - Iniciando scraping paralelo de 3 URLs...
2025-05-22 16:41:44,955 - lib.html_scraper - INFO - Progreso: 3/3 URLs procesadas en 13.52 seg.
2025-05-22 16:41:44,958 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-22 16:41:44,959 - lib.html_scraper - INFO - Scraping completado para 3/3 URLs en 13.53 segundos.
2025-05-22 16:41:44,959 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-22 16:41:44,959 - main_orchestrator - INFO - Scraping HTML completado en 13.53 seg.
2025-05-22 16:41:44,959 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-05-22 16:41:44,960 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 60 URLs.
2025-05-22 16:41:44,960 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-22 16:41:44,961 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-22 16:41:44,961 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-22 16:41:44,962 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-22 16:41:44,982 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-05-22 16:41:44,982 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-22 16:41:44,983 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 22042025...
2025-05-22 16:41:45,000 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid0TzCZwTAWQvxGLNMQ77dhngX98TVYedA6pB4XL5ksMGojoTp6ju7V5YawYRwedsACl&id=100092180403233&rdid=fGJGXkUs6xgloihe
2025-05-22 16:41:45,000 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/groups/142925476261791/permalink/1713016105919379/?rdid=qlREPYVsMHdGHPMI&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2Fp%2F1EaGLriuJo%2F
2025-05-22 16:41:45,008 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo?fbid=629540879905471&set=a.115323967993834
2025-05-22 16:42:10,861 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-22 16:42:13,544 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-22 16:42:15,576 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-22 16:42:20,312 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 35.33 seg.
2025-05-22 16:42:20,314 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-22 16:42:20,314 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 3/3 exitosos en 35.33 segundos.
2025-05-22 16:42:20,315 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 35.33 seg.
2025-05-22 16:42:20,315 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-05-22 16:42:20,316 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 63 URLs.
2025-05-22 16:42:20,317 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-22 16:42:20,890 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-22 16:42:21,753 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-22 16:42:21,852 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-22 16:42:21,853 - lib.facebook_processor - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-22 16:42:21,853 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.54 seg.
2025-05-22 16:42:21,853 - main_orchestrator - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-22 16:42:21,854 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:42:21,854 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:42:21,855 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-22 16:42:21,856 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:42:21,857 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:42:21,857 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:42:21.855702', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 7, 'history_total_urls': 63, 'categories': {'html': 3, 'social': 4}, 'html_processing': {'attempted': 3, 'processed': 3, 'successful': 3, 'relevant (>=0.3)': 0, 'average_relevance': 0.13333333333333333}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.55, 'pdf_text_extraction': 1.54, 'image_download': 0, 'html_scraping': 13.53, 'image_api': 0, 'facebook_processing': 35.33, 'facebook_text_extraction': 1.54, 'stats_consolidation': 0.0}}
2025-05-22 16:42:21,858 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-22 16:42:21,858 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-22 16:42:21,880 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-22 16:42:21,899 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-22 16:42:21,903 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:42:21,903 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-22 16:42:21,904 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-22 16:42:21,932 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-22 16:42:21,933 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-22 16:42:21,933 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-22 16:42:21,934 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-22 16:42:21,934 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-22 16:42:21,934 - semantic_cleaner - INFO - Extraídos 3 textos de Facebook
2025-05-22 16:42:22,626 - semantic_cleaner - INFO - Se identificaron 14 grupos de textos similares
2025-05-22 16:42:22,627 - semantic_cleaner - INFO - Se seleccionaron 14 textos representativos
2025-05-22 16:42:22,627 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-22 16:42:22,627 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:42:22,630 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-22 16:42:22,630 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:42:22,633 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:42:22,634 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:42:22,635 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-22 16:42:22,635 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-22T16:42:21.855702', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 7, 'history_total_urls': 63, 'categories': {'html': 3, 'social': 4}, 'html_processing': {'attempted': 3, 'processed': 3, 'successful': 3, 'relevant (>=0.3)': 0, 'average_relevance': 0.13333333333333333}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.55, 'pdf_text_extraction': 1.54, 'image_download': 0, 'html_scraping': 13.53, 'image_api': 0, 'facebook_processing': 35.33, 'facebook_text_extraction': 1.54, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.73}}
2025-05-22 16:42:22,635 - main_orchestrator - INFO - Limpieza semántica completada en 0.73 seg.
2025-05-22 16:42:22,636 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-22 16:42:22,636 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-22 16:42:22,636 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-22 16:42:22,654 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0TzCZwTAWQvxGLNMQ77dhngX98TVYedA6pB4XL5ksMGojoTp6ju7V5YawYRwedsACl&id=100092180403233&rdid=fGJGXkUs6xgloihe
2025-05-22 16:42:22,655 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-22 16:42:22,669 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-22 16:42:22,669 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-05-22 16:42:22,670 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-22 16:42:22,670 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-22 16:42:22,670 - main_orchestrator - INFO - ==================================================
2025-05-22 16:42:22,670 - main_orchestrator - INFO - PIPELINE FINALIZADO en 51.96 segundos.
2025-05-22 16:42:22,671 - main_orchestrator - INFO - ==================================================
2025-05-23 09:26:56,111 - main_orchestrator - INFO - ==================================================
2025-05-23 09:26:56,112 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 09:26:56,112 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 09:26:56,113 - main_orchestrator - INFO - ==================================================
2025-05-23 09:26:56,126 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 09:26:56,128 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 09:26:56,129 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 09:26:56,130 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 63 URLs.
2025-05-23 09:26:56,130 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 09:26:56,131 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 09:26:56,131 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 09:26:56,132 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 09:26:56,132 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 09:26:56,132 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 09:26:56,179 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 09:26:56,664 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 09:26:56,664 - main_orchestrator - INFO - PDF procesado en 0.53 seg. Enlaces encontrados: 103
2025-05-23 09:26:56,679 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 09:26:56,680 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 09:26:56,681 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 09:26:56,779 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 09:26:56,780 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 09:26:56,780 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 09:26:56,781 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 09:26:56,781 - lib.history_tracker - INFO - Filtradas 71 URLs ya procesadas del lote actual.
2025-05-23 09:26:56,781 - main_orchestrator - INFO - URLs nuevas para procesar: 32 (de 103 total)
2025-05-23 09:26:56,782 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 09:26:56,782 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 09:26:56,799 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 09:26:56,799 - content_deduplicator - INFO - Analizando 32 URLs para encontrar duplicados...
2025-05-23 09:26:56,800 - content_deduplicator - INFO - Procesando 31 URLs del dominio facebook.com
2025-05-23 09:26:56,824 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-05-23 09:26:56,824 - content_deduplicator - INFO - URLs totales: 32, Únicas: 1, En grupos: 28
2025-05-23 09:26:56,824 - content_deduplicator - INFO - Se realizaron 39 comparaciones (1599.2/seg), evitando 0
2025-05-23 09:26:56,825 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 09:26:56,826 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 09:26:56,826 - main_orchestrator - INFO - Análisis de duplicados completado: 29 URLs duplicadas filtradas
2025-05-23 09:26:56,826 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 09:26:56,826 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 09:26:56,827 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 09:26:56,827 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 09:26:56,828 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 09:26:56,828 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 09:26:56,829 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 09:26:56,830 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 09:26:56,830 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 09:26:56,831 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 09:26:56,831 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 09:26:56,831 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 09:26:56,831 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 09:26:56,832 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 09:26:56,832 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 09:26:56,832 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 09:26:56,845 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 09:26:56,845 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 09:26:56,846 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 09:26:56,858 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo?fbid=1169198698550401&set=a.479540714182873
2025-05-23 09:26:56,859 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid06u3kqH3zC7LaCNYixodwUjR7dpgY84Y2HkdEmXaPnNrvy5WSWkCeVUtYzix4ork8l&id=100062993063417&rdid=W7M6TZM9WxOnYRNM
2025-05-23 09:27:31,821 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 09:27:33,937 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 09:27:37,273 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 40.43 seg.
2025-05-23 09:27:37,276 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 09:27:37,276 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 40.43 segundos.
2025-05-23 09:27:37,276 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 40.43 seg.
2025-05-23 09:27:37,277 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 09:27:37,278 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 65 URLs.
2025-05-23 09:27:37,278 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 09:27:37,402 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 09:27:37,491 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 09:27:37,491 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 09:27:37,492 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.21 seg.
2025-05-23 09:27:37,492 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 09:27:37,493 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 09:27:37,493 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 09:27:37,493 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 09:27:37,495 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 09:27:37,496 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 09:27:37,496 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T09:27:37.494275', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 65, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.21, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.43, 'facebook_text_extraction': 0.21, 'stats_consolidation': 0.0}}
2025-05-23 09:27:37,497 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 09:27:37,497 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 09:27:37,511 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 09:27:37,525 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 09:27:37,538 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 09:27:37,541 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 09:27:37,541 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 09:27:37,541 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 09:27:37,570 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 09:27:37,570 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 09:27:37,571 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 09:27:37,571 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 09:27:37,571 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 09:27:37,572 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 09:27:38,053 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 09:27:38,053 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 09:27:38,054 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 09:27:38,054 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 09:27:38,056 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 09:27:38,057 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 09:27:38,063 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 09:27:38,066 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 09:27:38,067 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 09:27:38,067 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T09:27:37.494275', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 65, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.21, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.43, 'facebook_text_extraction': 0.21, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.52}}
2025-05-23 09:27:38,068 - main_orchestrator - INFO - Limpieza semántica completada en 0.52 seg.
2025-05-23 09:27:38,068 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 09:27:38,068 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 09:27:38,069 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 09:27:38,101 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid06u3kqH3zC7LaCNYixodwUjR7dpgY84Y2HkdEmXaPnNrvy5WSWkCeVUtYzix4ork8l&id=100062993063417&rdid=W7M6TZM9WxOnYRNM
2025-05-23 09:27:38,102 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 09:27:38,124 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 09:27:38,125 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 09:27:38,126 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 09:27:38,127 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 09:27:38,129 - main_orchestrator - INFO - ==================================================
2025-05-23 09:27:38,130 - main_orchestrator - INFO - PIPELINE FINALIZADO en 42.02 segundos.
2025-05-23 09:27:38,130 - main_orchestrator - INFO - ==================================================
2025-05-23 10:54:33,240 - main_orchestrator - INFO - ==================================================
2025-05-23 10:54:33,241 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 10:54:33,242 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 10:54:33,242 - main_orchestrator - INFO - ==================================================
2025-05-23 10:54:33,248 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 10:54:33,249 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 10:54:33,251 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 10:54:33,253 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 65 URLs.
2025-05-23 10:54:33,255 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 10:54:33,260 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 10:54:33,262 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 10:54:33,263 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 10:54:33,263 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 10:54:33,308 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 10:54:33,912 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 10:54:33,913 - main_orchestrator - INFO - PDF procesado en 0.65 seg. Enlaces encontrados: 103
2025-05-23 10:54:33,934 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 10:54:33,934 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 10:54:33,936 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 10:54:34,050 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:54:34,051 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 10:54:34,051 - main_orchestrator - INFO - Texto del PDF extraído en 0.12 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:54:34,052 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 10:54:34,052 - lib.history_tracker - INFO - Filtradas 73 URLs ya procesadas del lote actual.
2025-05-23 10:54:34,052 - main_orchestrator - INFO - URLs nuevas para procesar: 30 (de 103 total)
2025-05-23 10:54:34,052 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 10:54:34,053 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 10:54:34,056 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 10:54:34,056 - content_deduplicator - INFO - Analizando 30 URLs para encontrar duplicados...
2025-05-23 10:54:34,057 - content_deduplicator - INFO - Procesando 29 URLs del dominio facebook.com
2025-05-23 10:54:34,085 - content_deduplicator - INFO - Análisis completado en 0.03 segundos
2025-05-23 10:54:34,085 - content_deduplicator - INFO - URLs totales: 30, Únicas: 1, En grupos: 26
2025-05-23 10:54:34,086 - content_deduplicator - INFO - Se realizaron 36 comparaciones (1277.8/seg), evitando 0
2025-05-23 10:54:34,086 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 10:54:34,088 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 10:54:34,088 - main_orchestrator - INFO - Análisis de duplicados completado: 27 URLs duplicadas filtradas
2025-05-23 10:54:34,089 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 10:54:34,089 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 10:54:34,090 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 10:54:34,090 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 10:54:34,091 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 10:54:34,092 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 10:54:34,093 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 10:54:34,095 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 10:54:34,096 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 10:54:34,096 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 10:54:34,097 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 10:54:34,098 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 10:54:34,099 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 10:54:34,100 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 10:54:34,101 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 10:54:34,101 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 10:54:34,127 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 10:54:34,127 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 10:54:34,128 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 10:54:34,135 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo?fbid=9169253469869352&set=a.740299552764828
2025-05-23 10:54:34,156 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0reYaJGKSrrrM5sH1sZBTvPsm8im1uhSwyjzjmE433Meqhw21yPtjcWuFU6LZfnb1l&id=100072108931277&rdid=h4uCPExW0ybiyePi
2025-05-23 10:55:08,778 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 10:55:11,102 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 10:55:14,743 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 40.61 seg.
2025-05-23 10:55:14,745 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 10:55:14,746 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 40.62 segundos.
2025-05-23 10:55:14,746 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 40.62 seg.
2025-05-23 10:55:14,746 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 10:55:14,747 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 67 URLs.
2025-05-23 10:55:14,748 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 10:55:14,918 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 10:55:15,790 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 10:55:15,790 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 10:55:15,791 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.04 seg.
2025-05-23 10:55:15,791 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 10:55:15,793 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 10:55:15,795 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 10:55:15,795 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 10:55:15,797 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:55:15,798 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:55:15,798 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T10:55:15.796015', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 67, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.65, 'pdf_text_extraction': 1.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.62, 'facebook_text_extraction': 1.04, 'stats_consolidation': 0.0}}
2025-05-23 10:55:15,799 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 10:55:15,799 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 10:55:15,801 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 10:55:15,803 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 10:55:15,824 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:55:15,828 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 10:55:15,828 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 10:55:15,829 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 10:55:15,857 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 10:55:15,857 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 10:55:15,858 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 10:55:15,858 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 10:55:15,858 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 10:55:15,859 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 10:55:16,619 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 10:55:16,620 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 10:55:16,620 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 10:55:16,620 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 10:55:16,623 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 10:55:16,623 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 10:55:16,629 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 10:55:16,630 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:55:16,631 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:55:16,631 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T10:55:15.796015', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 67, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.65, 'pdf_text_extraction': 1.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.62, 'facebook_text_extraction': 1.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.8}}
2025-05-23 10:55:16,631 - main_orchestrator - INFO - Limpieza semántica completada en 0.80 seg.
2025-05-23 10:55:16,632 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 10:55:16,632 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 10:55:16,632 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 10:55:16,686 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0reYaJGKSrrrM5sH1sZBTvPsm8im1uhSwyjzjmE433Meqhw21yPtjcWuFU6LZfnb1l&id=100072108931277&rdid=h4uCPExW0ybiyePi
2025-05-23 10:55:16,686 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 10:55:16,712 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 10:55:16,713 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 10:55:16,714 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 10:55:16,714 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 10:55:16,714 - main_orchestrator - INFO - ==================================================
2025-05-23 10:55:16,715 - main_orchestrator - INFO - PIPELINE FINALIZADO en 43.48 segundos.
2025-05-23 10:55:16,715 - main_orchestrator - INFO - ==================================================
2025-05-23 10:59:26,357 - main_orchestrator - INFO - ==================================================
2025-05-23 10:59:26,357 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 10:59:26,358 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 10:59:26,359 - main_orchestrator - INFO - ==================================================
2025-05-23 10:59:26,361 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 10:59:26,363 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 10:59:26,364 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 10:59:26,365 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 67 URLs.
2025-05-23 10:59:26,365 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 10:59:26,366 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 10:59:26,366 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 10:59:26,366 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 10:59:26,367 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 10:59:26,385 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 10:59:26,934 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 10:59:26,935 - main_orchestrator - INFO - PDF procesado en 0.57 seg. Enlaces encontrados: 103
2025-05-23 10:59:26,939 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 10:59:26,940 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 10:59:26,941 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 10:59:27,038 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:59:27,039 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 10:59:27,039 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:59:27,040 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 10:59:27,040 - lib.history_tracker - INFO - Filtradas 75 URLs ya procesadas del lote actual.
2025-05-23 10:59:27,041 - main_orchestrator - INFO - URLs nuevas para procesar: 28 (de 103 total)
2025-05-23 10:59:27,041 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 10:59:27,041 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 10:59:27,043 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 10:59:27,043 - content_deduplicator - INFO - Analizando 28 URLs para encontrar duplicados...
2025-05-23 10:59:27,043 - content_deduplicator - INFO - Procesando 27 URLs del dominio facebook.com
2025-05-23 10:59:27,057 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-05-23 10:59:27,057 - content_deduplicator - INFO - URLs totales: 28, Únicas: 1, En grupos: 24
2025-05-23 10:59:27,058 - content_deduplicator - INFO - Se realizaron 33 comparaciones (2338.6/seg), evitando 0
2025-05-23 10:59:27,058 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 10:59:27,059 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 10:59:27,060 - main_orchestrator - INFO - Análisis de duplicados completado: 24 URLs duplicadas filtradas
2025-05-23 10:59:27,060 - main_orchestrator - INFO - URLs después de filtrar duplicados: 4
2025-05-23 10:59:27,060 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 10:59:27,060 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 10:59:27,060 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 10:59:27,061 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 10:59:27,061 - lib.url_manager - INFO - Clasificación de 4 URLs:
2025-05-23 10:59:27,061 - lib.url_manager - INFO -  - SOCIAL: 4
2025-05-23 10:59:27,062 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 10:59:27,062 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 10:59:27,063 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 10:59:27,063 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 10:59:27,063 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 10:59:27,064 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 10:59:27,064 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 10:59:27,064 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 10:59:27,065 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 10:59:27,086 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-05-23 10:59:27,087 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 10:59:27,087 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 22042025...
2025-05-23 10:59:27,100 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-23 10:59:27,100 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-23 10:59:27,101 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0gdz3Jt9XeV6CqoTTNaicfRqxFMk6MWSbX8L6CTS62eJjBpGkZjMWC4T2ym5HrUTHl&id=100065273659654&rdid=uFgc1hNpAT2S3DpG
2025-05-23 10:59:52,676 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-3.pdf
2025-05-23 10:59:54,025 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 10:59:54,817 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 10:59:58,771 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 31.68 seg.
2025-05-23 10:59:58,773 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 10:59:58,773 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/3 exitosos en 31.69 segundos.
2025-05-23 10:59:58,774 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 31.69 seg.
2025-05-23 10:59:58,774 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 10:59:58,775 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 69 URLs.
2025-05-23 10:59:58,776 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 10:59:58,950 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 10:59:59,577 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 10:59:59,578 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 10:59:59,578 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.80 seg.
2025-05-23 10:59:59,578 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 10:59:59,579 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 10:59:59,580 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 10:59:59,580 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 10:59:59,582 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:59:59,582 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 10:59:59,583 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T10:59:59.581105', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 4, 'history_total_urls': 69, 'categories': {'social': 4}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.57, 'pdf_text_extraction': 0.8, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 31.69, 'facebook_text_extraction': 0.8, 'stats_consolidation': 0.0}}
2025-05-23 10:59:59,583 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 10:59:59,583 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 10:59:59,584 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 10:59:59,585 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 10:59:59,603 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 10:59:59,606 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 10:59:59,606 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 10:59:59,607 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 10:59:59,626 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 10:59:59,627 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 10:59:59,627 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 10:59:59,627 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 10:59:59,627 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 10:59:59,628 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 11:00:00,437 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 11:00:00,437 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 11:00:00,438 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 11:00:00,438 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 11:00:00,440 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 11:00:00,441 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:00:00,445 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:00:00,446 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:00:00,446 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:00:00,447 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T10:59:59.581105', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 4, 'history_total_urls': 69, 'categories': {'social': 4}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.57, 'pdf_text_extraction': 0.8, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 31.69, 'facebook_text_extraction': 0.8, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.84}}
2025-05-23 11:00:00,447 - main_orchestrator - INFO - Limpieza semántica completada en 0.84 seg.
2025-05-23 11:00:00,448 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 11:00:00,448 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 11:00:00,448 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 11:00:00,488 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=721410753566836&set=a.257328239975092
2025-05-23 11:00:00,489 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 11:00:00,506 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:00:00,507 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 11:00:00,507 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 11:00:00,507 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 11:00:00,507 - main_orchestrator - INFO - ==================================================
2025-05-23 11:00:00,508 - main_orchestrator - INFO - PIPELINE FINALIZADO en 34.15 segundos.
2025-05-23 11:00:00,508 - main_orchestrator - INFO - ==================================================
2025-05-23 11:01:44,657 - main_orchestrator - INFO - ==================================================
2025-05-23 11:01:44,657 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 11:01:44,657 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 11:01:44,657 - main_orchestrator - INFO - ==================================================
2025-05-23 11:01:44,658 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 11:01:44,659 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 11:01:44,660 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 11:01:44,660 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 69 URLs.
2025-05-23 11:01:44,661 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 11:01:44,661 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 11:01:44,662 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 11:01:44,662 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 11:01:44,663 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 11:01:44,686 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 11:01:45,317 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 11:01:45,318 - main_orchestrator - INFO - PDF procesado en 0.65 seg. Enlaces encontrados: 103
2025-05-23 11:01:45,324 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 11:01:45,324 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 11:01:45,325 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 11:01:45,442 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 11:01:45,443 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 11:01:45,443 - main_orchestrator - INFO - Texto del PDF extraído en 0.12 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 11:01:45,443 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 11:01:45,444 - lib.history_tracker - INFO - Filtradas 78 URLs ya procesadas del lote actual.
2025-05-23 11:01:45,444 - main_orchestrator - INFO - URLs nuevas para procesar: 25 (de 103 total)
2025-05-23 11:01:45,444 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 11:01:45,445 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 11:01:45,446 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 11:01:45,446 - content_deduplicator - INFO - Analizando 25 URLs para encontrar duplicados...
2025-05-23 11:01:45,447 - content_deduplicator - INFO - Procesando 24 URLs del dominio facebook.com
2025-05-23 11:01:45,466 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-05-23 11:01:45,466 - content_deduplicator - INFO - URLs totales: 25, Únicas: 1, En grupos: 22
2025-05-23 11:01:45,466 - content_deduplicator - INFO - Se realizaron 30 comparaciones (1554.6/seg), evitando 0
2025-05-23 11:01:45,467 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 11:01:45,468 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 11:01:45,468 - main_orchestrator - INFO - Análisis de duplicados completado: 22 URLs duplicadas filtradas
2025-05-23 11:01:45,468 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 11:01:45,468 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 11:01:45,469 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 11:01:45,469 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 11:01:45,469 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 11:01:45,469 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 11:01:45,470 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 11:01:45,471 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 11:01:45,471 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 11:01:45,471 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 11:01:45,471 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 11:01:45,472 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 11:01:45,472 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 11:01:45,472 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 11:01:45,473 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 11:01:45,473 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 11:01:45,492 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 11:01:45,492 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 11:01:45,493 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 11:01:45,506 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/diarioprimiciahyo/posts/pfbid0MyvvUrEXMwK9JweVexky3uoJu9xYaG5CrP4wLPi25vuo4i4su39fj8bZe4HjAyAYl?rdid=WQIs6UTvdY7Bm09T
2025-05-23 11:01:45,506 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo?fbid=122113948808817608&set=a.122095373924817608
2025-05-23 11:02:11,134 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 11:02:12,227 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 11:02:17,179 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 31.69 seg.
2025-05-23 11:02:17,181 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 11:02:17,181 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 31.69 segundos.
2025-05-23 11:02:17,182 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 31.69 seg.
2025-05-23 11:02:17,182 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 11:02:17,184 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 71 URLs.
2025-05-23 11:02:17,185 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 11:02:17,333 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 11:02:17,969 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 11:02:17,970 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 11:02:17,971 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.78 seg.
2025-05-23 11:02:17,971 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 11:02:17,972 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 11:02:17,972 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 11:02:17,973 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 11:02:17,974 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:02:17,974 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:02:17,974 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T11:02:17.973378', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 71, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.65, 'pdf_text_extraction': 0.78, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 31.69, 'facebook_text_extraction': 0.78, 'stats_consolidation': 0.0}}
2025-05-23 11:02:17,975 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 11:02:17,975 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 11:02:17,976 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 11:02:17,977 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 11:02:17,991 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 11:02:17,994 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 11:02:17,994 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 11:02:17,995 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 11:02:18,013 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 11:02:18,013 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 11:02:18,014 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 11:02:18,014 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 11:02:18,014 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 11:02:18,015 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 11:02:18,604 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 11:02:18,604 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 11:02:18,604 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 11:02:18,605 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 11:02:18,607 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 11:02:18,607 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:02:18,611 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:02:18,612 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:02:18,613 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 11:02:18,613 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T11:02:17.973378', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 71, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.65, 'pdf_text_extraction': 0.78, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 31.69, 'facebook_text_extraction': 0.78, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.62}}
2025-05-23 11:02:18,613 - main_orchestrator - INFO - Limpieza semántica completada en 0.62 seg.
2025-05-23 11:02:18,614 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 11:02:18,614 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 11:02:18,614 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 11:02:18,649 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo?fbid=122113948808817608&set=a.122095373924817608
2025-05-23 11:02:18,650 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 11:02:18,668 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 11:02:18,668 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 11:02:18,668 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 11:02:18,669 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 11:02:18,669 - main_orchestrator - INFO - ==================================================
2025-05-23 11:02:18,669 - main_orchestrator - INFO - PIPELINE FINALIZADO en 34.01 segundos.
2025-05-23 11:02:18,670 - main_orchestrator - INFO - ==================================================
2025-05-23 12:26:40,018 - main_orchestrator - INFO - ==================================================
2025-05-23 12:26:40,019 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 12:26:40,019 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 12:26:40,020 - main_orchestrator - INFO - ==================================================
2025-05-23 12:26:40,025 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 12:26:40,027 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 12:26:40,029 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 12:26:40,030 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 71 URLs.
2025-05-23 12:26:40,031 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 12:26:40,032 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 12:26:40,033 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 12:26:40,033 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 12:26:40,033 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 12:26:40,034 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 12:26:40,087 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 12:26:40,648 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 12:26:40,649 - main_orchestrator - INFO - PDF procesado en 0.61 seg. Enlaces encontrados: 103
2025-05-23 12:26:40,667 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 12:26:40,668 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 12:26:40,670 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 12:26:40,780 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 12:26:40,780 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 12:26:40,781 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 12:26:40,782 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 12:26:40,783 - lib.history_tracker - INFO - Filtradas 80 URLs ya procesadas del lote actual.
2025-05-23 12:26:40,783 - main_orchestrator - INFO - URLs nuevas para procesar: 23 (de 103 total)
2025-05-23 12:26:40,783 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 12:26:40,784 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 12:26:40,787 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 12:26:40,787 - content_deduplicator - INFO - Analizando 23 URLs para encontrar duplicados...
2025-05-23 12:26:40,788 - content_deduplicator - INFO - Procesando 22 URLs del dominio facebook.com
2025-05-23 12:26:40,806 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-05-23 12:26:40,806 - content_deduplicator - INFO - URLs totales: 23, Únicas: 1, En grupos: 20
2025-05-23 12:26:40,807 - content_deduplicator - INFO - Se realizaron 27 comparaciones (1496.2/seg), evitando 0
2025-05-23 12:26:40,807 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 12:26:40,808 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 12:26:40,809 - main_orchestrator - INFO - Análisis de duplicados completado: 20 URLs duplicadas filtradas
2025-05-23 12:26:40,809 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 12:26:40,810 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 12:26:40,810 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 12:26:40,810 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 12:26:40,810 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 12:26:40,811 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 12:26:40,811 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 12:26:40,813 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 12:26:40,813 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 12:26:40,814 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 12:26:40,814 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 12:26:40,814 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 12:26:40,815 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 12:26:40,816 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 12:26:40,816 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 12:26:40,816 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 12:26:40,834 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 12:26:40,834 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 12:26:40,835 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 12:26:40,855 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=1237408555057217&set=a.487862856678461
2025-05-23 12:26:40,855 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0rR7UDLVAfscSqNLjgQEC4tLSMNvwUxiU7ZJJpmgaDRvitJ25FWysDbgdHfqvTMYsl&id=100066844274567&rdid=YWZjIZXhyCZwg75K
2025-05-23 12:27:09,246 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 12:27:12,662 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 12:27:17,088 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 36.25 seg.
2025-05-23 12:27:17,090 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 12:27:17,091 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 36.26 segundos.
2025-05-23 12:27:17,091 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 36.26 seg.
2025-05-23 12:27:17,092 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 12:27:17,093 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 73 URLs.
2025-05-23 12:27:17,093 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 12:27:17,752 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 12:27:17,918 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 12:27:17,918 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 12:27:17,919 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.82 seg.
2025-05-23 12:27:17,919 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 12:27:17,920 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 12:27:17,921 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 12:27:17,921 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 12:27:17,923 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 12:27:17,924 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 12:27:17,924 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:27:17.921854', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 73, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.61, 'pdf_text_extraction': 0.82, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 36.26, 'facebook_text_extraction': 0.82, 'stats_consolidation': 0.0}}
2025-05-23 12:27:17,925 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 12:27:17,926 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 12:27:17,927 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 12:27:17,929 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 12:27:17,957 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 12:27:17,959 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 12:27:17,960 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 12:27:17,960 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 12:27:17,988 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 12:27:17,988 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 12:27:17,989 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 12:27:17,989 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 12:27:17,990 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 12:27:17,990 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 12:27:18,697 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 12:27:18,697 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 12:27:18,697 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 12:27:18,697 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 12:27:18,699 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 12:27:18,700 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 12:27:18,704 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 12:27:18,705 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 12:27:18,706 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 12:27:18,706 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:27:17.921854', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 73, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.61, 'pdf_text_extraction': 0.82, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 36.26, 'facebook_text_extraction': 0.82, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.74}}
2025-05-23 12:27:18,706 - main_orchestrator - INFO - Limpieza semántica completada en 0.74 seg.
2025-05-23 12:27:18,707 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 12:27:18,707 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 12:27:18,707 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 12:27:18,743 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0rR7UDLVAfscSqNLjgQEC4tLSMNvwUxiU7ZJJpmgaDRvitJ25FWysDbgdHfqvTMYsl&id=100066844274567&rdid=YWZjIZXhyCZwg75K
2025-05-23 12:27:18,743 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 12:27:18,763 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 12:27:18,763 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 12:27:18,763 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 12:27:18,764 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 12:27:18,764 - main_orchestrator - INFO - ==================================================
2025-05-23 12:27:18,765 - main_orchestrator - INFO - PIPELINE FINALIZADO en 38.75 segundos.
2025-05-23 12:27:18,765 - main_orchestrator - INFO - ==================================================
2025-05-23 12:32:33,459 - main_orchestrator - INFO - ==================================================
2025-05-23 12:32:33,459 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 12:32:33,459 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 12:32:33,460 - main_orchestrator - INFO - ==================================================
2025-05-23 12:32:33,461 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 12:32:33,462 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 12:32:33,463 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 12:32:33,464 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 73 URLs.
2025-05-23 12:32:33,464 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 12:32:33,465 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 12:32:33,465 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 12:32:33,465 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 12:32:33,466 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 12:32:33,486 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 12:32:33,705 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 12:32:33,706 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 12:32:33,710 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 12:32:33,710 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 12:32:33,712 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 12:32:33,759 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:32:33,759 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 12:32:33,760 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:32:33,760 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 12:32:33,760 - main_orchestrator - INFO - URLs nuevas para procesar: 51 (de 51 total)
2025-05-23 12:32:33,760 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 12:32:33,761 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 12:32:33,763 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 12:32:33,763 - content_deduplicator - INFO - Analizando 51 URLs para encontrar duplicados...
2025-05-23 12:32:33,764 - content_deduplicator - INFO - Procesando 4 URLs del dominio elperuano.pe
2025-05-23 12:32:33,765 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2401784-1 (tipo: news)
2025-05-23 12:32:46,012 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2401788-1 (tipo: news)
2025-05-23 12:32:58,759 - content_deduplicator - INFO - Procesando 19 URLs del dominio facebook.com
2025-05-23 12:32:58,760 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1EdBDgqxPj/ (tipo: facebook)
2025-05-23 12:33:07,636 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1EdBDgqxPj/
2025-05-23 12:33:09,985 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/18rxJA4ieT/ (tipo: facebook)
2025-05-23 12:33:18,136 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/18rxJA4ieT/
2025-05-23 12:33:20,480 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1Do9DaApjN/ (tipo: facebook)
2025-05-23 12:33:29,197 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1Do9DaApjN/
2025-05-23 12:33:31,446 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid0344vPp6kdFe3arbASGdNszrKZ1QHSwqKqsuVqcJa5uzQeFdp1wDb5qL52vJhh2AEyl (tipo: facebook)
2025-05-23 12:33:40,103 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid0344vPp6kdFe3arbASGdNszrKZ1QHSwqKqsuVqcJa5uzQeFdp1wDb5qL52vJhh2AEyl
2025-05-23 12:33:42,339 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02TbcSorpXb9xVWMsvD2i3ogouWF2jFAiViRECMBPNBfG7EW9snfgE1YcRjR9tp5jsl&id=61559613183648 (tipo: facebook)
2025-05-23 12:33:51,581 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02TbcSorpXb9xVWMsvD2i3ogouWF2jFAiViRECMBPNBfG7EW9snfgE1YcRjR9tp5jsl&id=61559613183648
2025-05-23 12:33:53,834 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0z8EfgwEigBQtMKPsvWsudyQ9ia1xWJ8KtQjvJMAdXVkYyGjtGKXZYxhZudQ9QQxvl&id=100064089484737 (tipo: facebook)
2025-05-23 12:34:02,630 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0z8EfgwEigBQtMKPsvWsudyQ9ia1xWJ8KtQjvJMAdXVkYyGjtGKXZYxhZudQ9QQxvl&id=100064089484737
2025-05-23 12:34:04,940 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0KSjUjXiZBXDWY3JFArvYX9vpjiVAtQYLxtHgEB9seChCqRPFGGDAiFbdBBJJNXMzl&id=100065273659654 (tipo: facebook)
2025-05-23 12:34:13,152 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0KSjUjXiZBXDWY3JFArvYX9vpjiVAtQYLxtHgEB9seChCqRPFGGDAiFbdBBJJNXMzl&id=100065273659654
2025-05-23 12:34:15,447 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02j1w6bWLx1ZF9dKbkT8Ppgoa5dEZyqPAASSvTfGmcrgKWW49ZNv93fj4b82gLEYQbl&id=100072108931277 (tipo: facebook)
2025-05-23 12:34:23,370 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02j1w6bWLx1ZF9dKbkT8Ppgoa5dEZyqPAASSvTfGmcrgKWW49ZNv93fj4b82gLEYQbl&id=100072108931277
2025-05-23 12:34:25,589 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417 (tipo: facebook)
2025-05-23 12:34:33,532 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 12:34:35,848 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid028fqCreDycrcTmSUcNMoMkm1v5LGQcZCHYjZvDDkd7FnarYXsPu6LqP5wUW3w3VAnl (tipo: facebook)
2025-05-23 12:34:44,159 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid028fqCreDycrcTmSUcNMoMkm1v5LGQcZCHYjZvDDkd7FnarYXsPu6LqP5wUW3w3VAnl
2025-05-23 12:34:46,404 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid067JmiEgeU87Xtw6N3mNNJhesRyq582WQip4EPrMVa8XoHpdKuxJtDfCHPKDcGvvLl&id=100063616446639 (tipo: facebook)
2025-05-23 12:34:55,898 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid067JmiEgeU87Xtw6N3mNNJhesRyq582WQip4EPrMVa8XoHpdKuxJtDfCHPKDcGvvLl&id=100063616446639
2025-05-23 12:34:58,154 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/15SXdzLy4j/ (tipo: facebook)
2025-05-23 12:35:06,407 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/15SXdzLy4j/
2025-05-23 12:35:08,662 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1MTCXF5uX3/ (tipo: facebook)
2025-05-23 12:35:17,817 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1MTCXF5uX3/
2025-05-23 12:35:20,069 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1ANxCqeU9Y/ (tipo: facebook)
2025-05-23 12:35:28,847 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1ANxCqeU9Y/
2025-05-23 12:35:31,125 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1An2pGZRLS/ (tipo: facebook)
2025-05-23 12:35:40,328 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1An2pGZRLS/
2025-05-23 12:35:42,547 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1Dwwa3woRK/ (tipo: facebook)
2025-05-23 12:35:54,790 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1Dwwa3woRK/
2025-05-23 12:35:57,026 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/19EBkWufrg/ (tipo: facebook)
2025-05-23 12:36:09,638 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/19EBkWufrg/
2025-05-23 12:36:11,921 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1CJwz1SyKA/ (tipo: facebook)
2025-05-23 12:36:23,565 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1CJwz1SyKA/
2025-05-23 12:36:25,880 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/watch/?v=1034348315463894 (tipo: facebook)
2025-05-23 12:36:39,311 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/watch/?v=1034348315463894
2025-05-23 12:36:41,655 - content_deduplicator - INFO - Realizadas 50 comparaciones (0 evitadas)
2025-05-23 12:36:41,702 - content_deduplicator - INFO - Progreso: 20/51 URLs procesadas en 247.94 seg.
2025-05-23 12:36:41,702 - content_deduplicator - INFO - Procesando 6 URLs del dominio gob.pe
2025-05-23 12:36:41,703 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/noticias/de-interes-nacional-el-sistema-de-agua-potable-y-saneamiento-del-distrito-de-eten-puerto/ (tipo: other)
2025-05-23 12:36:56,111 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/noticias/presidente-del-congreso-respalda-gestion-para-que-centro-poblado-la-joya-cuente-con-servicio-de-agua-potable/ (tipo: other)
2025-05-23 12:37:09,505 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/contraloria/noticias/1172307-demora-injustificada-impide-reinicio-de-obra-de-saneamiento-de-mas-de-s-2-millones-paralizada-en-huaral-desde-el-2018 (tipo: other)
2025-05-23 12:37:22,921 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1171758-ministerio-de-vivienda-y-municipalidad-de-julcan-suscriben-convenio-para-mejorar-el-servicio-de-agua-y-saneamiento-en-carrapalday-alto (tipo: other)
2025-05-23 12:37:38,624 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/noticias/insisten-en-propuesta-que-optimiza-la-operacion-y-el-mantenimiento-de-la-infraestructura-de-drenaje-pluvial/ (tipo: other)
2025-05-23 12:37:52,243 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/damos-cuenta/congresista-wilson-soto-exige-a-la-presidenta-boluarte-intervenir-ante-grave-irregularidad-en-ositran/ (tipo: other)
2025-05-23 12:38:05,453 - content_deduplicator - INFO - Procesando 2 URLs del dominio soltvperu.com
2025-05-23 12:38:05,454 - selenium_extractor - INFO - Extrayendo contenido de URL: https://soltvperu.com/la-libertad-se-politiza-integracion-de-agua-y-alcantarillado-a-sedalib-en-casa-grande/ (tipo: other)
2025-05-23 12:38:21,858 - selenium_extractor - INFO - Extrayendo contenido de URL: https://soltvperu.com/obra-inconclusa-en-porvenir/ (tipo: other)
2025-05-23 12:38:38,029 - content_deduplicator - INFO - Procesando 2 URLs del dominio google.com
2025-05-23 12:38:38,030 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/137E2OazykaMIJjFBDm6rvPjvd3RmGQ1e/view?usp=sharing (tipo: other)
2025-05-23 12:38:50,295 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/1mMfJYnzqWVO8MsqQq4LyGp-Fl7xL9T1t/view?usp=sharing (tipo: other)
2025-05-23 12:39:02,033 - content_deduplicator - INFO - Procesando 2 URLs del dominio radiouno.pe
2025-05-23 12:39:02,034 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radiouno.pe/noticias/241435/mujer-resulta-herida-tras-caer-a-buzon-de-desague/ (tipo: other)
2025-05-23 12:39:11,485 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radiouno.pe/noticias/241391/controlan-fuga-en-abrazadera-y-area-verde-del-cono-norte/ (tipo: other)
2025-05-23 12:39:23,758 - content_deduplicator - INFO - Procesando 6 URLs del dominio imacorpplataforma.com
2025-05-23 12:39:23,787 - content_deduplicator - INFO - Análisis completado en 410.02 segundos
2025-05-23 12:39:23,788 - content_deduplicator - INFO - URLs totales: 51, Únicas: 34, En grupos: 14
2025-05-23 12:39:23,788 - content_deduplicator - INFO - Se realizaron 107 comparaciones (0.3/seg), evitando 0
2025-05-23 12:39:23,788 - content_deduplicator - INFO - Grupos de duplicados encontrados: 5
2025-05-23 12:39:23,790 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 12:39:23,790 - main_orchestrator - INFO - Análisis de duplicados completado: 9 URLs duplicadas filtradas
2025-05-23 12:39:23,791 - main_orchestrator - INFO - URLs después de filtrar duplicados: 42
2025-05-23 12:39:23,791 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 12:39:23,791 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 12:39:23,792 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 12:39:23,792 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 12:39:23,794 - lib.url_manager - INFO - Clasificación de 42 URLs:
2025-05-23 12:39:23,795 - lib.url_manager - INFO -  - HTML: 25
2025-05-23 12:39:23,795 - lib.url_manager - INFO -  - IMAGES: 6
2025-05-23 12:39:23,795 - lib.url_manager - INFO -  - SOCIAL: 11
2025-05-23 12:39:23,797 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22052025_unprocessed.json
2025-05-23 12:39:23,799 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 12:39:23,800 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 12:39:23,801 - lib.image_processor - INFO - Iniciando descarga paralela de 6 imágenes para la fecha 22052025...
2025-05-23 12:39:23,801 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-POLITICA-2-IMPULSAN-CONSENSOS-EN-BENEFICIO-DE-POBLACION-21-05-2025-scaled.jpg. Primera ocurrencia: #4, segunda: #5
2025-05-23 12:39:23,808 - lib.image_processor - INFO - Omitiendo URL duplicada #5: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-POLITICA-2-IMPULSAN-CONSENSOS-EN-BENEFICIO-DE-POBLACION-21-05-2025-scaled.jpg
2025-05-23 12:39:28,114 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_ca89977f_22052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025 (407695 bytes)
2025-05-23 12:39:28,891 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_ca8f800f_22052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025 (336807 bytes)
2025-05-23 12:39:29,702 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_d74eba34_22052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025 (368080 bytes)
2025-05-23 12:39:35,229 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_1a0897a2_22052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025 (777468 bytes)
2025-05-23 12:39:35,554 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_bb5addb4_22052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025 (800476 bytes)
2025-05-23 12:39:36,151 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_22052025.json
2025-05-23 12:39:36,152 - lib.image_processor - INFO - Descarga de imágenes completada para 5/6 URLs en 12.35 segundos.
2025-05-23 12:39:36,152 - main_orchestrator - INFO - Descarga de imágenes completada en 12.35 seg.
2025-05-23 12:39:36,152 - lib.history_tracker - INFO - Añadidas 5 nuevas URLs al historial.
2025-05-23 12:39:36,153 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 78 URLs.
2025-05-23 12:39:36,154 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 12:39:36,154 - lib.html_scraper - INFO - Iniciando scraping paralelo de 25 URLs...
2025-05-23 12:39:41,790 - lib.html_scraper - INFO - Progreso: 20/25 URLs procesadas en 5.64 seg.
2025-05-23 12:39:44,693 - lib.html_scraper - INFO - Progreso: 25/25 URLs procesadas en 8.54 seg.
2025-05-23 12:39:44,700 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 12:39:44,701 - lib.html_scraper - INFO - Scraping completado para 25/25 URLs en 8.55 segundos.
2025-05-23 12:39:44,701 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 12:39:44,702 - main_orchestrator - INFO - Scraping HTML completado en 8.55 seg.
2025-05-23 12:39:44,703 - lib.history_tracker - INFO - Añadidas 23 nuevas URLs al historial.
2025-05-23 12:39:44,705 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 101 URLs.
2025-05-23 12:39:44,706 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 12:39:46,305 - lib.api_client - ERROR - Error procesando tmpc2papst_.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-23 12:39:46,470 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-23 12:39:46,471 - lib.image_processor - INFO - Procesando 5 imágenes con API (batch_size=3, pausa=60s)
2025-05-23 12:39:46,471 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-23 12:39:46,471 - lib.image_processor - INFO - Procesando imagen con API: img_3_ca89977f_22052025.jpg
2025-05-23 12:39:49,431 - lib.api_client - ERROR - Error procesando img_3_ca89977f_22052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
2025-05-23 12:39:52,102 - lib.image_processor - WARNING - Imagen img_3_ca89977f_22052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 12:39:52,105 - lib.image_processor - WARNING - Error procesando imagen img_3_ca89977f_22052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 12
}
]
2025-05-23 12:39:52,788 - lib.image_processor - INFO - Procesando imagen con API: img_1_ca8f800f_22052025.jpg
2025-05-23 12:39:55,129 - lib.api_client - ERROR - Error procesando img_1_ca8f800f_22052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
2025-05-23 12:39:57,572 - lib.image_processor - WARNING - Imagen img_1_ca8f800f_22052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 12:39:57,574 - lib.image_processor - WARNING - Error procesando imagen img_1_ca8f800f_22052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
2025-05-23 12:39:58,096 - lib.image_processor - INFO - Procesando imagen con API: img_2_d74eba34_22052025.jpg
2025-05-23 12:40:00,482 - lib.api_client - ERROR - Error procesando img_2_d74eba34_22052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 1
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 1
}
]
2025-05-23 12:40:02,902 - lib.image_processor - WARNING - Imagen img_2_d74eba34_22052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 12:40:02,905 - lib.image_processor - WARNING - Error procesando imagen img_2_d74eba34_22052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 1
}
]
2025-05-23 12:40:03,516 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 12:41:03,517 - lib.image_processor - INFO - Procesando batch 2 (2 imágenes)
2025-05-23 12:41:03,518 - lib.image_processor - INFO - Procesando imagen con API: img_4_1a0897a2_22052025.jpg
2025-05-23 12:41:08,992 - lib.api_client - ERROR - Error procesando img_4_1a0897a2_22052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-05-23 12:41:11,988 - lib.image_processor - WARNING - Imagen img_4_1a0897a2_22052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 12:41:11,991 - lib.image_processor - WARNING - Error procesando imagen img_4_1a0897a2_22052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 52
}
]
2025-05-23 12:41:12,509 - lib.image_processor - INFO - Procesando imagen con API: img_6_bb5addb4_22052025.jpg
2025-05-23 12:41:23,474 - lib.api_client - ERROR - Error procesando img_6_bb5addb4_22052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 38
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 38
}
]
2025-05-23 12:41:25,047 - lib.image_processor - WARNING - Imagen img_6_bb5addb4_22052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 12:41:25,050 - lib.image_processor - WARNING - Error procesando imagen img_6_bb5addb4_22052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 38
}
]
2025-05-23 12:41:25,915 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 12:41:25,915 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 12:41:25,915 - lib.image_processor - INFO - Procesamiento API completado para 0/5 imágenes en 99.44 segundos.
2025-05-23 12:41:25,916 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 101.21 seg.
2025-05-23 12:41:25,916 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 12:41:25,916 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 12:41:25,938 - main_orchestrator - INFO - Encontradas 10 URLs de Facebook para procesar
2025-05-23 12:41:25,939 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025
2025-05-23 12:41:25,939 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 12:41:25,940 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 10 URLs de Facebook para la fecha 22052025...
2025-05-23 12:41:25,941 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/1EdBDgqxPj/
2025-05-23 12:41:25,942 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/18rxJA4ieT/
2025-05-23 12:41:25,944 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/diarioprimiciahyo/posts/pfbid0344vPp6kdFe3arbASGdNszrKZ1QHSwqKqsuVqcJa5uzQeFdp1wDb5qL52vJhh2AEyl
2025-05-23 12:41:25,945 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/permalink.php?story_fbid=pfbid0z8EfgwEigBQtMKPsvWsudyQ9ia1xWJ8KtQjvJMAdXVkYyGjtGKXZYxhZudQ9QQxvl&id=100064089484737
2025-05-23 12:41:25,947 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/15SXdzLy4j/
2025-05-23 12:41:57,775 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-4.pdf
2025-05-23 12:41:58,532 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 12:41:59,161 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 12:42:00,494 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-3.pdf
2025-05-23 12:42:02,411 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/1MTCXF5uX3/
2025-05-23 12:42:02,457 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/v/1An2pGZRLS/
2025-05-23 12:42:02,580 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/v/19EBkWufrg/
2025-05-23 12:42:05,697 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/share/v/1CJwz1SyKA/
2025-05-23 12:42:11,607 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-5.pdf
2025-05-23 12:42:15,746 - lib.facebook_processor - INFO - Progreso Facebook: 5/10 en 49.81 seg.
2025-05-23 12:42:15,746 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/watch/?v=1034348315463894
2025-05-23 12:42:48,521 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-9.pdf
2025-05-23 12:42:48,859 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-6.pdf
2025-05-23 12:42:51,741 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-8.pdf
2025-05-23 12:43:11,818 - lib.facebook_processor - WARNING - Timeout alcanzado al cargar: https://www.facebook.com/share/v/1An2pGZRLS/
2025-05-23 12:43:12,617 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-10.pdf
2025-05-23 12:43:16,803 - lib.facebook_processor - INFO - Progreso Facebook: 10/10 en 110.86 seg.
2025-05-23 12:43:16,807 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22052025.json
2025-05-23 12:43:16,807 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 9/10 exitosos en 110.87 segundos.
2025-05-23 12:43:16,808 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 110.87 seg.
2025-05-23 12:43:16,809 - lib.history_tracker - INFO - Añadidas 10 nuevas URLs al historial.
2025-05-23 12:43:16,811 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 111 URLs.
2025-05-23 12:43:16,811 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 12:43:16,936 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-4.pdf
2025-05-23 12:43:17,543 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 12:43:18,143 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 12:43:18,248 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-3.pdf
2025-05-23 12:43:18,891 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-5.pdf
2025-05-23 12:43:19,008 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-9.pdf
2025-05-23 12:43:19,635 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-6.pdf
2025-05-23 12:43:19,738 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-8.pdf
2025-05-23 12:43:19,848 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-10.pdf
2025-05-23 12:43:19,848 - lib.facebook_processor - INFO - Texto extraído de 9 PDFs de Facebook
2025-05-23 12:43:19,849 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.04 seg.
2025-05-23 12:43:19,849 - main_orchestrator - INFO - Texto extraído de 9 PDFs de Facebook
2025-05-23 12:43:19,851 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:43:19,851 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:43:19,851 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 12:43:19,853 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:43:19,853 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:43:19,854 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:43:19.851923', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 42, 'history_total_urls': 111, 'categories': {'html': 25, 'images': 6, 'social': 11}, 'html_processing': {'attempted': 25, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 13, 'average_relevance': 0.2956521739130435}, 'image_processing': {'attempted_download': 6, 'successful_download': 5, 'attempted_api': 5, 'successful_api': 0}, 'facebook_processing': {'attempted': 10, 'successful': 9, 'extracted_texts': 9}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 3.04, 'image_download': 12.35, 'html_scraping': 8.55, 'image_api': 101.21, 'facebook_processing': 110.87, 'facebook_text_extraction': 3.04, 'stats_consolidation': 0.0}}
2025-05-23 12:43:19,855 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 12:43:19,855 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 12:43:19,883 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:43:19,895 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 12:43:19,895 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 12:43:19,900 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 12:43:19,929 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 12:43:19,930 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 12:43:19,930 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 12:43:19,931 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 12:43:19,931 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 12:43:19,931 - semantic_cleaner - INFO - Extraídos 9 textos de Facebook
2025-05-23 12:43:23,984 - semantic_cleaner - INFO - Se identificaron 37 grupos de textos similares
2025-05-23 12:43:23,985 - semantic_cleaner - INFO - Se seleccionaron 37 textos representativos
2025-05-23 12:43:23,985 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 12:43:23,985 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 12:43:23,989 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 12:43:23,989 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:43:23,996 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:43:23,998 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:43:23,999 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:43:23,999 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:43:19.851923', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 42, 'history_total_urls': 111, 'categories': {'html': 25, 'images': 6, 'social': 11}, 'html_processing': {'attempted': 25, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 13, 'average_relevance': 0.2956521739130435}, 'image_processing': {'attempted_download': 6, 'successful_download': 5, 'attempted_api': 5, 'successful_api': 0}, 'facebook_processing': {'attempted': 10, 'successful': 9, 'extracted_texts': 9}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 3.04, 'image_download': 12.35, 'html_scraping': 8.55, 'image_api': 101.21, 'facebook_processing': 110.87, 'facebook_text_extraction': 3.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 4.1}}
2025-05-23 12:43:24,000 - main_orchestrator - INFO - Limpieza semántica completada en 4.10 seg.
2025-05-23 12:43:24,000 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 12:43:24,001 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 12:43:24,001 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:43:24,032 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0z8EfgwEigBQtMKPsvWsudyQ9ia1xWJ8KtQjvJMAdXVkYyGjtGKXZYxhZudQ9QQxvl&id=100064089484737
2025-05-23 12:43:24,033 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 12:43:24,056 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:43:24,057 - facebook_extractor_fix - INFO - Se han añadido 9 textos de Facebook al archivo limpio
2025-05-23 12:43:24,057 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 12:43:24,058 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 12:43:24,058 - main_orchestrator - INFO - ==================================================
2025-05-23 12:43:24,058 - main_orchestrator - INFO - PIPELINE FINALIZADO en 650.60 segundos.
2025-05-23 12:43:24,059 - main_orchestrator - INFO - ==================================================
2025-05-23 12:46:07,364 - main_orchestrator - INFO - ==================================================
2025-05-23 12:46:07,364 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 12:46:07,365 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 12:46:07,365 - main_orchestrator - INFO - ==================================================
2025-05-23 12:46:07,366 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 12:46:07,367 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 12:46:07,367 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 12:46:07,368 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 111 URLs.
2025-05-23 12:46:07,369 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 12:46:07,370 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 12:46:07,370 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 12:46:07,371 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 12:46:07,372 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 12:46:07,395 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 12:46:07,618 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 12:46:07,619 - main_orchestrator - INFO - PDF procesado en 0.25 seg. Enlaces encontrados: 51
2025-05-23 12:46:07,623 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 12:46:07,623 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 12:46:07,627 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 12:46:07,680 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:46:07,681 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 12:46:07,681 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:46:07,681 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 12:46:07,682 - lib.history_tracker - INFO - Filtradas 41 URLs ya procesadas del lote actual.
2025-05-23 12:46:07,682 - main_orchestrator - INFO - URLs nuevas para procesar: 10 (de 51 total)
2025-05-23 12:46:07,682 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 12:46:07,682 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 12:46:07,712 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 12:46:07,712 - content_deduplicator - INFO - Analizando 10 URLs para encontrar duplicados...
2025-05-23 12:46:07,713 - content_deduplicator - INFO - Procesando 9 URLs del dominio facebook.com
2025-05-23 12:46:07,739 - content_deduplicator - INFO - Análisis completado en 0.03 segundos
2025-05-23 12:46:07,740 - content_deduplicator - INFO - URLs totales: 10, Únicas: 4, En grupos: 6
2025-05-23 12:46:07,741 - content_deduplicator - INFO - Se realizaron 16 comparaciones (610.6/seg), evitando 0
2025-05-23 12:46:07,743 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-05-23 12:46:07,745 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 12:46:07,745 - main_orchestrator - INFO - Análisis de duplicados completado: 5 URLs duplicadas filtradas
2025-05-23 12:46:07,745 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-05-23 12:46:07,745 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 12:46:07,746 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 12:46:07,746 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 12:46:07,746 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 12:46:07,747 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-05-23 12:46:07,747 - lib.url_manager - INFO -  - SOCIAL: 5
2025-05-23 12:46:07,748 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 12:46:07,749 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 12:46:07,749 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 12:46:07,749 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 12:46:07,750 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 12:46:07,750 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 12:46:07,752 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 12:46:07,753 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 12:46:07,753 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 12:46:07,779 - main_orchestrator - INFO - Encontradas 4 URLs de Facebook para procesar
2025-05-23 12:46:07,779 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 12:46:07,780 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 4 URLs de Facebook para la fecha 22052025...
2025-05-23 12:46:07,781 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/1Do9DaApjN/
2025-05-23 12:46:07,782 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid02TbcSorpXb9xVWMsvD2i3ogouWF2jFAiViRECMBPNBfG7EW9snfgE1YcRjR9tp5jsl&id=61559613183648
2025-05-23 12:46:07,783 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/1ANxCqeU9Y/
2025-05-23 12:46:07,784 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/v/1Dwwa3woRK/
2025-05-23 12:46:35,331 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 12:46:38,788 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 12:46:41,155 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-3.pdf
2025-05-23 12:46:53,581 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-4.pdf
2025-05-23 12:46:58,225 - lib.facebook_processor - INFO - Progreso Facebook: 4/4 en 50.45 seg.
2025-05-23 12:46:58,227 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22052025.json
2025-05-23 12:46:58,228 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 4/4 exitosos en 50.45 segundos.
2025-05-23 12:46:58,228 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 50.45 seg.
2025-05-23 12:46:58,228 - lib.history_tracker - INFO - Añadidas 4 nuevas URLs al historial.
2025-05-23 12:46:58,229 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 115 URLs.
2025-05-23 12:46:58,230 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 12:46:58,358 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 12:46:59,043 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 12:46:59,698 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-3.pdf
2025-05-23 12:46:59,817 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-4.pdf
2025-05-23 12:46:59,818 - lib.facebook_processor - INFO - Texto extraído de 4 PDFs de Facebook
2025-05-23 12:46:59,818 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.59 seg.
2025-05-23 12:46:59,819 - main_orchestrator - INFO - Texto extraído de 4 PDFs de Facebook
2025-05-23 12:46:59,820 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:46:59,820 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:46:59,821 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 12:46:59,822 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:46:59,822 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:46:59,823 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:46:59.821645', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 115, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 4, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.25, 'pdf_text_extraction': 1.59, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 50.45, 'facebook_text_extraction': 1.59, 'stats_consolidation': 0.0}}
2025-05-23 12:46:59,823 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 12:46:59,823 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 12:46:59,841 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 12:46:59,862 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 12:46:59,937 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 12:46:59,961 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 12:46:59,963 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 12:46:59,963 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 12:47:00,016 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 12:47:00,016 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 12:47:00,017 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 12:47:00,017 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 12:47:00,017 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 12:47:00,018 - semantic_cleaner - INFO - Extraídos 4 textos de Facebook
2025-05-23 12:47:03,552 - semantic_cleaner - INFO - Se identificaron 32 grupos de textos similares
2025-05-23 12:47:03,552 - semantic_cleaner - INFO - Se seleccionaron 32 textos representativos
2025-05-23 12:47:03,552 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 12:47:03,553 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 12:47:03,555 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 12:47:03,556 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:47:03,562 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:47:03,563 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:47:03,563 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 12:47:03,564 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T12:46:59.821645', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 115, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 4, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.25, 'pdf_text_extraction': 1.59, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 50.45, 'facebook_text_extraction': 1.59, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.6}}
2025-05-23 12:47:03,564 - main_orchestrator - INFO - Limpieza semántica completada en 3.60 seg.
2025-05-23 12:47:03,564 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 12:47:03,565 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 12:47:03,565 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 12:47:03,587 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid02TbcSorpXb9xVWMsvD2i3ogouWF2jFAiViRECMBPNBfG7EW9snfgE1YcRjR9tp5jsl&id=61559613183648
2025-05-23 12:47:03,588 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 12:47:03,609 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 12:47:03,609 - facebook_extractor_fix - INFO - Se han añadido 4 textos de Facebook al archivo limpio
2025-05-23 12:47:03,610 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 12:47:03,611 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 12:47:03,612 - main_orchestrator - INFO - ==================================================
2025-05-23 12:47:03,613 - main_orchestrator - INFO - PIPELINE FINALIZADO en 56.25 segundos.
2025-05-23 12:47:03,613 - main_orchestrator - INFO - ==================================================
2025-05-23 14:25:18,365 - main_orchestrator - INFO - ==================================================
2025-05-23 14:25:18,365 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 14:25:18,366 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 14:25:18,366 - main_orchestrator - INFO - ==================================================
2025-05-23 14:25:18,367 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 14:25:18,369 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 14:25:18,369 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 14:25:18,370 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 115 URLs.
2025-05-23 14:25:18,371 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 14:25:18,372 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 14:25:18,373 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 14:25:18,373 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 14:25:18,374 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 14:25:18,374 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 14:25:18,425 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 14:25:18,659 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 14:25:18,659 - main_orchestrator - INFO - PDF procesado en 0.28 seg. Enlaces encontrados: 51
2025-05-23 14:25:18,674 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 14:25:18,674 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 14:25:18,676 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 14:25:18,719 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 14:25:18,720 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 14:25:18,720 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 14:25:18,720 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 14:25:18,721 - lib.history_tracker - INFO - Filtradas 45 URLs ya procesadas del lote actual.
2025-05-23 14:25:18,721 - main_orchestrator - INFO - URLs nuevas para procesar: 6 (de 51 total)
2025-05-23 14:25:18,721 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 14:25:18,721 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 14:25:18,725 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 14:25:18,725 - content_deduplicator - INFO - Analizando 6 URLs para encontrar duplicados...
2025-05-23 14:25:18,725 - content_deduplicator - INFO - Procesando 5 URLs del dominio facebook.com
2025-05-23 14:25:18,734 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-05-23 14:25:18,734 - content_deduplicator - INFO - URLs totales: 6, Únicas: 1, En grupos: 5
2025-05-23 14:25:18,735 - content_deduplicator - INFO - Se realizaron 5 comparaciones (570.0/seg), evitando 0
2025-05-23 14:25:18,735 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 14:25:18,736 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 14:25:18,736 - main_orchestrator - INFO - Análisis de duplicados completado: 3 URLs duplicadas filtradas
2025-05-23 14:25:18,736 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 14:25:18,737 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 14:25:18,737 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 14:25:18,737 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 14:25:18,738 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 14:25:18,738 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 14:25:18,738 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 14:25:18,740 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 14:25:18,741 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 14:25:18,741 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 14:25:18,742 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 14:25:18,742 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 14:25:18,743 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 14:25:18,744 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 14:25:18,744 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 14:25:18,744 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 14:25:18,766 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 14:25:18,766 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 14:25:18,766 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22052025...
2025-05-23 14:25:18,768 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0KSjUjXiZBXDWY3JFArvYX9vpjiVAtQYLxtHgEB9seChCqRPFGGDAiFbdBBJJNXMzl&id=100065273659654
2025-05-23 14:25:18,769 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid028fqCreDycrcTmSUcNMoMkm1v5LGQcZCHYjZvDDkd7FnarYXsPu6LqP5wUW3w3VAnl
2025-05-23 14:25:54,506 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 14:25:55,047 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 14:25:58,919 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 40.15 seg.
2025-05-23 14:25:58,921 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22052025.json
2025-05-23 14:25:58,921 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 40.15 segundos.
2025-05-23 14:25:58,921 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 40.16 seg.
2025-05-23 14:25:58,921 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 14:25:58,922 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 117 URLs.
2025-05-23 14:25:58,923 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 14:25:59,319 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 14:25:59,442 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 14:25:59,443 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 14:25:59,443 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.52 seg.
2025-05-23 14:25:59,443 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 14:25:59,445 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 14:25:59,445 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 14:25:59,445 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 14:25:59,446 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 14:25:59,446 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 14:25:59,447 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T14:25:59.445822', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 3, 'history_total_urls': 117, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 0.52, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.16, 'facebook_text_extraction': 0.52, 'stats_consolidation': 0.0}}
2025-05-23 14:25:59,447 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 14:25:59,448 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 14:25:59,449 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 14:25:59,450 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 14:25:59,465 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 14:25:59,468 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 14:25:59,469 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 14:25:59,469 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 14:25:59,488 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 14:25:59,488 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 14:25:59,489 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 14:25:59,489 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 14:25:59,490 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 14:25:59,490 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 14:26:02,431 - semantic_cleaner - INFO - Se identificaron 30 grupos de textos similares
2025-05-23 14:26:02,431 - semantic_cleaner - INFO - Se seleccionaron 30 textos representativos
2025-05-23 14:26:02,431 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 14:26:02,431 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 14:26:02,434 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 14:26:02,435 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 14:26:02,440 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 14:26:02,442 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 14:26:02,443 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 14:26:02,443 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T14:25:59.445822', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 3, 'history_total_urls': 117, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 0.52, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 40.16, 'facebook_text_extraction': 0.52, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.97}}
2025-05-23 14:26:02,444 - main_orchestrator - INFO - Limpieza semántica completada en 2.97 seg.
2025-05-23 14:26:02,444 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 14:26:02,444 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 14:26:02,445 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 14:26:02,462 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0KSjUjXiZBXDWY3JFArvYX9vpjiVAtQYLxtHgEB9seChCqRPFGGDAiFbdBBJJNXMzl&id=100065273659654
2025-05-23 14:26:02,463 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 14:26:02,477 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 14:26:02,477 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 14:26:02,478 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 14:26:02,478 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 14:26:02,478 - main_orchestrator - INFO - ==================================================
2025-05-23 14:26:02,479 - main_orchestrator - INFO - PIPELINE FINALIZADO en 44.11 segundos.
2025-05-23 14:26:02,479 - main_orchestrator - INFO - ==================================================
2025-05-23 14:34:36,180 - main_orchestrator - INFO - ==================================================
2025-05-23 14:34:36,180 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 14:34:36,181 - main_orchestrator - INFO - Usando fecha: REPORTE-INT-058053
2025-05-23 14:34:36,181 - main_orchestrator - INFO - ==================================================
2025-05-23 14:34:36,182 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 14:34:36,183 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 14:34:36,184 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 14:34:36,184 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 117 URLs.
2025-05-23 14:34:36,185 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 14:34:36,185 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 14:34:36,185 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 14:34:36,185 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 14:34:36,186 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 14:34:36,205 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\REPORTE-INT-058053.pdf (4 páginas)
2025-05-23 14:34:36,205 - lib.pdf_processor - INFO - Se extrajeron 0 enlaces URI (no mailto) de REPORTE-INT-058053.pdf.
2025-05-23 14:34:36,206 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\REPORTE-INT-058053.pdf. Terminando proceso para esta fecha.
2025-05-23 14:34:36,207 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_REPORTE-INT-058053.json
2025-05-23 14:34:36,207 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_REPORTE-INT-058053.json
2025-05-23 14:34:36,208 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T14:34:36.206456', 'date_processed': 'REPORTE-INT-058053', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-23 14:34:36,208 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 14:34:36,209 - main_orchestrator - INFO - ==================================================
2025-05-23 14:34:36,209 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.03 segundos.
2025-05-23 14:34:36,209 - main_orchestrator - INFO - ==================================================
2025-05-23 15:40:23,792 - main_orchestrator - INFO - ==================================================
2025-05-23 15:40:23,793 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 15:40:23,793 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 15:40:23,794 - main_orchestrator - INFO - ==================================================
2025-05-23 15:40:23,796 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 15:40:23,797 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 15:40:23,797 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 15:40:23,798 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 117 URLs.
2025-05-23 15:40:23,799 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 15:40:23,800 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 15:40:23,800 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 15:40:23,801 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 15:40:23,801 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 15:40:23,802 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 15:40:23,851 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:40:24,134 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 15:40:24,134 - main_orchestrator - INFO - PDF procesado en 0.33 seg. Enlaces encontrados: 51
2025-05-23 15:40:24,149 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 15:40:24,150 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 15:40:24,151 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:40:24,198 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:40:24,199 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 15:40:24,199 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:40:24,199 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 15:40:24,200 - lib.history_tracker - INFO - Filtradas 47 URLs ya procesadas del lote actual.
2025-05-23 15:40:24,200 - main_orchestrator - INFO - URLs nuevas para procesar: 4 (de 51 total)
2025-05-23 15:40:24,200 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 15:40:24,200 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 15:40:24,204 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 15:40:24,204 - content_deduplicator - INFO - Analizando 4 URLs para encontrar duplicados...
2025-05-23 15:40:24,205 - content_deduplicator - INFO - Procesando 3 URLs del dominio facebook.com
2025-05-23 15:40:24,210 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-05-23 15:40:24,210 - content_deduplicator - INFO - URLs totales: 4, Únicas: 2, En grupos: 2
2025-05-23 15:40:24,210 - content_deduplicator - INFO - Se realizaron 2 comparaciones (379.2/seg), evitando 0
2025-05-23 15:40:24,211 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-05-23 15:40:24,212 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:40:24,212 - main_orchestrator - INFO - Análisis de duplicados completado: 1 URLs duplicadas filtradas
2025-05-23 15:40:24,213 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 15:40:24,213 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:40:24,213 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 15:40:24,213 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 15:40:24,214 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 15:40:24,214 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 15:40:24,215 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 15:40:24,216 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 15:40:24,216 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 15:40:24,217 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 15:40:24,217 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 15:40:24,217 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 15:40:24,218 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 15:40:24,219 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 15:40:24,219 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 15:40:24,220 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 15:40:24,234 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 15:40:24,235 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 15:40:24,235 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22052025...
2025-05-23 15:40:24,237 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid02j1w6bWLx1ZF9dKbkT8Ppgoa5dEZyqPAASSvTfGmcrgKWW49ZNv93fj4b82gLEYQbl&id=100072108931277
2025-05-23 15:40:24,238 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid067JmiEgeU87Xtw6N3mNNJhesRyq582WQip4EPrMVa8XoHpdKuxJtDfCHPKDcGvvLl&id=100063616446639
2025-05-23 15:40:56,958 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 15:41:02,233 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 15:41:05,753 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 41.52 seg.
2025-05-23 15:41:05,756 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22052025.json
2025-05-23 15:41:05,756 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 41.52 segundos.
2025-05-23 15:41:05,757 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 41.52 seg.
2025-05-23 15:41:05,757 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 15:41:05,758 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 119 URLs.
2025-05-23 15:41:05,759 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 15:41:06,331 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-2.pdf
2025-05-23 15:41:06,432 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 15:41:06,432 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 15:41:06,433 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.67 seg.
2025-05-23 15:41:06,433 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 15:41:06,434 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:41:06,434 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:41:06,435 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 15:41:06,436 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:41:06,436 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:41:06,437 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:41:06.435448', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 3, 'history_total_urls': 119, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.33, 'pdf_text_extraction': 0.67, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 41.52, 'facebook_text_extraction': 0.67, 'stats_consolidation': 0.0}}
2025-05-23 15:41:06,437 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 15:41:06,437 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 15:41:06,439 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 15:41:06,441 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 15:41:06,462 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:41:06,465 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:41:06,466 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:41:06,466 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 15:41:06,486 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 15:41:06,486 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 15:41:06,486 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 15:41:06,486 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 15:41:06,487 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 15:41:06,487 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 15:41:09,793 - semantic_cleaner - INFO - Se identificaron 30 grupos de textos similares
2025-05-23 15:41:09,794 - semantic_cleaner - INFO - Se seleccionaron 30 textos representativos
2025-05-23 15:41:09,794 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 15:41:09,794 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:41:09,798 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:41:09,798 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:41:09,806 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:41:09,808 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:41:09,808 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:41:09,808 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:41:06.435448', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 3, 'history_total_urls': 119, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.33, 'pdf_text_extraction': 0.67, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 41.52, 'facebook_text_extraction': 0.67, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.34}}
2025-05-23 15:41:09,809 - main_orchestrator - INFO - Limpieza semántica completada en 3.34 seg.
2025-05-23 15:41:09,809 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 15:41:09,809 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 15:41:09,810 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:41:09,831 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid067JmiEgeU87Xtw6N3mNNJhesRyq582WQip4EPrMVa8XoHpdKuxJtDfCHPKDcGvvLl&id=100063616446639
2025-05-23 15:41:09,831 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 15:41:09,846 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:41:09,847 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 15:41:09,847 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 15:41:09,847 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 15:41:09,847 - main_orchestrator - INFO - ==================================================
2025-05-23 15:41:09,848 - main_orchestrator - INFO - PIPELINE FINALIZADO en 46.06 segundos.
2025-05-23 15:41:09,848 - main_orchestrator - INFO - ==================================================
2025-05-23 15:44:22,357 - main_orchestrator - INFO - ==================================================
2025-05-23 15:44:22,357 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 15:44:22,358 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 15:44:22,358 - main_orchestrator - INFO - ==================================================
2025-05-23 15:44:22,360 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 15:44:22,361 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 15:44:22,361 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 15:44:22,363 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 119 URLs.
2025-05-23 15:44:22,364 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 15:44:22,364 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 15:44:22,364 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 15:44:22,365 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 15:44:22,365 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 15:44:22,387 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:44:22,660 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 15:44:22,660 - main_orchestrator - INFO - PDF procesado en 0.29 seg. Enlaces encontrados: 51
2025-05-23 15:44:22,664 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 15:44:22,664 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 15:44:22,666 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:44:22,718 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:44:22,719 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 15:44:22,719 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:44:22,720 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 15:44:22,720 - lib.history_tracker - INFO - Filtradas 49 URLs ya procesadas del lote actual.
2025-05-23 15:44:22,720 - main_orchestrator - INFO - URLs nuevas para procesar: 2 (de 51 total)
2025-05-23 15:44:22,721 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 15:44:22,721 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 15:44:22,723 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 15:44:22,724 - content_deduplicator - INFO - Analizando 2 URLs para encontrar duplicados...
2025-05-23 15:44:22,724 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 15:44:22,724 - content_deduplicator - INFO - URLs totales: 2, Únicas: 2, En grupos: 0
2025-05-23 15:44:22,725 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 15:44:22,725 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 15:44:22,726 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:44:22,726 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 15:44:22,727 - main_orchestrator - INFO - URLs después de filtrar duplicados: 2
2025-05-23 15:44:22,727 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:44:22,727 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 15:44:22,727 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 15:44:22,728 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 15:44:22,728 - lib.url_manager - INFO - Clasificación de 2 URLs:
2025-05-23 15:44:22,728 - lib.url_manager - INFO -  - SOCIAL: 2
2025-05-23 15:44:22,729 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 15:44:22,730 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 15:44:22,730 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 15:44:22,730 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 15:44:22,731 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 15:44:22,731 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 15:44:22,732 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 15:44:22,732 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 15:44:22,732 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 15:44:22,746 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-23 15:44:22,747 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 15:44:22,747 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 22052025...
2025-05-23 15:44:22,749 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 15:44:40,215 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 15:44:45,185 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 22.44 seg.
2025-05-23 15:44:45,186 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22052025.json
2025-05-23 15:44:45,187 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 22.44 segundos.
2025-05-23 15:44:45,187 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 22.44 seg.
2025-05-23 15:44:45,187 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-23 15:44:45,189 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 120 URLs.
2025-05-23 15:44:45,189 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 15:44:45,288 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025\22052025-1.pdf
2025-05-23 15:44:45,289 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 15:44:45,289 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.10 seg.
2025-05-23 15:44:45,289 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 15:44:45,290 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:44:45,291 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:44:45,291 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 15:44:45,292 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:44:45,293 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:44:45,293 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:44:45.291813', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 2, 'history_total_urls': 120, 'categories': {'social': 2}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 22.44, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-05-23 15:44:45,293 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 15:44:45,293 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 15:44:45,295 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 15:44:45,296 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 15:44:45,313 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:44:45,317 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:44:45,317 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:44:45,318 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 15:44:45,337 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 15:44:45,337 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 15:44:45,338 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 15:44:45,338 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 15:44:45,338 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 15:44:45,339 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-23 15:44:48,118 - semantic_cleaner - INFO - Se identificaron 29 grupos de textos similares
2025-05-23 15:44:48,118 - semantic_cleaner - INFO - Se seleccionaron 29 textos representativos
2025-05-23 15:44:48,119 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 15:44:48,119 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:44:48,122 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:44:48,123 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:44:48,131 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:44:48,133 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:44:48,133 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:44:48,133 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:44:45.291813', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 2, 'history_total_urls': 120, 'categories': {'social': 2}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 22.44, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.81}}
2025-05-23 15:44:48,133 - main_orchestrator - INFO - Limpieza semántica completada en 2.81 seg.
2025-05-23 15:44:48,134 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 15:44:48,134 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 15:44:48,134 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:44:48,152 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 15:44:48,152 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 15:44:48,166 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:44:48,166 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 15:44:48,166 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 15:44:48,166 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 15:44:48,167 - main_orchestrator - INFO - ==================================================
2025-05-23 15:44:48,167 - main_orchestrator - INFO - PIPELINE FINALIZADO en 25.81 segundos.
2025-05-23 15:44:48,167 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:09,388 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:09,388 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 15:50:09,389 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 15:50:09,389 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:09,390 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 15:50:09,391 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 15:50:09,392 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 15:50:09,393 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 120 URLs.
2025-05-23 15:50:09,393 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 15:50:09,394 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 15:50:09,394 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 15:50:09,395 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 15:50:09,395 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 15:50:09,417 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:50:09,585 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 15:50:09,585 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 51
2025-05-23 15:50:09,588 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 15:50:09,589 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 15:50:09,590 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 15:50:09,626 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:50:09,626 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 15:50:09,627 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:50:09,627 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 15:50:09,627 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 15:50:09,627 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 15:50:09,627 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 15:50:09,628 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 15:50:09,629 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 15:50:09,630 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 15:50:09,630 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 15:50:09,630 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 15:50:09,631 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 15:50:09,631 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 15:50:09,632 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:50:09,633 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 15:50:09,633 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 15:50:09,633 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 15:50:09,634 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 15:50:09,634 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 15:50:09,634 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 15:50:09,635 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 15:50:09,635 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 15:50:09,636 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 15:50:09,636 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 15:50:09,636 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 15:50:09,637 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 15:50:09,637 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 15:50:09,637 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 15:50:09,638 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 15:50:09,638 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 15:50:09,638 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 15:50:09,652 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 15:50:09,652 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 15:50:09,652 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 15:50:09,652 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 15:50:09,653 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:50:09,653 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:50:09,654 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:50:09.652814', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 120, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 15:50:09,654 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 15:50:09,654 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 15:50:09,655 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 15:50:09,656 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 15:50:09,671 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 15:50:09,674 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:50:09,675 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 15:50:09,675 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 15:50:09,692 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 15:50:09,692 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 15:50:09,692 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 15:50:09,692 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 15:50:09,693 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 15:50:09,693 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 15:50:12,580 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 15:50:12,580 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 15:50:12,581 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 15:50:12,581 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:50:12,584 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 15:50:12,585 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:50:12,594 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:50:12,596 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:50:12,596 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 15:50:12,597 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T15:50:09.652814', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 120, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.92}}
2025-05-23 15:50:12,597 - main_orchestrator - INFO - Limpieza semántica completada en 2.92 seg.
2025-05-23 15:50:12,598 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 15:50:12,598 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 15:50:12,598 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 15:50:12,624 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 15:50:12,624 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 15:50:12,640 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 15:50:12,640 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 15:50:12,641 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 15:50:12,641 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 15:50:12,641 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:12,642 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.25 segundos.
2025-05-23 15:50:12,642 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:29,531 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:29,531 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 15:50:29,531 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-23 15:50:29,532 - main_orchestrator - INFO - ==================================================
2025-05-23 15:50:29,533 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 15:50:29,534 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 15:50:29,536 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 15:50:29,537 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 120 URLs.
2025-05-23 15:50:29,538 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 15:50:29,538 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 15:50:29,539 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 15:50:29,539 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 15:50:29,539 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 15:50:29,560 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 15:50:29,833 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-23 15:50:29,834 - main_orchestrator - INFO - PDF procesado en 0.29 seg. Enlaces encontrados: 52
2025-05-23 15:50:29,838 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-23 15:50:29,838 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 15:50:29,840 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 15:50:29,897 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 15:50:29,897 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-23 15:50:29,897 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 15:50:29,898 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 15:50:29,898 - lib.history_tracker - INFO - Filtradas 1 URLs ya procesadas del lote actual.
2025-05-23 15:50:29,899 - main_orchestrator - INFO - URLs nuevas para procesar: 51 (de 52 total)
2025-05-23 15:50:29,899 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 15:50:29,899 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 15:50:29,901 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 15:50:29,902 - content_deduplicator - INFO - Analizando 51 URLs para encontrar duplicados...
2025-05-23 15:50:29,903 - content_deduplicator - INFO - Procesando 3 URLs del dominio elperuano.pe
2025-05-23 15:50:29,903 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2390802-1 (tipo: news)
2025-05-23 15:50:45,605 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2390725-1 (tipo: news)
2025-05-23 15:50:59,586 - content_deduplicator - INFO - Procesando 22 URLs del dominio facebook.com
2025-05-23 15:50:59,586 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333 (tipo: facebook)
2025-05-23 15:51:13,565 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-23 15:51:15,834 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247 (tipo: facebook)
2025-05-23 15:51:26,879 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-23 15:51:29,125 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232 (tipo: facebook)
2025-05-23 15:51:42,508 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-23 15:51:44,726 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468 (tipo: facebook)
2025-05-23 15:51:55,642 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468
2025-05-23 15:51:57,923 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099 (tipo: facebook)
2025-05-23 15:52:07,644 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1075702177910845&set=a.322443046570099
2025-05-23 15:52:09,904 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=653165420904914&set=a.108066292081499 (tipo: facebook)
2025-05-23 15:52:22,082 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=653165420904914&set=a.108066292081499
2025-05-23 15:52:24,318 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=980118311000784&set=a.407743561571598 (tipo: facebook)
2025-05-23 15:52:37,789 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=980118311000784&set=a.407743561571598
2025-05-23 15:52:40,037 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=122129948282693859&set=a.122108624150693859 (tipo: facebook)
2025-05-23 15:52:50,404 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=122129948282693859&set=a.122108624150693859
2025-05-23 15:52:52,634 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=646737408228204&set=a.111572665078017 (tipo: facebook)
2025-05-23 15:53:03,930 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=646737408228204&set=a.111572665078017
2025-05-23 15:53:06,157 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1CoMomk1ZQ/ (tipo: facebook)
2025-05-23 15:53:15,784 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1CoMomk1ZQ/
2025-05-23 15:53:18,049 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/18wm18gWd3/ (tipo: facebook)
2025-05-23 15:53:27,782 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/18wm18gWd3/
2025-05-23 15:53:30,038 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/156Wn1S6DH/ (tipo: facebook)
2025-05-23 15:53:39,121 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-23 15:53:41,343 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16UHriKBu6/ (tipo: facebook)
2025-05-23 15:53:50,444 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16UHriKBu6/
2025-05-23 15:53:52,734 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/19V7khzxSr/ (tipo: facebook)
2025-05-23 15:54:02,215 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/19V7khzxSr/
2025-05-23 15:54:04,401 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/15wrXuXmpw/ (tipo: facebook)
2025-05-23 15:54:14,399 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/15wrXuXmpw/
2025-05-23 15:54:16,587 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/15wpT2Whf7/ (tipo: facebook)
2025-05-23 15:54:26,825 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/15wpT2Whf7/
2025-05-23 15:54:29,012 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16D8iFxcXd/ (tipo: facebook)
2025-05-23 15:54:39,508 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-23 15:54:41,915 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/JuanNunuraPeriodista/videos/2501259376893949 (tipo: facebook)
2025-05-23 15:54:49,992 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/JuanNunuraPeriodista/videos/2501259376893949
2025-05-23 15:54:52,285 - content_deduplicator - INFO - Progreso: 20/51 URLs procesadas en 262.38 seg.
2025-05-23 15:54:52,286 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-05-23 15:54:52,286 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/ica/ica-podran-recibir-orientacion-ante-facturaciones-elevadas-en-modulo-de-la-sunass-en-mega-plaza-noticia/ (tipo: news)
2025-05-23 15:55:18,055 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/sedalib-tapara-el-desague-en-8-areas-de-huanchaco-la-libertad-peru-trujillo-noticia/?ref=dcr (tipo: news)
2025-05-23 15:55:50,204 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-23 15:55:50,205 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/contraloria/noticias/1145766-alertan-riesgo-que-no-se-realice-valoracion-real-del-costo-de-obras-pendientes-de-la-planta-de-tratamiento-de-aguas-residuales-de-huaral (tipo: other)
2025-05-23 15:56:25,209 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/mtc/noticias/1145721-mtc-y-sedapal-firman-convenio-clave-para-liberar-interferencias-y-asegurar-avance-del-anillo-vial-periferico (tipo: other)
2025-05-23 15:56:46,395 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/regionlambayeque/noticias/1145977-gobierno-regional-de-lambayeque-exige-impulso-del-proyecto-de-planta-de-tratamiento-de-agua-potable-de-chiclayo-en-reunion-con-ministerio-de (tipo: other)
2025-05-23 15:57:09,494 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/pcm/noticias/1145813-ejecutivo-y-gobiernos-regionales-articulan-agenda-de-desarrollo-en-edicion-vii-consejo-de-estado-regional (tipo: other)
2025-05-23 15:57:33,839 - content_deduplicator - INFO - Procesando 2 URLs del dominio macronorte.pe
2025-05-23 15:57:33,840 - selenium_extractor - INFO - Extrayendo contenido de URL: https://macronorte.pe/2025/04/14/alcalde-mario-reyna-citara-a-funcionario-de-sedalib-por-contaminacion-de-totorales-en-huanchaco/ (tipo: other)
2025-05-23 15:57:45,294 - selenium_extractor - INFO - Extrayendo contenido de URL: https://macronorte.pe/2025/04/14/revisaran-convenio-donde-la-mpt-otorga-facultades-en-saneamiento-al-ministerio-de-vivienda/ (tipo: other)
2025-05-23 15:57:56,037 - content_deduplicator - INFO - Procesando 6 URLs del dominio imacorpplataforma.com
2025-05-23 15:57:56,079 - content_deduplicator - INFO - Análisis completado en 446.18 segundos
2025-05-23 15:57:56,080 - content_deduplicator - INFO - URLs totales: 51, Únicas: 31, En grupos: 15
2025-05-23 15:57:56,080 - content_deduplicator - INFO - Se realizaron 67 comparaciones (0.2/seg), evitando 0
2025-05-23 15:57:56,080 - content_deduplicator - INFO - Grupos de duplicados encontrados: 4
2025-05-23 15:57:56,081 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 15:57:56,082 - main_orchestrator - INFO - Análisis de duplicados completado: 14 URLs duplicadas filtradas
2025-05-23 15:57:56,082 - main_orchestrator - INFO - URLs después de filtrar duplicados: 37
2025-05-23 15:57:56,082 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 15:57:56,083 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 15:57:56,083 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 15:57:56,083 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 15:57:56,084 - lib.url_manager - INFO - Clasificación de 37 URLs:
2025-05-23 15:57:56,084 - lib.url_manager - INFO -  - HTML: 21
2025-05-23 15:57:56,085 - lib.url_manager - INFO -  - IMAGES: 6
2025-05-23 15:57:56,085 - lib.url_manager - INFO -  - SOCIAL: 10
2025-05-23 15:57:56,086 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_15042025_unprocessed.json
2025-05-23 15:57:56,093 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-23 15:57:56,094 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 15:57:56,094 - lib.image_processor - INFO - Iniciando descarga paralela de 6 imágenes para la fecha 15042025...
2025-05-23 15:58:07,137 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_8107240a_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (208128 bytes)
2025-05-23 15:58:08,717 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_c20487c6_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (220092 bytes)
2025-05-23 15:58:08,891 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_7af72526_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (488907 bytes)
2025-05-23 15:58:10,406 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_45955483_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (511584 bytes)
2025-05-23 15:58:12,991 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_7bbd95cb_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (798934 bytes)
2025-05-23 15:58:16,176 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_2353b10e_15042025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025 (1134418 bytes)
2025-05-23 15:58:16,938 - lib.image_processor - INFO - Progreso descarga imágenes: 6/6 en 20.84 seg.
2025-05-23 15:58:16,947 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_15042025.json
2025-05-23 15:58:16,947 - lib.image_processor - INFO - Descarga de imágenes completada para 6/6 URLs en 20.85 segundos.
2025-05-23 15:58:16,948 - main_orchestrator - INFO - Descarga de imágenes completada en 20.85 seg.
2025-05-23 15:58:16,948 - lib.history_tracker - INFO - Añadidas 6 nuevas URLs al historial.
2025-05-23 15:58:16,950 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 126 URLs.
2025-05-23 15:58:16,951 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 15:58:16,952 - lib.html_scraper - INFO - Iniciando scraping paralelo de 21 URLs...
2025-05-23 15:58:27,946 - lib.html_scraper - INFO - Progreso: 20/21 URLs procesadas en 10.99 seg.
2025-05-23 15:58:29,043 - lib.html_scraper - INFO - Progreso: 21/21 URLs procesadas en 12.09 seg.
2025-05-23 15:58:29,061 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-23 15:58:29,061 - lib.html_scraper - INFO - Scraping completado para 21/21 URLs en 12.11 segundos.
2025-05-23 15:58:29,062 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-23 15:58:29,062 - main_orchestrator - INFO - Scraping HTML completado en 12.11 seg.
2025-05-23 15:58:29,063 - lib.history_tracker - INFO - Añadidas 20 nuevas URLs al historial.
2025-05-23 15:58:29,065 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 146 URLs.
2025-05-23 15:58:29,065 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 15:58:30,841 - lib.api_client - ERROR - Error procesando tmpl8a48xw0.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 31
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 31
}
]
2025-05-23 15:58:30,977 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 31
}
]
2025-05-23 15:58:30,977 - lib.image_processor - INFO - Procesando 6 imágenes con API (batch_size=3, pausa=60s)
2025-05-23 15:58:30,978 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-23 15:58:30,978 - lib.image_processor - INFO - Procesando imagen con API: img_5_8107240a_15042025.jpg
2025-05-23 15:58:31,080 - lib.image_processor - INFO - Imagen img_5_8107240a_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:58:31,096 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_5_8107240a_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:58:31,096 - lib.image_processor - WARNING - Error procesando imagen img_5_8107240a_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 23
}
]
2025-05-23 15:58:31,705 - lib.image_processor - INFO - Procesando imagen con API: img_1_7af72526_15042025.jpg
2025-05-23 15:58:31,796 - lib.image_processor - INFO - Imagen img_1_7af72526_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:58:31,811 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_1_7af72526_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:58:31,812 - lib.image_processor - WARNING - Error procesando imagen img_1_7af72526_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-23 15:58:32,594 - lib.image_processor - INFO - Procesando imagen con API: img_4_c20487c6_15042025.jpg
2025-05-23 15:58:32,625 - lib.image_processor - INFO - Imagen img_4_c20487c6_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:58:32,639 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_4_c20487c6_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:58:32,640 - lib.image_processor - WARNING - Error procesando imagen img_4_c20487c6_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 19
}
]
2025-05-23 15:58:33,274 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 15:59:33,275 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-23 15:59:33,276 - lib.image_processor - INFO - Procesando imagen con API: img_6_45955483_15042025.jpg
2025-05-23 15:59:33,379 - lib.image_processor - INFO - Imagen img_6_45955483_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:59:33,393 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_6_45955483_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:59:33,393 - lib.image_processor - WARNING - Error procesando imagen img_6_45955483_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-23 15:59:34,000 - lib.image_processor - INFO - Procesando imagen con API: img_2_7bbd95cb_15042025.jpg
2025-05-23 15:59:34,100 - lib.image_processor - INFO - Imagen img_2_7bbd95cb_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:59:34,113 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_2_7bbd95cb_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:59:34,113 - lib.image_processor - WARNING - Error procesando imagen img_2_7bbd95cb_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 9
}
]
2025-05-23 15:59:34,867 - lib.image_processor - INFO - Procesando imagen con API: img_3_2353b10e_15042025.jpg
2025-05-23 15:59:35,002 - lib.image_processor - INFO - Imagen img_3_2353b10e_15042025.jpg visualmente similar a otra ya procesada
2025-05-23 15:59:35,016 - lib.image_processor - INFO - OMITIENDO PERMANENTEMENTE: Imagen img_3_2353b10e_15042025.jpg - Imagen demasiado pesada o compleja para procesar
2025-05-23 15:59:35,017 - lib.image_processor - WARNING - Error procesando imagen img_3_2353b10e_15042025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 59
}
]
2025-05-23 15:59:35,679 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-23 15:59:35,679 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-23 15:59:35,680 - lib.image_processor - INFO - Procesamiento API completado para 0/6 imágenes en 64.70 segundos.
2025-05-23 15:59:35,680 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 66.61 seg.
2025-05-23 15:59:35,680 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 15:59:35,681 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-23 15:59:35,699 - main_orchestrator - INFO - Encontradas 8 URLs de Facebook para procesar
2025-05-23 15:59:35,700 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025
2025-05-23 15:59:35,700 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 15:59:35,701 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 8 URLs de Facebook para la fecha 15042025...
2025-05-23 15:59:35,722 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1CoMomk1ZQ/
2025-05-23 15:59:35,722 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/18wm18gWd3/
2025-05-23 15:59:35,723 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=122153249462545333&set=a.122140281014545333
2025-05-23 15:59:35,727 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-23 15:59:35,728 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/156Wn1S6DH/
2025-05-23 16:00:06,788 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-4.pdf
2025-05-23 16:00:06,825 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-2.pdf
2025-05-23 16:00:10,434 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-23 16:00:10,814 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/19V7khzxSr/
2025-05-23 16:00:11,304 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/p/15wrXuXmpw/
2025-05-23 16:00:14,254 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/JuanNunuraPeriodista/videos/2501259376893949
2025-05-23 16:00:19,949 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 16:00:43,451 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-8.pdf
2025-05-23 16:00:46,404 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-23 16:00:47,929 - lib.facebook_processor - INFO - Progreso Facebook: 5/8 en 72.23 seg.
2025-05-23 16:00:49,934 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-7.pdf
2025-05-23 16:00:51,918 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-6.pdf
2025-05-23 16:00:56,990 - lib.facebook_processor - INFO - Progreso Facebook: 8/8 en 81.29 seg.
2025-05-23 16:00:56,995 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-23 16:00:56,996 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 7/8 exitosos en 81.29 segundos.
2025-05-23 16:00:56,996 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 81.30 seg.
2025-05-23 16:00:56,997 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-23 16:00:56,998 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 153 URLs.
2025-05-23 16:00:56,998 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:00:57,720 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-2.pdf
2025-05-23 16:00:58,444 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-23 16:00:58,588 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 16:00:59,517 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-8.pdf
2025-05-23 16:01:00,571 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-23 16:01:00,769 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-7.pdf
2025-05-23 16:01:01,669 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-6.pdf
2025-05-23 16:01:01,670 - lib.facebook_processor - INFO - Texto extraído de 7 PDFs de Facebook
2025-05-23 16:01:01,671 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 4.67 seg.
2025-05-23 16:01:01,671 - main_orchestrator - INFO - Texto extraído de 7 PDFs de Facebook
2025-05-23 16:01:01,673 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:01:01,673 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:01:01,676 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:01:01,679 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:01:01,680 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:01:01,683 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:01:01.677517', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 37, 'history_total_urls': 153, 'categories': {'html': 21, 'images': 6, 'social': 10}, 'html_processing': {'attempted': 21, 'processed': 20, 'successful': 20, 'relevant (>=0.3)': 15, 'average_relevance': 0.48500000000000004}, 'image_processing': {'attempted_download': 6, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 7, 'extracted_texts': 7}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 4.67, 'image_download': 20.85, 'html_scraping': 12.11, 'image_api': 66.61, 'facebook_processing': 81.3, 'facebook_text_extraction': 4.67, 'stats_consolidation': 0.0}}
2025-05-23 16:01:01,683 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:01:01,684 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:01:01,707 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 16:01:01,716 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 16:01:01,717 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 16:01:01,718 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:01:01,754 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:01:01,755 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:01:01,755 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-23 16:01:01,758 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-23 16:01:01,764 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:01:01,765 - semantic_cleaner - INFO - Extraídos 7 textos de Facebook
2025-05-23 16:01:11,212 - semantic_cleaner - INFO - Se identificaron 33 grupos de textos similares
2025-05-23 16:01:11,212 - semantic_cleaner - INFO - Se seleccionaron 33 textos representativos
2025-05-23 16:01:11,213 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:01:11,213 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 16:01:11,217 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 16:01:11,217 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:01:11,228 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:01:11,231 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:01:11,231 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:01:11,231 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:01:01.677517', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 37, 'history_total_urls': 153, 'categories': {'html': 21, 'images': 6, 'social': 10}, 'html_processing': {'attempted': 21, 'processed': 20, 'successful': 20, 'relevant (>=0.3)': 15, 'average_relevance': 0.48500000000000004}, 'image_processing': {'attempted_download': 6, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 7, 'extracted_texts': 7}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 4.67, 'image_download': 20.85, 'html_scraping': 12.11, 'image_api': 66.61, 'facebook_processing': 81.3, 'facebook_text_extraction': 4.67, 'stats_consolidation': 0.0, 'semantic_cleaning': 9.51}}
2025-05-23 16:01:11,232 - main_orchestrator - INFO - Limpieza semántica completada en 9.51 seg.
2025-05-23 16:01:11,233 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:01:11,233 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:01:11,233 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:01:11,257 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/1CoMomk1ZQ/
2025-05-23 16:01:11,257 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:01:11,276 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:01:11,277 - facebook_extractor_fix - INFO - Se han añadido 7 textos de Facebook al archivo limpio
2025-05-23 16:01:11,278 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:01:11,278 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:01:11,279 - main_orchestrator - INFO - ==================================================
2025-05-23 16:01:11,279 - main_orchestrator - INFO - PIPELINE FINALIZADO en 641.75 segundos.
2025-05-23 16:01:11,279 - main_orchestrator - INFO - ==================================================
2025-05-23 16:02:40,287 - main_orchestrator - INFO - ==================================================
2025-05-23 16:02:40,288 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:02:40,288 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:02:40,289 - main_orchestrator - INFO - ==================================================
2025-05-23 16:02:40,306 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:02:40,320 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:02:40,320 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:02:40,321 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 153 URLs.
2025-05-23 16:02:40,322 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:02:40,323 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:02:40,324 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:02:40,324 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:02:40,325 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:02:40,344 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:02:40,556 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:02:40,557 - main_orchestrator - INFO - PDF procesado en 0.23 seg. Enlaces encontrados: 51
2025-05-23 16:02:40,560 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:02:40,560 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:02:40,561 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:02:40,601 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:02:40,601 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:02:40,602 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:02:40,602 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:02:40,602 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:02:40,602 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:02:40,603 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:02:40,603 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:02:40,621 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:02:40,622 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:02:40,622 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:02:40,622 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:02:40,623 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:02:40,623 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:02:40,624 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:02:40,624 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:02:40,624 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:02:40,625 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:02:40,625 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:02:40,625 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:02:40,625 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:02:40,626 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:02:40,626 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:02:40,627 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:02:40,628 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:02:40,628 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:02:40,628 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:02:40,629 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:02:40,629 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:02:40,630 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:02:40,630 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:02:40,631 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:02:40,632 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:02:40,633 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:02:40,633 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:02:40,633 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:02:40,635 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:02:40,636 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:02:40,636 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:02:40.634386', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:02:40,636 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:02:40,637 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:02:40,653 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:02:40,668 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:02:40,682 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:02:40,685 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:02:40,685 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:02:40,686 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:02:40,702 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:02:40,703 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:02:40,703 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:02:40,703 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:02:40,703 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:02:40,704 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:02:43,806 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:02:43,807 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:02:43,807 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:02:43,807 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:02:43,810 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:02:43,810 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:02:43,816 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:02:43,817 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:02:43,818 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:02:43,818 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:02:40.634386', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.13}}
2025-05-23 16:02:43,818 - main_orchestrator - INFO - Limpieza semántica completada en 3.13 seg.
2025-05-23 16:02:43,818 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:02:43,819 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:02:43,819 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:02:43,851 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:02:43,853 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:02:43,874 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:02:43,874 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:02:43,875 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:02:43,875 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:02:43,875 - main_orchestrator - INFO - ==================================================
2025-05-23 16:02:43,876 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.59 segundos.
2025-05-23 16:02:43,876 - main_orchestrator - INFO - ==================================================
2025-05-23 16:04:50,934 - main_orchestrator - INFO - ==================================================
2025-05-23 16:04:50,934 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:04:50,934 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:04:50,934 - main_orchestrator - INFO - ==================================================
2025-05-23 16:04:50,936 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:04:50,936 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:04:50,937 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:04:50,938 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 153 URLs.
2025-05-23 16:04:50,938 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:04:50,939 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:04:50,939 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:04:50,939 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:04:50,939 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:04:50,959 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:04:51,138 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:04:51,138 - main_orchestrator - INFO - PDF procesado en 0.20 seg. Enlaces encontrados: 51
2025-05-23 16:04:51,141 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:04:51,141 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:04:51,143 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:04:51,186 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:04:51,187 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:04:51,187 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:04:51,187 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:04:51,188 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:04:51,188 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:04:51,188 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:04:51,188 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:04:51,191 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:04:51,192 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:04:51,192 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:04:51,192 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:04:51,193 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:04:51,193 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:04:51,194 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:04:51,194 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:04:51,194 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:04:51,194 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:04:51,195 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:04:51,195 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:04:51,195 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:04:51,196 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:04:51,196 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:04:51,197 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:04:51,197 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:04:51,198 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:04:51,198 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:04:51,199 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:04:51,199 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:04:51,200 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:04:51,200 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:04:51,200 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:04:51,202 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:04:51,202 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:04:51,202 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:04:51,203 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:04:51,204 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:04:51,204 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:04:51,204 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:04:51.203243', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.2, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:04:51,205 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:04:51,205 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:04:51,206 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:04:51,207 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:04:51,221 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:04:51,223 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:04:51,224 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:04:51,224 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:04:51,240 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:04:51,240 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:04:51,240 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:04:51,241 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:04:51,241 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:04:51,241 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:04:54,266 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:04:54,266 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:04:54,266 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:04:54,266 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:04:54,269 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:04:54,269 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:04:54,275 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:04:54,277 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:04:54,277 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:04:54,277 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:04:51.203243', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.2, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.05}}
2025-05-23 16:04:54,278 - main_orchestrator - INFO - Limpieza semántica completada en 3.05 seg.
2025-05-23 16:04:54,278 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:04:54,279 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:04:54,279 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:04:54,298 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:04:54,298 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:04:54,312 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:04:54,313 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:04:54,313 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:04:54,314 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:04:54,314 - main_orchestrator - INFO - ==================================================
2025-05-23 16:04:54,314 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.38 segundos.
2025-05-23 16:04:54,315 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:31,920 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:31,920 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:11:31,921 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:11:31,921 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:31,923 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:11:31,924 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:11:31,925 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:11:31,926 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 153 URLs.
2025-05-23 16:11:31,926 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:11:31,927 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:11:31,928 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:11:31,928 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:11:31,928 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:11:31,952 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:11:32,176 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:11:32,176 - main_orchestrator - INFO - PDF procesado en 0.25 seg. Enlaces encontrados: 51
2025-05-23 16:11:32,179 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:11:32,180 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:11:32,181 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:11:32,229 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:11:32,229 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:11:32,229 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:11:32,229 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:11:32,230 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:11:32,230 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:11:32,230 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:11:32,231 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:11:32,234 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:11:32,234 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:11:32,234 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:11:32,235 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:11:32,235 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:11:32,236 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:11:32,237 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:11:32,238 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:11:32,238 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:11:32,239 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:11:32,239 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:11:32,239 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:11:32,240 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:11:32,240 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:11:32,241 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:11:32,242 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:11:32,243 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:11:32,243 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:11:32,243 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:11:32,243 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:11:32,244 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:11:32,244 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:11:32,244 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:11:32,245 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:11:32,247 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:11:32,247 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:11:32,247 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:11:32,247 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:11:32,249 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:11:32,249 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:11:32,250 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:11:32.248266', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.25, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:11:32,250 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:11:32,251 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:11:32,252 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:11:32,253 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:11:32,272 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:11:32,277 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:11:32,277 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:11:32,277 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:11:32,300 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:11:32,301 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:11:32,301 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:11:32,301 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:11:32,301 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:11:32,302 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:11:35,317 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:11:35,317 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:11:35,317 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:11:35,318 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:11:35,321 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:11:35,322 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:11:35,331 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:11:35,332 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:11:35,332 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:11:35,332 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:11:32.248266', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 153, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.25, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.05}}
2025-05-23 16:11:35,333 - main_orchestrator - INFO - Limpieza semántica completada en 3.05 seg.
2025-05-23 16:11:35,333 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:11:35,333 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:11:35,333 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:11:35,355 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:11:35,356 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:11:35,373 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:11:35,373 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:11:35,374 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:11:35,374 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:11:35,374 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:35,375 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.45 segundos.
2025-05-23 16:11:35,375 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:58,929 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:58,929 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:11:58,929 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 16:11:58,930 - main_orchestrator - INFO - ==================================================
2025-05-23 16:11:58,931 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:11:58,931 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:11:58,932 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:11:58,933 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 153 URLs.
2025-05-23 16:11:58,933 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:11:58,934 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:11:58,934 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:11:58,934 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:11:58,935 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:11:58,971 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 16:11:59,698 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 16:11:59,698 - main_orchestrator - INFO - PDF procesado en 0.76 seg. Enlaces encontrados: 103
2025-05-23 16:11:59,704 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 16:11:59,704 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:11:59,706 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 16:11:59,818 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:11:59,819 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 16:11:59,819 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:11:59,819 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:11:59,820 - lib.history_tracker - INFO - Filtradas 82 URLs ya procesadas del lote actual.
2025-05-23 16:11:59,820 - main_orchestrator - INFO - URLs nuevas para procesar: 21 (de 103 total)
2025-05-23 16:11:59,820 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:11:59,820 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:11:59,823 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:11:59,823 - content_deduplicator - INFO - Analizando 21 URLs para encontrar duplicados...
2025-05-23 16:11:59,824 - content_deduplicator - INFO - Procesando 20 URLs del dominio facebook.com
2025-05-23 16:11:59,839 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-05-23 16:11:59,839 - content_deduplicator - INFO - URLs totales: 21, Únicas: 1, En grupos: 18
2025-05-23 16:11:59,839 - content_deduplicator - INFO - Se realizaron 24 comparaciones (1570.0/seg), evitando 0
2025-05-23 16:11:59,840 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 16:11:59,841 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 16:11:59,841 - main_orchestrator - INFO - Análisis de duplicados completado: 18 URLs duplicadas filtradas
2025-05-23 16:11:59,841 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 16:11:59,842 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 16:11:59,842 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:11:59,842 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:11:59,842 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:11:59,843 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 16:11:59,843 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 16:11:59,845 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 16:11:59,846 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:11:59,846 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:11:59,847 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:11:59,847 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:11:59,848 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:11:59,849 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:11:59,849 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:11:59,850 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 16:11:59,869 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 16:11:59,870 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 16:11:59,871 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 16:11:59,889 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid02wzvGm2NmrehqThvWApngvHX3QKMNV14n3C4h3Edi4B8bTsEytcqU2gwbCk8B5C8ml?rdid=Wpa8rNsRaAuEefKp
2025-05-23 16:11:59,891 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=960858089464459&set=a.411299177753689
2025-05-23 16:12:21,449 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 16:12:22,669 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 16:12:26,425 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 26.55 seg.
2025-05-23 16:12:26,427 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 16:12:26,427 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 26.56 segundos.
2025-05-23 16:12:26,428 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 26.56 seg.
2025-05-23 16:12:26,428 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 16:12:26,430 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 155 URLs.
2025-05-23 16:12:26,430 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:12:26,925 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 16:12:27,033 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 16:12:27,034 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 16:12:27,034 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.60 seg.
2025-05-23 16:12:27,034 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 16:12:27,035 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:12:27,035 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:12:27,036 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:12:27,037 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:12:27,038 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:12:27,038 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:12:27.036545', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 155, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.76, 'pdf_text_extraction': 0.6, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 26.56, 'facebook_text_extraction': 0.6, 'stats_consolidation': 0.0}}
2025-05-23 16:12:27,038 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:12:27,039 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:12:27,054 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 16:12:27,069 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 16:12:27,085 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:12:27,088 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 16:12:27,089 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 16:12:27,089 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:12:27,109 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:12:27,109 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:12:27,109 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 16:12:27,110 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 16:12:27,110 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:12:27,110 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 16:12:27,684 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 16:12:27,684 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 16:12:27,684 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:12:27,685 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 16:12:27,687 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 16:12:27,687 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:12:27,693 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:12:27,694 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:12:27,694 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:12:27,695 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:12:27.036545', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 155, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.76, 'pdf_text_extraction': 0.6, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 26.56, 'facebook_text_extraction': 0.6, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.6}}
2025-05-23 16:12:27,695 - main_orchestrator - INFO - Limpieza semántica completada en 0.60 seg.
2025-05-23 16:12:27,696 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:12:27,696 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:12:27,696 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:12:27,730 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid02wzvGm2NmrehqThvWApngvHX3QKMNV14n3C4h3Edi4B8bTsEytcqU2gwbCk8B5C8ml?rdid=Wpa8rNsRaAuEefKp
2025-05-23 16:12:27,730 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:12:27,748 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:12:27,748 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 16:12:27,748 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:12:27,749 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:12:27,749 - main_orchestrator - INFO - ==================================================
2025-05-23 16:12:27,749 - main_orchestrator - INFO - PIPELINE FINALIZADO en 28.82 segundos.
2025-05-23 16:12:27,750 - main_orchestrator - INFO - ==================================================
2025-05-23 16:13:10,390 - main_orchestrator - INFO - ==================================================
2025-05-23 16:13:10,390 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:13:10,390 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-23 16:13:10,391 - main_orchestrator - INFO - ==================================================
2025-05-23 16:13:10,392 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:13:10,393 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:13:10,394 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:13:10,416 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 155 URLs.
2025-05-23 16:13:10,416 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:13:10,417 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:13:10,417 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:13:10,417 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:13:10,417 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:13:10,434 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 16:13:10,604 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-23 16:13:10,604 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 52
2025-05-23 16:13:10,608 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-23 16:13:10,609 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:13:10,610 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 16:13:10,648 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 16:13:10,649 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-23 16:13:10,649 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 16:13:10,649 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:13:10,649 - lib.history_tracker - INFO - Filtradas 36 URLs ya procesadas del lote actual.
2025-05-23 16:13:10,650 - main_orchestrator - INFO - URLs nuevas para procesar: 16 (de 52 total)
2025-05-23 16:13:10,650 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:13:10,650 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:13:10,652 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:13:10,652 - content_deduplicator - INFO - Analizando 16 URLs para encontrar duplicados...
2025-05-23 16:13:10,653 - content_deduplicator - INFO - Procesando 14 URLs del dominio facebook.com
2025-05-23 16:13:10,661 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-05-23 16:13:10,661 - content_deduplicator - INFO - URLs totales: 16, Únicas: 5, En grupos: 8
2025-05-23 16:13:10,661 - content_deduplicator - INFO - Se realizaron 13 comparaciones (1631.7/seg), evitando 0
2025-05-23 16:13:10,661 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-05-23 16:13:10,662 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 16:13:10,663 - main_orchestrator - INFO - Análisis de duplicados completado: 8 URLs duplicadas filtradas
2025-05-23 16:13:10,663 - main_orchestrator - INFO - URLs después de filtrar duplicados: 8
2025-05-23 16:13:10,663 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 16:13:10,663 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:13:10,664 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:13:10,664 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:13:10,664 - lib.url_manager - INFO - Clasificación de 8 URLs:
2025-05-23 16:13:10,664 - lib.url_manager - INFO -  - SOCIAL: 8
2025-05-23 16:13:10,665 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-23 16:13:10,666 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:13:10,666 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:13:10,666 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:13:10,666 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:13:10,666 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:13:10,667 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:13:10,667 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:13:10,667 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-23 16:13:10,682 - main_orchestrator - INFO - Encontradas 6 URLs de Facebook para procesar
2025-05-23 16:13:10,682 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 16:13:10,683 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 6 URLs de Facebook para la fecha 15042025...
2025-05-23 16:13:10,701 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-23 16:13:10,701 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/15wpT2Whf7/
2025-05-23 16:13:10,701 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/16UHriKBu6/
2025-05-23 16:13:10,702 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=1744279413028508&set=a.1057168758406247
2025-05-23 16:13:10,706 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-23 16:13:43,734 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-4.pdf
2025-05-23 16:13:47,284 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/16D8iFxcXd/
2025-05-23 16:13:49,393 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 16:13:51,917 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-5.pdf
2025-05-23 16:14:02,310 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-23 16:14:03,275 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-2.pdf
2025-05-23 16:14:07,106 - lib.facebook_processor - INFO - Progreso Facebook: 5/6 en 56.42 seg.
2025-05-23 16:14:16,787 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-6.pdf
2025-05-23 16:14:20,480 - lib.facebook_processor - INFO - Progreso Facebook: 6/6 en 69.80 seg.
2025-05-23 16:14:20,484 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-23 16:14:20,484 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 4/6 exitosos en 69.80 segundos.
2025-05-23 16:14:20,485 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 69.80 seg.
2025-05-23 16:14:20,485 - lib.history_tracker - INFO - Añadidas 4 nuevas URLs al historial.
2025-05-23 16:14:20,486 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:14:20,487 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:14:20,629 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-4.pdf
2025-05-23 16:14:20,746 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-2.pdf
2025-05-23 16:14:21,245 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-6.pdf
2025-05-23 16:14:21,702 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-3.pdf
2025-05-23 16:14:21,703 - lib.facebook_processor - INFO - Texto extraído de 4 PDFs de Facebook
2025-05-23 16:14:21,703 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.22 seg.
2025-05-23 16:14:21,703 - main_orchestrator - INFO - Texto extraído de 4 PDFs de Facebook
2025-05-23 16:14:21,705 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:14:21,705 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:14:21,705 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:14:21,707 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:14:21,707 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:14:21,707 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:14:21.706047', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 8, 'history_total_urls': 159, 'categories': {'social': 8}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 6, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 1.22, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 69.8, 'facebook_text_extraction': 1.22, 'stats_consolidation': 0.0}}
2025-05-23 16:14:21,708 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:14:21,708 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:14:21,726 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-23 16:14:21,745 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-23 16:14:21,759 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 16:14:21,764 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 16:14:21,764 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 16:14:21,765 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:14:21,782 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:14:21,782 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:14:21,782 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-23 16:14:21,782 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-23 16:14:21,783 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:14:21,783 - semantic_cleaner - INFO - Extraídos 4 textos de Facebook
2025-05-23 16:14:29,346 - semantic_cleaner - INFO - Se identificaron 30 grupos de textos similares
2025-05-23 16:14:29,346 - semantic_cleaner - INFO - Se seleccionaron 30 textos representativos
2025-05-23 16:14:29,347 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:14:29,347 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 16:14:29,350 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 16:14:29,351 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:14:29,361 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:14:29,362 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:14:29,362 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 16:14:29,363 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:14:21.706047', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 8, 'history_total_urls': 159, 'categories': {'social': 8}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 6, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 1.22, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 69.8, 'facebook_text_extraction': 1.22, 'stats_consolidation': 0.0, 'semantic_cleaning': 7.6}}
2025-05-23 16:14:29,363 - main_orchestrator - INFO - Limpieza semántica completada en 7.60 seg.
2025-05-23 16:14:29,363 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:14:29,364 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:14:29,364 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 16:14:29,383 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/15wpT2Whf7/
2025-05-23 16:14:29,384 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:14:29,399 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 16:14:29,400 - facebook_extractor_fix - INFO - Se han añadido 4 textos de Facebook al archivo limpio
2025-05-23 16:14:29,400 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:14:29,400 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:14:29,400 - main_orchestrator - INFO - ==================================================
2025-05-23 16:14:29,401 - main_orchestrator - INFO - PIPELINE FINALIZADO en 79.01 segundos.
2025-05-23 16:14:29,401 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:14,062 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:14,096 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:16:14,097 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:16:14,097 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:14,099 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:16:14,101 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:16:14,102 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:16:14,113 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:16:14,114 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:16:14,115 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:16:14,115 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:16:14,116 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:16:14,116 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:16:14,152 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:16:14,363 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:16:14,363 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 16:16:14,366 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:16:14,366 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:16:14,367 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:16:14,407 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:14,408 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:16:14,409 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:14,409 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:16:14,409 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:16:14,410 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:16:14,410 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:16:14,410 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:16:14,413 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:16:14,413 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:16:14,413 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:16:14,413 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:16:14,414 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:16:14,414 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:16:14,415 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:16:14,416 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:16:14,416 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:16:14,416 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:16:14,417 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:16:14,417 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:16:14,417 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:16:14,417 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:16:14,417 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:16:14,418 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:16:14,419 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:16:14,419 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:16:14,419 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:16:14,420 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:16:14,420 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:16:14,421 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:16:14,421 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:16:14,422 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:16:14,424 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:16:14,424 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:16:14,425 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:16:14,425 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:16:14,427 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:14,427 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:14,428 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:16:14.425976', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:16:14,429 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:16:14,429 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:16:14,431 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:16:14,433 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:16:14,446 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:14,449 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:16:14,450 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:16:14,450 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:16:14,467 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:16:14,467 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:16:14,468 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:16:14,468 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:16:14,468 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:16:14,468 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:16:16,960 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:16:16,961 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:16:16,961 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:16:16,961 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:16:16,964 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:16:16,964 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:16,970 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:16,971 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:16,971 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:16,971 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:16:14.425976', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.52}}
2025-05-23 16:16:16,972 - main_orchestrator - INFO - Limpieza semántica completada en 2.52 seg.
2025-05-23 16:16:16,972 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:16:16,972 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:16:16,973 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:16:16,995 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:16:16,996 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:16:17,009 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:17,009 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:16:17,009 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:16:17,010 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:16:17,010 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:17,010 - main_orchestrator - INFO - PIPELINE FINALIZADO en 2.95 segundos.
2025-05-23 16:16:17,011 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:50,760 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:50,760 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:16:50,761 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:16:50,761 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:50,762 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:16:50,763 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:16:50,763 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:16:50,764 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:16:50,765 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:16:50,765 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:16:50,765 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:16:50,766 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:16:50,766 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:16:50,786 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:16:50,959 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:16:50,959 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 51
2025-05-23 16:16:50,962 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:16:50,962 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:16:50,963 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:16:50,999 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:51,000 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:16:51,000 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:51,000 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:16:51,000 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:16:51,001 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:16:51,001 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:16:51,001 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:16:51,004 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:16:51,004 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:16:51,004 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:16:51,005 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:16:51,005 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:16:51,005 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:16:51,006 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:16:51,007 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:16:51,007 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:16:51,007 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:16:51,007 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:16:51,007 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:16:51,008 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:16:51,008 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:16:51,008 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:16:51,010 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:16:51,010 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:16:51,010 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:16:51,011 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:16:51,011 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:16:51,011 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:16:51,012 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:16:51,013 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:16:51,013 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:16:51,015 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:16:51,015 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:16:51,015 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:16:51,016 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:16:51,017 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:51,017 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:51,018 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:16:51.016482', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:16:51,018 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:16:51,018 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:16:51,019 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:16:51,020 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:16:51,036 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:16:51,040 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:16:51,040 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:16:51,041 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:16:51,062 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:16:51,063 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:16:51,063 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:16:51,064 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:16:51,064 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:16:51,064 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:16:54,022 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:16:54,022 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:16:54,023 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:16:54,023 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:16:54,026 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:16:54,027 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:54,035 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:54,037 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:54,037 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:16:54,037 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:16:51.016482', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.99}}
2025-05-23 16:16:54,037 - main_orchestrator - INFO - Limpieza semántica completada en 2.99 seg.
2025-05-23 16:16:54,038 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:16:54,038 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:16:54,038 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:16:54,056 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:16:54,056 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:16:54,073 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:16:54,073 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:16:54,073 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:16:54,073 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:16:54,074 - main_orchestrator - INFO - ==================================================
2025-05-23 16:16:54,074 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.31 segundos.
2025-05-23 16:16:54,074 - main_orchestrator - INFO - ==================================================
2025-05-23 16:17:33,261 - main_orchestrator - INFO - ==================================================
2025-05-23 16:17:33,261 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:17:33,262 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:17:33,262 - main_orchestrator - INFO - ==================================================
2025-05-23 16:17:33,263 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:17:33,264 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:17:33,265 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:17:33,266 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:17:33,267 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:17:33,267 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:17:33,267 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:17:33,268 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:17:33,268 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:17:33,291 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:17:33,525 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:17:33,526 - main_orchestrator - INFO - PDF procesado en 0.26 seg. Enlaces encontrados: 51
2025-05-23 16:17:33,530 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:17:33,530 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:17:33,532 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:17:33,586 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:17:33,586 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:17:33,586 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:17:33,587 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:17:33,587 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:17:33,587 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:17:33,588 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:17:33,588 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:17:33,591 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:17:33,591 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:17:33,592 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:17:33,593 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:17:33,593 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:17:33,594 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:17:33,595 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:17:33,596 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:17:33,596 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:17:33,596 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:17:33,597 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:17:33,597 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:17:33,598 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:17:33,598 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:17:33,598 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:17:33,600 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:17:33,600 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:17:33,600 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:17:33,600 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:17:33,601 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:17:33,601 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:17:33,601 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:17:33,602 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:17:33,602 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:17:33,604 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:17:33,605 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:17:33,605 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:17:33,605 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:17:33,606 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:17:33,607 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:17:33,607 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:17:33.605808', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0}}
2025-05-23 16:17:33,608 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:17:33,608 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:17:33,609 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:17:33,610 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:17:33,629 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:17:33,632 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:17:33,633 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:17:33,633 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:17:33,656 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:17:33,657 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:17:33,657 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:17:33,657 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:17:33,657 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:17:33,658 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:17:36,573 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:17:36,574 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:17:36,574 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:17:36,574 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:17:36,578 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:17:36,578 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:17:36,586 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:17:36,587 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:17:36,587 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:17:36,588 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:17:33.605808', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.95}}
2025-05-23 16:17:36,588 - main_orchestrator - INFO - Limpieza semántica completada en 2.95 seg.
2025-05-23 16:17:36,588 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:17:36,589 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:17:36,589 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:17:36,608 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:17:36,609 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:17:36,625 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:17:36,625 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:17:36,625 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:17:36,626 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:17:36,626 - main_orchestrator - INFO - ==================================================
2025-05-23 16:17:36,626 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.37 segundos.
2025-05-23 16:17:36,627 - main_orchestrator - INFO - ==================================================
2025-05-23 16:18:39,286 - main_orchestrator - INFO - ==================================================
2025-05-23 16:18:39,287 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:18:39,287 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:18:39,287 - main_orchestrator - INFO - ==================================================
2025-05-23 16:18:39,289 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:18:39,289 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:18:39,290 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:18:39,290 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:18:39,291 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:18:39,291 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:18:39,292 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:18:39,292 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:18:39,292 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:18:39,313 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:18:39,484 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:18:39,484 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 51
2025-05-23 16:18:39,488 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:18:39,488 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:18:39,489 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:18:39,528 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:18:39,529 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:18:39,529 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:18:39,530 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:18:39,530 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:18:39,530 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:18:39,530 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:18:39,531 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:18:39,533 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:18:39,533 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:18:39,534 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:18:39,534 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:18:39,534 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:18:39,534 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:18:39,535 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:18:39,536 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:18:39,536 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:18:39,536 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:18:39,536 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:18:39,537 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:18:39,537 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:18:39,537 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:18:39,537 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:18:39,538 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:18:39,539 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:18:39,539 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:18:39,539 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:18:39,540 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:18:39,540 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:18:39,540 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:18:39,541 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:18:39,541 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:18:39,542 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:18:39,543 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:18:39,543 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:18:39,543 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:18:39,545 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:18:39,545 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:18:39,546 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:18:39.544000', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:18:39,546 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:18:39,546 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:18:39,548 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:18:39,548 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:18:39,559 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:18:39,563 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:18:39,564 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:18:39,564 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:18:39,583 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:18:39,583 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:18:39,583 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:18:39,583 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:18:39,583 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:18:39,584 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:18:42,242 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:18:42,242 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:18:42,242 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:18:42,243 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:18:42,246 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:18:42,246 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:18:42,252 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:18:42,254 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:18:42,254 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:18:42,254 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:18:39.544000', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.69}}
2025-05-23 16:18:42,255 - main_orchestrator - INFO - Limpieza semántica completada en 2.69 seg.
2025-05-23 16:18:42,255 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:18:42,256 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:18:42,256 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:18:42,275 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:18:42,275 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:18:42,291 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:18:42,291 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:18:42,291 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:18:42,292 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:18:42,292 - main_orchestrator - INFO - ==================================================
2025-05-23 16:18:42,292 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.01 segundos.
2025-05-23 16:18:42,293 - main_orchestrator - INFO - ==================================================
2025-05-23 16:20:14,177 - main_orchestrator - INFO - ==================================================
2025-05-23 16:20:14,178 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:20:14,178 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:20:14,179 - main_orchestrator - INFO - ==================================================
2025-05-23 16:20:14,180 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:20:14,181 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:20:14,182 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:20:14,183 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:20:14,184 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:20:14,185 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 16:20:14,185 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:20:14,186 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:20:14,187 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:20:14,187 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:20:14,210 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:20:14,402 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:20:14,403 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 16:20:14,409 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:20:14,409 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:20:14,411 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:20:14,459 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:20:14,459 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:20:14,460 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:20:14,460 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:20:14,460 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:20:14,460 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:20:14,461 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:20:14,461 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:20:14,465 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:20:14,465 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:20:14,466 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:20:14,466 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:20:14,467 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:20:14,467 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:20:14,468 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:20:14,469 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:20:14,469 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:20:14,469 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:20:14,469 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:20:14,470 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:20:14,470 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:20:14,470 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:20:14,470 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:20:14,471 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:20:14,472 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:20:14,472 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:20:14,472 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:20:14,473 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:20:14,473 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:20:14,474 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:20:14,474 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:20:14,474 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:20:14,476 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:20:14,476 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:20:14,476 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:20:14,476 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:20:14,477 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:20:14,478 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:20:14,478 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:20:14.476950', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:20:14,479 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:20:14,479 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:20:14,481 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:20:14,482 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:20:14,499 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:20:14,503 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:20:14,503 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:20:14,503 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:20:14,521 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:20:14,521 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:20:14,522 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:20:14,522 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:20:14,522 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:20:14,523 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:20:17,528 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:20:17,528 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:20:17,529 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:20:17,529 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:20:17,531 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:20:17,532 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:20:17,538 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:20:17,539 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:20:17,540 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:20:17,540 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:20:14.476950', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.03}}
2025-05-23 16:20:17,541 - main_orchestrator - INFO - Limpieza semántica completada en 3.03 seg.
2025-05-23 16:20:17,541 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:20:17,541 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:20:17,542 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:20:17,567 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:20:17,567 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:20:17,580 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:20:17,581 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:20:17,581 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:20:17,581 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:20:17,582 - main_orchestrator - INFO - ==================================================
2025-05-23 16:20:17,582 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.40 segundos.
2025-05-23 16:20:17,582 - main_orchestrator - INFO - ==================================================
2025-05-23 16:22:34,296 - main_orchestrator - INFO - ==================================================
2025-05-23 16:22:34,296 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:22:34,297 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:22:34,297 - main_orchestrator - INFO - ==================================================
2025-05-23 16:22:34,298 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:22:34,299 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:22:34,300 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:22:34,301 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:22:34,301 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:22:34,303 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 16:22:34,303 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:22:34,303 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:22:34,304 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:22:34,304 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:22:34,324 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:22:34,545 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:22:34,545 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 16:22:34,551 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:22:34,552 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:22:34,553 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:22:34,603 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:22:34,604 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:22:34,604 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:22:34,604 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:22:34,604 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:22:34,605 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:22:34,605 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:22:34,605 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:22:34,608 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:22:34,608 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:22:34,608 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:22:34,609 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:22:34,609 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:22:34,609 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:22:34,610 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:22:34,611 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:22:34,611 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:22:34,611 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:22:34,612 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:22:34,612 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:22:34,612 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:22:34,613 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:22:34,613 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:22:34,614 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:22:34,615 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:22:34,615 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:22:34,615 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:22:34,616 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:22:34,616 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:22:34,617 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:22:34,617 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:22:34,618 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:22:34,620 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:22:34,620 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:22:34,621 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:22:34,621 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:22:34,622 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:22:34,623 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:22:34,623 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:22:34.621712', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:22:34,623 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:22:34,623 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:22:34,625 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:22:34,626 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:22:34,641 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:22:34,645 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:22:34,645 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:22:34,646 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:22:34,665 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:22:34,665 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:22:34,666 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:22:34,666 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:22:34,666 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:22:34,667 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:22:37,778 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:22:37,778 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:22:37,779 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:22:37,779 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:22:37,782 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:22:37,783 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:22:37,791 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:22:37,792 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:22:37,793 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:22:37,793 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:22:34.621712', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.15}}
2025-05-23 16:22:37,793 - main_orchestrator - INFO - Limpieza semántica completada en 3.15 seg.
2025-05-23 16:22:37,794 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:22:37,794 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:22:37,794 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:22:37,812 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:22:37,812 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:22:37,828 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:22:37,829 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:22:37,829 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:22:37,829 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:22:37,829 - main_orchestrator - INFO - ==================================================
2025-05-23 16:22:37,830 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.53 segundos.
2025-05-23 16:22:37,830 - main_orchestrator - INFO - ==================================================
2025-05-23 16:23:57,776 - main_orchestrator - INFO - ==================================================
2025-05-23 16:23:57,776 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:23:57,777 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:23:57,777 - main_orchestrator - INFO - ==================================================
2025-05-23 16:23:57,778 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:23:57,779 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:23:57,779 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:23:57,780 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:23:57,781 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:23:57,781 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:23:57,782 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:23:57,782 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:23:57,782 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:23:57,797 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:23:57,959 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:23:57,960 - main_orchestrator - INFO - PDF procesado en 0.18 seg. Enlaces encontrados: 51
2025-05-23 16:23:57,963 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:23:57,963 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:23:57,965 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:23:58,008 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:23:58,009 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:23:58,009 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:23:58,009 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:23:58,010 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:23:58,010 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:23:58,010 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:23:58,010 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:23:58,013 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:23:58,013 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:23:58,013 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:23:58,014 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:23:58,014 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:23:58,014 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:23:58,015 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:23:58,015 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:23:58,016 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:23:58,016 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:23:58,017 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:23:58,017 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:23:58,018 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:23:58,018 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:23:58,019 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:23:58,021 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:23:58,021 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:23:58,022 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:23:58,022 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:23:58,022 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:23:58,023 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:23:58,023 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:23:58,024 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:23:58,024 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:23:58,026 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:23:58,027 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:23:58,027 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:23:58,027 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:23:58,028 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:23:58,028 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:23:58,029 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:23:58.027797', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.18, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:23:58,029 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:23:58,029 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:23:58,030 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:23:58,031 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:23:58,046 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:23:58,050 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:23:58,050 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:23:58,051 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:23:58,068 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:23:58,068 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:23:58,069 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:23:58,069 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:23:58,069 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:23:58,069 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:24:01,122 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:24:01,123 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:24:01,123 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:24:01,123 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:24:01,128 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:24:01,128 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:24:01,136 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:24:01,137 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:24:01,137 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:24:01,138 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:23:58.027797', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.18, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.08}}
2025-05-23 16:24:01,138 - main_orchestrator - INFO - Limpieza semántica completada en 3.08 seg.
2025-05-23 16:24:01,139 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:24:01,139 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:24:01,139 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:24:01,159 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:24:01,159 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:24:01,175 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:24:01,175 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:24:01,176 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:24:01,176 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:24:01,176 - main_orchestrator - INFO - ==================================================
2025-05-23 16:24:01,176 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.40 segundos.
2025-05-23 16:24:01,177 - main_orchestrator - INFO - ==================================================
2025-05-23 16:32:34,411 - main_orchestrator - INFO - ==================================================
2025-05-23 16:32:34,411 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:32:34,412 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:32:34,412 - main_orchestrator - INFO - ==================================================
2025-05-23 16:32:34,413 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:32:34,414 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:32:34,415 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:32:34,415 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:32:34,416 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:32:34,417 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:32:34,417 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:32:34,417 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:32:34,418 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:32:34,442 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:32:34,676 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:32:34,676 - main_orchestrator - INFO - PDF procesado en 0.26 seg. Enlaces encontrados: 51
2025-05-23 16:32:34,680 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:32:34,680 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:32:34,681 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:32:34,730 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:32:34,730 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:32:34,730 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:32:34,730 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:32:34,731 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:32:34,731 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:32:34,731 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:32:34,731 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:32:34,735 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:32:34,735 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:32:34,735 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:32:34,736 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:32:34,736 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:32:34,736 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:32:34,737 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:32:34,738 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:32:34,738 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:32:34,738 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:32:34,739 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:32:34,739 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:32:34,739 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:32:34,740 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:32:34,740 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:32:34,741 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:32:34,742 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:32:34,742 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:32:34,743 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:32:34,743 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:32:34,743 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:32:34,744 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:32:34,744 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:32:34,744 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:32:34,746 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:32:34,747 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:32:34,747 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:32:34,747 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:32:34,749 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:32:34,749 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:32:34,749 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:32:34.748060', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:32:34,750 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:32:34,750 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:32:34,751 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:32:34,752 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:32:34,770 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:32:34,773 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:32:34,774 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:32:34,774 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:32:34,797 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:32:34,797 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:32:34,797 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:32:34,797 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:32:34,798 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:32:34,798 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:32:37,660 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:32:37,660 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:32:37,661 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:32:37,661 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:32:37,664 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:32:37,665 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:32:37,671 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:32:37,672 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:32:37,673 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:32:37,673 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:32:34.748060', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.9}}
2025-05-23 16:32:37,674 - main_orchestrator - INFO - Limpieza semántica completada en 2.90 seg.
2025-05-23 16:32:37,674 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:32:37,674 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:32:37,674 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:32:37,695 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:32:37,696 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:32:37,713 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:32:37,713 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:32:37,714 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:32:37,714 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:32:37,714 - main_orchestrator - INFO - ==================================================
2025-05-23 16:32:37,715 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.30 segundos.
2025-05-23 16:32:37,715 - main_orchestrator - INFO - ==================================================
2025-05-23 16:34:06,219 - main_orchestrator - INFO - ==================================================
2025-05-23 16:34:06,219 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:34:06,219 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:34:06,219 - main_orchestrator - INFO - ==================================================
2025-05-23 16:34:06,221 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:34:06,221 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:34:06,222 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:34:06,223 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:34:06,223 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:34:06,224 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:34:06,224 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:34:06,224 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:34:06,225 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:34:06,248 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:34:06,442 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:34:06,442 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 16:34:06,445 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:34:06,445 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:34:06,447 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:34:06,483 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:34:06,483 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:34:06,483 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:34:06,483 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:34:06,484 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:34:06,484 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:34:06,484 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:34:06,484 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:34:06,486 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:34:06,487 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:34:06,487 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:34:06,487 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:34:06,487 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:34:06,488 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:34:06,488 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:34:06,489 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:34:06,489 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:34:06,489 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:34:06,489 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:34:06,490 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:34:06,490 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:34:06,491 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:34:06,491 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:34:06,492 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:34:06,493 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:34:06,493 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:34:06,494 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:34:06,494 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:34:06,495 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:34:06,495 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:34:06,496 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:34:06,496 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:34:06,498 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:34:06,499 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:34:06,499 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:34:06,499 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:34:06,500 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:34:06,501 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:34:06,501 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:34:06.500046', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:34:06,502 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:34:06,502 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:34:06,503 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:34:06,504 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:34:06,519 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:34:06,522 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:34:06,523 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:34:06,523 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:34:06,540 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:34:06,541 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:34:06,541 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:34:06,542 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:34:06,542 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:34:06,542 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:34:09,231 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:34:09,231 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:34:09,231 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:34:09,231 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:34:09,234 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:34:09,234 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:34:09,240 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:34:09,242 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:34:09,242 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:34:09,243 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:34:06.500046', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 159, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.72}}
2025-05-23 16:34:09,243 - main_orchestrator - INFO - Limpieza semántica completada en 2.72 seg.
2025-05-23 16:34:09,243 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:34:09,244 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:34:09,244 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:34:09,262 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:34:09,262 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:34:09,274 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:34:09,275 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:34:09,275 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:34:09,275 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:34:09,276 - main_orchestrator - INFO - ==================================================
2025-05-23 16:34:09,276 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.06 segundos.
2025-05-23 16:34:09,276 - main_orchestrator - INFO - ==================================================
2025-05-23 16:38:30,414 - main_orchestrator - INFO - ==================================================
2025-05-23 16:38:30,414 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:38:30,415 - main_orchestrator - INFO - Usando fecha: 22042025
2025-05-23 16:38:30,415 - main_orchestrator - INFO - ==================================================
2025-05-23 16:38:30,416 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:38:30,417 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:38:30,418 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:38:30,419 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 159 URLs.
2025-05-23 16:38:30,419 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:38:30,420 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:38:30,420 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:38:30,420 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:38:30,421 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:38:30,441 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 16:38:30,956 - lib.pdf_processor - INFO - Se extrajeron 103 enlaces URI (no mailto) de 22042025.pdf.
2025-05-23 16:38:30,957 - main_orchestrator - INFO - PDF procesado en 0.54 seg. Enlaces encontrados: 103
2025-05-23 16:38:30,960 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22042025.csv
2025-05-23 16:38:30,960 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:38:30,961 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025.pdf (8 páginas)
2025-05-23 16:38:31,053 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:38:31,053 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 8 párrafos
2025-05-23 16:38:31,053 - main_orchestrator - INFO - Texto del PDF extraído en 0.09 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:38:31,053 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:38:31,054 - lib.history_tracker - INFO - Filtradas 84 URLs ya procesadas del lote actual.
2025-05-23 16:38:31,054 - main_orchestrator - INFO - URLs nuevas para procesar: 19 (de 103 total)
2025-05-23 16:38:31,054 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:38:31,054 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:38:31,057 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:38:31,057 - content_deduplicator - INFO - Analizando 19 URLs para encontrar duplicados...
2025-05-23 16:38:31,058 - content_deduplicator - INFO - Procesando 18 URLs del dominio facebook.com
2025-05-23 16:38:31,072 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-05-23 16:38:31,072 - content_deduplicator - INFO - URLs totales: 19, Únicas: 1, En grupos: 16
2025-05-23 16:38:31,072 - content_deduplicator - INFO - Se realizaron 21 comparaciones (1528.4/seg), evitando 0
2025-05-23 16:38:31,072 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-23 16:38:31,073 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 16:38:31,074 - main_orchestrator - INFO - Análisis de duplicados completado: 16 URLs duplicadas filtradas
2025-05-23 16:38:31,074 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 16:38:31,075 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22042025.json
2025-05-23 16:38:31,075 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:38:31,075 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:38:31,076 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:38:31,076 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 16:38:31,076 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 16:38:31,078 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22042025_unprocessed.json
2025-05-23 16:38:31,078 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:38:31,078 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:38:31,078 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:38:31,079 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:38:31,079 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:38:31,080 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:38:31,080 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:38:31,080 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22042025: social_links_22042025_unprocessed.json
2025-05-23 16:38:31,101 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-05-23 16:38:31,102 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 16:38:31,102 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 22042025...
2025-05-23 16:38:31,119 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=1238539827994284&set=a.679333793914893
2025-05-23 16:38:31,119 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid02MfN5NQfmwvb4W9kQZX93BVp21WugQWTryig2tQerHE7kFb2KrZfwx6NbpxTxpR1sl&id=100063616446639&rdid=vTNwRKdtFe2BIznu
2025-05-23 16:38:54,479 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 16:38:57,083 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 16:39:00,324 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 29.22 seg.
2025-05-23 16:39:00,326 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_22042025.json
2025-05-23 16:39:00,327 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 29.22 segundos.
2025-05-23 16:39:00,327 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 29.23 seg.
2025-05-23 16:39:00,328 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-05-23 16:39:00,329 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 16:39:00,329 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:39:00,473 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-2.pdf
2025-05-23 16:39:01,280 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22042025\22042025-1.pdf
2025-05-23 16:39:01,280 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 16:39:01,280 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.95 seg.
2025-05-23 16:39:01,281 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-05-23 16:39:01,282 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:39:01,283 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:39:01,283 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:39:01,285 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:39:01,286 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:39:01,288 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:39:01.284189', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 161, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.54, 'pdf_text_extraction': 0.95, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 29.23, 'facebook_text_extraction': 0.95, 'stats_consolidation': 0.0}}
2025-05-23 16:39:01,289 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:39:01,290 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:39:01,291 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22042025.json
2025-05-23 16:39:01,292 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22042025\texto_imagenes_api.json
2025-05-23 16:39:01,313 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22042025\pdf_text_22042025.json
2025-05-23 16:39:01,318 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 16:39:01,318 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22042025.json
2025-05-23 16:39:01,319 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:39:01,343 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:39:01,344 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:39:01,344 - semantic_cleaner - INFO - Extraídos 8 textos de PDF
2025-05-23 16:39:01,344 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-05-23 16:39:01,344 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:39:01,344 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-05-23 16:39:02,007 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-05-23 16:39:02,008 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-05-23 16:39:02,008 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:39:02,008 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 16:39:02,010 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.json
2025-05-23 16:39:02,010 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:39:02,014 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:39:02,015 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:39:02,016 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22042025.json
2025-05-23 16:39:02,016 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:39:01.284189', 'date_processed': '22042025', 'total_urls_in_pdf': 103, 'new_urls_processed_count': 3, 'history_total_urls': 161, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.54, 'pdf_text_extraction': 0.95, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 29.23, 'facebook_text_extraction': 0.95, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.69}}
2025-05-23 16:39:02,016 - main_orchestrator - INFO - Limpieza semántica completada en 0.69 seg.
2025-05-23 16:39:02,017 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:39:02,017 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:39:02,017 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22042025.json
2025-05-23 16:39:02,054 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=1238539827994284&set=a.679333793914893
2025-05-23 16:39:02,054 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:39:02,070 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22042025.md
2025-05-23 16:39:02,071 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-05-23 16:39:02,071 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:39:02,071 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:39:02,072 - main_orchestrator - INFO - ==================================================
2025-05-23 16:39:02,072 - main_orchestrator - INFO - PIPELINE FINALIZADO en 31.66 segundos.
2025-05-23 16:39:02,072 - main_orchestrator - INFO - ==================================================
2025-05-23 16:46:41,075 - main_orchestrator - INFO - ==================================================
2025-05-23 16:46:41,076 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:46:41,076 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:46:41,076 - main_orchestrator - INFO - ==================================================
2025-05-23 16:46:41,078 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:46:41,079 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:46:41,080 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:46:41,080 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 16:46:41,081 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:46:41,082 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:46:41,082 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:46:41,082 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:46:41,083 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:46:41,109 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:46:41,368 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:46:41,368 - main_orchestrator - INFO - PDF procesado en 0.29 seg. Enlaces encontrados: 51
2025-05-23 16:46:41,371 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:46:41,371 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:46:41,372 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:46:41,415 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:46:41,415 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:46:41,416 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:46:41,416 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:46:41,416 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:46:41,416 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:46:41,417 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:46:41,417 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:46:41,420 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:46:41,420 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:46:41,420 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:46:41,421 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:46:41,421 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:46:41,421 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:46:41,422 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:46:41,423 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:46:41,423 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:46:41,423 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:46:41,424 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:46:41,424 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:46:41,425 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:46:41,425 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:46:41,425 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:46:41,426 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:46:41,427 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:46:41,427 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:46:41,428 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:46:41,428 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:46:41,429 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:46:41,429 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:46:41,430 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:46:41,430 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:46:41,432 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:46:41,432 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:46:41,432 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:46:41,432 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:46:41,434 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:46:41,434 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:46:41,434 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:46:41.433309', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:46:41,435 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:46:41,435 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:46:41,437 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:46:41,438 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:46:41,454 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:46:41,458 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:46:41,458 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:46:41,459 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:46:41,477 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:46:41,477 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:46:41,478 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:46:41,478 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:46:41,479 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:46:41,479 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:46:43,950 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:46:43,951 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:46:43,951 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:46:43,951 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:46:43,953 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:46:43,954 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:46:43,960 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:46:43,962 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:46:43,962 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:46:43,962 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:46:41.433309', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.29, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.5}}
2025-05-23 16:46:43,962 - main_orchestrator - INFO - Limpieza semántica completada en 2.50 seg.
2025-05-23 16:46:43,963 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:46:43,963 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:46:43,963 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:46:43,980 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:46:43,980 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:46:43,993 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:46:43,993 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:46:43,994 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:46:43,994 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:46:43,995 - main_orchestrator - INFO - ==================================================
2025-05-23 16:46:43,995 - main_orchestrator - INFO - PIPELINE FINALIZADO en 2.92 segundos.
2025-05-23 16:46:43,995 - main_orchestrator - INFO - ==================================================
2025-05-23 16:53:34,916 - main_orchestrator - INFO - ==================================================
2025-05-23 16:53:34,916 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:53:34,916 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:53:34,917 - main_orchestrator - INFO - ==================================================
2025-05-23 16:53:34,918 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:53:34,919 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:53:34,920 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:53:34,920 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 16:53:34,921 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:53:34,921 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:53:34,921 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:53:34,922 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:53:34,922 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:53:34,942 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:53:35,143 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:53:35,143 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 16:53:35,147 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:53:35,147 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:53:35,149 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:53:35,192 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:53:35,192 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:53:35,193 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:53:35,193 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:53:35,193 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:53:35,193 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:53:35,193 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:53:35,194 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:53:35,196 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:53:35,196 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:53:35,197 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:53:35,197 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:53:35,197 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:53:35,197 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:53:35,199 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:53:35,199 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:53:35,200 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:53:35,200 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:53:35,200 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:53:35,200 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:53:35,201 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:53:35,201 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:53:35,201 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:53:35,202 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:53:35,202 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:53:35,203 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:53:35,203 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:53:35,203 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:53:35,203 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:53:35,204 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:53:35,204 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:53:35,204 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:53:35,206 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:53:35,206 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:53:35,206 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:53:35,207 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:53:35,208 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:53:35,208 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:53:35,208 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:53:35.207266', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 16:53:35,209 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:53:35,209 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:53:35,210 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:53:35,211 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:53:35,224 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:53:35,227 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:53:35,227 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:53:35,227 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:53:35,245 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:53:35,245 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:53:35,245 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:53:35,245 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:53:35,246 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:53:35,246 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:53:38,178 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:53:38,178 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:53:38,178 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:53:38,179 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:53:38,182 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:53:38,182 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:53:38,190 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:53:38,191 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:53:38,192 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:53:38,192 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:53:35.207266', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.96}}
2025-05-23 16:53:38,192 - main_orchestrator - INFO - Limpieza semántica completada en 2.96 seg.
2025-05-23 16:53:38,193 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:53:38,193 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:53:38,194 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:53:38,214 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:53:38,215 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:53:38,235 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:53:38,235 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:53:38,235 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:53:38,236 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:53:38,236 - main_orchestrator - INFO - ==================================================
2025-05-23 16:53:38,237 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.32 segundos.
2025-05-23 16:53:38,237 - main_orchestrator - INFO - ==================================================
2025-05-23 16:56:07,272 - main_orchestrator - INFO - ==================================================
2025-05-23 16:56:07,272 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:56:07,273 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:56:07,273 - main_orchestrator - INFO - ==================================================
2025-05-23 16:56:07,274 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:56:07,275 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:56:07,275 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:56:07,276 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 16:56:07,277 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:56:07,277 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:56:07,277 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:56:07,278 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:56:07,278 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:56:07,295 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:56:07,447 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:56:07,448 - main_orchestrator - INFO - PDF procesado en 0.17 seg. Enlaces encontrados: 51
2025-05-23 16:56:07,450 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:56:07,451 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:56:07,452 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:56:07,491 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:56:07,491 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:56:07,491 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:56:07,492 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:56:07,492 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:56:07,492 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:56:07,493 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:56:07,493 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:56:07,495 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:56:07,496 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:56:07,496 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:56:07,496 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:56:07,496 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:56:07,497 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:56:07,498 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:56:07,498 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:56:07,498 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:56:07,498 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:56:07,499 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:56:07,499 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:56:07,499 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:56:07,499 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:56:07,500 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:56:07,501 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:56:07,501 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:56:07,501 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:56:07,501 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:56:07,502 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:56:07,502 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:56:07,502 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:56:07,503 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:56:07,503 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:56:07,504 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:56:07,505 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:56:07,505 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:56:07,505 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:56:07,506 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:56:07,507 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:56:07,507 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:56:07.505692', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.17, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:56:07,507 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:56:07,508 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:56:07,509 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:56:07,509 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:56:07,522 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:56:07,525 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:56:07,526 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:56:07,526 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:56:07,544 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:56:07,545 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:56:07,545 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:56:07,545 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:56:07,545 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:56:07,546 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:56:10,467 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:56:10,467 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:56:10,467 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:56:10,468 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:56:10,472 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:56:10,472 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:56:10,480 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:56:10,481 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:56:10,482 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:56:10,482 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:56:07.505692', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.17, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.95}}
2025-05-23 16:56:10,482 - main_orchestrator - INFO - Limpieza semántica completada en 2.95 seg.
2025-05-23 16:56:10,483 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:56:10,483 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:56:10,483 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:56:10,505 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:56:10,505 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:56:10,520 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:56:10,520 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:56:10,521 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:56:10,521 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:56:10,521 - main_orchestrator - INFO - ==================================================
2025-05-23 16:56:10,522 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.25 segundos.
2025-05-23 16:56:10,522 - main_orchestrator - INFO - ==================================================
2025-05-23 16:58:15,158 - main_orchestrator - INFO - ==================================================
2025-05-23 16:58:15,159 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 16:58:15,159 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 16:58:15,160 - main_orchestrator - INFO - ==================================================
2025-05-23 16:58:15,163 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 16:58:15,165 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 16:58:15,166 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 16:58:15,198 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 16:58:15,198 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 16:58:15,199 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 16:58:15,199 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 16:58:15,200 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 16:58:15,200 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 16:58:15,222 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:58:15,427 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 16:58:15,427 - main_orchestrator - INFO - PDF procesado en 0.23 seg. Enlaces encontrados: 51
2025-05-23 16:58:15,430 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 16:58:15,430 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 16:58:15,431 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 16:58:15,472 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:58:15,472 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 16:58:15,473 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:58:15,473 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 16:58:15,473 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 16:58:15,473 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 16:58:15,474 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 16:58:15,474 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 16:58:15,498 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 16:58:15,498 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 16:58:15,498 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 16:58:15,499 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 16:58:15,499 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 16:58:15,499 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 16:58:15,500 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:58:15,501 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 16:58:15,501 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 16:58:15,501 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 16:58:15,502 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 16:58:15,502 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 16:58:15,503 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 16:58:15,504 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 16:58:15,505 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 16:58:15,507 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 16:58:15,507 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 16:58:15,508 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 16:58:15,508 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 16:58:15,508 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 16:58:15,509 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 16:58:15,509 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 16:58:15,509 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 16:58:15,510 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 16:58:15,511 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 16:58:15,512 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 16:58:15,512 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 16:58:15,512 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 16:58:15,513 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:58:15,514 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:58:15,514 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:58:15.512887', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 16:58:15,515 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 16:58:15,515 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 16:58:15,533 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 16:58:15,552 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 16:58:15,571 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 16:58:15,575 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:58:15,575 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 16:58:15,576 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 16:58:15,593 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 16:58:15,594 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 16:58:15,594 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 16:58:15,594 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 16:58:15,594 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 16:58:15,595 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 16:58:18,447 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 16:58:18,447 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 16:58:18,447 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 16:58:18,447 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:58:18,451 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 16:58:18,451 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:58:18,458 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:58:18,460 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:58:18,460 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 16:58:18,461 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T16:58:15.512887', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.88}}
2025-05-23 16:58:18,461 - main_orchestrator - INFO - Limpieza semántica completada en 2.88 seg.
2025-05-23 16:58:18,461 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 16:58:18,462 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 16:58:18,462 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 16:58:18,495 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 16:58:18,495 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 16:58:18,508 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 16:58:18,509 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 16:58:18,509 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 16:58:18,509 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 16:58:18,510 - main_orchestrator - INFO - ==================================================
2025-05-23 16:58:18,510 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.35 segundos.
2025-05-23 16:58:18,510 - main_orchestrator - INFO - ==================================================
2025-05-23 17:06:28,087 - main_orchestrator - INFO - ==================================================
2025-05-23 17:06:28,087 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:06:28,088 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:06:28,088 - main_orchestrator - INFO - ==================================================
2025-05-23 17:06:28,090 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:06:28,091 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:06:28,091 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:06:28,092 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 17:06:28,093 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:06:28,094 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:06:28,094 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:06:28,095 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:06:28,095 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:06:28,116 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:06:28,276 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:06:28,277 - main_orchestrator - INFO - PDF procesado en 0.18 seg. Enlaces encontrados: 51
2025-05-23 17:06:28,281 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:06:28,282 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:06:28,283 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:06:28,325 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:06:28,326 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:06:28,326 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:06:28,326 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:06:28,327 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:06:28,327 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:06:28,328 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:06:28,328 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:06:28,331 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:06:28,331 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:06:28,332 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:06:28,332 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:06:28,332 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:06:28,332 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:06:28,333 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:06:28,334 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:06:28,334 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:06:28,334 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:06:28,334 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:06:28,334 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:06:28,335 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:06:28,335 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:06:28,335 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:06:28,336 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:06:28,336 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:06:28,337 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:06:28,337 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:06:28,337 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:06:28,337 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:06:28,338 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:06:28,338 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:06:28,338 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:06:28,340 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:06:28,340 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:06:28,340 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:06:28,341 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:06:28,342 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:06:28,342 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:06:28,342 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:06:28.341421', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.18, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 17:06:28,343 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:06:28,343 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:06:28,345 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:06:28,346 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:06:28,360 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:06:28,365 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:06:28,365 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:06:28,365 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:06:28,385 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:06:28,385 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:06:28,386 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:06:28,386 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:06:28,386 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:06:28,386 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:06:31,097 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:06:31,097 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:06:31,098 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:06:31,098 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:06:31,101 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:06:31,102 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:06:31,109 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:06:31,110 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:06:31,111 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:06:31,111 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:06:28.341421', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.18, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.74}}
2025-05-23 17:06:31,111 - main_orchestrator - INFO - Limpieza semántica completada en 2.74 seg.
2025-05-23 17:06:31,112 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 17:06:31,112 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 17:06:31,113 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 17:06:31,131 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 17:06:31,131 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 17:06:31,147 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:06:31,147 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 17:06:31,148 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 17:06:31,148 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:06:31,148 - main_orchestrator - INFO - ==================================================
2025-05-23 17:06:31,149 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.06 segundos.
2025-05-23 17:06:31,149 - main_orchestrator - INFO - ==================================================
2025-05-23 17:19:29,239 - main_orchestrator - INFO - ==================================================
2025-05-23 17:19:29,240 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:19:29,240 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:19:29,240 - main_orchestrator - INFO - ==================================================
2025-05-23 17:19:29,243 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:19:29,243 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:19:29,244 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:19:29,244 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 17:19:29,245 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:19:29,246 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 17:19:29,246 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:19:29,246 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:19:29,246 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:19:29,246 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:19:29,268 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:19:29,470 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:19:29,471 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 17:19:29,477 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:19:29,477 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:19:29,479 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:19:29,514 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:19:29,514 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:19:29,515 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:19:29,515 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:19:29,515 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:19:29,515 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:19:29,516 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:19:29,516 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:19:29,518 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:19:29,519 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:19:29,519 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:19:29,519 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:19:29,520 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:19:29,520 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:19:29,521 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:19:29,521 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:19:29,521 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:19:29,522 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:19:29,522 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:19:29,522 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:19:29,522 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:19:29,522 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:19:29,523 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:19:29,524 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:19:29,524 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:19:29,524 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:19:29,524 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:19:29,525 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:19:29,525 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:19:29,526 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:19:29,526 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:19:29,526 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:19:29,528 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:19:29,528 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:19:29,529 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:19:29,529 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:19:29,530 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:19:29,530 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:19:29,531 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:19:29.529492', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 17:19:29,531 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:19:29,531 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:19:29,532 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:19:29,533 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:19:29,548 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:19:29,552 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:19:29,552 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:19:29,553 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:19:29,573 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:19:29,574 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:19:29,574 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:19:29,574 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:19:29,574 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:19:29,575 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:19:32,286 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:19:32,287 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:19:32,287 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:19:32,288 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:19:32,291 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:19:32,292 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:19:32,300 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:19:32,302 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:19:32,302 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:19:32,303 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:19:29.529492', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 161, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.75}}
2025-05-23 17:19:32,303 - main_orchestrator - INFO - Limpieza semántica completada en 2.75 seg.
2025-05-23 17:19:32,303 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 17:19:32,303 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 17:19:32,304 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 17:19:32,323 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 17:19:32,323 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 17:19:32,337 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:19:32,337 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 17:19:32,337 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 17:19:32,338 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:19:32,339 - main_orchestrator - INFO - ==================================================
2025-05-23 17:19:32,339 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.10 segundos.
2025-05-23 17:19:32,339 - main_orchestrator - INFO - ==================================================
2025-05-23 17:24:18,081 - main_orchestrator - INFO - ==================================================
2025-05-23 17:24:18,082 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:24:18,082 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-23 17:24:18,082 - main_orchestrator - INFO - ==================================================
2025-05-23 17:24:18,083 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:24:18,084 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:24:18,085 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:24:18,085 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 161 URLs.
2025-05-23 17:24:18,086 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:24:18,087 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:24:18,087 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:24:18,087 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:24:18,088 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:24:18,110 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 17:24:18,313 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-23 17:24:18,314 - main_orchestrator - INFO - PDF procesado en 0.23 seg. Enlaces encontrados: 52
2025-05-23 17:24:18,317 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-23 17:24:18,317 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:24:18,318 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 17:24:18,364 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:24:18,364 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-23 17:24:18,365 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:24:18,365 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:24:18,365 - lib.history_tracker - INFO - Filtradas 42 URLs ya procesadas del lote actual.
2025-05-23 17:24:18,365 - main_orchestrator - INFO - URLs nuevas para procesar: 10 (de 52 total)
2025-05-23 17:24:18,366 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:24:18,366 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:24:18,369 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:24:18,369 - content_deduplicator - INFO - Analizando 10 URLs para encontrar duplicados...
2025-05-23 17:24:18,369 - content_deduplicator - INFO - Procesando 8 URLs del dominio facebook.com
2025-05-23 17:24:18,371 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:24:18,371 - content_deduplicator - INFO - URLs totales: 10, Únicas: 2, En grupos: 7
2025-05-23 17:24:18,372 - content_deduplicator - INFO - Se realizaron 6 comparaciones (3027.6/seg), evitando 0
2025-05-23 17:24:18,372 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-05-23 17:24:18,373 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 17:24:18,373 - main_orchestrator - INFO - Análisis de duplicados completado: 7 URLs duplicadas filtradas
2025-05-23 17:24:18,373 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 17:24:18,374 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 17:24:18,374 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:24:18,374 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:24:18,375 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:24:18,375 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 17:24:18,375 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 17:24:18,377 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-23 17:24:18,377 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:24:18,378 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:24:18,378 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:24:18,378 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:24:18,378 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:24:18,379 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:24:18,379 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:24:18,379 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-23 17:24:18,396 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-23 17:24:18,396 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 17:24:18,397 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 15042025...
2025-05-23 17:24:18,413 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-23 17:24:47,088 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 17:24:50,493 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 32.10 seg.
2025-05-23 17:24:50,496 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-23 17:24:50,496 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 32.10 segundos.
2025-05-23 17:24:50,496 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 32.10 seg.
2025-05-23 17:24:50,497 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-23 17:24:50,498 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 162 URLs.
2025-05-23 17:24:50,499 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:24:50,602 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 17:24:50,603 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 17:24:50,603 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.10 seg.
2025-05-23 17:24:50,603 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 17:24:50,604 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:24:50,605 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:24:50,605 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:24:50,606 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:24:50,607 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:24:50,607 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:24:50.605799', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 3, 'history_total_urls': 162, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 32.1, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-05-23 17:24:50,607 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:24:50,608 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:24:50,626 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-23 17:24:50,643 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-23 17:24:50,661 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:24:50,666 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 17:24:50,666 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 17:24:50,667 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:24:50,688 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:24:50,689 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:24:50,689 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-23 17:24:50,690 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-23 17:24:50,690 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:24:50,691 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-23 17:24:56,542 - semantic_cleaner - INFO - Se identificaron 27 grupos de textos similares
2025-05-23 17:24:56,542 - semantic_cleaner - INFO - Se seleccionaron 27 textos representativos
2025-05-23 17:24:56,542 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:24:56,544 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 17:24:56,547 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 17:24:56,549 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:24:56,563 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:24:56,566 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:24:56,567 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:24:56,567 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:24:50.605799', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 3, 'history_total_urls': 162, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.23, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 32.1, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.9}}
2025-05-23 17:24:56,567 - main_orchestrator - INFO - Limpieza semántica completada en 5.90 seg.
2025-05-23 17:24:56,568 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 17:24:56,568 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 17:24:56,569 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:24:56,591 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=1133997695411683&set=a.323492286462232
2025-05-23 17:24:56,592 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 17:24:56,613 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:24:56,613 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 17:24:56,614 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 17:24:56,615 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:24:56,615 - main_orchestrator - INFO - ==================================================
2025-05-23 17:24:56,616 - main_orchestrator - INFO - PIPELINE FINALIZADO en 38.53 segundos.
2025-05-23 17:24:56,616 - main_orchestrator - INFO - ==================================================
2025-05-23 17:34:50,511 - main_orchestrator - INFO - ==================================================
2025-05-23 17:34:50,512 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:34:50,512 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:34:50,512 - main_orchestrator - INFO - ==================================================
2025-05-23 17:34:50,515 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:34:50,516 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:34:50,517 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:34:50,517 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 162 URLs.
2025-05-23 17:34:50,518 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:34:50,519 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 17:34:50,519 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:34:50,519 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:34:50,520 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:34:50,520 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:34:50,543 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:34:50,737 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:34:50,738 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 17:34:50,744 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:34:50,744 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:34:50,746 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:34:50,789 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:34:50,790 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:34:50,790 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:34:50,790 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:34:50,790 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:34:50,791 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:34:50,791 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:34:50,792 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:34:50,796 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:34:50,796 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:34:50,796 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:34:50,797 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:34:50,797 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:34:50,797 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:34:50,798 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:34:50,799 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:34:50,799 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:34:50,799 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:34:50,800 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:34:50,800 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:34:50,801 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:34:50,801 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:34:50,802 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:34:50,803 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:34:50,803 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:34:50,804 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:34:50,804 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:34:50,804 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:34:50,804 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:34:50,805 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:34:50,805 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:34:50,805 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:34:50,808 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:34:50,808 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:34:50,808 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:34:50,809 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:34:50,810 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:34:50,810 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:34:50,811 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:34:50.809511', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 162, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 17:34:50,811 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:34:50,812 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:34:50,814 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:34:50,815 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:34:50,831 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:34:50,835 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:34:50,835 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:34:50,835 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:34:50,855 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:34:50,855 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:34:50,855 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:34:50,856 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:34:50,856 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:34:50,856 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:34:53,708 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:34:53,709 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:34:53,709 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:34:53,710 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:34:53,713 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:34:53,714 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:34:53,722 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:34:53,724 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:34:53,724 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:34:53,724 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:34:50.809511', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 162, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 2.89}}
2025-05-23 17:34:53,725 - main_orchestrator - INFO - Limpieza semántica completada en 2.89 seg.
2025-05-23 17:34:53,725 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 17:34:53,726 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 17:34:53,726 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_22052025.json
2025-05-23 17:34:53,746 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0ykcUTaAF2E1JENEsoDkrro3E66FN2g2uGxX52N4KcbdewD2Yha7oHPcZby31wkU1l&id=100062993063417
2025-05-23 17:34:53,746 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 17:34:53,763 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:34:53,763 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 17:34:53,763 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 17:34:53,764 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:34:53,765 - main_orchestrator - INFO - ==================================================
2025-05-23 17:34:53,765 - main_orchestrator - INFO - PIPELINE FINALIZADO en 3.25 segundos.
2025-05-23 17:34:53,765 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:11,101 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:11,101 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:43:11,101 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:43:11,102 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:11,103 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:43:11,104 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:43:11,104 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:43:11,105 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 162 URLs.
2025-05-23 17:43:11,105 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:43:11,106 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:43:11,106 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:43:11,107 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:43:11,107 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:43:11,132 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:43:11,451 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:43:11,451 - main_orchestrator - INFO - PDF procesado en 0.34 seg. Enlaces encontrados: 51
2025-05-23 17:43:11,454 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:43:11,455 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:43:11,456 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:43:11,509 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:43:11,510 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:43:11,510 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:43:11,510 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:43:11,511 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:43:11,511 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:43:11,511 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:43:11,511 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:43:11,515 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:43:11,515 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:43:11,515 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:43:11,516 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:43:11,516 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:43:11,516 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:43:11,517 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:43:11,518 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:43:11,518 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:43:11,519 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:43:11,519 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:43:11,519 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:43:11,520 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:43:11,520 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:43:11,521 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:43:11,522 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:43:11,522 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:43:11,523 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:43:11,523 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:43:11,523 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:43:11,523 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:43:11,524 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:43:11,524 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:43:11,524 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:43:11,527 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:43:11,527 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:43:11,528 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:43:11,528 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:43:11,531 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:43:11,532 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:43:11,532 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:43:11.528987', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 162, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 17:43:11,533 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:43:11,533 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:43:11,535 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:43:11,536 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:43:11,553 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:43:11,558 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:43:11,558 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:43:11,558 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:43:11,580 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:43:11,580 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:43:11,580 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:43:11,581 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:43:11,581 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:43:11,582 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:43:15,292 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:43:15,292 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:43:15,292 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:43:15,293 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:43:15,296 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:43:15,297 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:43:15,305 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:43:15,307 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:43:15,308 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:43:15,308 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:43:11.528987', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 162, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.75}}
2025-05-23 17:43:15,308 - main_orchestrator - INFO - Limpieza semántica completada en 3.75 seg.
2025-05-23 17:43:15,309 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:43:15,309 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:15,309 - main_orchestrator - INFO - PIPELINE FINALIZADO en 4.21 segundos.
2025-05-23 17:43:15,310 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:45,785 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:45,786 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:43:45,786 - main_orchestrator - INFO - Usando fecha: 15042025
2025-05-23 17:43:45,786 - main_orchestrator - INFO - ==================================================
2025-05-23 17:43:45,788 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:43:45,789 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:43:45,790 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:43:45,791 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 162 URLs.
2025-05-23 17:43:45,792 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:43:45,792 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:43:45,792 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:43:45,793 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:43:45,793 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:43:45,817 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 17:43:46,061 - lib.pdf_processor - INFO - Se extrajeron 52 enlaces URI (no mailto) de 15042025.pdf.
2025-05-23 17:43:46,062 - main_orchestrator - INFO - PDF procesado en 0.27 seg. Enlaces encontrados: 52
2025-05-23 17:43:46,064 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_15042025.csv
2025-05-23 17:43:46,065 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:43:46,066 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025.pdf (5 páginas)
2025-05-23 17:43:46,112 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:43:46,112 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-05-23 17:43:46,112 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:43:46,112 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:43:46,113 - lib.history_tracker - INFO - Filtradas 43 URLs ya procesadas del lote actual.
2025-05-23 17:43:46,113 - main_orchestrator - INFO - URLs nuevas para procesar: 9 (de 52 total)
2025-05-23 17:43:46,113 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:43:46,113 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:43:46,116 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:43:46,117 - content_deduplicator - INFO - Analizando 9 URLs para encontrar duplicados...
2025-05-23 17:43:46,117 - content_deduplicator - INFO - Procesando 7 URLs del dominio facebook.com
2025-05-23 17:43:46,118 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:43:46,119 - content_deduplicator - INFO - URLs totales: 9, Únicas: 2, En grupos: 6
2025-05-23 17:43:46,119 - content_deduplicator - INFO - Se realizaron 5 comparaciones (3627.0/seg), evitando 0
2025-05-23 17:43:46,119 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-05-23 17:43:46,120 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 17:43:46,120 - main_orchestrator - INFO - Análisis de duplicados completado: 6 URLs duplicadas filtradas
2025-05-23 17:43:46,121 - main_orchestrator - INFO - URLs después de filtrar duplicados: 3
2025-05-23 17:43:46,121 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_15042025.json
2025-05-23 17:43:46,121 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:43:46,121 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:43:46,122 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:43:46,122 - lib.url_manager - INFO - Clasificación de 3 URLs:
2025-05-23 17:43:46,122 - lib.url_manager - INFO -  - SOCIAL: 3
2025-05-23 17:43:46,123 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_15042025_unprocessed.json
2025-05-23 17:43:46,124 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:43:46,124 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:43:46,124 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:43:46,124 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:43:46,125 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:43:46,125 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:43:46,125 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:43:46,126 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15042025: social_links_15042025_unprocessed.json
2025-05-23 17:43:46,143 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-23 17:43:46,143 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 17:43:46,144 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 15042025...
2025-05-23 17:43:46,160 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468
2025-05-23 17:44:07,127 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 17:44:10,792 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 24.65 seg.
2025-05-23 17:44:10,793 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_15042025.json
2025-05-23 17:44:10,794 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 24.65 segundos.
2025-05-23 17:44:10,794 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 24.65 seg.
2025-05-23 17:44:10,794 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-23 17:44:10,795 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 17:44:10,796 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:44:10,894 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\15042025\15042025-1.pdf
2025-05-23 17:44:10,895 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 17:44:10,895 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.10 seg.
2025-05-23 17:44:10,895 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 17:44:10,896 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:44:10,897 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:44:10,897 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:44:10,899 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:44:10,900 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:44:10,900 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:44:10.898126', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 3, 'history_total_urls': 163, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 24.65, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-05-23 17:44:10,901 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:44:10,901 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:44:10,904 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_15042025.json
2025-05-23 17:44:10,906 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\15042025\texto_imagenes_api.json
2025-05-23 17:44:10,923 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_15042025\pdf_text_15042025.json
2025-05-23 17:44:10,927 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 17:44:10,927 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_15042025.json
2025-05-23 17:44:10,927 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:44:10,954 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:44:10,954 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:44:10,954 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-05-23 17:44:10,955 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-23 17:44:10,955 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:44:10,955 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-23 17:44:16,501 - semantic_cleaner - INFO - Se identificaron 27 grupos de textos similares
2025-05-23 17:44:16,501 - semantic_cleaner - INFO - Se seleccionaron 27 textos representativos
2025-05-23 17:44:16,501 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:44:16,502 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 17:44:16,506 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.json
2025-05-23 17:44:16,507 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:44:16,518 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:44:16,520 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:44:16,520 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_15042025.json
2025-05-23 17:44:16,520 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:44:10.898126', 'date_processed': '15042025', 'total_urls_in_pdf': 52, 'new_urls_processed_count': 3, 'history_total_urls': 163, 'categories': {'social': 3}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 24.65, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.59}}
2025-05-23 17:44:16,521 - main_orchestrator - INFO - Limpieza semántica completada en 5.59 seg.
2025-05-23 17:44:16,521 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 17:44:16,521 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 17:44:16,521 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_15042025.json
2025-05-23 17:44:16,541 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=1260788749385592&set=a.718173376980468
2025-05-23 17:44:16,542 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 17:44:16,558 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_15042025.md
2025-05-23 17:44:16,558 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 17:44:16,558 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 17:44:16,559 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:44:16,559 - main_orchestrator - INFO - ==================================================
2025-05-23 17:44:16,560 - main_orchestrator - INFO - PIPELINE FINALIZADO en 30.77 segundos.
2025-05-23 17:44:16,560 - main_orchestrator - INFO - ==================================================
2025-05-23 17:55:23,800 - main_orchestrator - INFO - ==================================================
2025-05-23 17:55:23,800 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:55:23,801 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:55:23,802 - main_orchestrator - INFO - ==================================================
2025-05-23 17:55:23,806 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:55:23,807 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:55:23,808 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:55:23,808 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 17:55:23,809 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:55:23,810 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 17:55:23,810 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:55:23,811 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:55:23,811 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:55:23,811 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:55:23,837 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:55:24,076 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:55:24,077 - main_orchestrator - INFO - PDF procesado en 0.27 seg. Enlaces encontrados: 51
2025-05-23 17:55:24,085 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:55:24,085 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:55:24,086 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:55:24,143 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:55:24,144 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:55:24,144 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:55:24,144 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:55:24,145 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:55:24,145 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:55:24,145 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:55:24,146 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:55:24,149 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:55:24,149 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:55:24,150 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:55:24,150 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:55:24,150 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:55:24,150 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:55:24,152 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:55:24,152 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:55:24,152 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:55:24,153 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:55:24,153 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:55:24,153 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:55:24,154 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:55:24,154 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:55:24,154 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:55:24,155 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:55:24,156 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:55:24,156 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:55:24,156 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:55:24,156 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:55:24,157 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:55:24,157 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:55:24,158 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:55:24,158 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:55:24,161 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:55:24,161 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:55:24,161 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:55:24,162 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:55:24,163 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:55:24,163 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:55:24,164 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:55:24.162468', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0}}
2025-05-23 17:55:24,164 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:55:24,164 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:55:24,166 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:55:24,168 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:55:24,186 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:55:24,190 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:55:24,190 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:55:24,190 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:55:26,197 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:55:26,197 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:55:26,197 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:55:26,198 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:55:26,198 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:55:26,198 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:55:29,356 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:55:29,357 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:55:29,357 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:55:31,358 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:55:31,362 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:55:33,364 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:55:33,371 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:55:35,373 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:55:35,374 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:55:35,374 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:55:24.162468', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0, 'semantic_cleaning': 11.18}}
2025-05-23 17:55:35,374 - main_orchestrator - INFO - Limpieza semántica completada en 11.18 seg.
2025-05-23 17:55:35,375 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:55:35,376 - main_orchestrator - INFO - ==================================================
2025-05-23 17:55:35,376 - main_orchestrator - INFO - PIPELINE FINALIZADO en 11.58 segundos.
2025-05-23 17:55:35,377 - main_orchestrator - INFO - ==================================================
2025-05-23 17:59:33,742 - main_orchestrator - INFO - ==================================================
2025-05-23 17:59:33,742 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 17:59:33,742 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 17:59:33,743 - main_orchestrator - INFO - ==================================================
2025-05-23 17:59:33,744 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 17:59:33,745 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 17:59:33,745 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 17:59:33,746 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 17:59:33,747 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 17:59:33,747 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 17:59:33,748 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 17:59:33,748 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 17:59:33,749 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 17:59:33,770 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:59:33,955 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 17:59:33,955 - main_orchestrator - INFO - PDF procesado en 0.21 seg. Enlaces encontrados: 51
2025-05-23 17:59:33,958 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 17:59:33,959 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 17:59:33,960 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 17:59:34,003 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:59:34,003 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 17:59:34,004 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:59:34,004 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 17:59:34,005 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 17:59:34,005 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 17:59:34,005 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 17:59:34,006 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 17:59:34,009 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 17:59:34,009 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 17:59:34,009 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 17:59:34,010 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 17:59:34,010 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 17:59:34,010 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 17:59:34,011 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:59:34,012 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 17:59:34,012 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 17:59:34,012 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 17:59:34,013 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 17:59:34,013 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 17:59:34,013 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 17:59:34,013 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 17:59:34,014 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 17:59:34,015 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 17:59:34,015 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 17:59:34,016 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 17:59:34,016 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 17:59:34,016 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 17:59:34,017 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 17:59:34,018 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 17:59:34,018 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 17:59:34,018 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 17:59:34,020 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 17:59:34,020 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 17:59:34,021 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 17:59:34,021 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 17:59:34,022 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:59:34,023 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:59:34,023 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:59:34.021689', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.21, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 17:59:34,023 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 17:59:34,024 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 17:59:34,025 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_22052025.json
2025-05-23 17:59:34,025 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 17:59:34,042 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 17:59:34,047 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:59:34,047 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 17:59:34,047 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 17:59:36,052 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 17:59:36,052 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 17:59:36,052 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 17:59:36,052 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-05-23 17:59:36,052 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 17:59:36,053 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 17:59:38,700 - semantic_cleaner - INFO - Se identificaron 28 grupos de textos similares
2025-05-23 17:59:38,700 - semantic_cleaner - INFO - Se seleccionaron 28 textos representativos
2025-05-23 17:59:38,700 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 17:59:40,701 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:59:40,705 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 17:59:42,706 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:59:42,712 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 17:59:44,715 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:59:44,715 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 17:59:44,716 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T17:59:34.021689', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.21, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 10.67}}
2025-05-23 17:59:44,717 - main_orchestrator - INFO - Limpieza semántica completada en 10.67 seg.
2025-05-23 17:59:44,718 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 17:59:44,718 - main_orchestrator - INFO - ==================================================
2025-05-23 17:59:44,719 - main_orchestrator - INFO - PIPELINE FINALIZADO en 10.98 segundos.
2025-05-23 17:59:44,719 - main_orchestrator - INFO - ==================================================
2025-05-23 18:05:24,139 - main_orchestrator - INFO - ==================================================
2025-05-23 18:05:24,140 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 18:05:24,140 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 18:05:24,140 - main_orchestrator - INFO - ==================================================
2025-05-23 18:05:24,142 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 18:05:24,143 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 18:05:24,144 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 18:05:24,144 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 18:05:24,145 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 18:05:24,146 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 18:05:24,147 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 18:05:24,147 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 18:05:24,148 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 18:05:24,148 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 18:05:24,170 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:05:24,383 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 18:05:24,383 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 18:05:24,390 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 18:05:24,391 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 18:05:24,392 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:05:24,436 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:05:24,436 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 18:05:24,436 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:05:24,436 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 18:05:24,437 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 18:05:24,437 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 18:05:24,438 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 18:05:24,438 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 18:05:24,441 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 18:05:24,441 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 18:05:24,441 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 18:05:24,441 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 18:05:24,442 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 18:05:24,442 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 18:05:24,443 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:05:24,444 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 18:05:24,444 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 18:05:24,444 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:05:24,445 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 18:05:24,445 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 18:05:24,445 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 18:05:24,446 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 18:05:24,446 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 18:05:24,447 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 18:05:24,448 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 18:05:24,448 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 18:05:24,448 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 18:05:24,449 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 18:05:24,449 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 18:05:24,449 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 18:05:24,450 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 18:05:24,450 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 18:05:24,452 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 18:05:24,452 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 18:05:24,452 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 18:05:24,452 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 18:05:24,454 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:05:24,454 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:05:24,455 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:05:24.453161', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 18:05:24,455 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 18:05:24,455 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 18:05:24,456 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 18:05:24,472 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:05:24,474 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:05:24,474 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:05:24,475 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 18:05:26,479 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 18:05:26,479 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 18:05:26,479 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 18:05:26,480 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 18:05:26,480 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 18:05:26,480 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 18:05:26,560 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 18:05:26,560 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 18:05:26,561 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 18:05:28,562 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:05:28,565 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:05:30,566 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:05:30,569 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:05:32,571 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:05:32,572 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:05:32,572 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:05:24.453161', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 163, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 8.1}}
2025-05-23 18:05:32,573 - main_orchestrator - INFO - Limpieza semántica completada en 8.10 seg.
2025-05-23 18:05:32,574 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 18:05:32,574 - main_orchestrator - INFO - ==================================================
2025-05-23 18:05:32,574 - main_orchestrator - INFO - PIPELINE FINALIZADO en 8.43 segundos.
2025-05-23 18:05:32,574 - main_orchestrator - INFO - ==================================================
2025-05-23 18:08:20,383 - main_orchestrator - INFO - ==================================================
2025-05-23 18:08:20,383 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 18:08:20,384 - main_orchestrator - INFO - Usando fecha: 23042025
2025-05-23 18:08:20,384 - main_orchestrator - INFO - ==================================================
2025-05-23 18:08:20,386 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 18:08:20,387 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 18:08:20,389 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 18:08:20,391 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 18:08:20,392 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 18:08:20,392 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 18:08:20,393 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 18:08:20,393 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 18:08:20,393 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 18:08:20,419 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\23042025.pdf (4 páginas)
2025-05-23 18:08:20,420 - lib.pdf_processor - INFO - Se extrajeron 0 enlaces URI (no mailto) de 23042025.pdf.
2025-05-23 18:08:20,420 - main_orchestrator - WARNING - No se encontraron enlaces en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\23042025.pdf. Terminando proceso para esta fecha.
2025-05-23 18:08:20,421 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_23042025.json
2025-05-23 18:08:20,422 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_23042025.json
2025-05-23 18:08:20,422 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:08:20.420958', 'date_processed': '23042025', 'total_urls_in_pdf': 0, 'error': 'No links found in PDF'}
2025-05-23 18:08:20,422 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 18:08:20,423 - main_orchestrator - INFO - ==================================================
2025-05-23 18:08:20,423 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.04 segundos.
2025-05-23 18:08:20,424 - main_orchestrator - INFO - ==================================================
2025-05-23 18:13:50,422 - main_orchestrator - INFO - ==================================================
2025-05-23 18:13:50,422 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 18:13:50,423 - main_orchestrator - INFO - Usando fecha: 12052025
2025-05-23 18:13:50,423 - main_orchestrator - INFO - ==================================================
2025-05-23 18:13:50,424 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 18:13:50,425 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 18:13:50,426 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 18:13:50,427 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 163 URLs.
2025-05-23 18:13:50,427 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 18:13:50,428 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 18:13:50,428 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 18:13:50,428 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 18:13:50,429 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 18:13:50,524 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-23 18:13:50,812 - lib.pdf_processor - INFO - Se extrajeron 29 enlaces URI (no mailto) de 12052025.pdf.
2025-05-23 18:13:50,812 - main_orchestrator - INFO - PDF procesado en 0.38 seg. Enlaces encontrados: 29
2025-05-23 18:13:50,815 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_12052025.csv
2025-05-23 18:13:50,816 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 18:13:50,817 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-23 18:13:50,868 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-23 18:13:50,868 - lib.text_extractor - INFO - Se encontraron 6 secciones con un total de 24 párrafos
2025-05-23 18:13:50,868 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-23 18:13:50,868 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 18:13:50,869 - main_orchestrator - INFO - URLs nuevas para procesar: 29 (de 29 total)
2025-05-23 18:13:50,869 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 18:13:50,869 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 18:13:50,872 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 18:13:50,872 - content_deduplicator - INFO - Analizando 29 URLs para encontrar duplicados...
2025-05-23 18:13:50,873 - content_deduplicator - INFO - Procesando 3 URLs del dominio elperuano.pe
2025-05-23 18:13:50,873 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398252-1 (tipo: news)
2025-05-23 18:14:04,093 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398206-1 (tipo: news)
2025-05-23 18:14:16,242 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariolaregion.com
2025-05-23 18:14:16,242 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariolaregion.com/alertan-deficiencias-en-la-calidad-de-agua-potable/ (tipo: news)
2025-05-23 18:14:47,553 - selenium_extractor - ERROR - Error extrayendo contenido de https://diariolaregion.com/alertan-deficiencias-en-la-calidad-de-agua-potable/: Message: timeout: Timed out receiving message from renderer: 20.578
  (Session info: chrome=136.0.7103.114)
Stacktrace:
	GetHandleVerifier [0x00007FF6F41ACF45+75717]
	GetHandleVerifier [0x00007FF6F41ACFA0+75808]
	(No symbol) [0x00007FF6F3F78F9A]
	(No symbol) [0x00007FF6F3F664EC]
	(No symbol) [0x00007FF6F3F661DA]
	(No symbol) [0x00007FF6F3F63E8A]
	(No symbol) [0x00007FF6F3F6483F]
	(No symbol) [0x00007FF6F3F733AE]
	(No symbol) [0x00007FF6F3F897E1]
	(No symbol) [0x00007FF6F3F9091A]
	(No symbol) [0x00007FF6F3F64FAD]
	(No symbol) [0x00007FF6F3F894D0]
	(No symbol) [0x00007FF6F401F732]
	(No symbol) [0x00007FF6F3FF7153]
	(No symbol) [0x00007FF6F3FC0421]
	(No symbol) [0x00007FF6F3FC11B3]
	GetHandleVerifier [0x00007FF6F44AD71D+3223453]
	GetHandleVerifier [0x00007FF6F44A7CC2+3200322]
	GetHandleVerifier [0x00007FF6F44C5AF3+3322739]
	GetHandleVerifier [0x00007FF6F41C6A1A+180890]
	GetHandleVerifier [0x00007FF6F41CE11F+211359]
	GetHandleVerifier [0x00007FF6F41B5294+109332]
	GetHandleVerifier [0x00007FF6F41B5442+109762]
	GetHandleVerifier [0x00007FF6F419BA59+4825]
	BaseThreadInitThunk [0x00007FFE77A2E8D7+23]
	RtlUserThreadStart [0x00007FFE7925C5DC+44]

2025-05-23 18:14:49,723 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariolaregion.com/alertan-deficiencias-en-la-calidad-de-agua-potable/ (tipo: news)
2025-05-23 18:15:07,051 - content_deduplicator - INFO - Procesando 9 URLs del dominio imacorpplataforma.com
2025-05-23 18:15:07,105 - content_deduplicator - INFO - Procesando 2 URLs del dominio elcomercio.pe
2025-05-23 18:15:07,105 - selenium_extractor - INFO - Extrayendo contenido de URL: https://elcomercio.pe/politica/justicia/equipo-lava-jato-presenta-acusacion-contra-14-personas-por-caso-de-planta-de-tratamiento-de-huachipa-y-ramal-norte-sedapal-camargo-y-correa-ultimas-noticia/?ref=ecr (tipo: other)
2025-05-23 18:15:28,664 - content_deduplicator - INFO - Procesando 3 URLs del dominio andina.pe
2025-05-23 18:15:28,665 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-fiscalia-acusa-a-14-implicados-presunta-corrupcion-obra-planta-huachipa-1029086.aspx (tipo: news)
2025-05-23 18:15:54,585 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-peru-y-japon-buscan-impulsar-proyectos-agua-y-reordenamiento-urbano-lima-y-callao-1029000.aspx (tipo: news)
2025-05-23 18:16:20,012 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-mas-1400-personas-fueron-beneficiadas-acceso-a-agua-segura-el-2024-1029090.aspx (tipo: news)
2025-05-23 18:16:48,656 - content_deduplicator - INFO - Procesando 2 URLs del dominio com.pe
2025-05-23 18:16:48,656 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-investigara-consumos-atipicos-tras-quejas-por-recibos-de-agua/ (tipo: other)
2025-05-23 18:17:07,102 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-recoge-muestras-en-huanta-por-posible-contaminacion-de-agua/ (tipo: other)
2025-05-23 18:17:38,399 - selenium_extractor - ERROR - Error extrayendo contenido de https://jornada.com.pe/seda-ayacucho-recoge-muestras-en-huanta-por-posible-contaminacion-de-agua/: Message: timeout: Timed out receiving message from renderer: 27.802
  (Session info: chrome=136.0.7103.114)
Stacktrace:
	GetHandleVerifier [0x00007FF6F41ACF45+75717]
	GetHandleVerifier [0x00007FF6F41ACFA0+75808]
	(No symbol) [0x00007FF6F3F78F9A]
	(No symbol) [0x00007FF6F3F664EC]
	(No symbol) [0x00007FF6F3F661DA]
	(No symbol) [0x00007FF6F3F63E8A]
	(No symbol) [0x00007FF6F3F6483F]
	(No symbol) [0x00007FF6F3F733AE]
	(No symbol) [0x00007FF6F3F897E1]
	(No symbol) [0x00007FF6F3F9091A]
	(No symbol) [0x00007FF6F3F64FAD]
	(No symbol) [0x00007FF6F3F894D0]
	(No symbol) [0x00007FF6F401F732]
	(No symbol) [0x00007FF6F3FF7153]
	(No symbol) [0x00007FF6F3FC0421]
	(No symbol) [0x00007FF6F3FC11B3]
	GetHandleVerifier [0x00007FF6F44AD71D+3223453]
	GetHandleVerifier [0x00007FF6F44A7CC2+3200322]
	GetHandleVerifier [0x00007FF6F44C5AF3+3322739]
	GetHandleVerifier [0x00007FF6F41C6A1A+180890]
	GetHandleVerifier [0x00007FF6F41CE11F+211359]
	GetHandleVerifier [0x00007FF6F41B5294+109332]
	GetHandleVerifier [0x00007FF6F41B5442+109762]
	GetHandleVerifier [0x00007FF6F419BA59+4825]
	BaseThreadInitThunk [0x00007FFE77A2E8D7+23]
	RtlUserThreadStart [0x00007FFE7925C5DC+44]

2025-05-23 18:17:40,590 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-23 18:17:40,591 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164922-mvcs-capacito-a-las-eps-de-amazonas-y-san-martin-sobre-evaluacion-del-riesgo-ante-desastres-naturales (tipo: other)
2025-05-23 18:18:01,541 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164942-peru-y-japon-articulan-esfuerzos-para-impulsar-proyectos-de-agua-y-reordenamiento-urbano-en-lima-y-callao (tipo: other)
2025-05-23 18:18:12,992 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164757-por-mejores-servicios-basicos-en-cusco-vivienda-suscribe-convenio-para-desarrollo-de-proyecto-de-agua-potable-y-alcantarillado-en-saylla (tipo: other)
2025-05-23 18:18:38,824 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/otass/noticias/1164807-otass-este-12-de-mayo-vence-plazo-de-inscripcion-a-la-subasta-publica-de-agua-residual-cruda-de-ptar-yaurilla-ica (tipo: other)
2025-05-23 18:19:11,512 - content_deduplicator - INFO - Análisis completado en 320.64 segundos
2025-05-23 18:19:11,513 - content_deduplicator - INFO - URLs totales: 29, Únicas: 24, En grupos: 0
2025-05-23 18:19:11,513 - content_deduplicator - INFO - Se realizaron 30 comparaciones (0.1/seg), evitando 1
2025-05-23 18:19:11,513 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 18:19:11,514 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-23 18:19:11,515 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 18:19:11,515 - main_orchestrator - INFO - URLs después de filtrar duplicados: 29
2025-05-23 18:19:11,516 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-23 18:19:11,516 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 18:19:11,516 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 18:19:11,517 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 18:19:11,519 - lib.url_manager - INFO - Clasificación de 29 URLs:
2025-05-23 18:19:11,519 - lib.url_manager - INFO -  - HTML: 20
2025-05-23 18:19:11,520 - lib.url_manager - INFO -  - IMAGES: 9
2025-05-23 18:19:11,522 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_12052025_unprocessed.json
2025-05-23 18:19:11,523 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 18:19:11,523 - lib.image_processor - INFO - Iniciando descarga paralela de 9 imágenes para la fecha 12052025...
2025-05-23 18:19:11,523 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-ECONOMIA-11-AGRO-PERUANO-CRECIO-4-EN-EL-PRIMER-TRIMESTRE-11-05-2025.jpg. Primera ocurrencia: #4, segunda: #5
2025-05-23 18:19:11,524 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-POLITICA-2-INFORMAN-SOBRE-AVANCES-A-OCDE-10-05-2025.jpg. Primera ocurrencia: #7, segunda: #8
2025-05-23 18:19:11,527 - lib.image_processor - INFO - Omitiendo URL duplicada #5: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-ECONOMIA-11-AGRO-PERUANO-CRECIO-4-EN-EL-PRIMER-TRIMESTRE-11-05-2025.jpg
2025-05-23 18:19:11,531 - lib.image_processor - INFO - Omitiendo URL duplicada #8: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-PERUANO-POLITICA-2-INFORMAN-SOBRE-AVANCES-A-OCDE-10-05-2025.jpg
2025-05-23 18:19:11,887 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-TV-PERU-OTASS-CAPACITA-A-REPRESEMTAMTESS-REGIONALES.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-23 18:19:11,934 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/11-05-2025-C31-SUNASS-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO-ESTADO-A-TU-SERVICIO.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-23 18:19:11,950 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO-.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-23 18:19:20,125 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_af620be1_12052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (776629 bytes)
2025-05-23 18:19:20,631 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_dead3ba5_12052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (837885 bytes)
2025-05-23 18:19:22,190 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_757e4252_12052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (534835 bytes)
2025-05-23 18:19:26,599 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_71611ca8_12052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (1053821 bytes)
2025-05-23 18:29:14,578 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_9368e41b_12052025.mp4' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (59299569 bytes)
2025-05-23 18:29:15,085 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO-.mp4: Content type 'video/mp4' is not an image
2025-05-23 18:29:23,863 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_c24c5fe3_12052025.mp4' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (68156091 bytes)
2025-05-23 18:29:24,270 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/11-05-2025-C31-SUNASS-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO-ESTADO-A-TU-SERVICIO.mp4: Content type 'video/mp4' is not an image
2025-05-23 18:34:48,609 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_4ec295f1_12052025.mp4' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025 (144178181 bytes)
2025-05-23 18:34:49,311 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-TV-PERU-OTASS-CAPACITA-A-REPRESEMTAMTESS-REGIONALES.mp4: Content type 'video/mp4' is not an image
2025-05-23 18:34:49,315 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_12052025.json
2025-05-23 18:34:49,315 - lib.image_processor - INFO - Descarga de imágenes completada para 7/9 URLs en 937.79 segundos.
2025-05-23 18:34:49,316 - main_orchestrator - INFO - Descarga de imágenes completada en 937.79 seg.
2025-05-23 18:34:49,316 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-23 18:34:49,318 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 170 URLs.
2025-05-23 18:34:49,319 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 18:34:49,319 - lib.html_scraper - INFO - Iniciando scraping paralelo de 20 URLs...
2025-05-23 18:34:55,688 - lib.html_scraper - INFO - Progreso: 20/20 URLs procesadas en 6.37 seg.
2025-05-23 18:34:55,693 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-23 18:34:55,694 - lib.html_scraper - INFO - Scraping completado para 20/20 URLs en 6.37 segundos.
2025-05-23 18:34:55,694 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-23 18:34:55,694 - main_orchestrator - INFO - Scraping HTML completado en 6.38 seg.
2025-05-23 18:34:55,695 - lib.history_tracker - INFO - Añadidas 17 nuevas URLs al historial.
2025-05-23 18:34:55,697 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 18:34:55,697 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 18:34:57,594 - lib.api_client - ERROR - Error procesando tmpk4ih7cia.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-23 18:34:57,723 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 2
}
]
2025-05-23 18:34:57,724 - lib.image_processor - INFO - Procesando 7 imágenes con API (batch_size=3, pausa=60s)
2025-05-23 18:34:57,724 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-23 18:34:57,725 - lib.image_processor - INFO - Procesando imagen con API: img_4_af620be1_12052025.jpg
2025-05-23 18:35:02,416 - lib.api_client - ERROR - Error procesando img_4_af620be1_12052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
2025-05-23 18:35:04,370 - lib.image_processor - WARNING - Imagen img_4_af620be1_12052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 18:35:04,374 - lib.image_processor - WARNING - Error procesando imagen img_4_af620be1_12052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
2025-05-23 18:35:05,319 - lib.image_processor - INFO - Procesando imagen con API: img_9_dead3ba5_12052025.jpg
2025-05-23 18:35:10,273 - lib.api_client - ERROR - Error procesando img_9_dead3ba5_12052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 50
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 50
}
]
2025-05-23 18:35:12,139 - lib.image_processor - WARNING - Imagen img_9_dead3ba5_12052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 18:35:12,142 - lib.image_processor - WARNING - Error procesando imagen img_9_dead3ba5_12052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 50
}
]
2025-05-23 18:35:12,790 - lib.image_processor - INFO - Procesando imagen con API: img_7_757e4252_12052025.jpg
2025-05-23 18:35:16,146 - lib.api_client - ERROR - Error procesando img_7_757e4252_12052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 44
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 44
}
]
2025-05-23 18:35:19,129 - lib.image_processor - WARNING - Imagen img_7_757e4252_12052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 18:35:19,133 - lib.image_processor - WARNING - Error procesando imagen img_7_757e4252_12052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 44
}
]
2025-05-23 18:35:19,810 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 18:36:19,810 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-23 18:36:19,811 - lib.image_processor - INFO - Procesando imagen con API: img_6_71611ca8_12052025.jpg
2025-05-23 18:36:25,986 - lib.api_client - ERROR - Error procesando img_6_71611ca8_12052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
2025-05-23 18:36:27,039 - lib.image_processor - WARNING - Imagen img_6_71611ca8_12052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 18:36:27,042 - lib.image_processor - WARNING - Error procesando imagen img_6_71611ca8_12052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 34
}
]
2025-05-23 18:36:27,853 - lib.image_processor - INFO - Procesando imagen con API: img_1_9368e41b_12052025.mp4
2025-05-23 18:36:27,853 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025\img_1_9368e41b_12052025.mp4 (56.55 MB)
2025-05-23 18:36:27,854 - lib.image_processor - WARNING - Error procesando imagen img_1_9368e41b_12052025.mp4: Image file too large
2025-05-23 18:36:28,607 - lib.image_processor - INFO - Procesando imagen con API: img_2_c24c5fe3_12052025.mp4
2025-05-23 18:36:28,608 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025\img_2_c24c5fe3_12052025.mp4 (65.00 MB)
2025-05-23 18:36:28,608 - lib.image_processor - WARNING - Error procesando imagen img_2_c24c5fe3_12052025.mp4: Image file too large
2025-05-23 18:36:29,515 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 18:37:29,516 - lib.image_processor - INFO - Procesando batch 3 (1 imágenes)
2025-05-23 18:37:29,517 - lib.image_processor - INFO - Procesando imagen con API: img_3_4ec295f1_12052025.mp4
2025-05-23 18:37:29,517 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025\img_3_4ec295f1_12052025.mp4 (137.50 MB)
2025-05-23 18:37:29,517 - lib.image_processor - WARNING - Error procesando imagen img_3_4ec295f1_12052025.mp4: Image file too large
2025-05-23 18:37:30,499 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-23 18:37:30,499 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-23 18:37:30,499 - lib.image_processor - INFO - Procesamiento API completado para 0/7 imágenes en 152.78 segundos.
2025-05-23 18:37:30,500 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 154.80 seg.
2025-05-23 18:37:30,500 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 18:37:30,500 - main_orchestrator - INFO - No se encontró el archivo social para la fecha 12052025
2025-05-23 18:37:30,500 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 18:37:30,501 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 18:37:30,501 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 18:37:30,501 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 18:37:30,502 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 18:37:30,503 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 18:37:30,503 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:37:30.501844', 'date_processed': '12052025', 'total_urls_in_pdf': 29, 'new_urls_processed_count': 29, 'history_total_urls': 187, 'categories': {'html': 20, 'images': 9}, 'html_processing': {'attempted': 20, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 10, 'average_relevance': 0.4176470588235294}, 'image_processing': {'attempted_download': 9, 'successful_download': 4, 'attempted_api': 4, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.38, 'pdf_text_extraction': 0.05, 'image_download': 937.79, 'html_scraping': 6.38, 'image_api': 154.8, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 18:37:30,503 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 18:37:30,504 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 18:37:30,520 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-23 18:37:30,525 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_12052025.json
2025-05-23 18:37:30,526 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_12052025.json
2025-05-23 18:37:30,526 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 18:37:32,529 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 18:37:32,530 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 18:37:32,530 - semantic_cleaner - INFO - Extraídos 24 textos de PDF
2025-05-23 18:37:32,530 - semantic_cleaner - INFO - Extraídos 17 textos de HTML
2025-05-23 18:37:32,530 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 18:37:32,530 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 18:37:34,698 - semantic_cleaner - INFO - Se identificaron 38 grupos de textos similares
2025-05-23 18:37:34,699 - semantic_cleaner - INFO - Se seleccionaron 38 textos representativos
2025-05-23 18:37:34,699 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 18:37:36,701 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_12052025.json
2025-05-23 18:37:36,704 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_12052025.json
2025-05-23 18:37:38,713 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_12052025.md
2025-05-23 18:37:38,737 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_12052025.md
2025-05-23 18:37:40,746 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 18:37:40,746 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 18:37:40,746 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:37:30.501844', 'date_processed': '12052025', 'total_urls_in_pdf': 29, 'new_urls_processed_count': 29, 'history_total_urls': 187, 'categories': {'html': 20, 'images': 9}, 'html_processing': {'attempted': 20, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 10, 'average_relevance': 0.4176470588235294}, 'image_processing': {'attempted_download': 9, 'successful_download': 4, 'attempted_api': 4, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.38, 'pdf_text_extraction': 0.05, 'image_download': 937.79, 'html_scraping': 6.38, 'image_api': 154.8, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 10.22}}
2025-05-23 18:37:40,747 - main_orchestrator - INFO - Limpieza semántica completada en 10.22 seg.
2025-05-23 18:37:40,747 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 18:37:40,748 - main_orchestrator - INFO - ==================================================
2025-05-23 18:37:40,748 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1430.33 segundos.
2025-05-23 18:37:40,748 - main_orchestrator - INFO - ==================================================
2025-05-23 18:41:41,771 - main_orchestrator - INFO - ==================================================
2025-05-23 18:41:41,772 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 18:41:41,772 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 18:41:41,772 - main_orchestrator - INFO - ==================================================
2025-05-23 18:41:41,774 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 18:41:41,775 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 18:41:41,776 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 18:41:41,777 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 18:41:41,778 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 18:41:41,778 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 18:41:41,779 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 18:41:41,779 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 18:41:41,779 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 18:41:41,779 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 18:41:41,801 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:41:42,048 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 18:41:42,048 - main_orchestrator - INFO - PDF procesado en 0.27 seg. Enlaces encontrados: 51
2025-05-23 18:41:42,056 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 18:41:42,057 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 18:41:42,058 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:41:42,103 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:41:42,103 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 18:41:42,103 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:41:42,104 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 18:41:42,104 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 18:41:42,104 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 18:41:42,105 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 18:41:42,105 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 18:41:42,122 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 18:41:42,123 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 18:41:42,123 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 18:41:42,123 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 18:41:42,124 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 18:41:42,124 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 18:41:42,125 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:41:42,125 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 18:41:42,126 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 18:41:42,126 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:41:42,126 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 18:41:42,126 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 18:41:42,127 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 18:41:42,127 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 18:41:42,127 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 18:41:42,128 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 18:41:42,129 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 18:41:42,129 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 18:41:42,129 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 18:41:42,129 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 18:41:42,130 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 18:41:42,130 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 18:41:42,131 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 18:41:42,131 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 18:41:42,132 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 18:41:42,133 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 18:41:42,133 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 18:41:42,133 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 18:41:42,135 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:41:42,135 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:41:42,135 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:41:42.134014', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 18:41:42,136 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 18:41:42,136 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 18:41:42,137 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 18:41:42,151 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:41:42,153 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:41:42,153 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:41:42,154 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 18:41:42,170 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 18:41:42,170 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 18:41:42,171 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 18:41:42,171 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 18:41:42,171 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 18:41:42,171 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 18:41:42,276 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 18:41:42,276 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 18:41:42,276 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 18:41:42,277 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:41:42,278 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:41:42,279 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:41:42,281 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:41:42,283 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:41:42,283 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:41:42,284 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:41:42.134014', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.13}}
2025-05-23 18:41:42,284 - main_orchestrator - INFO - Limpieza semántica completada en 0.13 seg.
2025-05-23 18:41:42,284 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 18:41:42,284 - main_orchestrator - INFO - ==================================================
2025-05-23 18:41:42,285 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.51 segundos.
2025-05-23 18:41:42,285 - main_orchestrator - INFO - ==================================================
2025-05-23 18:43:50,044 - main_orchestrator - INFO - ==================================================
2025-05-23 18:43:50,044 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 18:43:50,045 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 18:43:50,045 - main_orchestrator - INFO - ==================================================
2025-05-23 18:43:50,046 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 18:43:50,047 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 18:43:50,048 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 18:43:50,048 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 18:43:50,049 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 18:43:50,050 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 18:43:50,050 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 18:43:50,050 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 18:43:50,051 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 18:43:50,051 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 18:43:50,070 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:43:50,267 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 18:43:50,267 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 18:43:50,273 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 18:43:50,273 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 18:43:50,276 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 18:43:50,319 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:43:50,319 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 18:43:50,319 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:43:50,320 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 18:43:50,320 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 18:43:50,320 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 18:43:50,320 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 18:43:50,320 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 18:43:50,323 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 18:43:50,323 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 18:43:50,324 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 18:43:50,324 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 18:43:50,324 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 18:43:50,324 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 18:43:50,326 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:43:50,326 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 18:43:50,326 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 18:43:50,327 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 18:43:50,327 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 18:43:50,327 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 18:43:50,327 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 18:43:50,328 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 18:43:50,328 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 18:43:50,329 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 18:43:50,330 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 18:43:50,330 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 18:43:50,330 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 18:43:50,331 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 18:43:50,331 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 18:43:50,332 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 18:43:50,332 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 18:43:50,332 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 18:43:50,334 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 18:43:50,334 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 18:43:50,334 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 18:43:50,335 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 18:43:50,336 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:43:50,336 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:43:50,336 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:43:50.335234', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 18:43:50,336 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 18:43:50,337 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 18:43:50,337 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 18:43:50,353 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 18:43:50,355 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:43:50,355 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 18:43:50,355 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 18:43:50,373 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 18:43:50,373 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 18:43:50,373 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 18:43:50,373 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 18:43:50,374 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 18:43:50,374 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 18:43:50,452 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 18:43:50,453 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 18:43:50,453 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 18:43:50,453 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:43:50,455 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 18:43:50,455 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:43:50,457 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 18:43:50,459 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:43:50,459 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 18:43:50,460 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T18:43:50.335234', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.1}}
2025-05-23 18:43:50,460 - main_orchestrator - INFO - Limpieza semántica completada en 0.10 seg.
2025-05-23 18:43:50,461 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 18:43:50,461 - main_orchestrator - INFO - ==================================================
2025-05-23 18:43:50,462 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.42 segundos.
2025-05-23 18:43:50,462 - main_orchestrator - INFO - ==================================================
2025-05-23 19:13:24,406 - main_orchestrator - INFO - ==================================================
2025-05-23 19:13:24,407 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:13:24,407 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 19:13:24,407 - main_orchestrator - INFO - ==================================================
2025-05-23 19:13:24,411 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:13:24,412 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:13:24,413 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:13:24,414 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:13:24,415 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:13:24,415 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 19:13:24,416 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:13:24,416 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:13:24,417 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:13:24,417 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:13:24,439 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:13:24,689 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 19:13:24,690 - main_orchestrator - INFO - PDF procesado en 0.27 seg. Enlaces encontrados: 51
2025-05-23 19:13:24,697 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 19:13:24,698 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:13:24,699 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:13:24,756 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:13:24,757 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 19:13:24,757 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:13:24,757 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:13:24,757 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 19:13:24,758 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 19:13:24,758 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 19:13:24,758 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 19:13:24,762 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 19:13:24,763 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 19:13:24,763 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 19:13:24,764 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 19:13:24,764 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 19:13:24,764 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 19:13:24,765 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:13:24,765 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 19:13:24,766 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 19:13:24,766 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:13:24,766 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 19:13:24,767 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 19:13:24,768 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 19:13:24,768 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 19:13:24,769 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 19:13:24,770 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 19:13:24,770 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 19:13:24,770 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 19:13:24,770 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 19:13:24,771 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 19:13:24,771 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 19:13:24,772 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 19:13:24,773 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 19:13:24,773 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 19:13:24,776 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 19:13:24,776 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 19:13:24,777 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 19:13:24,777 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 19:13:24,778 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:13:24,779 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:13:24,779 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:13:24.777936', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0}}
2025-05-23 19:13:24,780 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 19:13:24,780 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 19:13:24,781 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 19:13:24,802 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:13:24,804 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:13:24,804 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:13:24,805 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 19:13:24,829 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 19:13:24,829 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 19:13:24,830 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 19:13:24,830 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 19:13:24,830 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 19:13:24,830 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 19:13:24,920 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 19:13:24,920 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 19:13:24,921 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 19:13:24,921 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:13:24,922 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:13:24,922 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:13:24,924 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:13:24,925 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:13:24,926 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:13:24,926 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:13:24.777936', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.27, 'pdf_text_extraction': 0.06, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.06, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.12}}
2025-05-23 19:13:24,926 - main_orchestrator - INFO - Limpieza semántica completada en 0.12 seg.
2025-05-23 19:13:24,927 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:13:24,927 - main_orchestrator - INFO - ==================================================
2025-05-23 19:13:24,928 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.52 segundos.
2025-05-23 19:13:24,928 - main_orchestrator - INFO - ==================================================
2025-05-23 19:19:26,388 - main_orchestrator - INFO - ==================================================
2025-05-23 19:19:26,388 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:19:26,389 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 19:19:26,389 - main_orchestrator - INFO - ==================================================
2025-05-23 19:19:26,391 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:19:26,392 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:19:26,393 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:19:26,394 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:19:26,394 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:19:26,395 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 19:19:26,395 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:19:26,396 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:19:26,396 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:19:26,396 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:19:26,416 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:19:26,634 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 19:19:26,635 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 19:19:26,641 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 19:19:26,641 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:19:26,643 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:19:26,687 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:19:26,687 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 19:19:26,687 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:19:26,688 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:19:26,688 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 19:19:26,688 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 19:19:26,688 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 19:19:26,688 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 19:19:26,692 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 19:19:26,693 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 19:19:26,693 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 19:19:26,693 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 19:19:26,694 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 19:19:26,694 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 19:19:26,695 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:19:26,695 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 19:19:26,695 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 19:19:26,695 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:19:26,696 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 19:19:26,697 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 19:19:26,697 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 19:19:26,697 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 19:19:26,697 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 19:19:26,698 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 19:19:26,699 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 19:19:26,699 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 19:19:26,699 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 19:19:26,700 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 19:19:26,700 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 19:19:26,701 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 19:19:26,702 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 19:19:26,702 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 19:19:26,705 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 19:19:26,705 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 19:19:26,705 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 19:19:26,705 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 19:19:26,706 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:19:26,707 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:19:26,707 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:19:26.706172', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 19:19:26,708 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 19:19:26,708 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 19:19:26,708 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 19:19:26,724 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:19:26,726 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:19:26,726 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:19:26,726 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 19:19:26,745 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 19:19:26,745 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 19:19:26,745 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 19:19:26,745 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 19:19:26,746 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 19:19:26,746 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 19:19:26,816 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 19:19:26,816 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 19:19:26,817 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 19:19:26,817 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:19:26,818 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:19:26,818 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:19:26,820 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:19:26,821 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:19:26,822 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:19:26,822 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:19:26.706172', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.09}}
2025-05-23 19:19:26,822 - main_orchestrator - INFO - Limpieza semántica completada en 0.09 seg.
2025-05-23 19:19:26,823 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:19:26,823 - main_orchestrator - INFO - ==================================================
2025-05-23 19:19:26,823 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.43 segundos.
2025-05-23 19:19:26,824 - main_orchestrator - INFO - ==================================================
2025-05-23 19:23:10,419 - main_orchestrator - INFO - ==================================================
2025-05-23 19:23:10,419 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:23:10,420 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 19:23:10,420 - main_orchestrator - INFO - ==================================================
2025-05-23 19:23:10,422 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:23:10,423 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:23:10,424 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:23:10,425 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:23:10,426 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:23:10,426 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:23:10,426 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:23:10,427 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:23:10,427 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:23:10,452 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:23:10,662 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 19:23:10,662 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 51
2025-05-23 19:23:10,666 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 19:23:10,666 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:23:10,668 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:23:10,710 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:23:10,710 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 19:23:10,710 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:23:10,711 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:23:10,711 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 19:23:10,711 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 19:23:10,711 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 19:23:10,712 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 19:23:10,715 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 19:23:10,715 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 19:23:10,715 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 19:23:10,715 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 19:23:10,716 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 19:23:10,716 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 19:23:10,717 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:23:10,718 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 19:23:10,718 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 19:23:10,718 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:23:10,718 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 19:23:10,720 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 19:23:10,720 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 19:23:10,720 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 19:23:10,721 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 19:23:10,722 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 19:23:10,722 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 19:23:10,723 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 19:23:10,723 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 19:23:10,723 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 19:23:10,723 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 19:23:10,725 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 19:23:10,725 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 19:23:10,725 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 19:23:10,727 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 19:23:10,727 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 19:23:10,727 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 19:23:10,728 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 19:23:10,729 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:23:10,729 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:23:10,730 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:23:10.728476', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0}}
2025-05-23 19:23:10,730 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 19:23:10,730 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 19:23:10,731 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 19:23:10,748 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:23:10,750 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:23:10,750 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:23:10,751 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 19:23:10,773 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 19:23:10,773 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 19:23:10,773 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 19:23:10,774 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 19:23:10,774 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 19:23:10,774 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 19:23:10,861 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 19:23:10,862 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 19:23:10,862 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 19:23:10,862 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:23:10,864 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:23:10,864 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:23:10,867 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:23:10,868 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:23:10,868 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:23:10,869 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:23:10.728476', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.04, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.04, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.12}}
2025-05-23 19:23:10,870 - main_orchestrator - INFO - Limpieza semántica completada en 0.12 seg.
2025-05-23 19:23:10,870 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:23:10,870 - main_orchestrator - INFO - ==================================================
2025-05-23 19:23:10,870 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.45 segundos.
2025-05-23 19:23:10,871 - main_orchestrator - INFO - ==================================================
2025-05-23 19:24:08,486 - main_orchestrator - INFO - ==================================================
2025-05-23 19:24:08,486 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:24:08,486 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-23 19:24:08,486 - main_orchestrator - INFO - ==================================================
2025-05-23 19:24:08,489 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:24:08,490 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:24:08,490 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:24:08,491 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:24:08,492 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:24:08,492 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:24:08,492 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:24:08,493 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:24:08,493 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:24:08,514 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:24:08,717 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-23 19:24:08,717 - main_orchestrator - INFO - PDF procesado en 0.22 seg. Enlaces encontrados: 51
2025-05-23 19:24:08,720 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-23 19:24:08,721 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:24:08,722 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-23 19:24:08,773 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:24:08,773 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-23 19:24:08,773 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:24:08,774 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:24:08,774 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-23 19:24:08,774 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-23 19:24:08,774 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 19:24:08,775 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 19:24:08,778 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 19:24:08,778 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-23 19:24:08,778 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-23 19:24:08,779 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-23 19:24:08,779 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-23 19:24:08,779 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 19:24:08,780 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:24:08,781 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 19:24:08,781 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-23 19:24:08,781 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-23 19:24:08,781 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 19:24:08,782 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 19:24:08,783 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 19:24:08,783 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-23 19:24:08,783 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 19:24:08,784 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-23 19:24:08,785 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 19:24:08,785 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-23 19:24:08,785 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 19:24:08,786 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-23 19:24:08,786 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 19:24:08,787 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-23 19:24:08,787 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 19:24:08,788 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-23 19:24:08,789 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-23 19:24:08,790 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 19:24:08,790 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-23 19:24:08,790 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 19:24:08,791 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:24:08,792 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:24:08,792 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:24:08.790799', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-23 19:24:08,793 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 19:24:08,793 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 19:24:08,794 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-23 19:24:08,806 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-23 19:24:08,809 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:24:08,809 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-23 19:24:08,810 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 19:24:08,826 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 19:24:08,826 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 19:24:08,827 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-23 19:24:08,827 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-23 19:24:08,827 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 19:24:08,828 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-23 19:24:08,904 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-23 19:24:08,905 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-23 19:24:08,905 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 19:24:08,905 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:24:08,907 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-23 19:24:08,907 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:24:08,910 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-23 19:24:08,912 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:24:08,912 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-23 19:24:08,912 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:24:08.790799', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 187, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.22, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.1}}
2025-05-23 19:24:08,913 - main_orchestrator - INFO - Limpieza semántica completada en 0.10 seg.
2025-05-23 19:24:08,914 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:24:08,914 - main_orchestrator - INFO - ==================================================
2025-05-23 19:24:08,914 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.43 segundos.
2025-05-23 19:24:08,914 - main_orchestrator - INFO - ==================================================
2025-05-23 19:28:09,357 - main_orchestrator - INFO - ==================================================
2025-05-23 19:28:09,357 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:28:09,357 - main_orchestrator - INFO - Usando fecha: 12052025
2025-05-23 19:28:09,358 - main_orchestrator - INFO - ==================================================
2025-05-23 19:28:09,361 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:28:09,361 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:28:09,362 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:28:09,362 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:28:09,363 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:28:09,364 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-23 19:28:09,364 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:28:09,364 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:28:09,364 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:28:09,365 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:28:09,455 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-23 19:28:09,710 - lib.pdf_processor - INFO - Se extrajeron 29 enlaces URI (no mailto) de 12052025.pdf.
2025-05-23 19:28:09,710 - main_orchestrator - INFO - PDF procesado en 0.35 seg. Enlaces encontrados: 29
2025-05-23 19:28:09,715 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_12052025.csv
2025-05-23 19:28:09,716 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:28:09,717 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-23 19:28:09,789 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-23 19:28:09,790 - lib.text_extractor - INFO - Se encontraron 6 secciones con un total de 24 párrafos
2025-05-23 19:28:09,790 - main_orchestrator - INFO - Texto del PDF extraído en 0.07 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-23 19:28:09,791 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:28:09,791 - lib.history_tracker - INFO - Filtradas 29 URLs ya procesadas del lote actual.
2025-05-23 19:28:09,792 - main_orchestrator - INFO - URLs nuevas para procesar: 0 (de 29 total)
2025-05-23 19:28:09,792 - main_orchestrator - INFO - No hay URLs nuevas para procesar en esta ejecución.
2025-05-23 19:28:09,793 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 19:28:09,794 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 19:28:09,794 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:28:09.792918', 'date_processed': '12052025', 'total_urls_in_pdf': 29, 'new_urls_processed_count': 0, 'history_total_urls': 187, 'info': 'No new URLs to process in this run.'}
2025-05-23 19:28:09,794 - main_orchestrator - INFO - Estadísticas guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_12052025.json
2025-05-23 19:28:09,795 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:28:09,795 - main_orchestrator - INFO - ==================================================
2025-05-23 19:28:09,795 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.44 segundos.
2025-05-23 19:28:09,795 - main_orchestrator - INFO - ==================================================
2025-05-23 19:29:59,620 - main_orchestrator - INFO - ==================================================
2025-05-23 19:29:59,620 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-23 19:29:59,620 - main_orchestrator - INFO - Usando fecha: 13052025
2025-05-23 19:29:59,621 - main_orchestrator - INFO - ==================================================
2025-05-23 19:29:59,623 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-23 19:29:59,624 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-23 19:29:59,625 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-23 19:29:59,626 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 187 URLs.
2025-05-23 19:29:59,628 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-23 19:29:59,628 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-23 19:29:59,629 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-23 19:29:59,629 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-23 19:29:59,630 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-23 19:29:59,720 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-23 19:29:59,911 - lib.pdf_processor - INFO - Se extrajeron 15 enlaces URI (no mailto) de 13052025.pdf.
2025-05-23 19:29:59,911 - main_orchestrator - INFO - PDF procesado en 0.28 seg. Enlaces encontrados: 15
2025-05-23 19:29:59,914 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_13052025.csv
2025-05-23 19:29:59,915 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-23 19:29:59,916 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-23 19:29:59,972 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-23 19:29:59,972 - lib.text_extractor - INFO - Se encontraron 6 secciones con un total de 18 párrafos
2025-05-23 19:29:59,973 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-23 19:29:59,973 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-23 19:29:59,973 - main_orchestrator - INFO - URLs nuevas para procesar: 15 (de 15 total)
2025-05-23 19:29:59,973 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-23 19:29:59,974 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-23 19:29:59,977 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-23 19:29:59,978 - content_deduplicator - INFO - Analizando 15 URLs para encontrar duplicados...
2025-05-23 19:29:59,978 - content_deduplicator - INFO - Procesando 2 URLs del dominio elperuano.pe
2025-05-23 19:29:59,980 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398634-1 (tipo: news)
2025-05-23 19:30:21,366 - content_deduplicator - INFO - Procesando 7 URLs del dominio imacorpplataforma.com
2025-05-23 19:30:21,415 - content_deduplicator - INFO - Análisis completado en 21.44 segundos
2025-05-23 19:30:21,415 - content_deduplicator - INFO - URLs totales: 15, Únicas: 14, En grupos: 0
2025-05-23 19:30:21,415 - content_deduplicator - INFO - Se realizaron 21 comparaciones (1.0/seg), evitando 0
2025-05-23 19:30:21,415 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-23 19:30:21,416 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-23 19:30:21,417 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-23 19:30:21,417 - main_orchestrator - INFO - URLs después de filtrar duplicados: 15
2025-05-23 19:30:21,417 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-23 19:30:21,418 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-23 19:30:21,419 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-23 19:30:21,419 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-23 19:30:21,419 - lib.url_manager - INFO - Clasificación de 15 URLs:
2025-05-23 19:30:21,420 - lib.url_manager - INFO -  - HTML: 7
2025-05-23 19:30:21,420 - lib.url_manager - INFO -  - IMAGES: 7
2025-05-23 19:30:21,420 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-23 19:30:21,421 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_13052025_unprocessed.json
2025-05-23 19:30:21,422 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_13052025_unprocessed.json
2025-05-23 19:30:21,423 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-23 19:30:21,423 - lib.image_processor - INFO - Iniciando descarga paralela de 7 imágenes para la fecha 13052025...
2025-05-23 19:30:21,849 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-23 19:30:21,992 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-TV-PERU-GOBIERNO-DARA-BONO-A-27-FAMILIAS.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-23 19:30:23,982 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_5e9c98e7_13052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (246526 bytes)
2025-05-23 19:30:26,525 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_85c5f8e8_13052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (366573 bytes)
2025-05-23 19:30:26,869 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_45d6d686_13052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (300021 bytes)
2025-05-23 19:30:30,486 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_36e5816f_13052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (845539 bytes)
2025-05-23 19:31:10,161 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_c9be2443_13052025.jpg' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (4484208 bytes)
2025-05-23 19:38:42,559 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_f5766495_13052025.mp4' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (48050829 bytes)
2025-05-23 19:38:43,323 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-TV-PERU-GOBIERNO-DARA-BONO-A-27-FAMILIAS.mp4: Content type 'video/mp4' is not an image
2025-05-23 19:39:24,184 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_d86a2328_13052025.mp4' en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025 (59299569 bytes)
2025-05-23 19:39:24,527 - lib.image_processor - WARNING - Error procesando imagen http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4: Content type 'video/mp4' is not an image
2025-05-23 19:39:24,528 - lib.image_processor - INFO - Progreso descarga imágenes: 7/7 en 543.10 seg.
2025-05-23 19:39:24,535 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\image_links_13052025.json
2025-05-23 19:39:24,536 - lib.image_processor - INFO - Descarga de imágenes completada para 7/7 URLs en 543.11 segundos.
2025-05-23 19:39:24,536 - main_orchestrator - INFO - Descarga de imágenes completada en 543.11 seg.
2025-05-23 19:39:24,537 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-23 19:39:24,539 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 194 URLs.
2025-05-23 19:39:24,539 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-23 19:39:24,539 - lib.html_scraper - INFO - Iniciando scraping paralelo de 7 URLs...
2025-05-23 19:39:29,900 - lib.html_scraper - INFO - Progreso: 7/7 URLs procesadas en 5.36 seg.
2025-05-23 19:39:29,904 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-23 19:39:29,904 - lib.html_scraper - INFO - Scraping completado para 7/7 URLs en 5.36 segundos.
2025-05-23 19:39:29,904 - lib.html_scraper - INFO - Resultados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-23 19:39:29,905 - main_orchestrator - INFO - Scraping HTML completado en 5.37 seg.
2025-05-23 19:39:29,905 - lib.history_tracker - INFO - Añadidas 6 nuevas URLs al historial.
2025-05-23 19:39:29,907 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 200 URLs.
2025-05-23 19:39:29,907 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-23 19:39:31,403 - lib.api_client - ERROR - Error procesando tmpfgvanotw.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
2025-05-23 19:39:31,414 - lib.image_processor - WARNING - Error en prueba de API, pero no parece ser de configuración: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 28
}
]
2025-05-23 19:39:31,415 - lib.image_processor - INFO - Procesando 7 imágenes con API (batch_size=3, pausa=60s)
2025-05-23 19:39:31,415 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-23 19:39:31,415 - lib.image_processor - INFO - Procesando imagen con API: img_4_5e9c98e7_13052025.jpg
2025-05-23 19:39:33,218 - lib.api_client - ERROR - Error procesando img_4_5e9c98e7_13052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 27
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 27
}
]
2025-05-23 19:39:35,854 - lib.image_processor - WARNING - Imagen img_4_5e9c98e7_13052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 19:39:35,856 - lib.image_processor - WARNING - Error procesando imagen img_4_5e9c98e7_13052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 27
}
]
2025-05-23 19:39:36,636 - lib.image_processor - INFO - Procesando imagen con API: img_6_85c5f8e8_13052025.jpg
2025-05-23 19:39:39,601 - lib.api_client - ERROR - Error procesando img_6_85c5f8e8_13052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
2025-05-23 19:39:42,042 - lib.image_processor - WARNING - Imagen img_6_85c5f8e8_13052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 19:39:42,044 - lib.image_processor - WARNING - Error procesando imagen img_6_85c5f8e8_13052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 21
}
]
2025-05-23 19:39:42,678 - lib.image_processor - INFO - Procesando imagen con API: img_7_45d6d686_13052025.jpg
2025-05-23 19:39:44,689 - lib.api_client - ERROR - Error procesando img_7_45d6d686_13052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-23 19:39:47,017 - lib.image_processor - WARNING - Imagen img_7_45d6d686_13052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 19:39:47,020 - lib.image_processor - WARNING - Error procesando imagen img_7_45d6d686_13052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 15
}
]
2025-05-23 19:39:47,792 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 19:40:47,793 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-23 19:40:47,793 - lib.image_processor - INFO - Procesando imagen con API: img_3_36e5816f_13052025.jpg
2025-05-23 19:40:53,104 - lib.api_client - ERROR - Error procesando img_3_36e5816f_13052025.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 7
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 7
}
]
2025-05-23 19:40:55,854 - lib.image_processor - WARNING - Imagen img_3_36e5816f_13052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 19:40:55,858 - lib.image_processor - WARNING - Error procesando imagen img_3_36e5816f_13052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 7
}
]
2025-05-23 19:40:56,440 - lib.image_processor - INFO - Procesando imagen con API: img_5_c9be2443_13052025.jpg
2025-05-23 19:40:56,649 - lib.image_processor - WARNING - Imagen img_5_c9be2443_13052025.jpg es muy grande (8366x5307=44398362 píxeles). Intentando redimensionar.
2025-05-23 19:40:57,341 - lib.image_processor - INFO - Imagen redimensionada a 2500x1585 para API
2025-05-23 19:41:02,544 - lib.api_client - ERROR - Error procesando img_5_c9be2443_13052025.jpg.resized.jpg con Gemini API: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
Traceback (most recent call last):
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\api_client.py", line 155, in extract_text_from_image
    response = model.generate_content([self.prompt, img], request_options={'timeout': 180})
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
2025-05-23 19:41:05,428 - lib.image_processor - WARNING - Imagen img_5_c9be2443_13052025.jpg marcada como PERMANENTEMENTE no procesable (demasiado pesada/compleja)
2025-05-23 19:41:05,430 - lib.image_processor - WARNING - Error procesando imagen img_5_c9be2443_13052025.jpg: API error: ResourceExhausted - 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 57
}
]
2025-05-23 19:41:06,086 - lib.image_processor - INFO - Procesando imagen con API: img_2_f5766495_13052025.mp4
2025-05-23 19:41:06,086 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025\img_2_f5766495_13052025.mp4 (45.82 MB)
2025-05-23 19:41:06,087 - lib.image_processor - WARNING - Error procesando imagen img_2_f5766495_13052025.mp4: Image file too large
2025-05-23 19:41:06,997 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-23 19:42:06,998 - lib.image_processor - INFO - Procesando batch 3 (1 imágenes)
2025-05-23 19:42:06,998 - lib.image_processor - INFO - Procesando imagen con API: img_1_d86a2328_13052025.mp4
2025-05-23 19:42:06,999 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025\img_1_d86a2328_13052025.mp4 (56.55 MB)
2025-05-23 19:42:06,999 - lib.image_processor - WARNING - Error procesando imagen img_1_d86a2328_13052025.mp4: Image file too large
2025-05-23 19:42:07,831 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-23 19:42:07,831 - lib.image_processor - INFO - Resultados de API guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-23 19:42:07,832 - lib.image_processor - INFO - Procesamiento API completado para 0/7 imágenes en 156.42 segundos.
2025-05-23 19:42:07,832 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 157.92 seg.
2025-05-23 19:42:07,832 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-23 19:42:07,833 - main_orchestrator - INFO - Leyendo archivo social para la fecha 13052025: social_links_13052025_unprocessed.json
2025-05-23 19:42:07,850 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-23 19:42:07,850 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\13052025
2025-05-23 19:42:07,851 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output
2025-05-23 19:42:07,851 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 13052025...
2025-05-23 19:42:07,853 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/129ao7WKti2/
2025-05-23 19:42:26,781 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\13052025\13052025-1.pdf
2025-05-23 19:42:30,497 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 22.65 seg.
2025-05-23 19:42:30,499 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_results_13052025.json
2025-05-23 19:42:30,500 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 22.65 segundos.
2025-05-23 19:42:30,500 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 22.65 seg.
2025-05-23 19:42:30,500 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-23 19:42:30,502 - lib.history_tracker - INFO - Historial guardado en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 201 URLs.
2025-05-23 19:42:30,502 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-23 19:42:31,950 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\13052025\13052025-1.pdf
2025-05-23 19:42:31,951 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 19:42:31,951 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.45 seg.
2025-05-23 19:42:31,952 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-23 19:42:31,953 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_13052025.json
2025-05-23 19:42:31,953 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_13052025.json
2025-05-23 19:42:31,954 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-23 19:42:31,955 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_13052025.json
2025-05-23 19:42:31,956 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_13052025.json
2025-05-23 19:42:31,956 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:42:31.954583', 'date_processed': '13052025', 'total_urls_in_pdf': 15, 'new_urls_processed_count': 15, 'history_total_urls': 201, 'categories': {'html': 7, 'images': 7, 'social': 1}, 'html_processing': {'attempted': 7, 'processed': 6, 'successful': 6, 'relevant (>=0.3)': 3, 'average_relevance': 0.43333333333333335}, 'image_processing': {'attempted_download': 7, 'successful_download': 5, 'attempted_api': 5, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 1.45, 'image_download': 543.11, 'html_scraping': 5.37, 'image_api': 157.92, 'facebook_processing': 22.65, 'facebook_text_extraction': 1.45, 'stats_consolidation': 0.0}}
2025-05-23 19:42:31,956 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-23 19:42:31,957 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-23 19:42:31,976 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-23 19:42:31,979 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_13052025.json
2025-05-23 19:42:31,979 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_13052025.json
2025-05-23 19:42:31,979 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-23 19:42:31,998 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-23 19:42:31,998 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-23 19:42:31,998 - semantic_cleaner - INFO - Extraídos 18 textos de PDF
2025-05-23 19:42:31,998 - semantic_cleaner - INFO - Extraídos 6 textos de HTML
2025-05-23 19:42:31,999 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-23 19:42:31,999 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-23 19:42:32,842 - semantic_cleaner - INFO - Se identificaron 23 grupos de textos similares
2025-05-23 19:42:32,842 - semantic_cleaner - INFO - Se seleccionaron 23 textos representativos
2025-05-23 19:42:32,843 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-23 19:42:32,843 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_13052025.json
2025-05-23 19:42:32,846 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_13052025.json
2025-05-23 19:42:32,846 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_13052025.md
2025-05-23 19:42:32,850 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_13052025.md
2025-05-23 19:42:32,852 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_13052025.json
2025-05-23 19:42:32,852 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_13052025.json
2025-05-23 19:42:32,852 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-23T19:42:31.954583', 'date_processed': '13052025', 'total_urls_in_pdf': 15, 'new_urls_processed_count': 15, 'history_total_urls': 201, 'categories': {'html': 7, 'images': 7, 'social': 1}, 'html_processing': {'attempted': 7, 'processed': 6, 'successful': 6, 'relevant (>=0.3)': 3, 'average_relevance': 0.43333333333333335}, 'image_processing': {'attempted_download': 7, 'successful_download': 5, 'attempted_api': 5, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.28, 'pdf_text_extraction': 1.45, 'image_download': 543.11, 'html_scraping': 5.37, 'image_api': 157.92, 'facebook_processing': 22.65, 'facebook_text_extraction': 1.45, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.87}}
2025-05-23 19:42:32,852 - main_orchestrator - INFO - Limpieza semántica completada en 0.87 seg.
2025-05-23 19:42:32,853 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-23 19:42:32,853 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent
2025-05-23 19:42:32,853 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\facebook_texts_13052025.json
2025-05-23 19:42:32,869 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/129ao7WKti2/
2025-05-23 19:42:32,869 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-23 19:42:32,884 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_13052025.md
2025-05-23 19:42:32,884 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-23 19:42:32,884 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-23 19:42:32,885 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-23 19:42:32,885 - main_orchestrator - INFO - ==================================================
2025-05-23 19:42:32,885 - main_orchestrator - INFO - PIPELINE FINALIZADO en 753.27 segundos.
2025-05-23 19:42:32,885 - main_orchestrator - INFO - ==================================================
2025-05-26 14:47:03,484 - main_orchestrator - INFO - ==================================================
2025-05-26 14:47:03,485 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-26 14:47:03,485 - main_orchestrator - INFO - Usando fecha: 22052025
2025-05-26 14:47:03,485 - main_orchestrator - INFO - ==================================================
2025-05-26 14:47:03,499 - lib.config_manager - INFO - Configuración cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\config.yaml
2025-05-26 14:47:03,501 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\credentials/api_keys.yaml
2025-05-26 14:47:03,502 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-26 14:47:03,503 - lib.history_tracker - INFO - Historial cargado desde C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\codigo\lib\history\processed_urls.json con 201 URLs.
2025-05-26 14:47:03,504 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-26 14:47:03,505 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-26 14:47:03,505 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-26 14:47:03,505 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-26 14:47:03,506 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-26 14:47:03,507 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-26 14:47:03,565 - lib.pdf_processor - INFO - Abriendo PDF: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-26 14:47:03,827 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 22052025.pdf.
2025-05-26 14:47:03,827 - main_orchestrator - INFO - PDF procesado en 0.32 seg. Enlaces encontrados: 51
2025-05-26 14:47:03,842 - lib.file_manager - INFO - Datos guardados en CSV: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\In\links_extracted_22052025.csv
2025-05-26 14:47:03,842 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-26 14:47:03,844 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\base\22052025.pdf (5 páginas)
2025-05-26 14:47:03,896 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-26 14:47:03,897 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-26 14:47:03,897 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-26 14:47:03,897 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-26 14:47:03,897 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-05-26 14:47:03,898 - main_orchestrator - INFO - URLs nuevas para procesar: 1 (de 51 total)
2025-05-26 14:47:03,898 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-26 14:47:03,898 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup\content
2025-05-26 14:47:03,927 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\cache\dedup
2025-05-26 14:47:03,930 - content_deduplicator - INFO - Analizando 1 URLs para encontrar duplicados...
2025-05-26 14:47:03,931 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-05-26 14:47:03,931 - content_deduplicator - INFO - URLs totales: 1, Únicas: 1, En grupos: 0
2025-05-26 14:47:03,932 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-05-26 14:47:03,932 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-26 14:47:03,933 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-26 14:47:03,934 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-26 14:47:03,934 - main_orchestrator - INFO - URLs después de filtrar duplicados: 1
2025-05-26 14:47:03,934 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\duplicates_analysis_22052025.json
2025-05-26 14:47:03,934 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-26 14:47:03,936 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-26 14:47:03,936 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-26 14:47:03,936 - lib.url_manager - INFO - Clasificación de 1 URLs:
2025-05-26 14:47:03,937 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-26 14:47:03,938 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Social\social_links_22052025_unprocessed.json
2025-05-26 14:47:03,939 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-26 14:47:03,939 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-05-26 14:47:03,940 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-26 14:47:03,940 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-05-26 14:47:03,941 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-26 14:47:03,944 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-05-26 14:47:03,944 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-26 14:47:03,945 - main_orchestrator - INFO - Leyendo archivo social para la fecha 22052025: social_links_22052025_unprocessed.json
2025-05-26 14:47:03,962 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-26 14:47:03,963 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-26 14:47:03,966 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-26 14:47:03,966 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-26 14:47:03,968 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-26 14:47:03,968 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-26 14:47:03,969 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-26T14:47:03.967024', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 201, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.32, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0}}
2025-05-26 14:47:03,970 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-26 14:47:03,970 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-26 14:47:03,997 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Images\downloads\22052025\texto_imagenes_api.json
2025-05-26 14:47:04,017 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Out\scraped_pdf_22052025\pdf_text_22052025.json
2025-05-26 14:47:04,019 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-26 14:47:04,019 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\consolidated_22052025.json
2025-05-26 14:47:04,019 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-26 14:47:04,063 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-26 14:47:04,064 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-26 14:47:04,064 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-26 14:47:04,065 - semantic_cleaner - INFO - Extraídos 0 textos de HTML
2025-05-26 14:47:04,065 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-05-26 14:47:04,066 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-26 14:47:04,152 - semantic_cleaner - INFO - Se identificaron 5 grupos de textos similares
2025-05-26 14:47:04,152 - semantic_cleaner - INFO - Se seleccionaron 5 textos representativos
2025-05-26 14:47:04,152 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-26 14:47:04,153 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-26 14:47:04,155 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.json
2025-05-26 14:47:04,155 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-26 14:47:04,158 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\output\clean\clean_22052025.md
2025-05-26 14:47:04,159 - lib.file_manager - INFO - Datos guardados en JSON: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-26 14:47:04,161 - lib.file_manager - INFO - Estadísticas guardadas: C:\Users\emers\Documents\SUNASS_CAMI_CENTRO\DEV_SUNASS\NewsAgent\input\Stats\stats_22052025.json
2025-05-26 14:47:04,162 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-26T14:47:03.967024', 'date_processed': '22052025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 1, 'history_total_urls': 201, 'categories': {'social': 1}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.32, 'pdf_text_extraction': 0.05, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.05, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.14}}
2025-05-26 14:47:04,163 - main_orchestrator - INFO - Limpieza semántica completada en 0.14 seg.
2025-05-26 14:47:04,164 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-26 14:47:04,164 - main_orchestrator - INFO - ==================================================
2025-05-26 14:47:04,165 - main_orchestrator - INFO - PIPELINE FINALIZADO en 0.68 segundos.
2025-05-26 14:47:04,166 - main_orchestrator - INFO - ==================================================
