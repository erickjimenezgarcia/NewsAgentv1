2025-05-19 11:39:26,467 - main_orchestrator - INFO - ==================================================
2025-05-19 11:39:26,467 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-19 11:39:26,471 - main_orchestrator - INFO - Usando fecha: 08052025
2025-05-19 11:39:26,471 - main_orchestrator - INFO - ==================================================
2025-05-19 11:39:26,474 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-19 11:39:26,490 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-19 11:39:26,491 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-19 11:39:26,509 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 350 URLs.
2025-05-19 11:39:26,516 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-19 11:39:26,516 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-19 11:39:26,516 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-19 11:39:26,516 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-19 11:39:26,516 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-19 11:39:26,517 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-19 11:39:26,531 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025.pdf (3 páginas)
2025-05-19 11:39:26,597 - lib.pdf_processor - INFO - Se extrajeron 26 enlaces URI (no mailto) de 08052025.pdf.
2025-05-19 11:39:26,597 - main_orchestrator - INFO - PDF procesado en 0.08 seg. Enlaces encontrados: 26
2025-05-19 11:39:26,612 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_08052025.csv
2025-05-19 11:39:26,613 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-19 11:39:26,613 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025.pdf (3 páginas)
2025-05-19 11:39:26,632 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:39:26,635 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-05-19 11:39:26,635 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:39:26,635 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-19 11:39:26,637 - main_orchestrator - INFO - URLs nuevas para procesar: 26 (de 26 total)
2025-05-19 11:39:26,637 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-19 11:39:26,637 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-19 11:39:26,637 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-19 11:39:26,637 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-19 11:39:26,637 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-19 11:39:26,638 - lib.url_manager - INFO - Clasificación de 26 URLs:
2025-05-19 11:39:26,638 - lib.url_manager - INFO -  - HTML: 12
2025-05-19 11:39:26,638 - lib.url_manager - INFO -  - IMAGES: 9
2025-05-19 11:39:26,640 - lib.url_manager - INFO -  - SOCIAL: 5
2025-05-19 11:39:26,643 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_08052025_unprocessed.json
2025-05-19 11:39:26,644 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_08052025_unprocessed.json
2025-05-19 11:39:26,645 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-19 11:39:26,646 - lib.image_processor - INFO - Iniciando descarga paralela de 9 imágenes para la fecha 08052025...
2025-05-19 11:39:28,363 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_49ed5ecc_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (68184 bytes)
2025-05-19 11:39:28,560 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:28,584 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:28,626 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-RADIO-NACIONAL-ENTREVISTA-A-JOSE-LUIS-PATINO-DIRECTOR-USUARIOS-DE-SUNASS-CAMPANA-COLEGIO-CON-AGUA-SEGURA-VOZ-DEL-CONSUMIDOR.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:29,761 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_603b19e4_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (343572 bytes)
2025-05-19 11:39:30,661 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_2927050f_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (346762 bytes)
2025-05-19 11:39:30,692 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_de542214_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (192294 bytes)
2025-05-19 11:39:34,695 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_c6e419dd_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (1013871 bytes)
2025-05-19 11:39:35,114 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_add00f49_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (1142034 bytes)
2025-05-19 11:40:00,007 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_632969a4_08052025.mp3' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (4971311 bytes)
2025-05-19 11:40:00,564 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-RADIO-NACIONAL-ENTREVISTA-A-JOSE-LUIS-PATINO-DIRECTOR-USUARIOS-DE-SUNASS-CAMPANA-COLEGIO-CON-AGUA-SEGURA-VOZ-DEL-CONSUMIDOR.mp3: Content type 'audio/mpeg' is not an image
2025-05-19 11:44:42,869 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_d489a835_08052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (59299569 bytes)
2025-05-19 11:44:43,216 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4: Content type 'video/mp4' is not an image
2025-05-19 11:48:05,617 - lib.image_processor - WARNING - Error de red descargando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4: ('Connection broken: IncompleteRead(152247864 bytes read, 131727510 more expected)', IncompleteRead(152247864 bytes read, 131727510 more expected))
2025-05-19 11:48:05,619 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4: Network Error: ('Connection broken: IncompleteRead(152247864 bytes read, 131727510 more expected)', IncompleteRead(152247864 bytes read, 131727510 more expected))
2025-05-19 11:48:05,619 - lib.image_processor - INFO - Progreso descarga imágenes: 9/9 en 518.97 seg.
2025-05-19 11:48:05,619 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_08052025.json
2025-05-19 11:48:05,619 - lib.image_processor - INFO - Descarga de imágenes completada para 9/9 URLs en 518.97 segundos.
2025-05-19 11:48:05,619 - main_orchestrator - INFO - Descarga de imágenes completada en 518.97 seg.
2025-05-19 11:48:05,633 - lib.history_tracker - INFO - Añadidas 9 nuevas URLs al historial.
2025-05-19 11:48:05,637 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 359 URLs.
2025-05-19 11:48:05,639 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-19 11:48:05,639 - lib.html_scraper - INFO - Iniciando scraping paralelo de 12 URLs...
2025-05-19 11:48:09,755 - lib.html_scraper - INFO - Progreso: 12/12 URLs procesadas en 4.12 seg.
2025-05-19 11:48:09,767 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_08052025.json
2025-05-19 11:48:09,768 - lib.html_scraper - INFO - Scraping completado para 12/12 URLs en 4.13 segundos.
2025-05-19 11:48:09,769 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_08052025.json
2025-05-19 11:48:09,770 - main_orchestrator - INFO - Scraping HTML completado en 4.13 seg.
2025-05-19 11:48:09,770 - lib.history_tracker - INFO - Añadidas 12 nuevas URLs al historial.
2025-05-19 11:48:09,774 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 371 URLs.
2025-05-19 11:48:09,775 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-19 11:48:12,164 - lib.api_client - INFO - Texto extraído de tmp2hnixda0.jpg (4 chars).
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando 9 imágenes con API (batch_size=3, pausa=60s)
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando imagen con API: img_4_49ed5ecc_08052025.jpg
2025-05-19 11:48:15,595 - lib.api_client - INFO - Texto extraído de img_4_49ed5ecc_08052025.jpg (559 chars).
2025-05-19 11:48:17,879 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_49ed5ecc_08052025.jpg
2025-05-19 11:48:18,429 - lib.image_processor - INFO - Procesando imagen con API: img_9_603b19e4_08052025.jpg
2025-05-19 11:48:34,906 - lib.api_client - INFO - Texto extraído de img_9_603b19e4_08052025.jpg (3862 chars).
2025-05-19 11:48:35,946 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_603b19e4_08052025.jpg
2025-05-19 11:48:36,615 - lib.image_processor - INFO - Procesando imagen con API: img_7_de542214_08052025.jpg
2025-05-19 11:48:44,653 - lib.api_client - INFO - Texto extraído de img_7_de542214_08052025.jpg (1863 chars).
2025-05-19 11:48:45,742 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_de542214_08052025.jpg
2025-05-19 11:48:46,678 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-19 11:49:46,679 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-19 11:49:46,680 - lib.image_processor - INFO - Procesando imagen con API: img_8_2927050f_08052025.jpg
2025-05-19 11:49:53,540 - lib.api_client - INFO - Texto extraído de img_8_2927050f_08052025.jpg (1032 chars).
2025-05-19 11:49:55,202 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_2927050f_08052025.jpg
2025-05-19 11:49:55,925 - lib.image_processor - INFO - Procesando imagen con API: img_5_c6e419dd_08052025.jpg
2025-05-19 11:50:08,992 - lib.api_client - INFO - Texto extraído de img_5_c6e419dd_08052025.jpg (1904 chars).
2025-05-19 11:50:11,866 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_c6e419dd_08052025.jpg
2025-05-19 11:50:12,499 - lib.image_processor - INFO - Procesando imagen con API: img_6_add00f49_08052025.jpg
2025-05-19 11:50:35,884 - lib.api_client - INFO - Texto extraído de img_6_add00f49_08052025.jpg (5042 chars).
2025-05-19 11:50:37,166 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_add00f49_08052025.jpg
2025-05-19 11:50:37,884 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-19 11:51:37,900 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-19 11:51:37,900 - lib.image_processor - INFO - Procesando imagen con API: img_1_632969a4_08052025.mp3
2025-05-19 11:51:38,181 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\img_1_632969a4_08052025.mp3 (formato detectado: None)
2025-05-19 11:51:38,181 - lib.image_processor - WARNING - Error procesando imagen img_1_632969a4_08052025.mp3: File is not a valid image
2025-05-19 11:51:38,775 - lib.image_processor - INFO - Procesando imagen con API: img_3_d489a835_08052025.mp4
2025-05-19 11:51:38,778 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\img_3_d489a835_08052025.mp4 (56.55 MB)
2025-05-19 11:51:38,779 - lib.image_processor - WARNING - Error procesando imagen img_3_d489a835_08052025.mp4: Image file too large
2025-05-19 11:51:39,728 - lib.image_processor - WARNING - Archivo no encontrado: None
2025-05-19 11:51:39,728 - lib.image_processor - WARNING - Error procesando imagen None: File not found
2025-05-19 11:51:40,447 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\texto_imagenes_api.json
2025-05-19 11:51:40,448 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\texto_imagenes_api.json
2025-05-19 11:51:40,449 - lib.image_processor - INFO - Procesamiento API completado para 6/9 imágenes en 208.28 segundos.
2025-05-19 11:51:40,449 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 210.67 seg.
2025-05-19 11:51:40,449 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-19 11:51:40,450 - main_orchestrator - INFO - Leyendo archivo social para la fecha 08052025: social_links_08052025_unprocessed.json
2025-05-19 11:51:40,467 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-05-19 11:51:40,478 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025
2025-05-19 11:51:40,478 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-19 11:51:40,478 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 08052025...
2025-05-19 11:51:40,478 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/watch/?v=1713353589580930
2025-05-19 11:51:40,482 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/watch/?v=672757988705774
2025-05-19 11:51:40,482 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/ContrasteAyacucho/posts/pfbid029GzNHfjbSVHG3ZHXqFceizSBpEcvMcg4KJ6bVkgLvkpsGb4EoW8E8zQED446MCWZl
2025-05-19 11:52:19,164 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-1.pdf
2025-05-19 11:52:19,603 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-3.pdf
2025-05-19 11:52:33,708 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-2.pdf
2025-05-19 11:52:38,604 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 58.13 seg.
2025-05-19 11:52:38,614 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_08052025.json
2025-05-19 11:52:38,617 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 3/3 exitosos en 58.14 segundos.
2025-05-19 11:52:38,617 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 58.15 seg.
2025-05-19 11:52:38,617 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-05-19 11:52:38,625 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 374 URLs.
2025-05-19 11:52:38,625 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-19 11:52:41,157 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-3.pdf
2025-05-19 11:52:41,326 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-1.pdf
2025-05-19 11:52:41,645 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-2.pdf
2025-05-19 11:52:41,646 - lib.facebook_processor - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-19 11:52:41,646 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.02 seg.
2025-05-19 11:52:41,646 - main_orchestrator - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-19 11:52:41,648 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:41,648 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:41,649 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-19T11:52:41.649826', 'date_processed': '08052025', 'total_urls_in_pdf': 26, 'new_urls_processed_count': 26, 'history_total_urls': 374, 'categories': {'html': 12, 'images': 9, 'social': 5}, 'html_processing': {'attempted': 12, 'processed': 12, 'successful': 12, 'relevant (>=0.3)': 8, 'average_relevance': 0.4583333333333334}, 'image_processing': {'attempted_download': 9, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.08, 'pdf_text_extraction': 3.02, 'image_download': 518.97, 'html_scraping': 4.13, 'image_api': 210.67, 'facebook_processing': 58.15, 'facebook_text_extraction': 3.02, 'stats_consolidation': 0.0}}
2025-05-19 11:52:41,652 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-19 11:52:41,653 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-19 11:52:41,660 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:52:41,675 - main_orchestrator - INFO - Procesando 6 textos de imágenes para consolidación
2025-05-19 11:52:41,683 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_08052025.json
2025-05-19 11:52:41,685 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_08052025.json
2025-05-19 11:52:41,685 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-19 11:52:41,729 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 12 textos de HTML
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 6 textos de imágenes
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 3 textos de Facebook
2025-05-19 11:52:47,403 - semantic_cleaner - INFO - Se identificaron 24 grupos de textos similares
2025-05-19 11:52:47,404 - semantic_cleaner - INFO - Se seleccionaron 24 textos representativos
2025-05-19 11:52:47,404 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-19 11:52:47,405 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.json
2025-05-19 11:52:47,407 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.json
2025-05-19 11:52:47,411 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,424 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,427 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:47,429 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:47,429 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-19T11:52:41.649826', 'date_processed': '08052025', 'total_urls_in_pdf': 26, 'new_urls_processed_count': 26, 'history_total_urls': 374, 'categories': {'html': 12, 'images': 9, 'social': 5}, 'html_processing': {'attempted': 12, 'processed': 12, 'successful': 12, 'relevant (>=0.3)': 8, 'average_relevance': 0.4583333333333334}, 'image_processing': {'attempted_download': 9, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.08, 'pdf_text_extraction': 3.02, 'image_download': 518.97, 'html_scraping': 4.13, 'image_api': 210.67, 'facebook_processing': 58.15, 'facebook_text_extraction': 3.02, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.74}}
2025-05-19 11:52:47,429 - main_orchestrator - INFO - Limpieza semántica completada en 5.74 seg.
2025-05-19 11:52:47,431 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-19 11:52:47,433 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-19 11:52:47,433 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:47,471 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/ContrasteAyacucho/posts/pfbid029GzNHfjbSVHG3ZHXqFceizSBpEcvMcg4KJ6bVkgLvkpsGb4EoW8E8zQED446MCWZl
2025-05-19 11:52:47,472 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-19 11:52:47,495 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,495 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-05-19 11:52:47,495 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-19 11:52:47,495 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-19 11:52:47,495 - main_orchestrator - INFO - ==================================================
2025-05-19 11:52:47,495 - main_orchestrator - INFO - PIPELINE FINALIZADO en 801.03 segundos.
2025-05-19 11:52:47,495 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,764 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 07:56:51,779 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 07:56:51,781 - main_orchestrator - INFO - Se usará la fecha proporcionada: 09052025
2025-05-21 07:56:51,781 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,781 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 07:56:51,781 - main_orchestrator - INFO - Usando fecha: 09052025
2025-05-21 07:56:51,781 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,793 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 07:56:51,808 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 07:56:51,809 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 07:56:51,822 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 374 URLs.
2025-05-21 07:56:51,824 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 07:56:51,824 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 07:56:51,824 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 07:56:51,824 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 07:56:51,825 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 07:56:51,825 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 07:56:51,876 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025.pdf (5 páginas)
2025-05-21 07:56:52,014 - lib.pdf_processor - INFO - Se extrajeron 56 enlaces URI (no mailto) de 09052025.pdf.
2025-05-21 07:56:52,014 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 56
2025-05-21 07:56:52,040 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_09052025.csv
2025-05-21 07:56:52,040 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 07:56:52,041 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025.pdf (5 páginas)
2025-05-21 07:56:52,073 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 07:56:52,073 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-21 07:56:52,073 - main_orchestrator - INFO - Texto del PDF extraído en 0.03 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 07:56:52,073 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 07:56:52,073 - lib.history_tracker - INFO - Filtradas 1 URLs ya procesadas del lote actual.
2025-05-21 07:56:52,073 - main_orchestrator - INFO - URLs nuevas para procesar: 55 (de 56 total)
2025-05-21 07:56:52,074 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 07:56:52,075 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 07:56:52,075 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 07:56:52,075 - content_deduplicator - INFO - Analizando 55 URLs para encontrar duplicados...
2025-05-21 07:56:52,076 - content_deduplicator - INFO - Procesando 7 URLs del dominio elperuano.pe
2025-05-21 07:56:52,076 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397811-1 (tipo: news)
2025-05-21 07:57:02,528 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397810-1 (tipo: news)
2025-05-21 07:57:11,645 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397813-2 (tipo: news)
2025-05-21 07:57:20,204 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397479-1 (tipo: news)
2025-05-21 07:57:28,755 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397755-1 (tipo: news)
2025-05-21 07:57:37,421 - content_deduplicator - INFO - Procesando 2 URLs del dominio cheleloyborolas.com
2025-05-21 07:57:37,422 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.cheleloyborolas.com/index.php?option=com_content&view=article&id=73122:sunass-promueve-consulta-publica-a-cargo-de-emapa-pasco-para-diseno-de-su-plan-de-gestion&catid=10&Itemid=103 (tipo: other)
2025-05-21 07:57:51,950 - content_deduplicator - INFO - Procesando 9 URLs del dominio facebook.com
2025-05-21 07:57:51,950 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16Jtm8uJTc/ (tipo: facebook)
2025-05-21 07:57:57,365 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16Jtm8uJTc/
2025-05-21 07:57:59,693 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1ZBEbp3ghr/ (tipo: facebook)
2025-05-21 07:58:05,875 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1ZBEbp3ghr/
2025-05-21 07:58:08,064 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037 (tipo: facebook)
2025-05-21 07:58:14,073 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 07:58:16,261 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/199Zud7Gie/ (tipo: facebook)
2025-05-21 07:58:21,706 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/199Zud7Gie/
2025-05-21 07:58:23,887 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1AagutErd2/ (tipo: facebook)
2025-05-21 07:58:29,402 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1AagutErd2/
2025-05-21 07:58:31,544 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1AR4DJyY6T/ (tipo: facebook)
2025-05-21 07:58:36,863 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1AR4DJyY6T/
2025-05-21 07:58:39,080 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16XFvXJR79/ (tipo: facebook)
2025-05-21 07:58:44,737 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16XFvXJR79/
2025-05-21 07:58:46,890 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/100071027885287/posts/725037276540529 (tipo: facebook)
2025-05-21 07:58:52,202 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/100071027885287/posts/725037276540529
2025-05-21 07:58:54,399 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/18oaShuJsM/ (tipo: facebook)
2025-05-21 07:59:01,430 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/18oaShuJsM/
2025-05-21 07:59:03,733 - content_deduplicator - INFO - Procesando 20 URLs del dominio imacorpplataforma.com
2025-05-21 07:59:03,761 - content_deduplicator - INFO - Progreso: 20/55 URLs procesadas en 131.69 seg.
2025-05-21 07:59:03,777 - content_deduplicator - INFO - Procesando 3 URLs del dominio com.pe
2025-05-21 07:59:03,777 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/sunass-aclara-que-no-hay-alza-de-tarifas-y-exhorta-a-presentar-reclamos-formales/ (tipo: other)
2025-05-21 07:59:17,414 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariovoces.com.pe/emapa-san-martin-detecta-conexion-clandestina-de-agua-potable-en-tarapoto-2/ (tipo: news)
2025-05-21 07:59:31,261 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/ (tipo: other)
2025-05-21 07:59:38,672 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-21 07:59:38,672 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/damos-cuenta/congresista-esmeralda-limachi-presenta-proyecto-de-ley-que-dispone-el-uso-de-agua-desalinizada-en-mineria-frente-al-cambio-climatico/ (tipo: other)
2025-05-21 07:59:47,255 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/epsmoquegua/noticias/1163438-mas-de-5-600-usuarios-en-mora-podrian-quedarse-sin-servicio-por-deuda-pendiente (tipo: other)
2025-05-21 07:59:57,274 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164196-ministerio-de-vivienda-avanza-en-ejecucion-de-grandes-proyectos-de-agua-durante-este-2025 (tipo: other)
2025-05-21 08:00:07,962 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/sedapal/noticias/1164216-sedapal-refuerza-campana-educativa-en-colegios-para-promover-el-cuidado-del-agua (tipo: other)
2025-05-21 08:00:17,864 - content_deduplicator - INFO - Progreso: 40/55 URLs procesadas en 205.79 seg.
2025-05-21 08:00:17,868 - content_deduplicator - INFO - Procesando 2 URLs del dominio google.com
2025-05-21 08:00:17,868 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/15B_lc0Ll1Y7v6511zrZSG_m1Zps_EdEX/view?usp=drive_link (tipo: other)
2025-05-21 08:00:26,843 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/14NpqzyZE-k6Z8rMpHlk53yy1kDhRcFDL/view?usp=drive_link (tipo: other)
2025-05-21 08:00:39,378 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-05-21 08:00:39,381 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/piura/vandalismo-deja-sin-agua-a-varios-asentamientos-en-piura-noticia/ (tipo: news)
2025-05-21 08:00:51,400 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/ica/ica-pronto-el-agua-y-desague-para-mas-de-71-mil-habitantes-de-la-tierra-prometida-noticia/?ref=dcr (tipo: news)
2025-05-21 08:01:03,732 - content_deduplicator - INFO - Procesando 2 URLs del dominio net.pe
2025-05-21 08:01:03,735 - selenium_extractor - INFO - Extrayendo contenido de URL: https://lagransaladenoticias.net.pe/2025/05/08/terreno-para-reservorio-del-sector-07-y-08-ya-tiene-partida-de-nacimiento/ (tipo: news)
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Análisis completado en 262.48 segundos
2025-05-21 08:01:14,558 - content_deduplicator - INFO - URLs totales: 55, Únicas: 45, En grupos: 4
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Se realizaron 183 comparaciones (0.7/seg), evitando 0
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-21 08:01:14,560 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_09052025.json
2025-05-21 08:01:14,561 - main_orchestrator - INFO - Análisis de duplicados completado: 2 URLs duplicadas filtradas
2025-05-21 08:01:14,561 - main_orchestrator - INFO - URLs después de filtrar duplicados: 53
2025-05-21 08:01:14,561 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_09052025.json
2025-05-21 08:01:14,561 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 08:01:14,561 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 08:01:14,561 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 08:01:14,563 - lib.url_manager - INFO - Clasificación de 53 URLs:
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - HTML: 25
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - IMAGES: 19
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - SOCIAL: 9
2025-05-21 08:01:14,565 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_09052025_unprocessed.json
2025-05-21 08:01:14,566 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_09052025_unprocessed.json
2025-05-21 08:01:14,566 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 08:01:14,566 - lib.image_processor - INFO - Iniciando descarga paralela de 19 imágenes para la fecha 09052025...
2025-05-21 08:01:14,566 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-MINERO-ACTUALIDAD-4-SUNASS-PROMUEVE-CONSULTA-PUBLICA-A-CARGO-DE-EMAPA-PASCO-PARA-DISENO-DE-SU-PLAN-DE-GESTION-08-05-2025.jpg. Primera ocurrencia: #1, segunda: #2
2025-05-21 08:01:14,566 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/LA-NOTICIA-ECONOMIA-6-TRANSFIEREN-MAS-DE-S15-MILLONES-PARA-AGUA-EN-BAGUA-09-05-2025.jpg. Primera ocurrencia: #5, segunda: #6
2025-05-21 08:01:14,635 - lib.image_processor - INFO - Omitiendo URL duplicada #2: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-MINERO-ACTUALIDAD-4-SUNASS-PROMUEVE-CONSULTA-PUBLICA-A-CARGO-DE-EMAPA-PASCO-PARA-DISENO-DE-SU-PLAN-DE-GESTION-08-05-2025.jpg
2025-05-21 08:01:14,641 - lib.image_processor - INFO - Omitiendo URL duplicada #6: http://imacorpplataforma.com/wp-content/uploads/2025/05/LA-NOTICIA-ECONOMIA-6-TRANSFIEREN-MAS-DE-S15-MILLONES-PARA-AGUA-EN-BAGUA-09-05-2025.jpg
2025-05-21 08:01:15,146 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/08-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 08:01:16,258 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_d356870a_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (536305 bytes)
2025-05-21 08:01:16,539 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_0eab25a1_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (94914 bytes)
2025-05-21 08:01:16,827 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_8e0f4322_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (288698 bytes)
2025-05-21 08:01:16,958 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_4fcf77a2_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (163042 bytes)
2025-05-21 08:01:17,073 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_d65e470b_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (360315 bytes)
2025-05-21 08:01:17,521 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_042084db_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (1151421 bytes)
2025-05-21 08:01:17,569 - lib.image_processor - INFO - Imagen 14 guardada como 'img_14_2c9b282f_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (182957 bytes)
2025-05-21 08:01:17,615 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_7a893373_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (585974 bytes)
2025-05-21 08:01:17,646 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_665c35b0_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (719488 bytes)
2025-05-21 08:01:17,647 - lib.image_processor - INFO - Imagen 16 guardada como 'img_16_91f1f797_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (223003 bytes)
2025-05-21 08:01:18,149 - lib.image_processor - INFO - Progreso descarga imágenes: 10/19 en 3.58 seg.
2025-05-21 08:01:18,239 - lib.image_processor - INFO - Imagen 17 guardada como 'img_17_79936410_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (142930 bytes)
2025-05-21 08:01:18,271 - lib.image_processor - INFO - Imagen 15 guardada como 'img_15_9e019480_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (320016 bytes)
2025-05-21 08:01:18,547 - lib.image_processor - INFO - Imagen 18 guardada como 'img_18_1ec2d7ff_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (193436 bytes)
2025-05-21 08:01:18,864 - lib.image_processor - INFO - Imagen 13 guardada como 'img_13_05255e15_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (684306 bytes)
2025-05-21 08:01:19,754 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_0017daa0_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (378629 bytes)
2025-05-21 08:01:21,598 - lib.image_processor - INFO - Imagen 19 guardada como 'img_19_4650a92c_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (1063029 bytes)
2025-05-21 08:02:55,217 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_43d51a85_09052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (59299569 bytes)
2025-05-21 08:02:55,999 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_09052025.json
2025-05-21 08:02:55,999 - lib.image_processor - INFO - Descarga de imágenes completada para 17/19 URLs en 101.43 segundos.
2025-05-21 08:02:56,001 - main_orchestrator - INFO - Descarga de imágenes completada en 101.43 seg.
2025-05-21 08:02:56,001 - lib.history_tracker - INFO - Añadidas 17 nuevas URLs al historial.
2025-05-21 08:02:56,004 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 391 URLs.
2025-05-21 08:02:56,004 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 08:02:56,004 - lib.html_scraper - INFO - Iniciando scraping paralelo de 25 URLs...
2025-05-21 08:03:03,768 - lib.html_scraper - WARNING - Error HTTP 403 scrapeando https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/: 403 Client Error: Forbidden for url: https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/
2025-05-21 08:03:03,768 - lib.html_scraper - WARNING - Error procesando https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/: HTTP Error: 403
2025-05-21 08:03:03,768 - lib.html_scraper - INFO - Progreso: 20/25 URLs procesadas en 7.76 seg.
2025-05-21 08:03:11,193 - lib.html_scraper - INFO - Progreso: 25/25 URLs procesadas en 15.19 seg.
2025-05-21 08:03:11,200 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_09052025.json
2025-05-21 08:03:11,201 - lib.html_scraper - INFO - Scraping completado para 25/25 URLs en 15.20 segundos.
2025-05-21 08:03:11,202 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_09052025.json
2025-05-21 08:03:11,202 - main_orchestrator - INFO - Scraping HTML completado en 15.20 seg.
2025-05-21 08:03:11,202 - lib.history_tracker - INFO - Añadidas 21 nuevas URLs al historial.
2025-05-21 08:03:11,205 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 412 URLs.
2025-05-21 08:03:11,205 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 08:03:13,949 - lib.api_client - INFO - Texto extraído de tmpt72b5xk1.jpg (4 chars).
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando 17 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando imagen con API: img_4_d356870a_09052025.jpg
2025-05-21 08:03:26,051 - lib.api_client - INFO - Texto extraído de img_4_d356870a_09052025.jpg (2847 chars).
2025-05-21 08:03:28,307 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_d356870a_09052025.jpg
2025-05-21 08:03:29,214 - lib.image_processor - INFO - Procesando imagen con API: img_5_0eab25a1_09052025.jpg
2025-05-21 08:03:33,819 - lib.api_client - INFO - Texto extraído de img_5_0eab25a1_09052025.jpg (880 chars).
2025-05-21 08:03:35,563 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_0eab25a1_09052025.jpg
2025-05-21 08:03:36,331 - lib.image_processor - INFO - Procesando imagen con API: img_12_8e0f4322_09052025.jpg
2025-05-21 08:03:50,531 - lib.api_client - INFO - Texto extraído de img_12_8e0f4322_09052025.jpg (3419 chars).
2025-05-21 08:03:52,287 - lib.image_processor - INFO - Imagen procesada exitosamente: img_12_8e0f4322_09052025.jpg
2025-05-21 08:03:52,889 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:04:52,899 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 08:04:52,899 - lib.image_processor - INFO - Procesando imagen con API: img_1_4fcf77a2_09052025.jpg
2025-05-21 08:04:58,211 - lib.api_client - INFO - Texto extraído de img_1_4fcf77a2_09052025.jpg (1516 chars).
2025-05-21 08:05:00,816 - lib.image_processor - INFO - Imagen procesada exitosamente: img_1_4fcf77a2_09052025.jpg
2025-05-21 08:05:01,787 - lib.image_processor - INFO - Procesando imagen con API: img_10_d65e470b_09052025.jpg
2025-05-21 08:05:08,655 - lib.api_client - INFO - Texto extraído de img_10_d65e470b_09052025.jpg (1666 chars).
2025-05-21 08:05:11,242 - lib.image_processor - INFO - Imagen procesada exitosamente: img_10_d65e470b_09052025.jpg
2025-05-21 08:05:12,003 - lib.image_processor - INFO - Procesando imagen con API: img_14_2c9b282f_09052025.jpg
2025-05-21 08:05:21,190 - lib.api_client - INFO - Texto extraído de img_14_2c9b282f_09052025.jpg (1993 chars).
2025-05-21 08:05:23,577 - lib.image_processor - INFO - Imagen procesada exitosamente: img_14_2c9b282f_09052025.jpg
2025-05-21 08:05:24,303 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:06:24,313 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-21 08:06:24,314 - lib.image_processor - INFO - Procesando imagen con API: img_9_665c35b0_09052025.jpg
2025-05-21 08:06:40,730 - lib.api_client - INFO - Texto extraído de img_9_665c35b0_09052025.jpg (4219 chars).
2025-05-21 08:06:43,694 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_665c35b0_09052025.jpg
2025-05-21 08:06:44,307 - lib.image_processor - INFO - Procesando imagen con API: img_7_7a893373_09052025.jpg
2025-05-21 08:06:50,560 - lib.api_client - INFO - Texto extraído de img_7_7a893373_09052025.jpg (1130 chars).
2025-05-21 08:06:51,695 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_7a893373_09052025.jpg
2025-05-21 08:06:52,644 - lib.image_processor - INFO - Procesando imagen con API: img_16_91f1f797_09052025.jpg
2025-05-21 08:07:07,471 - lib.api_client - INFO - Texto extraído de img_16_91f1f797_09052025.jpg (3620 chars).
2025-05-21 08:07:10,299 - lib.image_processor - INFO - Imagen procesada exitosamente: img_16_91f1f797_09052025.jpg
2025-05-21 08:07:11,174 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:08:11,184 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-05-21 08:08:11,185 - lib.image_processor - INFO - Procesando imagen con API: img_11_042084db_09052025.jpg
2025-05-21 08:08:39,222 - lib.api_client - INFO - Texto extraído de img_11_042084db_09052025.jpg (6033 chars).
2025-05-21 08:08:40,487 - lib.image_processor - INFO - Imagen procesada exitosamente: img_11_042084db_09052025.jpg
2025-05-21 08:08:41,436 - lib.image_processor - INFO - Procesando imagen con API: img_17_79936410_09052025.jpg
2025-05-21 08:08:48,545 - lib.api_client - INFO - Texto extraído de img_17_79936410_09052025.jpg (1230 chars).
2025-05-21 08:08:50,952 - lib.image_processor - INFO - Imagen procesada exitosamente: img_17_79936410_09052025.jpg
2025-05-21 08:08:51,570 - lib.image_processor - INFO - Procesando imagen con API: img_15_9e019480_09052025.jpg
2025-05-21 08:08:56,411 - lib.api_client - INFO - Texto extraído de img_15_9e019480_09052025.jpg (731 chars).
2025-05-21 08:08:57,964 - lib.image_processor - INFO - Imagen procesada exitosamente: img_15_9e019480_09052025.jpg
2025-05-21 08:08:58,859 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:09:58,869 - lib.image_processor - INFO - Procesando batch 5 (3 imágenes)
2025-05-21 08:09:58,870 - lib.image_processor - INFO - Procesando imagen con API: img_18_1ec2d7ff_09052025.jpg
2025-05-21 08:10:13,049 - lib.api_client - INFO - Texto extraído de img_18_1ec2d7ff_09052025.jpg (3169 chars).
2025-05-21 08:10:16,008 - lib.image_processor - INFO - Imagen procesada exitosamente: img_18_1ec2d7ff_09052025.jpg
2025-05-21 08:10:16,627 - lib.image_processor - INFO - Procesando imagen con API: img_13_05255e15_09052025.jpg
2025-05-21 08:10:30,540 - lib.api_client - INFO - Texto extraído de img_13_05255e15_09052025.jpg (3796 chars).
2025-05-21 08:10:31,590 - lib.image_processor - INFO - Imagen procesada exitosamente: img_13_05255e15_09052025.jpg
2025-05-21 08:10:32,243 - lib.image_processor - INFO - Procesando imagen con API: img_8_0017daa0_09052025.jpg
2025-05-21 08:10:42,984 - lib.api_client - INFO - Texto extraído de img_8_0017daa0_09052025.jpg (1233 chars).
2025-05-21 08:10:45,848 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_0017daa0_09052025.jpg
2025-05-21 08:10:46,769 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:11:46,777 - lib.image_processor - INFO - Procesando batch 6 (2 imágenes)
2025-05-21 08:11:46,777 - lib.image_processor - INFO - Procesando imagen con API: img_19_4650a92c_09052025.jpg
2025-05-21 08:12:08,555 - lib.api_client - INFO - Texto extraído de img_19_4650a92c_09052025.jpg (4593 chars).
2025-05-21 08:12:10,787 - lib.image_processor - INFO - Imagen procesada exitosamente: img_19_4650a92c_09052025.jpg
2025-05-21 08:12:11,345 - lib.image_processor - INFO - Procesando imagen con API: img_3_43d51a85_09052025.mp4
2025-05-21 08:12:11,346 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\img_3_43d51a85_09052025.mp4 (56.55 MB)
2025-05-21 08:12:11,346 - lib.image_processor - WARNING - Error procesando imagen img_3_43d51a85_09052025.mp4: Image file too large
2025-05-21 08:12:12,295 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\texto_imagenes_api.json
2025-05-21 08:12:12,295 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\texto_imagenes_api.json
2025-05-21 08:12:12,296 - lib.image_processor - INFO - Procesamiento API completado para 16/17 imágenes en 538.34 segundos.
2025-05-21 08:12:12,296 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 541.09 seg.
2025-05-21 08:12:12,296 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 08:12:12,296 - main_orchestrator - INFO - Leyendo archivo social para la fecha 09052025: social_links_09052025_unprocessed.json
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Encontradas 8 URLs de Facebook para procesar
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-21 08:12:12,393 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 8 URLs de Facebook para la fecha 09052025...
2025-05-21 08:12:12,396 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16Jtm8uJTc/
2025-05-21 08:12:12,398 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1ZBEbp3ghr/
2025-05-21 08:12:12,399 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 08:12:12,400 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/199Zud7Gie/
2025-05-21 08:12:12,401 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/1AagutErd2/
2025-05-21 08:12:27,359 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-4.pdf
2025-05-21 08:12:27,979 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-5.pdf
2025-05-21 08:12:28,229 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-3.pdf
2025-05-21 08:12:28,584 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-1.pdf
2025-05-21 08:12:28,848 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-2.pdf
2025-05-21 08:12:33,100 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/1AR4DJyY6T/
2025-05-21 08:12:33,250 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/100071027885287/posts/725037276540529
2025-05-21 08:12:33,501 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/v/18oaShuJsM/
2025-05-21 08:12:34,453 - lib.facebook_processor - INFO - Progreso Facebook: 5/8 en 22.06 seg.
2025-05-21 08:12:50,931 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-6.pdf
2025-05-21 08:12:51,843 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-7.pdf
2025-05-21 08:12:54,951 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-8.pdf
2025-05-21 08:12:59,646 - lib.facebook_processor - INFO - Progreso Facebook: 8/8 en 47.25 seg.
2025-05-21 08:12:59,650 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_09052025.json
2025-05-21 08:12:59,651 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 8/8 exitosos en 47.26 segundos.
2025-05-21 08:12:59,651 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 47.26 seg.
2025-05-21 08:12:59,651 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 08:12:59,654 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 420 URLs.
2025-05-21 08:12:59,654 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 08:13:00,044 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-3.pdf
2025-05-21 08:13:00,728 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-2.pdf
2025-05-21 08:13:01,583 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-5.pdf
2025-05-21 08:13:02,202 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-1.pdf
2025-05-21 08:13:02,895 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-4.pdf
2025-05-21 08:13:02,958 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-6.pdf
2025-05-21 08:13:03,519 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-7.pdf
2025-05-21 08:13:03,652 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-8.pdf
2025-05-21 08:13:03,652 - lib.facebook_processor - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-21 08:13:03,652 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 4.00 seg.
2025-05-21 08:13:03,652 - main_orchestrator - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-21 08:13:03,655 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:03,656 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:03,656 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T08:13:03.656000', 'date_processed': '09052025', 'total_urls_in_pdf': 56, 'new_urls_processed_count': 53, 'history_total_urls': 420, 'categories': {'html': 25, 'images': 19, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 21, 'successful': 20, 'relevant (>=0.3)': 9, 'average_relevance': 0.3650000000000001}, 'image_processing': {'attempted_download': 19, 'successful_download': 17, 'attempted_api': 17, 'successful_api': 16}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 4.0, 'image_download': 101.43, 'html_scraping': 15.2, 'image_api': 541.09, 'facebook_processing': 47.26, 'facebook_text_extraction': 4.0, 'stats_consolidation': 0.0}}
2025-05-21 08:13:03,656 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 08:13:03,656 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 08:13:03,675 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 08:13:03,675 - main_orchestrator - INFO - Procesando 16 textos de imágenes para consolidación
2025-05-21 08:13:03,681 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_09052025.json
2025-05-21 08:13:03,681 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_09052025.json
2025-05-21 08:13:03,681 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 08:13:03,717 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 16 textos de imágenes
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 8 textos de Facebook
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Se identificaron 49 grupos de textos similares
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Se seleccionaron 49 textos representativos
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 08:13:15,338 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.json
2025-05-21 08:13:15,342 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.json
2025-05-21 08:13:15,342 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,348 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T08:13:03.656000', 'date_processed': '09052025', 'total_urls_in_pdf': 56, 'new_urls_processed_count': 53, 'history_total_urls': 420, 'categories': {'html': 25, 'images': 19, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 21, 'successful': 20, 'relevant (>=0.3)': 9, 'average_relevance': 0.3650000000000001}, 'image_processing': {'attempted_download': 19, 'successful_download': 17, 'attempted_api': 17, 'successful_api': 16}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 4.0, 'image_download': 101.43, 'html_scraping': 15.2, 'image_api': 541.09, 'facebook_processing': 47.26, 'facebook_text_extraction': 4.0, 'stats_consolidation': 0.0, 'semantic_cleaning': 11.67}}
2025-05-21 08:13:15,349 - main_orchestrator - INFO - Limpieza semántica completada en 11.67 seg.
2025-05-21 08:13:15,349 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 08:13:15,349 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-21 08:13:15,349 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:15,384 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 08:13:15,385 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 08:13:15,409 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,409 - facebook_extractor_fix - INFO - Se han añadido 8 textos de Facebook al archivo limpio
2025-05-21 08:13:15,410 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 08:13:15,410 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 08:13:15,410 - main_orchestrator - INFO - ==================================================
2025-05-21 08:13:15,411 - main_orchestrator - INFO - PIPELINE FINALIZADO en 983.63 segundos.
2025-05-21 08:13:15,411 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,418 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 10:37:19,424 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 10:37:19,424 - main_orchestrator - INFO - Se usará la fecha proporcionada: 12052025
2025-05-21 10:37:19,424 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,425 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 10:37:19,425 - main_orchestrator - INFO - Usando fecha: 12052025
2025-05-21 10:37:19,425 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,425 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 10:37:19,425 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 10:37:19,425 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 10:37:19,449 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 420 URLs.
2025-05-21 10:37:19,449 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 10:37:19,449 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 10:37:19,449 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 10:37:19,452 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 10:37:19,452 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 10:37:19,452 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 10:37:19,491 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-21 10:37:19,548 - lib.pdf_processor - INFO - Se extrajeron 25 enlaces URI (no mailto) de 12052025.pdf.
2025-05-21 10:37:19,548 - main_orchestrator - INFO - PDF procesado en 0.10 seg. Enlaces encontrados: 25
2025-05-21 10:37:19,569 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_12052025.csv
2025-05-21 10:37:19,569 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 10:37:19,569 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-21 10:37:19,591 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:37:19,591 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-21 10:37:19,591 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:37:19,591 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 10:37:19,591 - main_orchestrator - INFO - URLs nuevas para procesar: 25 (de 25 total)
2025-05-21 10:37:19,591 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 10:37:19,591 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 10:37:19,602 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 10:37:19,602 - content_deduplicator - INFO - Analizando 25 URLs para encontrar duplicados...
2025-05-21 10:37:19,602 - content_deduplicator - INFO - Procesando 2 URLs del dominio elperuano.pe
2025-05-21 10:37:19,602 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398252-1 (tipo: news)
2025-05-21 10:37:29,099 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398206-1 (tipo: news)
2025-05-21 10:37:37,943 - content_deduplicator - INFO - Procesando 7 URLs del dominio imacorpplataforma.com
2025-05-21 10:37:37,949 - content_deduplicator - INFO - Procesando 2 URLs del dominio elcomercio.pe
2025-05-21 10:37:37,949 - selenium_extractor - INFO - Extrayendo contenido de URL: https://elcomercio.pe/politica/justicia/equipo-lava-jato-presenta-acusacion-contra-14-personas-por-caso-de-planta-de-tratamiento-de-huachipa-y-ramal-norte-sedapal-camargo-y-correa-ultimas-noticia/?ref=ecr (tipo: other)
2025-05-21 10:38:11,688 - content_deduplicator - INFO - Procesando 3 URLs del dominio andina.pe
2025-05-21 10:38:11,688 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-fiscalia-acusa-a-14-implicados-presunta-corrupcion-obra-planta-huachipa-1029086.aspx (tipo: news)
2025-05-21 10:38:24,984 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-peru-y-japon-buscan-impulsar-proyectos-agua-y-reordenamiento-urbano-lima-y-callao-1029000.aspx (tipo: news)
2025-05-21 10:38:40,699 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-mas-1400-personas-fueron-beneficiadas-acceso-a-agua-segura-el-2024-1029090.aspx (tipo: news)
2025-05-21 10:38:56,212 - content_deduplicator - INFO - Procesando 2 URLs del dominio com.pe
2025-05-21 10:38:56,212 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-investigara-consumos-atipicos-tras-quejas-por-recibos-de-agua/ (tipo: other)
2025-05-21 10:39:06,959 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-recoge-muestras-en-huanta-por-posible-contaminacion-de-agua/ (tipo: other)
2025-05-21 10:39:26,247 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-21 10:39:26,257 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164922-mvcs-capacito-a-las-eps-de-amazonas-y-san-martin-sobre-evaluacion-del-riesgo-ante-desastres-naturales (tipo: other)
2025-05-21 10:39:35,862 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164942-peru-y-japon-articulan-esfuerzos-para-impulsar-proyectos-de-agua-y-reordenamiento-urbano-en-lima-y-callao (tipo: other)
2025-05-21 10:39:45,537 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164757-por-mejores-servicios-basicos-en-cusco-vivienda-suscribe-convenio-para-desarrollo-de-proyecto-de-agua-potable-y-alcantarillado-en-saylla (tipo: other)
2025-05-21 10:39:55,338 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/otass/noticias/1164807-otass-este-12-de-mayo-vence-plazo-de-inscripcion-a-la-subasta-publica-de-agua-residual-cruda-de-ptar-yaurilla-ica (tipo: other)
2025-05-21 10:40:05,073 - content_deduplicator - INFO - Análisis completado en 165.47 segundos
2025-05-21 10:40:05,073 - content_deduplicator - INFO - URLs totales: 25, Únicas: 24, En grupos: 0
2025-05-21 10:40:05,073 - content_deduplicator - INFO - Se realizaron 31 comparaciones (0.2/seg), evitando 0
2025-05-21 10:40:05,074 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-21 10:40:05,074 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-21 10:40:05,075 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-21 10:40:05,075 - main_orchestrator - INFO - URLs después de filtrar duplicados: 25
2025-05-21 10:40:05,075 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-21 10:40:05,075 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 10:40:05,075 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 10:40:05,075 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 10:40:05,079 - lib.url_manager - INFO - Clasificación de 25 URLs:
2025-05-21 10:40:05,079 - lib.url_manager - INFO -  - HTML: 18
2025-05-21 10:40:05,079 - lib.url_manager - INFO -  - IMAGES: 7
2025-05-21 10:40:05,081 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_12052025_unprocessed.json
2025-05-21 10:40:05,082 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 10:40:05,082 - lib.image_processor - INFO - Iniciando descarga paralela de 7 imágenes para la fecha 12052025...
2025-05-21 10:40:05,807 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/11-05-2025-C31-SUNASS-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO-ESTADO-A-TU-SERVICIO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:05,811 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-TV-PERU-OTASS-CAPACITA-A-REPRESEMTAMTESS-REGIONALES.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:05,994 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO-.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:08,757 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_af620be1_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (776629 bytes)
2025-05-21 10:40:09,149 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_dead3ba5_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (837885 bytes)
2025-05-21 10:40:09,296 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_757e4252_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (534835 bytes)
2025-05-21 10:40:09,402 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_71611ca8_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (1053821 bytes)
2025-05-21 10:40:53,716 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_9368e41b_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (59299569 bytes)
2025-05-21 10:41:03,591 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_c24c5fe3_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (68156091 bytes)
2025-05-21 10:42:58,227 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_4ec295f1_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (144178181 bytes)
2025-05-21 10:42:58,485 - lib.image_processor - INFO - Progreso descarga imágenes: 7/7 en 173.40 seg.
2025-05-21 10:42:58,497 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_12052025.json
2025-05-21 10:42:58,498 - lib.image_processor - INFO - Descarga de imágenes completada para 7/7 URLs en 173.42 segundos.
2025-05-21 10:42:58,498 - main_orchestrator - INFO - Descarga de imágenes completada en 173.42 seg.
2025-05-21 10:42:58,498 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-21 10:42:58,513 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 427 URLs.
2025-05-21 10:42:58,515 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 10:42:58,517 - lib.html_scraper - INFO - Iniciando scraping paralelo de 18 URLs...
2025-05-21 10:43:03,500 - lib.html_scraper - INFO - Progreso: 18/18 URLs procesadas en 4.98 seg.
2025-05-21 10:43:03,511 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-21 10:43:03,511 - lib.html_scraper - INFO - Scraping completado para 18/18 URLs en 4.99 segundos.
2025-05-21 10:43:03,511 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-21 10:43:03,516 - main_orchestrator - INFO - Scraping HTML completado en 5.00 seg.
2025-05-21 10:43:03,516 - lib.history_tracker - INFO - Añadidas 17 nuevas URLs al historial.
2025-05-21 10:43:03,519 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 444 URLs.
2025-05-21 10:43:03,523 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 10:43:07,245 - lib.api_client - INFO - Texto extraído de tmprcg0yb6y.jpg (4 chars).
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando 7 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando imagen con API: img_4_af620be1_12052025.jpg
2025-05-21 10:43:14,965 - lib.api_client - INFO - Texto extraído de img_4_af620be1_12052025.jpg (1722 chars).
2025-05-21 10:43:17,103 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_af620be1_12052025.jpg
2025-05-21 10:43:17,822 - lib.image_processor - INFO - Procesando imagen con API: img_7_dead3ba5_12052025.jpg
2025-05-21 10:43:31,119 - lib.api_client - INFO - Texto extraído de img_7_dead3ba5_12052025.jpg (3354 chars).
2025-05-21 10:43:32,826 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_dead3ba5_12052025.jpg
2025-05-21 10:43:33,458 - lib.image_processor - INFO - Procesando imagen con API: img_6_757e4252_12052025.jpg
2025-05-21 10:43:40,660 - lib.api_client - INFO - Texto extraído de img_6_757e4252_12052025.jpg (1354 chars).
2025-05-21 10:43:42,851 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_757e4252_12052025.jpg
2025-05-21 10:43:43,775 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 10:44:43,777 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 10:44:43,777 - lib.image_processor - INFO - Procesando imagen con API: img_5_71611ca8_12052025.jpg
2025-05-21 10:44:57,580 - lib.api_client - INFO - Texto extraído de img_5_71611ca8_12052025.jpg (2920 chars).
2025-05-21 10:44:59,568 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_71611ca8_12052025.jpg
2025-05-21 10:45:00,225 - lib.image_processor - INFO - Procesando imagen con API: img_1_9368e41b_12052025.mp4
2025-05-21 10:45:00,226 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_1_9368e41b_12052025.mp4 (56.55 MB)
2025-05-21 10:45:00,227 - lib.image_processor - WARNING - Error procesando imagen img_1_9368e41b_12052025.mp4: Image file too large
2025-05-21 10:45:01,138 - lib.image_processor - INFO - Procesando imagen con API: img_2_c24c5fe3_12052025.mp4
2025-05-21 10:45:01,142 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_2_c24c5fe3_12052025.mp4 (65.00 MB)
2025-05-21 10:45:01,143 - lib.image_processor - WARNING - Error procesando imagen img_2_c24c5fe3_12052025.mp4: Image file too large
2025-05-21 10:45:01,947 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 10:46:01,950 - lib.image_processor - INFO - Procesando batch 3 (1 imágenes)
2025-05-21 10:46:01,950 - lib.image_processor - INFO - Procesando imagen con API: img_3_4ec295f1_12052025.mp4
2025-05-21 10:46:01,951 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_3_4ec295f1_12052025.mp4 (137.50 MB)
2025-05-21 10:46:01,952 - lib.image_processor - WARNING - Error procesando imagen img_3_4ec295f1_12052025.mp4: Image file too large
2025-05-21 10:46:02,523 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-21 10:46:02,523 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-21 10:46:02,524 - lib.image_processor - INFO - Procesamiento API completado para 4/7 imágenes en 175.28 segundos.
2025-05-21 10:46:02,524 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 178.99 seg.
2025-05-21 10:46:02,524 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 10:46:02,525 - main_orchestrator - INFO - No se encontró el archivo social para la fecha 12052025
2025-05-21 10:46:02,525 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 10:46:02,526 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T10:46:02.526149', 'date_processed': '12052025', 'total_urls_in_pdf': 25, 'new_urls_processed_count': 25, 'history_total_urls': 444, 'categories': {'html': 18, 'images': 7}, 'html_processing': {'attempted': 18, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 9, 'average_relevance': 0.40588235294117647}, 'image_processing': {'attempted_download': 7, 'successful_download': 7, 'attempted_api': 7, 'successful_api': 4}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 0.02, 'image_download': 173.42, 'html_scraping': 5.0, 'image_api': 178.99, 'facebook_processing': 0, 'facebook_text_extraction': 0.02, 'stats_consolidation': 0.0}}
2025-05-21 10:46:02,526 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 10:46:02,541 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - Procesando 4 textos de imágenes para consolidación
2025-05-21 10:46:02,542 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 10:46:02,569 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 10:46:02,569 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 10:46:02,572 - semantic_cleaner - INFO - Extraídos 4 textos de PDF
2025-05-21 10:46:02,572 - semantic_cleaner - INFO - Extraídos 17 textos de HTML
2025-05-21 10:46:02,573 - semantic_cleaner - INFO - Extraídos 4 textos de imágenes
2025-05-21 10:46:02,573 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Se identificaron 25 grupos de textos similares
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Se seleccionaron 25 textos representativos
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 10:46:04,318 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.json
2025-05-21 10:46:04,324 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.json
2025-05-21 10:46:04,324 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.md
2025-05-21 10:46:04,330 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.md
2025-05-21 10:46:04,331 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:04,331 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:04,332 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T10:46:02.526149', 'date_processed': '12052025', 'total_urls_in_pdf': 25, 'new_urls_processed_count': 25, 'history_total_urls': 444, 'categories': {'html': 18, 'images': 7}, 'html_processing': {'attempted': 18, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 9, 'average_relevance': 0.40588235294117647}, 'image_processing': {'attempted_download': 7, 'successful_download': 7, 'attempted_api': 7, 'successful_api': 4}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 0.02, 'image_download': 173.42, 'html_scraping': 5.0, 'image_api': 178.99, 'facebook_processing': 0, 'facebook_text_extraction': 0.02, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.79}}
2025-05-21 10:46:04,332 - main_orchestrator - INFO - Limpieza semántica completada en 1.79 seg.
2025-05-21 10:46:04,332 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 10:46:04,332 - main_orchestrator - INFO - ==================================================
2025-05-21 10:46:04,333 - main_orchestrator - INFO - PIPELINE FINALIZADO en 524.91 segundos.
2025-05-21 10:46:04,333 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Se usará la fecha proporcionada: 13052025
2025-05-21 11:06:58,501 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Usando fecha: 13052025
2025-05-21 11:06:58,501 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 11:06:58,517 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 11:06:58,517 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 11:06:58,519 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 444 URLs.
2025-05-21 11:06:58,519 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 11:06:58,519 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 11:06:58,519 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 11:06:58,519 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 11:06:58,520 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 11:06:58,520 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 11:06:58,533 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-21 11:06:58,569 - lib.pdf_processor - INFO - Se extrajeron 18 enlaces URI (no mailto) de 13052025.pdf.
2025-05-21 11:06:58,569 - main_orchestrator - INFO - PDF procesado en 0.05 seg. Enlaces encontrados: 18
2025-05-21 11:06:58,575 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_13052025.csv
2025-05-21 11:06:58,575 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 11:06:58,575 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-21 11:06:58,590 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:06:58,590 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-05-21 11:06:58,590 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:06:58,590 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 11:06:58,590 - main_orchestrator - INFO - URLs nuevas para procesar: 18 (de 18 total)
2025-05-21 11:06:58,590 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 11:06:58,590 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 11:06:58,620 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 11:06:58,621 - content_deduplicator - INFO - Analizando 18 URLs para encontrar duplicados...
2025-05-21 11:06:58,621 - content_deduplicator - INFO - Procesando 4 URLs del dominio elperuano.pe
2025-05-21 11:06:58,622 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398634-1 (tipo: news)
2025-05-21 11:07:07,444 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398672-2 (tipo: news)
2025-05-21 11:07:15,451 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398298-1 (tipo: news)
2025-05-21 11:07:24,090 - content_deduplicator - INFO - Procesando 8 URLs del dominio imacorpplataforma.com
2025-05-21 11:07:24,125 - content_deduplicator - INFO - Análisis completado en 25.50 segundos
2025-05-21 11:07:24,126 - content_deduplicator - INFO - URLs totales: 18, Únicas: 17, En grupos: 0
2025-05-21 11:07:24,126 - content_deduplicator - INFO - Se realizaron 28 comparaciones (1.1/seg), evitando 0
2025-05-21 11:07:24,126 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-21 11:07:24,126 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-21 11:07:24,126 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-21 11:07:24,126 - main_orchestrator - INFO - URLs después de filtrar duplicados: 18
2025-05-21 11:07:24,126 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-21 11:07:24,126 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 11:07:24,126 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 11:07:24,126 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 11:07:24,126 - lib.url_manager - INFO - Clasificación de 18 URLs:
2025-05-21 11:07:24,126 - lib.url_manager - INFO -  - HTML: 9
2025-05-21 11:07:24,133 - lib.url_manager - INFO -  - IMAGES: 8
2025-05-21 11:07:24,133 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-21 11:07:24,134 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_13052025_unprocessed.json
2025-05-21 11:07:24,134 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_13052025_unprocessed.json
2025-05-21 11:07:24,135 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 11:07:24,135 - lib.image_processor - INFO - Iniciando descarga paralela de 8 imágenes para la fecha 13052025...
2025-05-21 11:07:24,738 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-TV-PERU-GOBIERNO-DARA-BONO-A-27-FAMILIAS.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 11:07:24,740 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 11:07:25,375 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_85c5f8e8_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (366573 bytes)
2025-05-21 11:07:26,251 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_c9be2443_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (4484208 bytes)
2025-05-21 11:07:26,478 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_5e9c98e7_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (246526 bytes)
2025-05-21 11:07:26,478 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_45d6d686_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (300021 bytes)
2025-05-21 11:07:28,625 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_36e5816f_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (845539 bytes)
2025-05-21 11:07:28,796 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_ad0ffb5b_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (631322 bytes)
2025-05-21 11:07:35,375 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_f5766495_13052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (48050829 bytes)
2025-05-21 11:07:36,081 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_d86a2328_13052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (59299569 bytes)
2025-05-21 11:07:36,480 - lib.image_processor - INFO - Progreso descarga imágenes: 8/8 en 12.34 seg.
2025-05-21 11:07:36,484 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_13052025.json
2025-05-21 11:07:36,484 - lib.image_processor - INFO - Descarga de imágenes completada para 8/8 URLs en 12.35 segundos.
2025-05-21 11:07:36,486 - main_orchestrator - INFO - Descarga de imágenes completada en 12.35 seg.
2025-05-21 11:07:36,488 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 11:07:36,491 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 452 URLs.
2025-05-21 11:07:36,491 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 11:07:36,492 - lib.html_scraper - INFO - Iniciando scraping paralelo de 9 URLs...
2025-05-21 11:07:41,924 - lib.html_scraper - INFO - Progreso: 9/9 URLs procesadas en 5.43 seg.
2025-05-21 11:07:41,926 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-21 11:07:41,926 - lib.html_scraper - INFO - Scraping completado para 9/9 URLs en 5.43 segundos.
2025-05-21 11:07:41,926 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-21 11:07:41,926 - main_orchestrator - INFO - Scraping HTML completado en 5.43 seg.
2025-05-21 11:07:41,926 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 11:07:41,926 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 460 URLs.
2025-05-21 11:07:41,926 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 11:07:44,085 - lib.api_client - INFO - Texto extraído de tmpj2ige2rp.jpg (4 chars).
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando 8 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando imagen con API: img_7_85c5f8e8_13052025.jpg
2025-05-21 11:07:51,568 - lib.api_client - INFO - Texto extraído de img_7_85c5f8e8_13052025.jpg (1343 chars).
2025-05-21 11:07:52,830 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_85c5f8e8_13052025.jpg
2025-05-21 11:07:53,715 - lib.image_processor - INFO - Procesando imagen con API: img_8_45d6d686_13052025.jpg
2025-05-21 11:08:19,975 - lib.api_client - INFO - Texto extraído de img_8_45d6d686_13052025.jpg (6490 chars).
2025-05-21 11:08:21,952 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_45d6d686_13052025.jpg
2025-05-21 11:08:22,504 - lib.image_processor - INFO - Procesando imagen con API: img_5_5e9c98e7_13052025.jpg
2025-05-21 11:08:28,125 - lib.api_client - INFO - Texto extraído de img_5_5e9c98e7_13052025.jpg (1386 chars).
2025-05-21 11:08:30,597 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_5e9c98e7_13052025.jpg
2025-05-21 11:08:31,377 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 11:09:31,378 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 11:09:31,378 - lib.image_processor - INFO - Procesando imagen con API: img_6_c9be2443_13052025.jpg
2025-05-21 11:09:31,539 - lib.image_processor - WARNING - Imagen img_6_c9be2443_13052025.jpg es muy grande (8366x5307=44398362 píxeles). Intentando redimensionar.
2025-05-21 11:09:32,055 - lib.image_processor - INFO - Imagen redimensionada a 2500x1585 para API
2025-05-21 11:10:07,553 - lib.api_client - INFO - Texto extraído de img_6_c9be2443_13052025.jpg.resized.jpg (9636 chars).
2025-05-21 11:10:10,350 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_c9be2443_13052025.jpg
2025-05-21 11:10:10,860 - lib.image_processor - INFO - Procesando imagen con API: img_3_36e5816f_13052025.jpg
2025-05-21 11:10:32,544 - lib.api_client - INFO - Texto extraído de img_3_36e5816f_13052025.jpg (6531 chars).
2025-05-21 11:10:34,040 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_36e5816f_13052025.jpg
2025-05-21 11:10:34,966 - lib.image_processor - INFO - Procesando imagen con API: img_4_ad0ffb5b_13052025.jpg
2025-05-21 11:10:56,921 - lib.api_client - INFO - Texto extraído de img_4_ad0ffb5b_13052025.jpg (6095 chars).
2025-05-21 11:10:59,023 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_ad0ffb5b_13052025.jpg
2025-05-21 11:10:59,941 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 11:11:59,942 - lib.image_processor - INFO - Procesando batch 3 (2 imágenes)
2025-05-21 11:11:59,942 - lib.image_processor - INFO - Procesando imagen con API: img_2_f5766495_13052025.mp4
2025-05-21 11:11:59,942 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\img_2_f5766495_13052025.mp4 (45.82 MB)
2025-05-21 11:11:59,942 - lib.image_processor - WARNING - Error procesando imagen img_2_f5766495_13052025.mp4: Image file too large
2025-05-21 11:12:00,658 - lib.image_processor - INFO - Procesando imagen con API: img_1_d86a2328_13052025.mp4
2025-05-21 11:12:00,659 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\img_1_d86a2328_13052025.mp4 (56.55 MB)
2025-05-21 11:12:00,663 - lib.image_processor - WARNING - Error procesando imagen img_1_d86a2328_13052025.mp4: Image file too large
2025-05-21 11:12:01,223 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-21 11:12:01,224 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-21 11:12:01,225 - lib.image_processor - INFO - Procesamiento API completado para 6/8 imágenes en 257.14 segundos.
2025-05-21 11:12:01,225 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 259.30 seg.
2025-05-21 11:12:01,225 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 11:12:01,225 - main_orchestrator - INFO - Leyendo archivo social para la fecha 13052025: social_links_13052025_unprocessed.json
2025-05-21 11:12:01,253 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-21 11:12:01,258 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025
2025-05-21 11:12:01,260 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-21 11:12:01,261 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 13052025...
2025-05-21 11:12:01,266 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/129ao7WKti2/
2025-05-21 11:12:16,449 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025\13052025-1.pdf
2025-05-21 11:12:20,264 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 19.00 seg.
2025-05-21 11:12:20,265 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_13052025.json
2025-05-21 11:12:20,267 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 19.01 segundos.
2025-05-21 11:12:20,268 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 19.01 seg.
2025-05-21 11:12:20,268 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-21 11:12:20,271 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 461 URLs.
2025-05-21 11:12:20,271 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 11:12:22,418 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025\13052025-1.pdf
2025-05-21 11:12:22,423 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-21 11:12:22,423 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 2.15 seg.
2025-05-21 11:12:22,423 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-21 11:12:22,425 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:22,425 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:22,428 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 11:12:22,432 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:22,433 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:22,433 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T11:12:22.429195', 'date_processed': '13052025', 'total_urls_in_pdf': 18, 'new_urls_processed_count': 18, 'history_total_urls': 461, 'categories': {'html': 9, 'images': 8, 'social': 1}, 'html_processing': {'attempted': 9, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 3, 'average_relevance': 0.325}, 'image_processing': {'attempted_download': 8, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 6}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.05, 'pdf_text_extraction': 2.15, 'image_download': 12.35, 'html_scraping': 5.43, 'image_api': 259.3, 'facebook_processing': 19.01, 'facebook_text_extraction': 2.15, 'stats_consolidation': 0.0}}
2025-05-21 11:12:22,435 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 11:12:22,435 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 11:12:22,470 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:12:22,470 - main_orchestrator - INFO - Procesando 6 textos de imágenes para consolidación
2025-05-21 11:12:22,474 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_13052025.json
2025-05-21 11:12:22,474 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_13052025.json
2025-05-21 11:12:22,475 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 11:12:22,506 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 11:12:22,506 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 11:12:22,506 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-05-21 11:12:22,507 - semantic_cleaner - INFO - Extraídos 8 textos de HTML
2025-05-21 11:12:22,508 - semantic_cleaner - INFO - Extraídos 6 textos de imágenes
2025-05-21 11:12:22,508 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Se identificaron 18 grupos de textos similares
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Se seleccionaron 18 textos representativos
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 11:12:25,838 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.json
2025-05-21 11:12:25,838 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.json
2025-05-21 11:12:25,838 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,856 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T11:12:22.429195', 'date_processed': '13052025', 'total_urls_in_pdf': 18, 'new_urls_processed_count': 18, 'history_total_urls': 461, 'categories': {'html': 9, 'images': 8, 'social': 1}, 'html_processing': {'attempted': 9, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 3, 'average_relevance': 0.325}, 'image_processing': {'attempted_download': 8, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 6}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.05, 'pdf_text_extraction': 2.15, 'image_download': 12.35, 'html_scraping': 5.43, 'image_api': 259.3, 'facebook_processing': 19.01, 'facebook_text_extraction': 2.15, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.38}}
2025-05-21 11:12:25,856 - main_orchestrator - INFO - Limpieza semántica completada en 3.38 seg.
2025-05-21 11:12:25,856 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 11:12:25,856 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-21 11:12:25,856 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:25,886 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/129ao7WKti2/
2025-05-21 11:12:25,886 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 11:12:25,919 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,920 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-21 11:12:25,920 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 11:12:25,920 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 11:12:25,923 - main_orchestrator - INFO - ==================================================
2025-05-21 11:12:25,925 - main_orchestrator - INFO - PIPELINE FINALIZADO en 327.42 segundos.
2025-05-21 11:12:25,925 - main_orchestrator - INFO - ==================================================
