2025-05-19 11:39:26,467 - main_orchestrator - INFO - ==================================================
2025-05-19 11:39:26,467 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-19 11:39:26,471 - main_orchestrator - INFO - Usando fecha: 08052025
2025-05-19 11:39:26,471 - main_orchestrator - INFO - ==================================================
2025-05-19 11:39:26,474 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-19 11:39:26,490 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-19 11:39:26,491 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-19 11:39:26,509 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 350 URLs.
2025-05-19 11:39:26,516 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-19 11:39:26,516 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-19 11:39:26,516 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-19 11:39:26,516 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-19 11:39:26,516 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-19 11:39:26,517 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-19 11:39:26,531 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025.pdf (3 páginas)
2025-05-19 11:39:26,597 - lib.pdf_processor - INFO - Se extrajeron 26 enlaces URI (no mailto) de 08052025.pdf.
2025-05-19 11:39:26,597 - main_orchestrator - INFO - PDF procesado en 0.08 seg. Enlaces encontrados: 26
2025-05-19 11:39:26,612 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_08052025.csv
2025-05-19 11:39:26,613 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-19 11:39:26,613 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025.pdf (3 páginas)
2025-05-19 11:39:26,632 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:39:26,635 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-05-19 11:39:26,635 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:39:26,635 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-19 11:39:26,637 - main_orchestrator - INFO - URLs nuevas para procesar: 26 (de 26 total)
2025-05-19 11:39:26,637 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-19 11:39:26,637 - main_orchestrator - WARNING - Error en análisis de duplicados: name 'ContentDeduplicator' is not defined. Continuando sin filtrar duplicados.
2025-05-19 11:39:26,637 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-19 11:39:26,637 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-19 11:39:26,637 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-19 11:39:26,638 - lib.url_manager - INFO - Clasificación de 26 URLs:
2025-05-19 11:39:26,638 - lib.url_manager - INFO -  - HTML: 12
2025-05-19 11:39:26,638 - lib.url_manager - INFO -  - IMAGES: 9
2025-05-19 11:39:26,640 - lib.url_manager - INFO -  - SOCIAL: 5
2025-05-19 11:39:26,643 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_08052025_unprocessed.json
2025-05-19 11:39:26,644 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_08052025_unprocessed.json
2025-05-19 11:39:26,645 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-19 11:39:26,646 - lib.image_processor - INFO - Iniciando descarga paralela de 9 imágenes para la fecha 08052025...
2025-05-19 11:39:28,363 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_49ed5ecc_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (68184 bytes)
2025-05-19 11:39:28,560 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:28,584 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:28,626 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-RADIO-NACIONAL-ENTREVISTA-A-JOSE-LUIS-PATINO-DIRECTOR-USUARIOS-DE-SUNASS-CAMPANA-COLEGIO-CON-AGUA-SEGURA-VOZ-DEL-CONSUMIDOR.mp3 contiene audio/mpeg, no una imagen. Se registrará como tipo no válido.
2025-05-19 11:39:29,761 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_603b19e4_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (343572 bytes)
2025-05-19 11:39:30,661 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_2927050f_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (346762 bytes)
2025-05-19 11:39:30,692 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_de542214_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (192294 bytes)
2025-05-19 11:39:34,695 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_c6e419dd_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (1013871 bytes)
2025-05-19 11:39:35,114 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_add00f49_08052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (1142034 bytes)
2025-05-19 11:40:00,007 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_632969a4_08052025.mp3' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (4971311 bytes)
2025-05-19 11:40:00,564 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-RADIO-NACIONAL-ENTREVISTA-A-JOSE-LUIS-PATINO-DIRECTOR-USUARIOS-DE-SUNASS-CAMPANA-COLEGIO-CON-AGUA-SEGURA-VOZ-DEL-CONSUMIDOR.mp3: Content type 'audio/mpeg' is not an image
2025-05-19 11:44:42,869 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_d489a835_08052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025 (59299569 bytes)
2025-05-19 11:44:43,216 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4: Content type 'video/mp4' is not an image
2025-05-19 11:48:05,617 - lib.image_processor - WARNING - Error de red descargando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4: ('Connection broken: IncompleteRead(152247864 bytes read, 131727510 more expected)', IncompleteRead(152247864 bytes read, 131727510 more expected))
2025-05-19 11:48:05,619 - lib.image_processor - WARNING - Error procesando imagen https://imacorpplataforma.com/wp-content/uploads/2025/05/07-05-2025-NACIONAL-LA-VOZ-DEL-CONSUMIDOR-ENT-A-JOSE-LUIS-PATINO-DIRECTOR-DE-USUARIOS-DE-SUNASS.mp4: Network Error: ('Connection broken: IncompleteRead(152247864 bytes read, 131727510 more expected)', IncompleteRead(152247864 bytes read, 131727510 more expected))
2025-05-19 11:48:05,619 - lib.image_processor - INFO - Progreso descarga imágenes: 9/9 en 518.97 seg.
2025-05-19 11:48:05,619 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_08052025.json
2025-05-19 11:48:05,619 - lib.image_processor - INFO - Descarga de imágenes completada para 9/9 URLs en 518.97 segundos.
2025-05-19 11:48:05,619 - main_orchestrator - INFO - Descarga de imágenes completada en 518.97 seg.
2025-05-19 11:48:05,633 - lib.history_tracker - INFO - Añadidas 9 nuevas URLs al historial.
2025-05-19 11:48:05,637 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 359 URLs.
2025-05-19 11:48:05,639 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-19 11:48:05,639 - lib.html_scraper - INFO - Iniciando scraping paralelo de 12 URLs...
2025-05-19 11:48:09,755 - lib.html_scraper - INFO - Progreso: 12/12 URLs procesadas en 4.12 seg.
2025-05-19 11:48:09,767 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_08052025.json
2025-05-19 11:48:09,768 - lib.html_scraper - INFO - Scraping completado para 12/12 URLs en 4.13 segundos.
2025-05-19 11:48:09,769 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_08052025.json
2025-05-19 11:48:09,770 - main_orchestrator - INFO - Scraping HTML completado en 4.13 seg.
2025-05-19 11:48:09,770 - lib.history_tracker - INFO - Añadidas 12 nuevas URLs al historial.
2025-05-19 11:48:09,774 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 371 URLs.
2025-05-19 11:48:09,775 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-19 11:48:12,164 - lib.api_client - INFO - Texto extraído de tmp2hnixda0.jpg (4 chars).
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando 9 imágenes con API (batch_size=3, pausa=60s)
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-19 11:48:12,166 - lib.image_processor - INFO - Procesando imagen con API: img_4_49ed5ecc_08052025.jpg
2025-05-19 11:48:15,595 - lib.api_client - INFO - Texto extraído de img_4_49ed5ecc_08052025.jpg (559 chars).
2025-05-19 11:48:17,879 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_49ed5ecc_08052025.jpg
2025-05-19 11:48:18,429 - lib.image_processor - INFO - Procesando imagen con API: img_9_603b19e4_08052025.jpg
2025-05-19 11:48:34,906 - lib.api_client - INFO - Texto extraído de img_9_603b19e4_08052025.jpg (3862 chars).
2025-05-19 11:48:35,946 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_603b19e4_08052025.jpg
2025-05-19 11:48:36,615 - lib.image_processor - INFO - Procesando imagen con API: img_7_de542214_08052025.jpg
2025-05-19 11:48:44,653 - lib.api_client - INFO - Texto extraído de img_7_de542214_08052025.jpg (1863 chars).
2025-05-19 11:48:45,742 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_de542214_08052025.jpg
2025-05-19 11:48:46,678 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-19 11:49:46,679 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-19 11:49:46,680 - lib.image_processor - INFO - Procesando imagen con API: img_8_2927050f_08052025.jpg
2025-05-19 11:49:53,540 - lib.api_client - INFO - Texto extraído de img_8_2927050f_08052025.jpg (1032 chars).
2025-05-19 11:49:55,202 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_2927050f_08052025.jpg
2025-05-19 11:49:55,925 - lib.image_processor - INFO - Procesando imagen con API: img_5_c6e419dd_08052025.jpg
2025-05-19 11:50:08,992 - lib.api_client - INFO - Texto extraído de img_5_c6e419dd_08052025.jpg (1904 chars).
2025-05-19 11:50:11,866 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_c6e419dd_08052025.jpg
2025-05-19 11:50:12,499 - lib.image_processor - INFO - Procesando imagen con API: img_6_add00f49_08052025.jpg
2025-05-19 11:50:35,884 - lib.api_client - INFO - Texto extraído de img_6_add00f49_08052025.jpg (5042 chars).
2025-05-19 11:50:37,166 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_add00f49_08052025.jpg
2025-05-19 11:50:37,884 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-19 11:51:37,900 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-19 11:51:37,900 - lib.image_processor - INFO - Procesando imagen con API: img_1_632969a4_08052025.mp3
2025-05-19 11:51:38,181 - lib.image_processor - WARNING - Archivo no es una imagen válida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\img_1_632969a4_08052025.mp3 (formato detectado: None)
2025-05-19 11:51:38,181 - lib.image_processor - WARNING - Error procesando imagen img_1_632969a4_08052025.mp3: File is not a valid image
2025-05-19 11:51:38,775 - lib.image_processor - INFO - Procesando imagen con API: img_3_d489a835_08052025.mp4
2025-05-19 11:51:38,778 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\img_3_d489a835_08052025.mp4 (56.55 MB)
2025-05-19 11:51:38,779 - lib.image_processor - WARNING - Error procesando imagen img_3_d489a835_08052025.mp4: Image file too large
2025-05-19 11:51:39,728 - lib.image_processor - WARNING - Archivo no encontrado: None
2025-05-19 11:51:39,728 - lib.image_processor - WARNING - Error procesando imagen None: File not found
2025-05-19 11:51:40,447 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\texto_imagenes_api.json
2025-05-19 11:51:40,448 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\08052025\texto_imagenes_api.json
2025-05-19 11:51:40,449 - lib.image_processor - INFO - Procesamiento API completado para 6/9 imágenes en 208.28 segundos.
2025-05-19 11:51:40,449 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 210.67 seg.
2025-05-19 11:51:40,449 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-19 11:51:40,450 - main_orchestrator - INFO - Leyendo archivo social para la fecha 08052025: social_links_08052025_unprocessed.json
2025-05-19 11:51:40,467 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-05-19 11:51:40,478 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025
2025-05-19 11:51:40,478 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-19 11:51:40,478 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 08052025...
2025-05-19 11:51:40,478 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/watch/?v=1713353589580930
2025-05-19 11:51:40,482 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/watch/?v=672757988705774
2025-05-19 11:51:40,482 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/ContrasteAyacucho/posts/pfbid029GzNHfjbSVHG3ZHXqFceizSBpEcvMcg4KJ6bVkgLvkpsGb4EoW8E8zQED446MCWZl
2025-05-19 11:52:19,164 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-1.pdf
2025-05-19 11:52:19,603 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-3.pdf
2025-05-19 11:52:33,708 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-2.pdf
2025-05-19 11:52:38,604 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 58.13 seg.
2025-05-19 11:52:38,614 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_08052025.json
2025-05-19 11:52:38,617 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 3/3 exitosos en 58.14 segundos.
2025-05-19 11:52:38,617 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 58.15 seg.
2025-05-19 11:52:38,617 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-05-19 11:52:38,625 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 374 URLs.
2025-05-19 11:52:38,625 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-19 11:52:41,157 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-3.pdf
2025-05-19 11:52:41,326 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-1.pdf
2025-05-19 11:52:41,645 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\08052025\08052025-2.pdf
2025-05-19 11:52:41,646 - lib.facebook_processor - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-19 11:52:41,646 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.02 seg.
2025-05-19 11:52:41,646 - main_orchestrator - INFO - Texto extraído de 3 PDFs de Facebook
2025-05-19 11:52:41,648 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:41,648 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:41,649 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:41,651 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-19T11:52:41.649826', 'date_processed': '08052025', 'total_urls_in_pdf': 26, 'new_urls_processed_count': 26, 'history_total_urls': 374, 'categories': {'html': 12, 'images': 9, 'social': 5}, 'html_processing': {'attempted': 12, 'processed': 12, 'successful': 12, 'relevant (>=0.3)': 8, 'average_relevance': 0.4583333333333334}, 'image_processing': {'attempted_download': 9, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.08, 'pdf_text_extraction': 3.02, 'image_download': 518.97, 'html_scraping': 4.13, 'image_api': 210.67, 'facebook_processing': 58.15, 'facebook_text_extraction': 3.02, 'stats_consolidation': 0.0}}
2025-05-19 11:52:41,652 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-19 11:52:41,653 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-19 11:52:41,660 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_08052025\pdf_text_08052025.json
2025-05-19 11:52:41,675 - main_orchestrator - INFO - Procesando 6 textos de imágenes para consolidación
2025-05-19 11:52:41,683 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_08052025.json
2025-05-19 11:52:41,685 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_08052025.json
2025-05-19 11:52:41,685 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-19 11:52:41,729 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 12 textos de HTML
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 6 textos de imágenes
2025-05-19 11:52:41,729 - semantic_cleaner - INFO - Extraídos 3 textos de Facebook
2025-05-19 11:52:47,403 - semantic_cleaner - INFO - Se identificaron 24 grupos de textos similares
2025-05-19 11:52:47,404 - semantic_cleaner - INFO - Se seleccionaron 24 textos representativos
2025-05-19 11:52:47,404 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-19 11:52:47,405 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.json
2025-05-19 11:52:47,407 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.json
2025-05-19 11:52:47,411 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,424 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,427 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:47,429 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_08052025.json
2025-05-19 11:52:47,429 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-19T11:52:41.649826', 'date_processed': '08052025', 'total_urls_in_pdf': 26, 'new_urls_processed_count': 26, 'history_total_urls': 374, 'categories': {'html': 12, 'images': 9, 'social': 5}, 'html_processing': {'attempted': 12, 'processed': 12, 'successful': 12, 'relevant (>=0.3)': 8, 'average_relevance': 0.4583333333333334}, 'image_processing': {'attempted_download': 9, 'successful_download': 6, 'attempted_api': 6, 'successful_api': 6}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.08, 'pdf_text_extraction': 3.02, 'image_download': 518.97, 'html_scraping': 4.13, 'image_api': 210.67, 'facebook_processing': 58.15, 'facebook_text_extraction': 3.02, 'stats_consolidation': 0.0, 'semantic_cleaning': 5.74}}
2025-05-19 11:52:47,429 - main_orchestrator - INFO - Limpieza semántica completada en 5.74 seg.
2025-05-19 11:52:47,431 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-19 11:52:47,433 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-19 11:52:47,433 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_08052025.json
2025-05-19 11:52:47,471 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/ContrasteAyacucho/posts/pfbid029GzNHfjbSVHG3ZHXqFceizSBpEcvMcg4KJ6bVkgLvkpsGb4EoW8E8zQED446MCWZl
2025-05-19 11:52:47,472 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-19 11:52:47,495 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_08052025.md
2025-05-19 11:52:47,495 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-05-19 11:52:47,495 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-19 11:52:47,495 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-19 11:52:47,495 - main_orchestrator - INFO - ==================================================
2025-05-19 11:52:47,495 - main_orchestrator - INFO - PIPELINE FINALIZADO en 801.03 segundos.
2025-05-19 11:52:47,495 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,764 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 07:56:51,779 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 07:56:51,781 - main_orchestrator - INFO - Se usará la fecha proporcionada: 09052025
2025-05-21 07:56:51,781 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,781 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 07:56:51,781 - main_orchestrator - INFO - Usando fecha: 09052025
2025-05-21 07:56:51,781 - main_orchestrator - INFO - ==================================================
2025-05-21 07:56:51,793 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 07:56:51,808 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 07:56:51,809 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 07:56:51,822 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 374 URLs.
2025-05-21 07:56:51,824 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 07:56:51,824 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 07:56:51,824 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 07:56:51,824 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 07:56:51,825 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 07:56:51,825 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 07:56:51,876 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025.pdf (5 páginas)
2025-05-21 07:56:52,014 - lib.pdf_processor - INFO - Se extrajeron 56 enlaces URI (no mailto) de 09052025.pdf.
2025-05-21 07:56:52,014 - main_orchestrator - INFO - PDF procesado en 0.19 seg. Enlaces encontrados: 56
2025-05-21 07:56:52,040 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_09052025.csv
2025-05-21 07:56:52,040 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 07:56:52,041 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025.pdf (5 páginas)
2025-05-21 07:56:52,073 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 07:56:52,073 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-05-21 07:56:52,073 - main_orchestrator - INFO - Texto del PDF extraído en 0.03 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 07:56:52,073 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 07:56:52,073 - lib.history_tracker - INFO - Filtradas 1 URLs ya procesadas del lote actual.
2025-05-21 07:56:52,073 - main_orchestrator - INFO - URLs nuevas para procesar: 55 (de 56 total)
2025-05-21 07:56:52,074 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 07:56:52,075 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 07:56:52,075 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 07:56:52,075 - content_deduplicator - INFO - Analizando 55 URLs para encontrar duplicados...
2025-05-21 07:56:52,076 - content_deduplicator - INFO - Procesando 7 URLs del dominio elperuano.pe
2025-05-21 07:56:52,076 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397811-1 (tipo: news)
2025-05-21 07:57:02,528 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397810-1 (tipo: news)
2025-05-21 07:57:11,645 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397813-2 (tipo: news)
2025-05-21 07:57:20,204 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397479-1 (tipo: news)
2025-05-21 07:57:28,755 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2397755-1 (tipo: news)
2025-05-21 07:57:37,421 - content_deduplicator - INFO - Procesando 2 URLs del dominio cheleloyborolas.com
2025-05-21 07:57:37,422 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.cheleloyborolas.com/index.php?option=com_content&view=article&id=73122:sunass-promueve-consulta-publica-a-cargo-de-emapa-pasco-para-diseno-de-su-plan-de-gestion&catid=10&Itemid=103 (tipo: other)
2025-05-21 07:57:51,950 - content_deduplicator - INFO - Procesando 9 URLs del dominio facebook.com
2025-05-21 07:57:51,950 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16Jtm8uJTc/ (tipo: facebook)
2025-05-21 07:57:57,365 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16Jtm8uJTc/
2025-05-21 07:57:59,693 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1ZBEbp3ghr/ (tipo: facebook)
2025-05-21 07:58:05,875 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1ZBEbp3ghr/
2025-05-21 07:58:08,064 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037 (tipo: facebook)
2025-05-21 07:58:14,073 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 07:58:16,261 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/199Zud7Gie/ (tipo: facebook)
2025-05-21 07:58:21,706 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/199Zud7Gie/
2025-05-21 07:58:23,887 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1AagutErd2/ (tipo: facebook)
2025-05-21 07:58:29,402 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1AagutErd2/
2025-05-21 07:58:31,544 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1AR4DJyY6T/ (tipo: facebook)
2025-05-21 07:58:36,863 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1AR4DJyY6T/
2025-05-21 07:58:39,080 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16XFvXJR79/ (tipo: facebook)
2025-05-21 07:58:44,737 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16XFvXJR79/
2025-05-21 07:58:46,890 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/100071027885287/posts/725037276540529 (tipo: facebook)
2025-05-21 07:58:52,202 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/100071027885287/posts/725037276540529
2025-05-21 07:58:54,399 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/18oaShuJsM/ (tipo: facebook)
2025-05-21 07:59:01,430 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/18oaShuJsM/
2025-05-21 07:59:03,733 - content_deduplicator - INFO - Procesando 20 URLs del dominio imacorpplataforma.com
2025-05-21 07:59:03,761 - content_deduplicator - INFO - Progreso: 20/55 URLs procesadas en 131.69 seg.
2025-05-21 07:59:03,777 - content_deduplicator - INFO - Procesando 3 URLs del dominio com.pe
2025-05-21 07:59:03,777 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/sunass-aclara-que-no-hay-alza-de-tarifas-y-exhorta-a-presentar-reclamos-formales/ (tipo: other)
2025-05-21 07:59:17,414 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariovoces.com.pe/emapa-san-martin-detecta-conexion-clandestina-de-agua-potable-en-tarapoto-2/ (tipo: news)
2025-05-21 07:59:31,261 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/ (tipo: other)
2025-05-21 07:59:38,672 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-21 07:59:38,672 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/damos-cuenta/congresista-esmeralda-limachi-presenta-proyecto-de-ley-que-dispone-el-uso-de-agua-desalinizada-en-mineria-frente-al-cambio-climatico/ (tipo: other)
2025-05-21 07:59:47,255 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/epsmoquegua/noticias/1163438-mas-de-5-600-usuarios-en-mora-podrian-quedarse-sin-servicio-por-deuda-pendiente (tipo: other)
2025-05-21 07:59:57,274 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164196-ministerio-de-vivienda-avanza-en-ejecucion-de-grandes-proyectos-de-agua-durante-este-2025 (tipo: other)
2025-05-21 08:00:07,962 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/sedapal/noticias/1164216-sedapal-refuerza-campana-educativa-en-colegios-para-promover-el-cuidado-del-agua (tipo: other)
2025-05-21 08:00:17,864 - content_deduplicator - INFO - Progreso: 40/55 URLs procesadas en 205.79 seg.
2025-05-21 08:00:17,868 - content_deduplicator - INFO - Procesando 2 URLs del dominio google.com
2025-05-21 08:00:17,868 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/15B_lc0Ll1Y7v6511zrZSG_m1Zps_EdEX/view?usp=drive_link (tipo: other)
2025-05-21 08:00:26,843 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/14NpqzyZE-k6Z8rMpHlk53yy1kDhRcFDL/view?usp=drive_link (tipo: other)
2025-05-21 08:00:39,378 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-05-21 08:00:39,381 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/piura/vandalismo-deja-sin-agua-a-varios-asentamientos-en-piura-noticia/ (tipo: news)
2025-05-21 08:00:51,400 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/ica/ica-pronto-el-agua-y-desague-para-mas-de-71-mil-habitantes-de-la-tierra-prometida-noticia/?ref=dcr (tipo: news)
2025-05-21 08:01:03,732 - content_deduplicator - INFO - Procesando 2 URLs del dominio net.pe
2025-05-21 08:01:03,735 - selenium_extractor - INFO - Extrayendo contenido de URL: https://lagransaladenoticias.net.pe/2025/05/08/terreno-para-reservorio-del-sector-07-y-08-ya-tiene-partida-de-nacimiento/ (tipo: news)
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Análisis completado en 262.48 segundos
2025-05-21 08:01:14,558 - content_deduplicator - INFO - URLs totales: 55, Únicas: 45, En grupos: 4
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Se realizaron 183 comparaciones (0.7/seg), evitando 0
2025-05-21 08:01:14,558 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-05-21 08:01:14,560 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_09052025.json
2025-05-21 08:01:14,561 - main_orchestrator - INFO - Análisis de duplicados completado: 2 URLs duplicadas filtradas
2025-05-21 08:01:14,561 - main_orchestrator - INFO - URLs después de filtrar duplicados: 53
2025-05-21 08:01:14,561 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_09052025.json
2025-05-21 08:01:14,561 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 08:01:14,561 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 08:01:14,561 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 08:01:14,563 - lib.url_manager - INFO - Clasificación de 53 URLs:
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - HTML: 25
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - IMAGES: 19
2025-05-21 08:01:14,563 - lib.url_manager - INFO -  - SOCIAL: 9
2025-05-21 08:01:14,565 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_09052025_unprocessed.json
2025-05-21 08:01:14,566 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_09052025_unprocessed.json
2025-05-21 08:01:14,566 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 08:01:14,566 - lib.image_processor - INFO - Iniciando descarga paralela de 19 imágenes para la fecha 09052025...
2025-05-21 08:01:14,566 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-MINERO-ACTUALIDAD-4-SUNASS-PROMUEVE-CONSULTA-PUBLICA-A-CARGO-DE-EMAPA-PASCO-PARA-DISENO-DE-SU-PLAN-DE-GESTION-08-05-2025.jpg. Primera ocurrencia: #1, segunda: #2
2025-05-21 08:01:14,566 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/05/LA-NOTICIA-ECONOMIA-6-TRANSFIEREN-MAS-DE-S15-MILLONES-PARA-AGUA-EN-BAGUA-09-05-2025.jpg. Primera ocurrencia: #5, segunda: #6
2025-05-21 08:01:14,635 - lib.image_processor - INFO - Omitiendo URL duplicada #2: http://imacorpplataforma.com/wp-content/uploads/2025/05/EL-MINERO-ACTUALIDAD-4-SUNASS-PROMUEVE-CONSULTA-PUBLICA-A-CARGO-DE-EMAPA-PASCO-PARA-DISENO-DE-SU-PLAN-DE-GESTION-08-05-2025.jpg
2025-05-21 08:01:14,641 - lib.image_processor - INFO - Omitiendo URL duplicada #6: http://imacorpplataforma.com/wp-content/uploads/2025/05/LA-NOTICIA-ECONOMIA-6-TRANSFIEREN-MAS-DE-S15-MILLONES-PARA-AGUA-EN-BAGUA-09-05-2025.jpg
2025-05-21 08:01:15,146 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/08-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 08:01:16,258 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_d356870a_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (536305 bytes)
2025-05-21 08:01:16,539 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_0eab25a1_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (94914 bytes)
2025-05-21 08:01:16,827 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_8e0f4322_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (288698 bytes)
2025-05-21 08:01:16,958 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_4fcf77a2_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (163042 bytes)
2025-05-21 08:01:17,073 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_d65e470b_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (360315 bytes)
2025-05-21 08:01:17,521 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_042084db_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (1151421 bytes)
2025-05-21 08:01:17,569 - lib.image_processor - INFO - Imagen 14 guardada como 'img_14_2c9b282f_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (182957 bytes)
2025-05-21 08:01:17,615 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_7a893373_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (585974 bytes)
2025-05-21 08:01:17,646 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_665c35b0_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (719488 bytes)
2025-05-21 08:01:17,647 - lib.image_processor - INFO - Imagen 16 guardada como 'img_16_91f1f797_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (223003 bytes)
2025-05-21 08:01:18,149 - lib.image_processor - INFO - Progreso descarga imágenes: 10/19 en 3.58 seg.
2025-05-21 08:01:18,239 - lib.image_processor - INFO - Imagen 17 guardada como 'img_17_79936410_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (142930 bytes)
2025-05-21 08:01:18,271 - lib.image_processor - INFO - Imagen 15 guardada como 'img_15_9e019480_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (320016 bytes)
2025-05-21 08:01:18,547 - lib.image_processor - INFO - Imagen 18 guardada como 'img_18_1ec2d7ff_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (193436 bytes)
2025-05-21 08:01:18,864 - lib.image_processor - INFO - Imagen 13 guardada como 'img_13_05255e15_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (684306 bytes)
2025-05-21 08:01:19,754 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_0017daa0_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (378629 bytes)
2025-05-21 08:01:21,598 - lib.image_processor - INFO - Imagen 19 guardada como 'img_19_4650a92c_09052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (1063029 bytes)
2025-05-21 08:02:55,217 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_43d51a85_09052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025 (59299569 bytes)
2025-05-21 08:02:55,999 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_09052025.json
2025-05-21 08:02:55,999 - lib.image_processor - INFO - Descarga de imágenes completada para 17/19 URLs en 101.43 segundos.
2025-05-21 08:02:56,001 - main_orchestrator - INFO - Descarga de imágenes completada en 101.43 seg.
2025-05-21 08:02:56,001 - lib.history_tracker - INFO - Añadidas 17 nuevas URLs al historial.
2025-05-21 08:02:56,004 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 391 URLs.
2025-05-21 08:02:56,004 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 08:02:56,004 - lib.html_scraper - INFO - Iniciando scraping paralelo de 25 URLs...
2025-05-21 08:03:03,768 - lib.html_scraper - WARNING - Error HTTP 403 scrapeando https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/: 403 Client Error: Forbidden for url: https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/
2025-05-21 08:03:03,768 - lib.html_scraper - WARNING - Error procesando https://www.expreso.com.pe/opinion/agua-afectada-por-deshielo-de-glaciares/: HTTP Error: 403
2025-05-21 08:03:03,768 - lib.html_scraper - INFO - Progreso: 20/25 URLs procesadas en 7.76 seg.
2025-05-21 08:03:11,193 - lib.html_scraper - INFO - Progreso: 25/25 URLs procesadas en 15.19 seg.
2025-05-21 08:03:11,200 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_09052025.json
2025-05-21 08:03:11,201 - lib.html_scraper - INFO - Scraping completado para 25/25 URLs en 15.20 segundos.
2025-05-21 08:03:11,202 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_09052025.json
2025-05-21 08:03:11,202 - main_orchestrator - INFO - Scraping HTML completado en 15.20 seg.
2025-05-21 08:03:11,202 - lib.history_tracker - INFO - Añadidas 21 nuevas URLs al historial.
2025-05-21 08:03:11,205 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 412 URLs.
2025-05-21 08:03:11,205 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 08:03:13,949 - lib.api_client - INFO - Texto extraído de tmpt72b5xk1.jpg (4 chars).
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando 17 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 08:03:13,953 - lib.image_processor - INFO - Procesando imagen con API: img_4_d356870a_09052025.jpg
2025-05-21 08:03:26,051 - lib.api_client - INFO - Texto extraído de img_4_d356870a_09052025.jpg (2847 chars).
2025-05-21 08:03:28,307 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_d356870a_09052025.jpg
2025-05-21 08:03:29,214 - lib.image_processor - INFO - Procesando imagen con API: img_5_0eab25a1_09052025.jpg
2025-05-21 08:03:33,819 - lib.api_client - INFO - Texto extraído de img_5_0eab25a1_09052025.jpg (880 chars).
2025-05-21 08:03:35,563 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_0eab25a1_09052025.jpg
2025-05-21 08:03:36,331 - lib.image_processor - INFO - Procesando imagen con API: img_12_8e0f4322_09052025.jpg
2025-05-21 08:03:50,531 - lib.api_client - INFO - Texto extraído de img_12_8e0f4322_09052025.jpg (3419 chars).
2025-05-21 08:03:52,287 - lib.image_processor - INFO - Imagen procesada exitosamente: img_12_8e0f4322_09052025.jpg
2025-05-21 08:03:52,889 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:04:52,899 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 08:04:52,899 - lib.image_processor - INFO - Procesando imagen con API: img_1_4fcf77a2_09052025.jpg
2025-05-21 08:04:58,211 - lib.api_client - INFO - Texto extraído de img_1_4fcf77a2_09052025.jpg (1516 chars).
2025-05-21 08:05:00,816 - lib.image_processor - INFO - Imagen procesada exitosamente: img_1_4fcf77a2_09052025.jpg
2025-05-21 08:05:01,787 - lib.image_processor - INFO - Procesando imagen con API: img_10_d65e470b_09052025.jpg
2025-05-21 08:05:08,655 - lib.api_client - INFO - Texto extraído de img_10_d65e470b_09052025.jpg (1666 chars).
2025-05-21 08:05:11,242 - lib.image_processor - INFO - Imagen procesada exitosamente: img_10_d65e470b_09052025.jpg
2025-05-21 08:05:12,003 - lib.image_processor - INFO - Procesando imagen con API: img_14_2c9b282f_09052025.jpg
2025-05-21 08:05:21,190 - lib.api_client - INFO - Texto extraído de img_14_2c9b282f_09052025.jpg (1993 chars).
2025-05-21 08:05:23,577 - lib.image_processor - INFO - Imagen procesada exitosamente: img_14_2c9b282f_09052025.jpg
2025-05-21 08:05:24,303 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:06:24,313 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-05-21 08:06:24,314 - lib.image_processor - INFO - Procesando imagen con API: img_9_665c35b0_09052025.jpg
2025-05-21 08:06:40,730 - lib.api_client - INFO - Texto extraído de img_9_665c35b0_09052025.jpg (4219 chars).
2025-05-21 08:06:43,694 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_665c35b0_09052025.jpg
2025-05-21 08:06:44,307 - lib.image_processor - INFO - Procesando imagen con API: img_7_7a893373_09052025.jpg
2025-05-21 08:06:50,560 - lib.api_client - INFO - Texto extraído de img_7_7a893373_09052025.jpg (1130 chars).
2025-05-21 08:06:51,695 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_7a893373_09052025.jpg
2025-05-21 08:06:52,644 - lib.image_processor - INFO - Procesando imagen con API: img_16_91f1f797_09052025.jpg
2025-05-21 08:07:07,471 - lib.api_client - INFO - Texto extraído de img_16_91f1f797_09052025.jpg (3620 chars).
2025-05-21 08:07:10,299 - lib.image_processor - INFO - Imagen procesada exitosamente: img_16_91f1f797_09052025.jpg
2025-05-21 08:07:11,174 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:08:11,184 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-05-21 08:08:11,185 - lib.image_processor - INFO - Procesando imagen con API: img_11_042084db_09052025.jpg
2025-05-21 08:08:39,222 - lib.api_client - INFO - Texto extraído de img_11_042084db_09052025.jpg (6033 chars).
2025-05-21 08:08:40,487 - lib.image_processor - INFO - Imagen procesada exitosamente: img_11_042084db_09052025.jpg
2025-05-21 08:08:41,436 - lib.image_processor - INFO - Procesando imagen con API: img_17_79936410_09052025.jpg
2025-05-21 08:08:48,545 - lib.api_client - INFO - Texto extraído de img_17_79936410_09052025.jpg (1230 chars).
2025-05-21 08:08:50,952 - lib.image_processor - INFO - Imagen procesada exitosamente: img_17_79936410_09052025.jpg
2025-05-21 08:08:51,570 - lib.image_processor - INFO - Procesando imagen con API: img_15_9e019480_09052025.jpg
2025-05-21 08:08:56,411 - lib.api_client - INFO - Texto extraído de img_15_9e019480_09052025.jpg (731 chars).
2025-05-21 08:08:57,964 - lib.image_processor - INFO - Imagen procesada exitosamente: img_15_9e019480_09052025.jpg
2025-05-21 08:08:58,859 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:09:58,869 - lib.image_processor - INFO - Procesando batch 5 (3 imágenes)
2025-05-21 08:09:58,870 - lib.image_processor - INFO - Procesando imagen con API: img_18_1ec2d7ff_09052025.jpg
2025-05-21 08:10:13,049 - lib.api_client - INFO - Texto extraído de img_18_1ec2d7ff_09052025.jpg (3169 chars).
2025-05-21 08:10:16,008 - lib.image_processor - INFO - Imagen procesada exitosamente: img_18_1ec2d7ff_09052025.jpg
2025-05-21 08:10:16,627 - lib.image_processor - INFO - Procesando imagen con API: img_13_05255e15_09052025.jpg
2025-05-21 08:10:30,540 - lib.api_client - INFO - Texto extraído de img_13_05255e15_09052025.jpg (3796 chars).
2025-05-21 08:10:31,590 - lib.image_processor - INFO - Imagen procesada exitosamente: img_13_05255e15_09052025.jpg
2025-05-21 08:10:32,243 - lib.image_processor - INFO - Procesando imagen con API: img_8_0017daa0_09052025.jpg
2025-05-21 08:10:42,984 - lib.api_client - INFO - Texto extraído de img_8_0017daa0_09052025.jpg (1233 chars).
2025-05-21 08:10:45,848 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_0017daa0_09052025.jpg
2025-05-21 08:10:46,769 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 08:11:46,777 - lib.image_processor - INFO - Procesando batch 6 (2 imágenes)
2025-05-21 08:11:46,777 - lib.image_processor - INFO - Procesando imagen con API: img_19_4650a92c_09052025.jpg
2025-05-21 08:12:08,555 - lib.api_client - INFO - Texto extraído de img_19_4650a92c_09052025.jpg (4593 chars).
2025-05-21 08:12:10,787 - lib.image_processor - INFO - Imagen procesada exitosamente: img_19_4650a92c_09052025.jpg
2025-05-21 08:12:11,345 - lib.image_processor - INFO - Procesando imagen con API: img_3_43d51a85_09052025.mp4
2025-05-21 08:12:11,346 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\img_3_43d51a85_09052025.mp4 (56.55 MB)
2025-05-21 08:12:11,346 - lib.image_processor - WARNING - Error procesando imagen img_3_43d51a85_09052025.mp4: Image file too large
2025-05-21 08:12:12,295 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\texto_imagenes_api.json
2025-05-21 08:12:12,295 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\09052025\texto_imagenes_api.json
2025-05-21 08:12:12,296 - lib.image_processor - INFO - Procesamiento API completado para 16/17 imágenes en 538.34 segundos.
2025-05-21 08:12:12,296 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 541.09 seg.
2025-05-21 08:12:12,296 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 08:12:12,296 - main_orchestrator - INFO - Leyendo archivo social para la fecha 09052025: social_links_09052025_unprocessed.json
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Encontradas 8 URLs de Facebook para procesar
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025
2025-05-21 08:12:12,393 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-21 08:12:12,393 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 8 URLs de Facebook para la fecha 09052025...
2025-05-21 08:12:12,396 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16Jtm8uJTc/
2025-05-21 08:12:12,398 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1ZBEbp3ghr/
2025-05-21 08:12:12,399 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 08:12:12,400 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/199Zud7Gie/
2025-05-21 08:12:12,401 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/1AagutErd2/
2025-05-21 08:12:27,359 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-4.pdf
2025-05-21 08:12:27,979 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-5.pdf
2025-05-21 08:12:28,229 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-3.pdf
2025-05-21 08:12:28,584 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-1.pdf
2025-05-21 08:12:28,848 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-2.pdf
2025-05-21 08:12:33,100 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/1AR4DJyY6T/
2025-05-21 08:12:33,250 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/100071027885287/posts/725037276540529
2025-05-21 08:12:33,501 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/v/18oaShuJsM/
2025-05-21 08:12:34,453 - lib.facebook_processor - INFO - Progreso Facebook: 5/8 en 22.06 seg.
2025-05-21 08:12:50,931 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-6.pdf
2025-05-21 08:12:51,843 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-7.pdf
2025-05-21 08:12:54,951 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-8.pdf
2025-05-21 08:12:59,646 - lib.facebook_processor - INFO - Progreso Facebook: 8/8 en 47.25 seg.
2025-05-21 08:12:59,650 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_09052025.json
2025-05-21 08:12:59,651 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 8/8 exitosos en 47.26 segundos.
2025-05-21 08:12:59,651 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 47.26 seg.
2025-05-21 08:12:59,651 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 08:12:59,654 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 420 URLs.
2025-05-21 08:12:59,654 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 08:13:00,044 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-3.pdf
2025-05-21 08:13:00,728 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-2.pdf
2025-05-21 08:13:01,583 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-5.pdf
2025-05-21 08:13:02,202 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-1.pdf
2025-05-21 08:13:02,895 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-4.pdf
2025-05-21 08:13:02,958 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-6.pdf
2025-05-21 08:13:03,519 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-7.pdf
2025-05-21 08:13:03,652 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\09052025\09052025-8.pdf
2025-05-21 08:13:03,652 - lib.facebook_processor - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-21 08:13:03,652 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 4.00 seg.
2025-05-21 08:13:03,652 - main_orchestrator - INFO - Texto extraído de 8 PDFs de Facebook
2025-05-21 08:13:03,655 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:03,656 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:03,656 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:03,656 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T08:13:03.656000', 'date_processed': '09052025', 'total_urls_in_pdf': 56, 'new_urls_processed_count': 53, 'history_total_urls': 420, 'categories': {'html': 25, 'images': 19, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 21, 'successful': 20, 'relevant (>=0.3)': 9, 'average_relevance': 0.3650000000000001}, 'image_processing': {'attempted_download': 19, 'successful_download': 17, 'attempted_api': 17, 'successful_api': 16}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 4.0, 'image_download': 101.43, 'html_scraping': 15.2, 'image_api': 541.09, 'facebook_processing': 47.26, 'facebook_text_extraction': 4.0, 'stats_consolidation': 0.0}}
2025-05-21 08:13:03,656 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 08:13:03,656 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 08:13:03,675 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_09052025\pdf_text_09052025.json
2025-05-21 08:13:03,675 - main_orchestrator - INFO - Procesando 16 textos de imágenes para consolidación
2025-05-21 08:13:03,681 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_09052025.json
2025-05-21 08:13:03,681 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_09052025.json
2025-05-21 08:13:03,681 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 08:13:03,717 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 20 textos de HTML
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 16 textos de imágenes
2025-05-21 08:13:03,717 - semantic_cleaner - INFO - Extraídos 8 textos de Facebook
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Se identificaron 49 grupos de textos similares
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Se seleccionaron 49 textos representativos
2025-05-21 08:13:15,336 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 08:13:15,338 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.json
2025-05-21 08:13:15,342 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.json
2025-05-21 08:13:15,342 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,348 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_09052025.json
2025-05-21 08:13:15,349 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T08:13:03.656000', 'date_processed': '09052025', 'total_urls_in_pdf': 56, 'new_urls_processed_count': 53, 'history_total_urls': 420, 'categories': {'html': 25, 'images': 19, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 21, 'successful': 20, 'relevant (>=0.3)': 9, 'average_relevance': 0.3650000000000001}, 'image_processing': {'attempted_download': 19, 'successful_download': 17, 'attempted_api': 17, 'successful_api': 16}, 'facebook_processing': {'attempted': 8, 'successful': 8, 'extracted_texts': 8}, 'timings_seconds': {'pdf_extraction': 0.19, 'pdf_text_extraction': 4.0, 'image_download': 101.43, 'html_scraping': 15.2, 'image_api': 541.09, 'facebook_processing': 47.26, 'facebook_text_extraction': 4.0, 'stats_consolidation': 0.0, 'semantic_cleaning': 11.67}}
2025-05-21 08:13:15,349 - main_orchestrator - INFO - Limpieza semántica completada en 11.67 seg.
2025-05-21 08:13:15,349 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 08:13:15,349 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-21 08:13:15,349 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_09052025.json
2025-05-21 08:13:15,384 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo?fbid=122153862512553037&set=pcb.122153863052553037
2025-05-21 08:13:15,385 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 08:13:15,409 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_09052025.md
2025-05-21 08:13:15,409 - facebook_extractor_fix - INFO - Se han añadido 8 textos de Facebook al archivo limpio
2025-05-21 08:13:15,410 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 08:13:15,410 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 08:13:15,410 - main_orchestrator - INFO - ==================================================
2025-05-21 08:13:15,411 - main_orchestrator - INFO - PIPELINE FINALIZADO en 983.63 segundos.
2025-05-21 08:13:15,411 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,418 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 10:37:19,424 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 10:37:19,424 - main_orchestrator - INFO - Se usará la fecha proporcionada: 12052025
2025-05-21 10:37:19,424 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,425 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 10:37:19,425 - main_orchestrator - INFO - Usando fecha: 12052025
2025-05-21 10:37:19,425 - main_orchestrator - INFO - ==================================================
2025-05-21 10:37:19,425 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 10:37:19,425 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 10:37:19,425 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 10:37:19,449 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 420 URLs.
2025-05-21 10:37:19,449 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 10:37:19,449 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 10:37:19,449 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 10:37:19,452 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 10:37:19,452 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 10:37:19,452 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 10:37:19,491 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-21 10:37:19,548 - lib.pdf_processor - INFO - Se extrajeron 25 enlaces URI (no mailto) de 12052025.pdf.
2025-05-21 10:37:19,548 - main_orchestrator - INFO - PDF procesado en 0.10 seg. Enlaces encontrados: 25
2025-05-21 10:37:19,569 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_12052025.csv
2025-05-21 10:37:19,569 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 10:37:19,569 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\12052025.pdf (4 páginas)
2025-05-21 10:37:19,591 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:37:19,591 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 4 párrafos
2025-05-21 10:37:19,591 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:37:19,591 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 10:37:19,591 - main_orchestrator - INFO - URLs nuevas para procesar: 25 (de 25 total)
2025-05-21 10:37:19,591 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 10:37:19,591 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 10:37:19,602 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 10:37:19,602 - content_deduplicator - INFO - Analizando 25 URLs para encontrar duplicados...
2025-05-21 10:37:19,602 - content_deduplicator - INFO - Procesando 2 URLs del dominio elperuano.pe
2025-05-21 10:37:19,602 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398252-1 (tipo: news)
2025-05-21 10:37:29,099 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398206-1 (tipo: news)
2025-05-21 10:37:37,943 - content_deduplicator - INFO - Procesando 7 URLs del dominio imacorpplataforma.com
2025-05-21 10:37:37,949 - content_deduplicator - INFO - Procesando 2 URLs del dominio elcomercio.pe
2025-05-21 10:37:37,949 - selenium_extractor - INFO - Extrayendo contenido de URL: https://elcomercio.pe/politica/justicia/equipo-lava-jato-presenta-acusacion-contra-14-personas-por-caso-de-planta-de-tratamiento-de-huachipa-y-ramal-norte-sedapal-camargo-y-correa-ultimas-noticia/?ref=ecr (tipo: other)
2025-05-21 10:38:11,688 - content_deduplicator - INFO - Procesando 3 URLs del dominio andina.pe
2025-05-21 10:38:11,688 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-fiscalia-acusa-a-14-implicados-presunta-corrupcion-obra-planta-huachipa-1029086.aspx (tipo: news)
2025-05-21 10:38:24,984 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-peru-y-japon-buscan-impulsar-proyectos-agua-y-reordenamiento-urbano-lima-y-callao-1029000.aspx (tipo: news)
2025-05-21 10:38:40,699 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-mas-1400-personas-fueron-beneficiadas-acceso-a-agua-segura-el-2024-1029090.aspx (tipo: news)
2025-05-21 10:38:56,212 - content_deduplicator - INFO - Procesando 2 URLs del dominio com.pe
2025-05-21 10:38:56,212 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-investigara-consumos-atipicos-tras-quejas-por-recibos-de-agua/ (tipo: other)
2025-05-21 10:39:06,959 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/seda-ayacucho-recoge-muestras-en-huanta-por-posible-contaminacion-de-agua/ (tipo: other)
2025-05-21 10:39:26,247 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-05-21 10:39:26,257 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164922-mvcs-capacito-a-las-eps-de-amazonas-y-san-martin-sobre-evaluacion-del-riesgo-ante-desastres-naturales (tipo: other)
2025-05-21 10:39:35,862 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164942-peru-y-japon-articulan-esfuerzos-para-impulsar-proyectos-de-agua-y-reordenamiento-urbano-en-lima-y-callao (tipo: other)
2025-05-21 10:39:45,537 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1164757-por-mejores-servicios-basicos-en-cusco-vivienda-suscribe-convenio-para-desarrollo-de-proyecto-de-agua-potable-y-alcantarillado-en-saylla (tipo: other)
2025-05-21 10:39:55,338 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/otass/noticias/1164807-otass-este-12-de-mayo-vence-plazo-de-inscripcion-a-la-subasta-publica-de-agua-residual-cruda-de-ptar-yaurilla-ica (tipo: other)
2025-05-21 10:40:05,073 - content_deduplicator - INFO - Análisis completado en 165.47 segundos
2025-05-21 10:40:05,073 - content_deduplicator - INFO - URLs totales: 25, Únicas: 24, En grupos: 0
2025-05-21 10:40:05,073 - content_deduplicator - INFO - Se realizaron 31 comparaciones (0.2/seg), evitando 0
2025-05-21 10:40:05,074 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-21 10:40:05,074 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-21 10:40:05,075 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-21 10:40:05,075 - main_orchestrator - INFO - URLs después de filtrar duplicados: 25
2025-05-21 10:40:05,075 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_12052025.json
2025-05-21 10:40:05,075 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 10:40:05,075 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 10:40:05,075 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 10:40:05,079 - lib.url_manager - INFO - Clasificación de 25 URLs:
2025-05-21 10:40:05,079 - lib.url_manager - INFO -  - HTML: 18
2025-05-21 10:40:05,079 - lib.url_manager - INFO -  - IMAGES: 7
2025-05-21 10:40:05,081 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_12052025_unprocessed.json
2025-05-21 10:40:05,082 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 10:40:05,082 - lib.image_processor - INFO - Iniciando descarga paralela de 7 imágenes para la fecha 12052025...
2025-05-21 10:40:05,807 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/11-05-2025-C31-SUNASS-ESPECIALIZACION-DE-ALUMNOS-EN-SANEAMIENTO-ESTADO-A-TU-SERVICIO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:05,811 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-TV-PERU-OTASS-CAPACITA-A-REPRESEMTAMTESS-REGIONALES.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:05,994 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/09-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO-.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 10:40:08,757 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_af620be1_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (776629 bytes)
2025-05-21 10:40:09,149 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_dead3ba5_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (837885 bytes)
2025-05-21 10:40:09,296 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_757e4252_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (534835 bytes)
2025-05-21 10:40:09,402 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_71611ca8_12052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (1053821 bytes)
2025-05-21 10:40:53,716 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_9368e41b_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (59299569 bytes)
2025-05-21 10:41:03,591 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_c24c5fe3_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (68156091 bytes)
2025-05-21 10:42:58,227 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_4ec295f1_12052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025 (144178181 bytes)
2025-05-21 10:42:58,485 - lib.image_processor - INFO - Progreso descarga imágenes: 7/7 en 173.40 seg.
2025-05-21 10:42:58,497 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_12052025.json
2025-05-21 10:42:58,498 - lib.image_processor - INFO - Descarga de imágenes completada para 7/7 URLs en 173.42 segundos.
2025-05-21 10:42:58,498 - main_orchestrator - INFO - Descarga de imágenes completada en 173.42 seg.
2025-05-21 10:42:58,498 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-05-21 10:42:58,513 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 427 URLs.
2025-05-21 10:42:58,515 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 10:42:58,517 - lib.html_scraper - INFO - Iniciando scraping paralelo de 18 URLs...
2025-05-21 10:43:03,500 - lib.html_scraper - INFO - Progreso: 18/18 URLs procesadas en 4.98 seg.
2025-05-21 10:43:03,511 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-21 10:43:03,511 - lib.html_scraper - INFO - Scraping completado para 18/18 URLs en 4.99 segundos.
2025-05-21 10:43:03,511 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_12052025.json
2025-05-21 10:43:03,516 - main_orchestrator - INFO - Scraping HTML completado en 5.00 seg.
2025-05-21 10:43:03,516 - lib.history_tracker - INFO - Añadidas 17 nuevas URLs al historial.
2025-05-21 10:43:03,519 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 444 URLs.
2025-05-21 10:43:03,523 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 10:43:07,245 - lib.api_client - INFO - Texto extraído de tmprcg0yb6y.jpg (4 chars).
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando 7 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 10:43:07,245 - lib.image_processor - INFO - Procesando imagen con API: img_4_af620be1_12052025.jpg
2025-05-21 10:43:14,965 - lib.api_client - INFO - Texto extraído de img_4_af620be1_12052025.jpg (1722 chars).
2025-05-21 10:43:17,103 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_af620be1_12052025.jpg
2025-05-21 10:43:17,822 - lib.image_processor - INFO - Procesando imagen con API: img_7_dead3ba5_12052025.jpg
2025-05-21 10:43:31,119 - lib.api_client - INFO - Texto extraído de img_7_dead3ba5_12052025.jpg (3354 chars).
2025-05-21 10:43:32,826 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_dead3ba5_12052025.jpg
2025-05-21 10:43:33,458 - lib.image_processor - INFO - Procesando imagen con API: img_6_757e4252_12052025.jpg
2025-05-21 10:43:40,660 - lib.api_client - INFO - Texto extraído de img_6_757e4252_12052025.jpg (1354 chars).
2025-05-21 10:43:42,851 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_757e4252_12052025.jpg
2025-05-21 10:43:43,775 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 10:44:43,777 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 10:44:43,777 - lib.image_processor - INFO - Procesando imagen con API: img_5_71611ca8_12052025.jpg
2025-05-21 10:44:57,580 - lib.api_client - INFO - Texto extraído de img_5_71611ca8_12052025.jpg (2920 chars).
2025-05-21 10:44:59,568 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_71611ca8_12052025.jpg
2025-05-21 10:45:00,225 - lib.image_processor - INFO - Procesando imagen con API: img_1_9368e41b_12052025.mp4
2025-05-21 10:45:00,226 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_1_9368e41b_12052025.mp4 (56.55 MB)
2025-05-21 10:45:00,227 - lib.image_processor - WARNING - Error procesando imagen img_1_9368e41b_12052025.mp4: Image file too large
2025-05-21 10:45:01,138 - lib.image_processor - INFO - Procesando imagen con API: img_2_c24c5fe3_12052025.mp4
2025-05-21 10:45:01,142 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_2_c24c5fe3_12052025.mp4 (65.00 MB)
2025-05-21 10:45:01,143 - lib.image_processor - WARNING - Error procesando imagen img_2_c24c5fe3_12052025.mp4: Image file too large
2025-05-21 10:45:01,947 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 10:46:01,950 - lib.image_processor - INFO - Procesando batch 3 (1 imágenes)
2025-05-21 10:46:01,950 - lib.image_processor - INFO - Procesando imagen con API: img_3_4ec295f1_12052025.mp4
2025-05-21 10:46:01,951 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\img_3_4ec295f1_12052025.mp4 (137.50 MB)
2025-05-21 10:46:01,952 - lib.image_processor - WARNING - Error procesando imagen img_3_4ec295f1_12052025.mp4: Image file too large
2025-05-21 10:46:02,523 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-21 10:46:02,523 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\12052025\texto_imagenes_api.json
2025-05-21 10:46:02,524 - lib.image_processor - INFO - Procesamiento API completado para 4/7 imágenes en 175.28 segundos.
2025-05-21 10:46:02,524 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 178.99 seg.
2025-05-21 10:46:02,524 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 10:46:02,525 - main_orchestrator - INFO - No se encontró el archivo social para la fecha 12052025
2025-05-21 10:46:02,525 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 10:46:02,526 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:02,526 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T10:46:02.526149', 'date_processed': '12052025', 'total_urls_in_pdf': 25, 'new_urls_processed_count': 25, 'history_total_urls': 444, 'categories': {'html': 18, 'images': 7}, 'html_processing': {'attempted': 18, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 9, 'average_relevance': 0.40588235294117647}, 'image_processing': {'attempted_download': 7, 'successful_download': 7, 'attempted_api': 7, 'successful_api': 4}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 0.02, 'image_download': 173.42, 'html_scraping': 5.0, 'image_api': 178.99, 'facebook_processing': 0, 'facebook_text_extraction': 0.02, 'stats_consolidation': 0.0}}
2025-05-21 10:46:02,526 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 10:46:02,526 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 10:46:02,541 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_12052025\pdf_text_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - Procesando 4 textos de imágenes para consolidación
2025-05-21 10:46:02,542 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_12052025.json
2025-05-21 10:46:02,542 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 10:46:02,569 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 10:46:02,569 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 10:46:02,572 - semantic_cleaner - INFO - Extraídos 4 textos de PDF
2025-05-21 10:46:02,572 - semantic_cleaner - INFO - Extraídos 17 textos de HTML
2025-05-21 10:46:02,573 - semantic_cleaner - INFO - Extraídos 4 textos de imágenes
2025-05-21 10:46:02,573 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Se identificaron 25 grupos de textos similares
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Se seleccionaron 25 textos representativos
2025-05-21 10:46:04,318 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 10:46:04,318 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.json
2025-05-21 10:46:04,324 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.json
2025-05-21 10:46:04,324 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.md
2025-05-21 10:46:04,330 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_12052025.md
2025-05-21 10:46:04,331 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:04,331 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_12052025.json
2025-05-21 10:46:04,332 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T10:46:02.526149', 'date_processed': '12052025', 'total_urls_in_pdf': 25, 'new_urls_processed_count': 25, 'history_total_urls': 444, 'categories': {'html': 18, 'images': 7}, 'html_processing': {'attempted': 18, 'processed': 17, 'successful': 17, 'relevant (>=0.3)': 9, 'average_relevance': 0.40588235294117647}, 'image_processing': {'attempted_download': 7, 'successful_download': 7, 'attempted_api': 7, 'successful_api': 4}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.1, 'pdf_text_extraction': 0.02, 'image_download': 173.42, 'html_scraping': 5.0, 'image_api': 178.99, 'facebook_processing': 0, 'facebook_text_extraction': 0.02, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.79}}
2025-05-21 10:46:04,332 - main_orchestrator - INFO - Limpieza semántica completada en 1.79 seg.
2025-05-21 10:46:04,332 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 10:46:04,332 - main_orchestrator - INFO - ==================================================
2025-05-21 10:46:04,333 - main_orchestrator - INFO - PIPELINE FINALIZADO en 524.91 segundos.
2025-05-21 10:46:04,333 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Se usará la fecha proporcionada: 13052025
2025-05-21 11:06:58,501 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-05-21 11:06:58,501 - main_orchestrator - INFO - Usando fecha: 13052025
2025-05-21 11:06:58,501 - main_orchestrator - INFO - ==================================================
2025-05-21 11:06:58,501 - lib.config_manager - INFO - Configuración cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\config.yaml
2025-05-21 11:06:58,517 - lib.config_manager - INFO - Clave API de Google cargada desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\credentials/api_keys.yaml
2025-05-21 11:06:58,517 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-05-21 11:06:58,519 - lib.history_tracker - INFO - Historial cargado desde C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 444 URLs.
2025-05-21 11:06:58,519 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-05-21 11:06:58,519 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-05-21 11:06:58,519 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-05-21 11:06:58,519 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-05-21 11:06:58,520 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-05-21 11:06:58,520 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-05-21 11:06:58,533 - lib.pdf_processor - INFO - Abriendo PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-21 11:06:58,569 - lib.pdf_processor - INFO - Se extrajeron 18 enlaces URI (no mailto) de 13052025.pdf.
2025-05-21 11:06:58,569 - main_orchestrator - INFO - PDF procesado en 0.05 seg. Enlaces encontrados: 18
2025-05-21 11:06:58,575 - lib.file_manager - INFO - Datos guardados en CSV: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\In\links_extracted_13052025.csv
2025-05-21 11:06:58,575 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-05-21 11:06:58,575 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025.pdf (3 páginas)
2025-05-21 11:06:58,590 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:06:58,590 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-05-21 11:06:58,590 - main_orchestrator - INFO - Texto del PDF extraído en 0.02 seg. Guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:06:58,590 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-05-21 11:06:58,590 - main_orchestrator - INFO - URLs nuevas para procesar: 18 (de 18 total)
2025-05-21 11:06:58,590 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-05-21 11:06:58,590 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup\content
2025-05-21 11:06:58,620 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\cache\dedup
2025-05-21 11:06:58,621 - content_deduplicator - INFO - Analizando 18 URLs para encontrar duplicados...
2025-05-21 11:06:58,621 - content_deduplicator - INFO - Procesando 4 URLs del dominio elperuano.pe
2025-05-21 11:06:58,622 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398634-1 (tipo: news)
2025-05-21 11:07:07,444 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398672-2 (tipo: news)
2025-05-21 11:07:15,451 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2398298-1 (tipo: news)
2025-05-21 11:07:24,090 - content_deduplicator - INFO - Procesando 8 URLs del dominio imacorpplataforma.com
2025-05-21 11:07:24,125 - content_deduplicator - INFO - Análisis completado en 25.50 segundos
2025-05-21 11:07:24,126 - content_deduplicator - INFO - URLs totales: 18, Únicas: 17, En grupos: 0
2025-05-21 11:07:24,126 - content_deduplicator - INFO - Se realizaron 28 comparaciones (1.1/seg), evitando 0
2025-05-21 11:07:24,126 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-05-21 11:07:24,126 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-21 11:07:24,126 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-05-21 11:07:24,126 - main_orchestrator - INFO - URLs después de filtrar duplicados: 18
2025-05-21 11:07:24,126 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\duplicates_analysis_13052025.json
2025-05-21 11:07:24,126 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-05-21 11:07:24,126 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-05-21 11:07:24,126 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-05-21 11:07:24,126 - lib.url_manager - INFO - Clasificación de 18 URLs:
2025-05-21 11:07:24,126 - lib.url_manager - INFO -  - HTML: 9
2025-05-21 11:07:24,133 - lib.url_manager - INFO -  - IMAGES: 8
2025-05-21 11:07:24,133 - lib.url_manager - INFO -  - SOCIAL: 1
2025-05-21 11:07:24,134 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_13052025_unprocessed.json
2025-05-21 11:07:24,134 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Social\social_links_13052025_unprocessed.json
2025-05-21 11:07:24,135 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-05-21 11:07:24,135 - lib.image_processor - INFO - Iniciando descarga paralela de 8 imágenes para la fecha 13052025...
2025-05-21 11:07:24,738 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-TV-PERU-GOBIERNO-DARA-BONO-A-27-FAMILIAS.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 11:07:24,740 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/05/12-05-2025-C31-EL-ESTADO-A-TU-SERVICIO-CAPACITACION-DE-ALUMNOS-EN-SANEAMIENTO.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-05-21 11:07:25,375 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_85c5f8e8_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (366573 bytes)
2025-05-21 11:07:26,251 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_c9be2443_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (4484208 bytes)
2025-05-21 11:07:26,478 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_5e9c98e7_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (246526 bytes)
2025-05-21 11:07:26,478 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_45d6d686_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (300021 bytes)
2025-05-21 11:07:28,625 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_36e5816f_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (845539 bytes)
2025-05-21 11:07:28,796 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_ad0ffb5b_13052025.jpg' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (631322 bytes)
2025-05-21 11:07:35,375 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_f5766495_13052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (48050829 bytes)
2025-05-21 11:07:36,081 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_d86a2328_13052025.mp4' en C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025 (59299569 bytes)
2025-05-21 11:07:36,480 - lib.image_processor - INFO - Progreso descarga imágenes: 8/8 en 12.34 seg.
2025-05-21 11:07:36,484 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\image_links_13052025.json
2025-05-21 11:07:36,484 - lib.image_processor - INFO - Descarga de imágenes completada para 8/8 URLs en 12.35 segundos.
2025-05-21 11:07:36,486 - main_orchestrator - INFO - Descarga de imágenes completada en 12.35 seg.
2025-05-21 11:07:36,488 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 11:07:36,491 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 452 URLs.
2025-05-21 11:07:36,491 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-05-21 11:07:36,492 - lib.html_scraper - INFO - Iniciando scraping paralelo de 9 URLs...
2025-05-21 11:07:41,924 - lib.html_scraper - INFO - Progreso: 9/9 URLs procesadas en 5.43 seg.
2025-05-21 11:07:41,926 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-21 11:07:41,926 - lib.html_scraper - INFO - Scraping completado para 9/9 URLs en 5.43 segundos.
2025-05-21 11:07:41,926 - lib.html_scraper - INFO - Resultados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_texts_13052025.json
2025-05-21 11:07:41,926 - main_orchestrator - INFO - Scraping HTML completado en 5.43 seg.
2025-05-21 11:07:41,926 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-05-21 11:07:41,926 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 460 URLs.
2025-05-21 11:07:41,926 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-05-21 11:07:44,085 - lib.api_client - INFO - Texto extraído de tmpj2ige2rp.jpg (4 chars).
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando 8 imágenes con API (batch_size=3, pausa=60s)
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-05-21 11:07:44,085 - lib.image_processor - INFO - Procesando imagen con API: img_7_85c5f8e8_13052025.jpg
2025-05-21 11:07:51,568 - lib.api_client - INFO - Texto extraído de img_7_85c5f8e8_13052025.jpg (1343 chars).
2025-05-21 11:07:52,830 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_85c5f8e8_13052025.jpg
2025-05-21 11:07:53,715 - lib.image_processor - INFO - Procesando imagen con API: img_8_45d6d686_13052025.jpg
2025-05-21 11:08:19,975 - lib.api_client - INFO - Texto extraído de img_8_45d6d686_13052025.jpg (6490 chars).
2025-05-21 11:08:21,952 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_45d6d686_13052025.jpg
2025-05-21 11:08:22,504 - lib.image_processor - INFO - Procesando imagen con API: img_5_5e9c98e7_13052025.jpg
2025-05-21 11:08:28,125 - lib.api_client - INFO - Texto extraído de img_5_5e9c98e7_13052025.jpg (1386 chars).
2025-05-21 11:08:30,597 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_5e9c98e7_13052025.jpg
2025-05-21 11:08:31,377 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 11:09:31,378 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-05-21 11:09:31,378 - lib.image_processor - INFO - Procesando imagen con API: img_6_c9be2443_13052025.jpg
2025-05-21 11:09:31,539 - lib.image_processor - WARNING - Imagen img_6_c9be2443_13052025.jpg es muy grande (8366x5307=44398362 píxeles). Intentando redimensionar.
2025-05-21 11:09:32,055 - lib.image_processor - INFO - Imagen redimensionada a 2500x1585 para API
2025-05-21 11:10:07,553 - lib.api_client - INFO - Texto extraído de img_6_c9be2443_13052025.jpg.resized.jpg (9636 chars).
2025-05-21 11:10:10,350 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_c9be2443_13052025.jpg
2025-05-21 11:10:10,860 - lib.image_processor - INFO - Procesando imagen con API: img_3_36e5816f_13052025.jpg
2025-05-21 11:10:32,544 - lib.api_client - INFO - Texto extraído de img_3_36e5816f_13052025.jpg (6531 chars).
2025-05-21 11:10:34,040 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_36e5816f_13052025.jpg
2025-05-21 11:10:34,966 - lib.image_processor - INFO - Procesando imagen con API: img_4_ad0ffb5b_13052025.jpg
2025-05-21 11:10:56,921 - lib.api_client - INFO - Texto extraído de img_4_ad0ffb5b_13052025.jpg (6095 chars).
2025-05-21 11:10:59,023 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_ad0ffb5b_13052025.jpg
2025-05-21 11:10:59,941 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-05-21 11:11:59,942 - lib.image_processor - INFO - Procesando batch 3 (2 imágenes)
2025-05-21 11:11:59,942 - lib.image_processor - INFO - Procesando imagen con API: img_2_f5766495_13052025.mp4
2025-05-21 11:11:59,942 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\img_2_f5766495_13052025.mp4 (45.82 MB)
2025-05-21 11:11:59,942 - lib.image_processor - WARNING - Error procesando imagen img_2_f5766495_13052025.mp4: Image file too large
2025-05-21 11:12:00,658 - lib.image_processor - INFO - Procesando imagen con API: img_1_d86a2328_13052025.mp4
2025-05-21 11:12:00,659 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\img_1_d86a2328_13052025.mp4 (56.55 MB)
2025-05-21 11:12:00,663 - lib.image_processor - WARNING - Error procesando imagen img_1_d86a2328_13052025.mp4: Image file too large
2025-05-21 11:12:01,223 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-21 11:12:01,224 - lib.image_processor - INFO - Resultados de API guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Images\downloads\13052025\texto_imagenes_api.json
2025-05-21 11:12:01,225 - lib.image_processor - INFO - Procesamiento API completado para 6/8 imágenes en 257.14 segundos.
2025-05-21 11:12:01,225 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 259.30 seg.
2025-05-21 11:12:01,225 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-05-21 11:12:01,225 - main_orchestrator - INFO - Leyendo archivo social para la fecha 13052025: social_links_13052025_unprocessed.json
2025-05-21 11:12:01,253 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-05-21 11:12:01,258 - main_orchestrator - INFO - Creado directorio para PDFs: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025
2025-05-21 11:12:01,260 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output
2025-05-21 11:12:01,261 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 13052025...
2025-05-21 11:12:01,266 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/129ao7WKti2/
2025-05-21 11:12:16,449 - lib.facebook_processor - INFO - PDF guardado exitosamente: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025\13052025-1.pdf
2025-05-21 11:12:20,264 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 19.00 seg.
2025-05-21 11:12:20,265 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_results_13052025.json
2025-05-21 11:12:20,267 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 19.01 segundos.
2025-05-21 11:12:20,268 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 19.01 seg.
2025-05-21 11:12:20,268 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-05-21 11:12:20,271 - lib.history_tracker - INFO - Historial guardado en C:\Jerson\SUNASS\2025\5_May\NewsAgent\codigo\lib\history\processed_urls.json con 461 URLs.
2025-05-21 11:12:20,271 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-05-21 11:12:22,418 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: C:\Jerson\SUNASS\2025\5_May\NewsAgent\base\13052025\13052025-1.pdf
2025-05-21 11:12:22,423 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-21 11:12:22,423 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 2.15 seg.
2025-05-21 11:12:22,423 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-05-21 11:12:22,425 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:22,425 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:22,428 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-05-21 11:12:22,432 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:22,433 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:22,433 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T11:12:22.429195', 'date_processed': '13052025', 'total_urls_in_pdf': 18, 'new_urls_processed_count': 18, 'history_total_urls': 461, 'categories': {'html': 9, 'images': 8, 'social': 1}, 'html_processing': {'attempted': 9, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 3, 'average_relevance': 0.325}, 'image_processing': {'attempted_download': 8, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 6}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.05, 'pdf_text_extraction': 2.15, 'image_download': 12.35, 'html_scraping': 5.43, 'image_api': 259.3, 'facebook_processing': 19.01, 'facebook_text_extraction': 2.15, 'stats_consolidation': 0.0}}
2025-05-21 11:12:22,435 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-05-21 11:12:22,435 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-05-21 11:12:22,470 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Out\scraped_pdf_13052025\pdf_text_13052025.json
2025-05-21 11:12:22,470 - main_orchestrator - INFO - Procesando 6 textos de imágenes para consolidación
2025-05-21 11:12:22,474 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_13052025.json
2025-05-21 11:12:22,474 - main_orchestrator - INFO - Resultados consolidados guardados en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\consolidated_13052025.json
2025-05-21 11:12:22,475 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-05-21 11:12:22,506 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-05-21 11:12:22,506 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-05-21 11:12:22,506 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-05-21 11:12:22,507 - semantic_cleaner - INFO - Extraídos 8 textos de HTML
2025-05-21 11:12:22,508 - semantic_cleaner - INFO - Extraídos 6 textos de imágenes
2025-05-21 11:12:22,508 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Se identificaron 18 grupos de textos similares
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Se seleccionaron 18 textos representativos
2025-05-21 11:12:25,838 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-05-21 11:12:25,838 - main_orchestrator - INFO - Guardando JSON limpio en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.json
2025-05-21 11:12:25,838 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.json
2025-05-21 11:12:25,838 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,856 - markdown_converter - INFO - Archivo Markdown guardado en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Datos guardados en JSON: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Estadísticas guardadas: C:\Jerson\SUNASS\2025\5_May\NewsAgent\input\Stats\stats_13052025.json
2025-05-21 11:12:25,856 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-05-21T11:12:22.429195', 'date_processed': '13052025', 'total_urls_in_pdf': 18, 'new_urls_processed_count': 18, 'history_total_urls': 461, 'categories': {'html': 9, 'images': 8, 'social': 1}, 'html_processing': {'attempted': 9, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 3, 'average_relevance': 0.325}, 'image_processing': {'attempted_download': 8, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 6}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.05, 'pdf_text_extraction': 2.15, 'image_download': 12.35, 'html_scraping': 5.43, 'image_api': 259.3, 'facebook_processing': 19.01, 'facebook_text_extraction': 2.15, 'stats_consolidation': 0.0, 'semantic_cleaning': 3.38}}
2025-05-21 11:12:25,856 - main_orchestrator - INFO - Limpieza semántica completada en 3.38 seg.
2025-05-21 11:12:25,856 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-05-21 11:12:25,856 - facebook_extractor_fix - INFO - Ruta del proyecto: C:\Jerson\SUNASS\2025\5_May\NewsAgent
2025-05-21 11:12:25,856 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\facebook_texts_13052025.json
2025-05-21 11:12:25,886 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/129ao7WKti2/
2025-05-21 11:12:25,886 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-05-21 11:12:25,919 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo C:\Jerson\SUNASS\2025\5_May\NewsAgent\output\clean\clean_13052025.md
2025-05-21 11:12:25,920 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-05-21 11:12:25,920 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-05-21 11:12:25,920 - main_orchestrator - INFO - --- Limpieza Final ---
2025-05-21 11:12:25,923 - main_orchestrator - INFO - ==================================================
2025-05-21 11:12:25,925 - main_orchestrator - INFO - PIPELINE FINALIZADO en 327.42 segundos.
2025-05-21 11:12:25,925 - main_orchestrator - INFO - ==================================================
2025-07-20 19:56:12,513 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-20 19:56:12,518 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-20 19:56:12,519 - main_orchestrator - INFO - Se usará la fecha proporcionada: 16042025
2025-07-20 19:56:12,519 - main_orchestrator - INFO - ==================================================
2025-07-20 19:56:12,520 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-20 19:56:12,520 - main_orchestrator - INFO - Usando fecha: 16042025
2025-07-20 19:56:12,520 - main_orchestrator - INFO - ==================================================
2025-07-20 19:56:12,522 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-20 19:56:12,523 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-20 19:56:12,524 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-20 19:56:12,525 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 461 URLs.
2025-07-20 19:56:12,526 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-20 19:56:12,526 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-20 19:56:12,526 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-20 19:56:12,527 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-20 19:56:12,527 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-20 19:56:12,527 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-20 19:56:12,566 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-20 19:56:12,872 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-07-20 19:56:12,872 - main_orchestrator - INFO - PDF procesado en 0.35 seg. Enlaces encontrados: 59
2025-07-20 19:56:12,878 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_16042025.csv
2025-07-20 19:56:12,878 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-20 19:56:12,879 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-20 19:56:12,917 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-20 19:56:12,917 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-07-20 19:56:12,917 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-20 19:56:12,917 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-20 19:56:12,918 - main_orchestrator - INFO - URLs nuevas para procesar: 59 (de 59 total)
2025-07-20 19:56:12,918 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-20 19:56:12,920 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-20 19:56:12,920 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-20 19:56:12,920 - content_deduplicator - INFO - Analizando 59 URLs para encontrar duplicados...
2025-07-20 19:56:12,922 - content_deduplicator - WARNING - Demasiados dominios (26). Limitando a los 20 más grandes.
2025-07-20 19:56:12,922 - content_deduplicator - INFO - Procesando 12 URLs del dominio imacorpplataforma.com
2025-07-20 19:56:12,969 - content_deduplicator - INFO - Procesando 9 URLs del dominio facebook.com
2025-07-20 19:56:12,970 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/watch/?mibextid=wwXIfr&v=3007796432728360&rdid=dwTFhLT54rEu7lo1 (tipo: facebook)
2025-07-20 19:56:56,579 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/watch/?mibextid=wwXIfr&v=3007796432728360&rdid=dwTFhLT54rEu7lo1
2025-07-20 19:56:56,701 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639 (tipo: facebook)
2025-07-20 19:57:01,752 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-07-20 19:57:01,873 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654 (tipo: facebook)
2025-07-20 19:57:07,236 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654
2025-07-20 19:57:07,346 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737 (tipo: facebook)
2025-07-20 19:57:12,356 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737
2025-07-20 19:57:12,465 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648 (tipo: facebook)
2025-07-20 19:57:17,477 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648
2025-07-20 19:57:17,584 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02jjxa5vMavsFyt2VVpMfg7aLimbMDQw21agnBHdsiyWfSL6BomtXekrcmNyiKkviNl&id=100062993063417 (tipo: facebook)
2025-07-20 19:57:22,630 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02jjxa5vMavsFyt2VVpMfg7aLimbMDQw21agnBHdsiyWfSL6BomtXekrcmNyiKkviNl&id=100062993063417
2025-07-20 19:57:22,736 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02ozZBtnBo2bLjaHnXZ4TTZygwN3fjLhwdZEwab7R7vyUj8k8DKoUsC4rey5YfaEbel&id=100072108931277 (tipo: facebook)
2025-07-20 19:57:27,876 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02ozZBtnBo2bLjaHnXZ4TTZygwN3fjLhwdZEwab7R7vyUj8k8DKoUsC4rey5YfaEbel&id=100072108931277
2025-07-20 19:57:27,976 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/15kkoxxenF/ (tipo: facebook)
2025-07-20 19:57:33,203 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/15kkoxxenF/
2025-07-20 19:57:33,320 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/larepublicanorte/posts/980634487518628 (tipo: facebook)
2025-07-20 19:57:38,452 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/larepublicanorte/posts/980634487518628
2025-07-20 19:57:38,578 - content_deduplicator - INFO - Progreso: 20/59 URLs procesadas en 85.66 seg.
2025-07-20 19:57:38,580 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtube.com
2025-07-20 19:57:38,580 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=IETbsSm-ka0 (tipo: youtube)
2025-07-20 19:57:45,364 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=XxWSnIdKpgo (tipo: youtube)
2025-07-20 19:57:52,732 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=Wg_fniNRtZU (tipo: youtube)
2025-07-20 19:57:59,445 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=mWX5lCvG6jA (tipo: youtube)
2025-07-20 19:58:06,267 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=0KNyQrBXD3w (tipo: youtube)
2025-07-20 19:58:13,058 - content_deduplicator - INFO - Procesando 3 URLs del dominio radioondaazul.com
2025-07-20 19:58:13,058 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radioondaazul.com/sunass-exige-a-eps-transparentar-recibos-con-informacion-clave-para-usuarios/ (tipo: other)
2025-07-20 19:58:19,371 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radioondaazul.com/melgar-exige-mas-presupuesto-para-saneamiento-y-vivienda/ (tipo: other)
2025-07-20 19:58:25,731 - content_deduplicator - INFO - Procesando 3 URLs del dominio com.pe
2025-07-20 19:58:25,731 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariosinfronteras.com.pe/2025/04/14/arequipa-usuarios-sedapar-desconocen-consumo-agua/ (tipo: news)
2025-07-20 19:58:41,066 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/ministerio-de-economia-no-responde-y-retrasa-entrega-de-agua-potable-en-yanama/ (tipo: other)
2025-07-20 19:58:49,624 - content_deduplicator - INFO - Procesando 2 URLs del dominio elperuano.pe
2025-07-20 19:58:49,625 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391206-1 (tipo: news)
2025-07-20 19:58:56,811 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2391177-1 (tipo: news)
2025-07-20 19:59:03,639 - content_deduplicator - INFO - Procesando 2 URLs del dominio larepublica.pe
2025-07-20 19:59:03,640 - selenium_extractor - INFO - Extrayendo contenido de URL: https://larepublica.pe/sociedad/2025/04/14/iquitos-padres-de-familia-bloquean-avenida-por-inundacion-y-colapso-de-desagues-en-colegio-466536 (tipo: news)
2025-07-20 19:59:08,130 - selenium_extractor - INFO - Extrayendo contenido de URL: https://larepublica.pe/sociedad/2025/04/14/trujillo-y-distritos-de-la-libertad-tendran-cortes-de-agua-por-limpieza-de-reservorios-de-sedalib-hasta-mayo-zonas-y-horarios-afectados-1105202 (tipo: news)
2025-07-20 19:59:12,557 - content_deduplicator - INFO - Procesando 2 URLs del dominio gob.pe
2025-07-20 19:59:12,557 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.defensoria.gob.pe/defensoria-del-pueblo-advierte-afectacion-a-la-salud-de-alumnos-del-caserio-de-eureka-por-consumo-de-agua-con-arsenico/ (tipo: other)
2025-07-20 19:59:18,650 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1146926-ministerio-de-vivienda-asegura-viabilidad-de-proyectos-de-saneamiento-que-no-causen-impactos-significativos-en-areas-protegidas (tipo: other)
2025-07-20 19:59:25,933 - content_deduplicator - INFO - Procesando 2 URLs del dominio google.com
2025-07-20 19:59:25,933 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/1jrs2QUhhDxi3BfJjKez-MEHXpQJbWFDR/view?usp=sharing (tipo: other)
2025-07-20 19:59:32,513 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/1lgCOSO087iNeohzQ1VNYr3dEY4-n0Qal/view?usp=sharing (tipo: other)
2025-07-20 19:59:39,222 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-07-20 19:59:39,222 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/sedalib-inicia-limpieza-y-desinfeccion-de-54-reservorios-en-ocho-distritos-de-la-provincia-de-trujillo-la-libertad-peru-noticia/?ref=dcr (tipo: news)
2025-07-20 19:59:46,503 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/caserio-de-shiracmaca-tendra-agua-de-calidad-para-su-consumo-la-libertad-peru-noticia/ (tipo: news)
2025-07-20 19:59:53,837 - content_deduplicator - INFO - Progreso: 40/59 URLs procesadas en 220.92 seg.
2025-07-20 19:59:53,837 - content_deduplicator - INFO - Procesando 2 URLs del dominio andina.pe
2025-07-20 19:59:53,838 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-ejecucion-inversion-publica-tres-niveles-gobierno-supero-los-s-11200-millones-1026128.aspx (tipo: news)
2025-07-20 20:00:10,005 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-lambayeque-participacion-las-comunidades-fue-clave-la-recuperacion-bosques-secos-1026225.aspx (tipo: news)
2025-07-20 20:00:21,763 - content_deduplicator - INFO - Análisis completado en 248.84 segundos
2025-07-20 20:00:21,763 - content_deduplicator - INFO - URLs totales: 59, Únicas: 41, En grupos: 10
2025-07-20 20:00:21,763 - content_deduplicator - INFO - Se realizaron 92 comparaciones (0.4/seg), evitando 4
2025-07-20 20:00:21,764 - content_deduplicator - INFO - Grupos de duplicados encontrados: 3
2025-07-20 20:00:21,764 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-20 20:00:21,764 - main_orchestrator - INFO - Análisis de duplicados completado: 13 URLs duplicadas filtradas
2025-07-20 20:00:21,764 - main_orchestrator - INFO - URLs después de filtrar duplicados: 46
2025-07-20 20:00:21,764 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-20 20:00:21,765 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-20 20:00:21,766 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-20 20:00:21,766 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-20 20:00:21,772 - lib.url_manager - INFO - Clasificación de 46 URLs:
2025-07-20 20:00:21,772 - lib.url_manager - INFO -  - HTML: 25
2025-07-20 20:00:21,772 - lib.url_manager - INFO -  - IMAGES: 12
2025-07-20 20:00:21,773 - lib.url_manager - INFO -  - SOCIAL: 9
2025-07-20 20:00:21,774 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_16042025_unprocessed.json
2025-07-20 20:00:21,776 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_16042025_unprocessed.json
2025-07-20 20:00:21,776 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-20 20:00:21,777 - lib.image_processor - INFO - Iniciando descarga paralela de 12 imágenes para la fecha 16042025...
2025-07-20 20:00:22,747 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/04/16-04-2025-RPP-MONICA-MUNOZ-NAJAR-COMENTA-CIFRAS-DE-SUNASS-PARA-CERRAR-BRECHA-DE-AGUA-Y-SANEAMIENTO-QUE-SUMA-138-MIL-SOLES.mp3 contiene audio/mpeg, no una imagen. Se descargará pero no se procesará con la API.
2025-07-20 20:00:22,894 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_94815644_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (185015 bytes)
2025-07-20 20:00:23,042 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_3ce873be_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (297977 bytes)
2025-07-20 20:00:23,214 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_135386b4_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (329609 bytes)
2025-07-20 20:00:23,228 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_5872ca8a_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (396505 bytes)
2025-07-20 20:00:23,239 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_edfc8ed9_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (284407 bytes)
2025-07-20 20:00:23,330 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_9b807dd9_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (707746 bytes)
2025-07-20 20:00:23,528 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_f5bc9928_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (1049210 bytes)
2025-07-20 20:00:23,537 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_1e67714b_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (951901 bytes)
2025-07-20 20:00:23,572 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_2e3ad109_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (1054067 bytes)
2025-07-20 20:00:23,945 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_141a2c9a_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (1040422 bytes)
2025-07-20 20:00:23,968 - lib.image_processor - INFO - Imagen 12 guardada como 'img_12_bb44165b_16042025.jpg' en /home/erick/NewsAgent/input/Images/downloads/16042025 (159855 bytes)
2025-07-20 20:00:24,369 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_bd4e765a_16042025.mp3' en /home/erick/NewsAgent/input/Images/downloads/16042025 (2109336 bytes)
2025-07-20 20:00:24,407 - lib.image_processor - INFO - Progreso descarga imágenes: 10/12 en 2.63 seg.
2025-07-20 20:00:24,666 - lib.image_processor - INFO - Progreso descarga imágenes: 12/12 en 2.89 seg.
2025-07-20 20:00:24,668 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_16042025.json
2025-07-20 20:00:24,668 - lib.image_processor - INFO - Descarga de imágenes completada para 12/12 URLs en 2.89 segundos.
2025-07-20 20:00:24,668 - main_orchestrator - INFO - Descarga de imágenes completada en 2.89 seg.
2025-07-20 20:00:24,668 - lib.history_tracker - INFO - Añadidas 12 nuevas URLs al historial.
2025-07-20 20:00:24,670 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 473 URLs.
2025-07-20 20:00:24,671 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-20 20:00:24,671 - lib.html_scraper - INFO - Iniciando scraping paralelo de 25 URLs...
2025-07-20 20:00:30,277 - lib.html_scraper - INFO - Progreso: 20/25 URLs procesadas en 5.61 seg.
2025-07-20 20:00:46,416 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=3, read=2, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='lahora.pe', port=443): Read timed out. (read timeout=20)")': /ultimas-noticias/no-al-alza-en-recibos-de-agua-piura-ciudadanos-rechazan-posible-alza-en-la-tarifa-del-agua/
2025-07-20 20:00:55,809 - lib.html_scraper - INFO - Progreso: 25/25 URLs procesadas en 31.14 seg.
2025-07-20 20:00:55,812 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-20 20:00:55,813 - lib.html_scraper - INFO - Scraping completado para 25/25 URLs en 31.14 segundos.
2025-07-20 20:00:55,813 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-20 20:00:55,813 - main_orchestrator - INFO - Scraping HTML completado en 31.14 seg.
2025-07-20 20:00:55,813 - lib.history_tracker - INFO - Añadidas 23 nuevas URLs al historial.
2025-07-20 20:00:55,814 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 496 URLs.
2025-07-20 20:00:55,814 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-20 20:00:58,089 - lib.api_client - INFO - Texto extraído de tmprlka8_98.jpg (4 chars).
2025-07-20 20:00:58,089 - lib.image_processor - INFO - Procesando 12 imágenes con API (batch_size=3, pausa=60s)
2025-07-20 20:00:58,090 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-07-20 20:00:58,090 - lib.image_processor - INFO - Procesando imagen con API: img_9_94815644_16042025.jpg
2025-07-20 20:01:06,384 - lib.api_client - INFO - Texto extraído de img_9_94815644_16042025.jpg (2101 chars).
2025-07-20 20:01:07,927 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_94815644_16042025.jpg
2025-07-20 20:01:08,720 - lib.image_processor - INFO - Procesando imagen con API: img_4_edfc8ed9_16042025.jpg
2025-07-20 20:01:15,014 - lib.api_client - INFO - Texto extraído de img_4_edfc8ed9_16042025.jpg (1248 chars).
2025-07-20 20:01:17,965 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_edfc8ed9_16042025.jpg
2025-07-20 20:01:18,838 - lib.image_processor - INFO - Procesando imagen con API: img_8_3ce873be_16042025.jpg
2025-07-20 20:01:24,730 - lib.api_client - INFO - Texto extraído de img_8_3ce873be_16042025.jpg (1127 chars).
2025-07-20 20:01:27,570 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_3ce873be_16042025.jpg
2025-07-20 20:01:28,490 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-20 20:02:28,542 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-07-20 20:02:28,542 - lib.image_processor - INFO - Procesando imagen con API: img_6_9b807dd9_16042025.jpg
2025-07-20 20:02:33,712 - lib.api_client - INFO - Texto extraído de img_6_9b807dd9_16042025.jpg (899 chars).
2025-07-20 20:02:35,946 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_9b807dd9_16042025.jpg
2025-07-20 20:02:36,790 - lib.image_processor - INFO - Procesando imagen con API: img_5_5872ca8a_16042025.jpg
2025-07-20 20:02:41,700 - lib.api_client - INFO - Texto extraído de img_5_5872ca8a_16042025.jpg (890 chars).
2025-07-20 20:02:43,659 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_5872ca8a_16042025.jpg
2025-07-20 20:02:44,623 - lib.image_processor - INFO - Procesando imagen con API: img_7_135386b4_16042025.jpg
2025-07-20 20:03:07,395 - lib.api_client - INFO - Texto extraído de img_7_135386b4_16042025.jpg (6442 chars).
2025-07-20 20:03:08,764 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_135386b4_16042025.jpg
2025-07-20 20:03:09,445 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-20 20:04:09,465 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-07-20 20:04:09,465 - lib.image_processor - INFO - Procesando imagen con API: img_2_1e67714b_16042025.jpg
2025-07-20 20:04:18,815 - lib.api_client - INFO - Texto extraído de img_2_1e67714b_16042025.jpg (1995 chars).
2025-07-20 20:04:20,330 - lib.image_processor - INFO - Imagen procesada exitosamente: img_2_1e67714b_16042025.jpg
2025-07-20 20:04:20,981 - lib.image_processor - INFO - Procesando imagen con API: img_10_2e3ad109_16042025.jpg
2025-07-20 20:04:31,437 - lib.api_client - INFO - Texto extraído de img_10_2e3ad109_16042025.jpg (2469 chars).
2025-07-20 20:04:32,951 - lib.image_processor - INFO - Imagen procesada exitosamente: img_10_2e3ad109_16042025.jpg
2025-07-20 20:04:33,644 - lib.image_processor - INFO - Procesando imagen con API: img_3_f5bc9928_16042025.jpg
2025-07-20 20:05:05,294 - lib.api_client - INFO - Texto extraído de img_3_f5bc9928_16042025.jpg (9030 chars).
2025-07-20 20:05:07,912 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_f5bc9928_16042025.jpg
2025-07-20 20:05:08,843 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-20 20:06:08,883 - lib.image_processor - INFO - Procesando batch 4 (3 imágenes)
2025-07-20 20:06:08,884 - lib.image_processor - INFO - Procesando imagen con API: img_11_141a2c9a_16042025.jpg
2025-07-20 20:06:32,408 - lib.api_client - INFO - Texto extraído de img_11_141a2c9a_16042025.jpg (7143 chars).
2025-07-20 20:06:35,228 - lib.image_processor - INFO - Imagen procesada exitosamente: img_11_141a2c9a_16042025.jpg
2025-07-20 20:06:36,174 - lib.image_processor - INFO - Procesando imagen con API: img_12_bb44165b_16042025.jpg
2025-07-20 20:06:42,324 - lib.api_client - INFO - Texto extraído de img_12_bb44165b_16042025.jpg (1385 chars).
2025-07-20 20:06:43,981 - lib.image_processor - INFO - Imagen procesada exitosamente: img_12_bb44165b_16042025.jpg
2025-07-20 20:06:44,944 - lib.image_processor - INFO - Procesando imagen con API: img_1_bd4e765a_16042025.mp3
2025-07-20 20:06:44,944 - lib.image_processor - WARNING - Archivo multimedia detectado por extensión: /home/erick/NewsAgent/input/Images/downloads/16042025/img_1_bd4e765a_16042025.mp3
2025-07-20 20:06:44,944 - lib.image_processor - WARNING - Error procesando imagen img_1_bd4e765a_16042025.mp3: File is multimedia content, not an image
2025-07-20 20:06:45,781 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/16042025/texto_imagenes_api.json
2025-07-20 20:06:45,781 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/16042025/texto_imagenes_api.json
2025-07-20 20:06:45,782 - lib.image_processor - INFO - Procesamiento API completado para 11/12 imágenes en 347.69 segundos.
2025-07-20 20:06:45,782 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 349.97 seg.
2025-07-20 20:06:45,782 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-20 20:06:45,782 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-07-20 20:06:45,783 - main_orchestrator - INFO - Encontradas 4 URLs de Facebook para procesar
2025-07-20 20:06:45,783 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-20 20:06:45,783 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 4 URLs de Facebook para la fecha 16042025...
2025-07-20 20:06:45,785 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/v/15kkoxxenF/
2025-07-20 20:06:45,785 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-07-20 20:06:45,785 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/watch/?mibextid=wwXIfr&v=3007796432728360&rdid=dwTFhLT54rEu7lo1
2025-07-20 20:06:45,786 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/larepublicanorte/posts/980634487518628
2025-07-20 20:07:03,100 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-2.pdf
2025-07-20 20:07:05,358 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-4.pdf
2025-07-20 20:07:06,763 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-3.pdf
2025-07-20 20:07:07,676 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-20 20:07:10,989 - lib.facebook_processor - INFO - Progreso Facebook: 4/4 en 25.21 seg.
2025-07-20 20:07:10,990 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_16042025.json
2025-07-20 20:07:10,990 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 4/4 exitosos en 25.21 segundos.
2025-07-20 20:07:10,990 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 25.21 seg.
2025-07-20 20:07:10,990 - lib.history_tracker - INFO - Añadidas 4 nuevas URLs al historial.
2025-07-20 20:07:10,992 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 500 URLs.
2025-07-20 20:07:10,992 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-20 20:07:11,115 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-2.pdf
2025-07-20 20:07:11,200 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-4.pdf
2025-07-20 20:07:11,375 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-3.pdf
2025-07-20 20:07:11,444 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-20 20:07:11,445 - lib.facebook_processor - INFO - Texto extraído de 4 PDFs de Facebook
2025-07-20 20:07:11,446 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.45 seg.
2025-07-20 20:07:11,446 - main_orchestrator - INFO - Texto extraído de 4 PDFs de Facebook
2025-07-20 20:07:11,447 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-20 20:07:11,447 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-20 20:07:11,447 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-20 20:07:11,448 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-20 20:07:11,448 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-20 20:07:11,448 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-20T20:07:11.448031', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 46, 'history_total_urls': 500, 'categories': {'html': 25, 'images': 12, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 13, 'average_relevance': 0.48260869565217396}, 'image_processing': {'attempted_download': 12, 'successful_download': 12, 'attempted_api': 12, 'successful_api': 11}, 'facebook_processing': {'attempted': 4, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.35, 'pdf_text_extraction': 0.45, 'image_download': 2.89, 'html_scraping': 31.14, 'image_api': 349.97, 'facebook_processing': 25.21, 'facebook_text_extraction': 0.45, 'stats_consolidation': 0.0}}
2025-07-20 20:07:11,448 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-20 20:07:11,449 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-20 20:07:11,449 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-20 20:07:11,449 - main_orchestrator - INFO - Procesando 11 textos de imágenes para consolidación
2025-07-20 20:07:11,454 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-20 20:07:11,454 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-20 20:07:11,455 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-20 20:07:11,457 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-20 20:07:11,457 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-20 20:07:11,457 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-07-20 20:07:11,458 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-07-20 20:07:11,458 - semantic_cleaner - INFO - Extraídos 11 textos de imágenes
2025-07-20 20:07:11,458 - semantic_cleaner - INFO - Extraídos 4 textos de Facebook
2025-07-20 20:07:25,278 - semantic_cleaner - INFO - Se identificaron 44 grupos de textos similares
2025-07-20 20:07:25,279 - semantic_cleaner - INFO - Se seleccionaron 44 textos representativos
2025-07-20 20:07:25,280 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-20 20:07:25,280 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-20 20:07:25,286 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-20 20:07:25,286 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-20 20:07:25,297 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-20 20:07:25,298 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-20 20:07:25,298 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-20 20:07:25,299 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-20T20:07:11.448031', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 46, 'history_total_urls': 500, 'categories': {'html': 25, 'images': 12, 'social': 9}, 'html_processing': {'attempted': 25, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 13, 'average_relevance': 0.48260869565217396}, 'image_processing': {'attempted_download': 12, 'successful_download': 12, 'attempted_api': 12, 'successful_api': 11}, 'facebook_processing': {'attempted': 4, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.35, 'pdf_text_extraction': 0.45, 'image_download': 2.89, 'html_scraping': 31.14, 'image_api': 349.97, 'facebook_processing': 25.21, 'facebook_text_extraction': 0.45, 'stats_consolidation': 0.0, 'semantic_cleaning': 13.84}}
2025-07-20 20:07:25,299 - main_orchestrator - INFO - Limpieza semántica completada en 13.84 seg.
2025-07-20 20:07:25,299 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-20 20:07:25,300 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-20 20:07:25,300 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-20 20:07:25,306 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid09ACxxwnwvhgHhbqkGtJUuECu47dMTUFvPWAfCeP7tFNBhh7M9mdYm5SVfb2rtsDPl&id=100063616446639
2025-07-20 20:07:25,306 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-20 20:07:25,307 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-20 20:07:25,308 - facebook_extractor_fix - INFO - Se han añadido 4 textos de Facebook al archivo limpio
2025-07-20 20:07:25,308 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-20 20:07:25,308 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-20 20:07:25,309 - main_orchestrator - INFO - ==================================================
2025-07-20 20:07:25,309 - main_orchestrator - INFO - PIPELINE FINALIZADO en 672.79 segundos.
2025-07-20 20:07:25,309 - main_orchestrator - INFO - ==================================================
2025-07-21 10:48:26,111 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 10:48:26,115 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 10:48:26,117 - main_orchestrator - INFO - Se usará la fecha proporcionada: 16042025
2025-07-21 10:48:26,117 - main_orchestrator - INFO - ==================================================
2025-07-21 10:48:26,117 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 10:48:26,117 - main_orchestrator - INFO - Usando fecha: 16042025
2025-07-21 10:48:26,117 - main_orchestrator - INFO - ==================================================
2025-07-21 10:48:26,122 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 10:48:26,125 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 10:48:26,125 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 10:48:26,126 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 500 URLs.
2025-07-21 10:48:26,127 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 10:48:26,128 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 10:48:26,128 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 10:48:26,128 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 10:48:26,128 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 10:48:26,129 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 10:48:26,167 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:48:26,439 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-07-21 10:48:26,439 - main_orchestrator - INFO - PDF procesado en 0.31 seg. Enlaces encontrados: 59
2025-07-21 10:48:26,451 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_16042025.csv
2025-07-21 10:48:26,451 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 10:48:26,452 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:48:26,499 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:48:26,502 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-07-21 10:48:26,503 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:48:26,504 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 10:48:26,504 - lib.history_tracker - INFO - Filtradas 41 URLs ya procesadas del lote actual.
2025-07-21 10:48:26,505 - main_orchestrator - INFO - URLs nuevas para procesar: 18 (de 59 total)
2025-07-21 10:48:26,505 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 10:48:26,505 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 10:48:26,508 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 10:48:26,509 - content_deduplicator - INFO - Analizando 18 URLs para encontrar duplicados...
2025-07-21 10:48:26,509 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtube.com
2025-07-21 10:48:26,518 - content_deduplicator - INFO - Procesando 5 URLs del dominio facebook.com
2025-07-21 10:48:26,524 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-07-21 10:48:26,524 - content_deduplicator - INFO - URLs totales: 18, Únicas: 13, En grupos: 5
2025-07-21 10:48:26,525 - content_deduplicator - INFO - Se realizaron 7 comparaciones (455.6/seg), evitando 4
2025-07-21 10:48:26,525 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-07-21 10:48:26,525 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:48:26,526 - main_orchestrator - INFO - Análisis de duplicados completado: 4 URLs duplicadas filtradas
2025-07-21 10:48:26,526 - main_orchestrator - INFO - URLs después de filtrar duplicados: 14
2025-07-21 10:48:26,526 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:48:26,526 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 10:48:26,526 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 10:48:26,526 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 10:48:26,528 - lib.url_manager - INFO - Clasificación de 14 URLs:
2025-07-21 10:48:26,528 - lib.url_manager - INFO -  - HTML: 8
2025-07-21 10:48:26,529 - lib.url_manager - INFO -  - SOCIAL: 6
2025-07-21 10:48:26,540 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_16042025_unprocessed.json
2025-07-21 10:48:26,541 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 10:48:26,541 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-21 10:48:26,541 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 10:48:26,541 - lib.html_scraper - INFO - Iniciando scraping paralelo de 8 URLs...
2025-07-21 10:48:30,707 - lib.html_scraper - INFO - Progreso: 8/8 URLs procesadas en 4.17 seg.
2025-07-21 10:48:30,709 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-21 10:48:30,709 - lib.html_scraper - INFO - Scraping completado para 8/8 URLs en 4.17 segundos.
2025-07-21 10:48:30,710 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-21 10:48:30,710 - main_orchestrator - INFO - Scraping HTML completado en 4.17 seg.
2025-07-21 10:48:30,710 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-07-21 10:48:30,711 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 508 URLs.
2025-07-21 10:48:30,711 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 10:48:30,712 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-21 10:48:30,712 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 10:48:30,712 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-07-21 10:48:30,712 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-07-21 10:48:30,712 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 10:48:30,713 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 16042025...
2025-07-21 10:48:30,713 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654
2025-07-21 10:48:48,237 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:48:50,005 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 19.29 seg.
2025-07-21 10:48:50,007 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_16042025.json
2025-07-21 10:48:50,007 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 19.29 segundos.
2025-07-21 10:48:50,007 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 19.29 seg.
2025-07-21 10:48:50,007 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-21 10:48:50,009 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 509 URLs.
2025-07-21 10:48:50,010 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 10:48:50,107 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:48:50,108 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:48:50,108 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.10 seg.
2025-07-21 10:48:50,108 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:48:50,109 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:48:50,109 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:48:50,109 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 10:48:50,110 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:48:50,110 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:48:50,110 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:48:50.109794', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 14, 'history_total_urls': 509, 'categories': {'html': 8, 'social': 6}, 'html_processing': {'attempted': 8, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 5, 'average_relevance': 0.5375000000000001}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.31, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 4.17, 'image_api': 0, 'facebook_processing': 19.29, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-07-21 10:48:50,110 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 10:48:50,110 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 10:48:50,112 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/16042025/texto_imagenes_api.json
2025-07-21 10:48:50,112 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:48:50,112 - main_orchestrator - INFO - Procesando 11 textos de imágenes para consolidación
2025-07-21 10:48:50,116 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:48:50,116 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:48:50,116 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 10:48:50,120 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 10:48:50,120 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 10:48:50,120 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-07-21 10:48:50,121 - semantic_cleaner - INFO - Extraídos 8 textos de HTML
2025-07-21 10:48:50,121 - semantic_cleaner - INFO - Extraídos 11 textos de imágenes
2025-07-21 10:48:50,121 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-07-21 10:48:56,995 - semantic_cleaner - INFO - Se identificaron 26 grupos de textos similares
2025-07-21 10:48:56,995 - semantic_cleaner - INFO - Se seleccionaron 26 textos representativos
2025-07-21 10:48:56,995 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 10:48:56,995 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:48:56,998 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:48:56,999 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:48:57,003 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:48:57,004 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:48:57,004 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:48:57,005 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:48:50.109794', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 14, 'history_total_urls': 509, 'categories': {'html': 8, 'social': 6}, 'html_processing': {'attempted': 8, 'processed': 8, 'successful': 8, 'relevant (>=0.3)': 5, 'average_relevance': 0.5375000000000001}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.31, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 4.17, 'image_api': 0, 'facebook_processing': 19.29, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 6.89}}
2025-07-21 10:48:57,005 - main_orchestrator - INFO - Limpieza semántica completada en 6.89 seg.
2025-07-21 10:48:57,005 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 10:48:57,006 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 10:48:57,007 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:48:57,010 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0gx7Pg2NrMZca5bR3hwTVSh6FSZuDwqa2fesjxWk7KCiUni3vohjaSj6fW4M3MUKkl&id=100065273659654
2025-07-21 10:48:57,011 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 10:48:57,011 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:48:57,012 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-07-21 10:48:57,012 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 10:48:57,013 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 10:48:57,013 - main_orchestrator - INFO - ==================================================
2025-07-21 10:48:57,013 - main_orchestrator - INFO - PIPELINE FINALIZADO en 30.90 segundos.
2025-07-21 10:48:57,013 - main_orchestrator - INFO - ==================================================
2025-07-21 10:49:44,487 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 10:49:44,490 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 10:49:44,491 - main_orchestrator - INFO - Se usará la fecha proporcionada: 16042025
2025-07-21 10:49:44,491 - main_orchestrator - INFO - ==================================================
2025-07-21 10:49:44,492 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 10:49:44,492 - main_orchestrator - INFO - Usando fecha: 16042025
2025-07-21 10:49:44,492 - main_orchestrator - INFO - ==================================================
2025-07-21 10:49:44,494 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 10:49:44,496 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 10:49:44,496 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 10:49:44,497 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 509 URLs.
2025-07-21 10:49:44,497 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 10:49:44,498 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 10:49:44,498 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 10:49:44,499 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 10:49:44,499 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 10:49:44,499 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 10:49:44,501 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:49:44,886 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-07-21 10:49:44,887 - main_orchestrator - INFO - PDF procesado en 0.39 seg. Enlaces encontrados: 59
2025-07-21 10:49:44,894 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_16042025.csv
2025-07-21 10:49:44,894 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 10:49:44,896 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:49:44,956 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:49:44,956 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-07-21 10:49:44,957 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:49:44,957 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 10:49:44,957 - lib.history_tracker - INFO - Filtradas 50 URLs ya procesadas del lote actual.
2025-07-21 10:49:44,957 - main_orchestrator - INFO - URLs nuevas para procesar: 9 (de 59 total)
2025-07-21 10:49:44,957 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 10:49:44,958 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 10:49:44,959 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 10:49:44,959 - content_deduplicator - INFO - Analizando 9 URLs para encontrar duplicados...
2025-07-21 10:49:44,960 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtube.com
2025-07-21 10:49:44,963 - content_deduplicator - INFO - Procesando 4 URLs del dominio facebook.com
2025-07-21 10:49:44,966 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-07-21 10:49:44,966 - content_deduplicator - INFO - URLs totales: 9, Únicas: 5, En grupos: 4
2025-07-21 10:49:44,966 - content_deduplicator - INFO - Se realizaron 6 comparaciones (933.2/seg), evitando 4
2025-07-21 10:49:44,966 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-07-21 10:49:44,967 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:49:44,969 - main_orchestrator - INFO - Análisis de duplicados completado: 3 URLs duplicadas filtradas
2025-07-21 10:49:44,970 - main_orchestrator - INFO - URLs después de filtrar duplicados: 6
2025-07-21 10:49:44,970 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:49:44,970 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 10:49:44,971 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 10:49:44,971 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 10:49:44,971 - lib.url_manager - INFO - Clasificación de 6 URLs:
2025-07-21 10:49:44,972 - lib.url_manager - INFO -  - SOCIAL: 6
2025-07-21 10:49:44,973 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_16042025_unprocessed.json
2025-07-21 10:49:44,973 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 10:49:44,974 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-21 10:49:44,975 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 10:49:44,975 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-21 10:49:44,975 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 10:49:44,975 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-21 10:49:44,976 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 10:49:44,976 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-07-21 10:49:44,976 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-07-21 10:49:44,977 - main_orchestrator - INFO - Creado directorio para PDFs: /home/erick/NewsAgent/base/16042025
2025-07-21 10:49:44,977 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 10:49:44,978 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 16042025...
2025-07-21 10:49:44,979 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737
2025-07-21 10:49:59,723 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:50:03,221 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 18.24 seg.
2025-07-21 10:50:03,222 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_16042025.json
2025-07-21 10:50:03,222 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 18.24 segundos.
2025-07-21 10:50:03,222 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 18.25 seg.
2025-07-21 10:50:03,222 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-21 10:50:03,228 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 510 URLs.
2025-07-21 10:50:03,228 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 10:50:03,436 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:50:03,436 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:50:03,437 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.21 seg.
2025-07-21 10:50:03,437 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:50:03,442 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:50:03,442 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:50:03,442 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 10:50:03,443 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:50:03,443 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:50:03,444 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:50:03.443138', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 6, 'history_total_urls': 510, 'categories': {'social': 6}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.39, 'pdf_text_extraction': 0.21, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 18.25, 'facebook_text_extraction': 0.21, 'stats_consolidation': 0.0}}
2025-07-21 10:50:03,444 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 10:50:03,444 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 10:50:03,444 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-21 10:50:03,445 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/16042025/texto_imagenes_api.json
2025-07-21 10:50:03,446 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:50:03,446 - main_orchestrator - INFO - Procesando 11 textos de imágenes para consolidación
2025-07-21 10:50:03,450 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:50:03,450 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:50:03,450 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 10:50:03,453 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 10:50:03,453 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 10:50:03,453 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-07-21 10:50:03,453 - semantic_cleaner - INFO - Extraídos 8 textos de HTML
2025-07-21 10:50:03,453 - semantic_cleaner - INFO - Extraídos 11 textos de imágenes
2025-07-21 10:50:03,454 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-07-21 10:50:12,409 - semantic_cleaner - INFO - Se identificaron 26 grupos de textos similares
2025-07-21 10:50:12,409 - semantic_cleaner - INFO - Se seleccionaron 26 textos representativos
2025-07-21 10:50:12,410 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 10:50:12,410 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:50:12,413 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:50:12,413 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:50:12,418 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:50:12,419 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:50:12,419 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:50:12,419 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:50:03.443138', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 6, 'history_total_urls': 510, 'categories': {'social': 6}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.39, 'pdf_text_extraction': 0.21, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 18.25, 'facebook_text_extraction': 0.21, 'stats_consolidation': 0.0, 'semantic_cleaning': 8.97}}
2025-07-21 10:50:12,419 - main_orchestrator - INFO - Limpieza semántica completada en 8.97 seg.
2025-07-21 10:50:12,420 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 10:50:12,420 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 10:50:12,420 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:50:12,426 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid0d1rwcSyt4kFugPvuGnZUvZE7nbwY34VvAXYZk54edPc2mJgs2dEXcDCwjqhexj1pl&id=100064089484737
2025-07-21 10:50:12,426 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 10:50:12,427 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:50:12,427 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-07-21 10:50:12,427 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 10:50:12,427 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 10:50:12,428 - main_orchestrator - INFO - ==================================================
2025-07-21 10:50:12,428 - main_orchestrator - INFO - PIPELINE FINALIZADO en 27.94 segundos.
2025-07-21 10:50:12,428 - main_orchestrator - INFO - ==================================================
2025-07-21 10:53:28,092 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 10:53:28,093 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 10:53:28,094 - main_orchestrator - INFO - Se usará la fecha proporcionada: 16042025
2025-07-21 10:53:28,094 - main_orchestrator - INFO - ==================================================
2025-07-21 10:53:28,094 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 10:53:28,094 - main_orchestrator - INFO - Usando fecha: 16042025
2025-07-21 10:53:28,094 - main_orchestrator - INFO - ==================================================
2025-07-21 10:53:28,096 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 10:53:28,098 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 10:53:28,099 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 10:53:28,100 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 510 URLs.
2025-07-21 10:53:28,100 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 10:53:28,101 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 10:53:28,102 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 10:53:28,102 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 10:53:28,103 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 10:53:28,103 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 10:53:28,105 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:53:28,344 - lib.pdf_processor - INFO - Se extrajeron 59 enlaces URI (no mailto) de 16042025.pdf.
2025-07-21 10:53:28,344 - main_orchestrator - INFO - PDF procesado en 0.24 seg. Enlaces encontrados: 59
2025-07-21 10:53:28,350 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_16042025.csv
2025-07-21 10:53:28,351 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 10:53:28,352 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/16042025.pdf (6 páginas)
2025-07-21 10:53:28,400 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:53:28,401 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 6 párrafos
2025-07-21 10:53:28,401 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:53:28,402 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 10:53:28,402 - lib.history_tracker - INFO - Filtradas 51 URLs ya procesadas del lote actual.
2025-07-21 10:53:28,402 - main_orchestrator - INFO - URLs nuevas para procesar: 8 (de 59 total)
2025-07-21 10:53:28,402 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 10:53:28,402 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 10:53:28,403 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 10:53:28,403 - content_deduplicator - INFO - Analizando 8 URLs para encontrar duplicados...
2025-07-21 10:53:28,404 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtube.com
2025-07-21 10:53:28,405 - content_deduplicator - INFO - Procesando 3 URLs del dominio facebook.com
2025-07-21 10:53:28,407 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-07-21 10:53:28,407 - content_deduplicator - INFO - URLs totales: 8, Únicas: 5, En grupos: 3
2025-07-21 10:53:28,407 - content_deduplicator - INFO - Se realizaron 5 comparaciones (1369.8/seg), evitando 4
2025-07-21 10:53:28,408 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-07-21 10:53:28,408 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:53:28,408 - main_orchestrator - INFO - Análisis de duplicados completado: 2 URLs duplicadas filtradas
2025-07-21 10:53:28,408 - main_orchestrator - INFO - URLs después de filtrar duplicados: 6
2025-07-21 10:53:28,408 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_16042025.json
2025-07-21 10:53:28,409 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 10:53:28,409 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 10:53:28,409 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 10:53:28,409 - lib.url_manager - INFO - Clasificación de 6 URLs:
2025-07-21 10:53:28,410 - lib.url_manager - INFO -  - SOCIAL: 6
2025-07-21 10:53:28,410 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_16042025_unprocessed.json
2025-07-21 10:53:28,411 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 10:53:28,411 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-21 10:53:28,411 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 10:53:28,412 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-21 10:53:28,412 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 10:53:28,412 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-21 10:53:28,413 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 10:53:28,413 - main_orchestrator - INFO - Leyendo archivo social para la fecha 16042025: social_links_16042025_unprocessed.json
2025-07-21 10:53:28,413 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-07-21 10:53:28,413 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 10:53:28,413 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 16042025...
2025-07-21 10:53:28,414 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648
2025-07-21 10:53:41,986 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:53:43,330 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 14.92 seg.
2025-07-21 10:53:43,331 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_16042025.json
2025-07-21 10:53:43,331 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 1/1 exitosos en 14.92 segundos.
2025-07-21 10:53:43,331 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 14.92 seg.
2025-07-21 10:53:43,331 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-21 10:53:43,333 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 511 URLs.
2025-07-21 10:53:43,333 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 10:53:43,441 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/16042025/16042025-1.pdf
2025-07-21 10:53:43,441 - lib.facebook_processor - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:53:43,441 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.11 seg.
2025-07-21 10:53:43,441 - main_orchestrator - INFO - Texto extraído de 1 PDFs de Facebook
2025-07-21 10:53:43,442 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:53:43,442 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:53:43,443 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 10:53:43,444 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:53:43,444 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:53:43,445 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:53:43.443504', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 6, 'history_total_urls': 511, 'categories': {'social': 6}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 14.92, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-07-21 10:53:43,445 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 10:53:43,446 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 10:53:43,447 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_16042025.json
2025-07-21 10:53:43,447 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/16042025/texto_imagenes_api.json
2025-07-21 10:53:43,448 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_16042025/pdf_text_16042025.json
2025-07-21 10:53:43,448 - main_orchestrator - INFO - Procesando 11 textos de imágenes para consolidación
2025-07-21 10:53:43,453 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:53:43,453 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_16042025.json
2025-07-21 10:53:43,453 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 10:53:43,457 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 10:53:43,457 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 10:53:43,458 - semantic_cleaner - INFO - Extraídos 6 textos de PDF
2025-07-21 10:53:43,458 - semantic_cleaner - INFO - Extraídos 8 textos de HTML
2025-07-21 10:53:43,458 - semantic_cleaner - INFO - Extraídos 11 textos de imágenes
2025-07-21 10:53:43,458 - semantic_cleaner - INFO - Extraídos 1 textos de Facebook
2025-07-21 10:53:52,164 - semantic_cleaner - INFO - Se identificaron 26 grupos de textos similares
2025-07-21 10:53:52,167 - semantic_cleaner - INFO - Se seleccionaron 26 textos representativos
2025-07-21 10:53:52,169 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 10:53:52,169 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:53:52,172 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_16042025.json
2025-07-21 10:53:52,173 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:53:52,193 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:53:52,194 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:53:52,195 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_16042025.json
2025-07-21 10:53:52,195 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T10:53:43.443504', 'date_processed': '16042025', 'total_urls_in_pdf': 59, 'new_urls_processed_count': 6, 'history_total_urls': 511, 'categories': {'social': 6}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 1, 'extracted_texts': 1}, 'timings_seconds': {'pdf_extraction': 0.24, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 14.92, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 8.74}}
2025-07-21 10:53:52,195 - main_orchestrator - INFO - Limpieza semántica completada en 8.74 seg.
2025-07-21 10:53:52,195 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 10:53:52,195 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 10:53:52,196 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_16042025.json
2025-07-21 10:53:52,210 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid02z62m7HKa1tBsxHC9YHA2TuS2Bc5twqTBf9PANRUXvgffgrhDdnuGXJQuBNhf8SuMl&id=61559613183648
2025-07-21 10:53:52,210 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 10:53:52,211 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_16042025.md
2025-07-21 10:53:52,211 - facebook_extractor_fix - INFO - Se han añadido 1 textos de Facebook al archivo limpio
2025-07-21 10:53:52,212 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 10:53:52,212 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 10:53:52,212 - main_orchestrator - INFO - ==================================================
2025-07-21 10:53:52,212 - main_orchestrator - INFO - PIPELINE FINALIZADO en 24.12 segundos.
2025-07-21 10:53:52,212 - main_orchestrator - INFO - ==================================================
2025-07-21 11:24:19,270 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 11:24:19,272 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 11:24:19,274 - main_orchestrator - INFO - Se usará la fecha proporcionada: 10072025
2025-07-21 11:24:19,274 - main_orchestrator - INFO - ==================================================
2025-07-21 11:24:19,275 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 11:24:19,275 - main_orchestrator - INFO - Usando fecha: 10072025
2025-07-21 11:24:19,275 - main_orchestrator - INFO - ==================================================
2025-07-21 11:24:19,277 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 11:24:19,278 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 11:24:19,281 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 11:24:19,286 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 511 URLs.
2025-07-21 11:24:19,287 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 11:24:19,287 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 11:24:19,288 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 11:24:19,288 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 11:24:19,288 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 11:24:19,288 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 11:24:19,292 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-21 11:24:19,611 - lib.pdf_processor - INFO - Se extrajeron 50 enlaces URI (no mailto) de 10072025.pdf.
2025-07-21 11:24:19,612 - main_orchestrator - INFO - PDF procesado en 0.32 seg. Enlaces encontrados: 50
2025-07-21 11:24:19,623 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_10072025.csv
2025-07-21 11:24:19,623 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 11:24:19,625 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-21 11:24:19,672 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-21 11:24:19,673 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-21 11:24:19,673 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-21 11:24:19,673 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 11:24:19,674 - lib.history_tracker - INFO - Filtradas 1 URLs ya procesadas del lote actual.
2025-07-21 11:24:19,674 - main_orchestrator - INFO - URLs nuevas para procesar: 49 (de 50 total)
2025-07-21 11:24:19,674 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 11:24:19,674 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 11:24:19,676 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 11:24:19,676 - content_deduplicator - INFO - Analizando 49 URLs para encontrar duplicados...
2025-07-21 11:24:19,677 - content_deduplicator - WARNING - Demasiados dominios (22). Limitando a los 20 más grandes.
2025-07-21 11:24:19,677 - content_deduplicator - INFO - Procesando 10 URLs del dominio facebook.com
2025-07-21 11:24:19,677 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/NexoCanalOnline/posts/1526225432017239 (tipo: facebook)
2025-07-21 11:24:26,291 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/NexoCanalOnline/posts/1526225432017239
2025-07-21 11:24:26,461 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/arequipametropolitana/posts/arequipa-sunass-advierte-que-bloqueos-en-la-panamericana-ponen-en-riesgo-y-dejan/1355354806104994/ (tipo: facebook)
2025-07-21 11:24:33,266 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/arequipametropolitana/posts/arequipa-sunass-advierte-que-bloqueos-en-la-panamericana-ponen-en-riesgo-y-dejan/1355354806104994/
2025-07-21 11:24:33,527 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1CD31WG7UR/ (tipo: facebook)
2025-07-21 11:24:40,124 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1CD31WG7UR/
2025-07-21 11:24:40,269 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1308163294643866&set=a.404326551694216 (tipo: facebook)
2025-07-21 11:24:47,659 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1308163294643866&set=a.404326551694216
2025-07-21 11:24:47,839 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=122144176310693859&set=a.122108624150693859 (tipo: facebook)
2025-07-21 11:24:55,230 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=122144176310693859&set=a.122108624150693859
2025-07-21 11:24:55,366 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1811536702969445&set=a.1057168758406247 (tipo: facebook)
2025-07-21 11:25:02,893 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1811536702969445&set=a.1057168758406247
2025-07-21 11:25:03,104 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=1410443977190769&set=a.613217730246735 (tipo: facebook)
2025-07-21 11:25:10,554 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=1410443977190769&set=a.613217730246735
2025-07-21 11:25:10,758 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo/?fbid=700106252895517&set=a.101152569457558 (tipo: facebook)
2025-07-21 11:25:18,171 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo/?fbid=700106252895517&set=a.101152569457558
2025-07-21 11:25:18,334 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/14GV85vCWbG/ (tipo: facebook)
2025-07-21 11:25:24,174 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/14GV85vCWbG/
2025-07-21 11:25:24,326 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/muni.cgal/posts/pfbid02t2K7q9pXyQCVKVbbGEeAkyCHonVn8U78Mu8gFMguQnfvuRVf2bKAv8X2w1Pi8Yzwl (tipo: facebook)
2025-07-21 11:25:31,039 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/muni.cgal/posts/pfbid02t2K7q9pXyQCVKVbbGEeAkyCHonVn8U78Mu8gFMguQnfvuRVf2bKAv8X2w1Pi8Yzwl
2025-07-21 11:25:31,278 - content_deduplicator - INFO - Procesando 10 URLs del dominio imacorpplataforma.com
2025-07-21 11:25:31,398 - content_deduplicator - INFO - Progreso: 20/49 URLs procesadas en 71.72 seg.
2025-07-21 11:25:31,401 - content_deduplicator - INFO - Procesando 4 URLs del dominio diariocorreo.pe
2025-07-21 11:25:31,402 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/piura/piura-sunass-fiscaliza-la-estacion-de-bombeo-san-jose-noticia/?ref=dcr (tipo: news)
2025-07-21 11:25:40,927 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/mario-reyna-alcalde-de-trujillo-deben-meter-presos-a-tantos-sinverguenzas-la-libertad-peru-noticia/?ref=dcr (tipo: news)
2025-07-21 11:25:49,768 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/piura/exceso-de-basura-ocasiona-afloramientos-en-sector-oeste-de-piura-noticia/?ref=dcr (tipo: news)
2025-07-21 11:25:58,120 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/ica/ica-moradores-viven-entre-aguas-servidas-por-colapso-del-desague-y-exigen-solucion-definitiva-noticia/ (tipo: news)
2025-07-21 11:26:06,448 - content_deduplicator - INFO - Procesando 3 URLs del dominio elperuano.pe
2025-07-21 11:26:06,449 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2417755-1 (tipo: news)
2025-07-21 11:26:13,745 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2417559-1 (tipo: news)
2025-07-21 11:26:20,829 - content_deduplicator - INFO - Procesando 3 URLs del dominio google.com
2025-07-21 11:26:20,830 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/1KyKi-d42f5EcsDpCIyKpk4V7wmBPiI0Y/view?usp=sharing (tipo: other)
2025-07-21 11:26:28,919 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/1zkr0ODCTgnkkrcY2p5_IgzBw8_uO9W7a/view?usp=sharing (tipo: other)
2025-07-21 11:26:44,987 - selenium_extractor - INFO - Extrayendo contenido de URL: https://drive.google.com/file/d/10vAewkJ7jT6x04CF0ElTPmxgvLeQx3eo/view?usp=sharing (tipo: other)
2025-07-21 11:26:52,212 - content_deduplicator - INFO - Procesando 2 URLs del dominio com.pe
2025-07-21 11:26:52,212 - selenium_extractor - INFO - Extrayendo contenido de URL: https://jornada.com.pe/mas-del-50-de-quejas-por-agua-en-ayacucho-son-por-cobros-elevados/ (tipo: other)
2025-07-21 11:27:00,750 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radiolaestacion.com.pe/index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass (tipo: other)
2025-07-21 11:27:05,955 - content_deduplicator - INFO - Procesando 2 URLs del dominio gob.pe
2025-07-21 11:27:05,955 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1206305-mas-de-793-mil-peruanos-accedieron-a-servicios-de-agua-potable-y-alcantarillado-con-la-culminacion-de-44-obras-en-zonas-urbanas (tipo: other)
2025-07-21 11:27:13,212 - selenium_extractor - INFO - Extrayendo contenido de URL: https://comunicaciones.congreso.gob.pe/noticias/12-leyes-para-el-cierre-de-brechas-de-acceso-a-los-servicios-b12-leyes-para-el-cierre-de-brechas-de-acceso-a-los-servicios-basicos-y-promover-vivienda-digna/ (tipo: other)
2025-07-21 11:27:29,843 - content_deduplicator - INFO - Análisis completado en 190.17 segundos
2025-07-21 11:27:29,844 - content_deduplicator - INFO - URLs totales: 49, Únicas: 36, En grupos: 10
2025-07-21 11:27:29,844 - content_deduplicator - INFO - Se realizaron 78 comparaciones (0.4/seg), evitando 0
2025-07-21 11:27:29,844 - content_deduplicator - INFO - Grupos de duplicados encontrados: 3
2025-07-21 11:27:29,845 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-21 11:27:29,845 - main_orchestrator - INFO - Análisis de duplicados completado: 9 URLs duplicadas filtradas
2025-07-21 11:27:29,845 - main_orchestrator - INFO - URLs después de filtrar duplicados: 40
2025-07-21 11:27:29,845 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-21 11:27:29,845 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 11:27:29,845 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 11:27:29,846 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 11:27:29,849 - lib.url_manager - INFO - Clasificación de 40 URLs:
2025-07-21 11:27:29,849 - lib.url_manager - INFO -  - HTML: 23
2025-07-21 11:27:29,849 - lib.url_manager - INFO -  - IMAGES: 10
2025-07-21 11:27:29,850 - lib.url_manager - INFO -  - SOCIAL: 7
2025-07-21 11:27:29,851 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_10072025_unprocessed.json
2025-07-21 11:27:29,852 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_10072025_unprocessed.json
2025-07-21 11:27:29,852 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 11:27:29,853 - lib.image_processor - INFO - Iniciando descarga paralela de 10 imágenes para la fecha 10072025...
2025-07-21 11:27:30,773 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/09-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0900AM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-21 11:27:31,027 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_18d82d2b_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (86664 bytes)
2025-07-21 11:27:31,219 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_6d475e1b_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (297184 bytes)
2025-07-21 11:27:31,286 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_6ca0efc7_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (66872 bytes)
2025-07-21 11:27:31,328 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_11fb9b57_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (229197 bytes)
2025-07-21 11:27:31,351 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_c46f8f15_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (363406 bytes)
2025-07-21 11:27:31,411 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_5880491a_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (303846 bytes)
2025-07-21 11:27:31,798 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_3a357dde_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (1062619 bytes)
2025-07-21 11:27:31,854 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_6e276f8f_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (959775 bytes)
2025-07-21 11:27:31,856 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_725af96b_10072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/10072025 (1015602 bytes)
2025-07-21 11:27:53,003 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_993eb15e_10072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/10072025 (140064138 bytes)
2025-07-21 11:27:53,458 - lib.image_processor - INFO - Progreso descarga imágenes: 10/10 en 23.61 seg.
2025-07-21 11:27:53,459 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_10072025.json
2025-07-21 11:27:53,460 - lib.image_processor - INFO - Descarga de imágenes completada para 10/10 URLs en 23.61 segundos.
2025-07-21 11:27:53,460 - main_orchestrator - INFO - Descarga de imágenes completada en 23.61 seg.
2025-07-21 11:27:53,460 - lib.history_tracker - INFO - Añadidas 10 nuevas URLs al historial.
2025-07-21 11:27:53,462 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 521 URLs.
2025-07-21 11:27:53,462 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 11:27:53,462 - lib.html_scraper - INFO - Iniciando scraping paralelo de 23 URLs...
2025-07-21 11:27:54,704 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1007)'))': /index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass
2025-07-21 11:27:56,186 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1007)'))': /index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass
2025-07-21 11:27:58,567 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1007)'))': /index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass
2025-07-21 11:27:59,192 - lib.html_scraper - WARNING - Error de red scrapeando https://radiolaestacion.com.pe/index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass: HTTPSConnectionPool(host='radiolaestacion.com.pe', port=443): Max retries exceeded with url: /index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1007)')))
2025-07-21 11:27:59,193 - lib.html_scraper - WARNING - Error procesando https://radiolaestacion.com.pe/index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass: Network Error: HTTPSConnectionPool(host='radiolaestacion.com.pe', port=443): Max retries exceeded with url: /index.php/facturacion-excesiva-la-principal-preocupacion-de-los-usuarios-de-agua-atendida-por-sunass (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:1007)')))
2025-07-21 11:28:00,539 - lib.html_scraper - INFO - Progreso: 20/23 URLs procesadas en 7.08 seg.
2025-07-21 11:28:02,053 - lib.html_scraper - INFO - Progreso: 23/23 URLs procesadas en 8.59 seg.
2025-07-21 11:28:02,057 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-21 11:28:02,057 - lib.html_scraper - INFO - Scraping completado para 23/23 URLs en 8.59 segundos.
2025-07-21 11:28:02,057 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-21 11:28:02,057 - main_orchestrator - INFO - Scraping HTML completado en 8.60 seg.
2025-07-21 11:28:02,058 - lib.history_tracker - INFO - Añadidas 22 nuevas URLs al historial.
2025-07-21 11:28:02,059 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 543 URLs.
2025-07-21 11:28:02,060 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 11:28:04,839 - lib.api_client - INFO - Texto extraído de tmpubbgmzbv.jpg (4 chars).
2025-07-21 11:28:04,839 - lib.image_processor - INFO - Procesando 10 imágenes con API (batch_size=3, pausa=60s)
2025-07-21 11:28:04,840 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-07-21 11:28:04,840 - lib.image_processor - INFO - Procesando imagen con API: img_2_18d82d2b_10072025.jpg
2025-07-21 11:28:08,928 - lib.api_client - INFO - Texto extraído de img_2_18d82d2b_10072025.jpg (728 chars).
2025-07-21 11:28:11,570 - lib.image_processor - INFO - Imagen procesada exitosamente: img_2_18d82d2b_10072025.jpg
2025-07-21 11:28:12,436 - lib.image_processor - INFO - Procesando imagen con API: img_8_6ca0efc7_10072025.jpg
2025-07-21 11:28:15,832 - lib.api_client - INFO - Texto extraído de img_8_6ca0efc7_10072025.jpg (408 chars).
2025-07-21 11:28:17,891 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_6ca0efc7_10072025.jpg
2025-07-21 11:28:18,413 - lib.image_processor - INFO - Procesando imagen con API: img_6_6d475e1b_10072025.jpg
2025-07-21 11:28:24,882 - lib.api_client - INFO - Texto extraído de img_6_6d475e1b_10072025.jpg (1172 chars).
2025-07-21 11:28:26,413 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_6d475e1b_10072025.jpg
2025-07-21 11:28:26,970 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 11:29:26,974 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-07-21 11:29:26,975 - lib.image_processor - INFO - Procesando imagen con API: img_3_11fb9b57_10072025.jpg
2025-07-21 11:29:39,290 - lib.api_client - INFO - Texto extraído de img_3_11fb9b57_10072025.jpg (3179 chars).
2025-07-21 11:29:42,255 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_11fb9b57_10072025.jpg
2025-07-21 11:29:43,123 - lib.image_processor - INFO - Procesando imagen con API: img_5_c46f8f15_10072025.jpg
2025-07-21 11:30:12,598 - lib.api_client - INFO - Texto extraído de img_5_c46f8f15_10072025.jpg (8124 chars).
2025-07-21 11:30:14,869 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_c46f8f15_10072025.jpg
2025-07-21 11:30:15,740 - lib.image_processor - INFO - Procesando imagen con API: img_7_6e276f8f_10072025.jpg
2025-07-21 11:30:38,325 - lib.api_client - INFO - Texto extraído de img_7_6e276f8f_10072025.jpg (4714 chars).
2025-07-21 11:30:40,212 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_6e276f8f_10072025.jpg
2025-07-21 11:30:40,941 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 11:31:40,989 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-07-21 11:31:40,990 - lib.image_processor - INFO - Procesando imagen con API: img_4_5880491a_10072025.jpg
2025-07-21 11:31:56,771 - lib.api_client - INFO - Texto extraído de img_4_5880491a_10072025.jpg (3543 chars).
2025-07-21 11:31:59,707 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_5880491a_10072025.jpg
2025-07-21 11:32:00,245 - lib.image_processor - INFO - Procesando imagen con API: img_10_3a357dde_10072025.jpg
2025-07-21 11:32:13,247 - lib.api_client - INFO - Texto extraído de img_10_3a357dde_10072025.jpg (2357 chars).
2025-07-21 11:32:14,909 - lib.image_processor - INFO - Imagen procesada exitosamente: img_10_3a357dde_10072025.jpg
2025-07-21 11:32:15,772 - lib.image_processor - INFO - Procesando imagen con API: img_9_725af96b_10072025.jpg
2025-07-21 11:32:27,255 - lib.api_client - INFO - Texto extraído de img_9_725af96b_10072025.jpg (3029 chars).
2025-07-21 11:32:29,085 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_725af96b_10072025.jpg
2025-07-21 11:32:29,734 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 11:33:29,790 - lib.image_processor - INFO - Procesando batch 4 (1 imágenes)
2025-07-21 11:33:29,790 - lib.image_processor - INFO - Procesando imagen con API: img_1_993eb15e_10072025.mp4
2025-07-21 11:33:29,791 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/10072025/img_1_993eb15e_10072025.mp4 (133.58 MB)
2025-07-21 11:33:29,791 - lib.image_processor - WARNING - Error procesando imagen img_1_993eb15e_10072025.mp4: Image file too large
2025-07-21 11:33:30,375 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/10072025/texto_imagenes_api.json
2025-07-21 11:33:30,375 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/10072025/texto_imagenes_api.json
2025-07-21 11:33:30,375 - lib.image_processor - INFO - Procesamiento API completado para 9/10 imágenes en 325.54 segundos.
2025-07-21 11:33:30,375 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 328.32 seg.
2025-07-21 11:33:30,376 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 11:33:30,376 - main_orchestrator - INFO - Leyendo archivo social para la fecha 10072025: social_links_10072025_unprocessed.json
2025-07-21 11:33:30,376 - main_orchestrator - INFO - Encontradas 5 URLs de Facebook para procesar
2025-07-21 11:33:30,377 - main_orchestrator - INFO - Creado directorio para PDFs: /home/erick/NewsAgent/base/10072025
2025-07-21 11:33:30,378 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 11:33:30,378 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 5 URLs de Facebook para la fecha 10072025...
2025-07-21 11:33:30,380 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1CD31WG7UR/
2025-07-21 11:33:30,380 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/NexoCanalOnline/posts/1526225432017239
2025-07-21 11:33:30,382 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/photo/?fbid=1308163294643866&set=a.404326551694216
2025-07-21 11:33:30,382 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/14GV85vCWbG/
2025-07-21 11:33:30,383 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/muni.cgal/posts/pfbid02t2K7q9pXyQCVKVbbGEeAkyCHonVn8U78Mu8gFMguQnfvuRVf2bKAv8X2w1Pi8Yzwl
2025-07-21 11:34:03,476 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-2.pdf
2025-07-21 11:34:03,566 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-1.pdf
2025-07-21 11:34:03,850 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-4.pdf
2025-07-21 11:34:04,276 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-5.pdf
2025-07-21 11:34:05,750 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-3.pdf
2025-07-21 11:34:07,816 - lib.facebook_processor - INFO - Progreso Facebook: 5/5 en 37.44 seg.
2025-07-21 11:34:07,817 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_10072025.json
2025-07-21 11:34:07,817 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 5/5 exitosos en 37.44 segundos.
2025-07-21 11:34:07,817 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 37.44 seg.
2025-07-21 11:34:07,817 - lib.history_tracker - INFO - Añadidas 5 nuevas URLs al historial.
2025-07-21 11:34:07,820 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 548 URLs.
2025-07-21 11:34:07,820 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 11:34:07,997 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-2.pdf
2025-07-21 11:34:08,182 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-5.pdf
2025-07-21 11:34:08,711 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-1.pdf
2025-07-21 11:34:09,014 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-4.pdf
2025-07-21 11:34:09,172 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-3.pdf
2025-07-21 11:34:09,172 - lib.facebook_processor - INFO - Texto extraído de 5 PDFs de Facebook
2025-07-21 11:34:09,172 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.35 seg.
2025-07-21 11:34:09,173 - main_orchestrator - INFO - Texto extraído de 5 PDFs de Facebook
2025-07-21 11:34:09,173 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-21 11:34:09,174 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-21 11:34:09,174 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 11:34:09,175 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-21 11:34:09,176 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-21 11:34:09,176 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T11:34:09.174566', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 40, 'history_total_urls': 548, 'categories': {'html': 23, 'images': 10, 'social': 7}, 'html_processing': {'attempted': 23, 'processed': 22, 'successful': 21, 'relevant (>=0.3)': 14, 'average_relevance': 0.5380952380952382}, 'image_processing': {'attempted_download': 10, 'successful_download': 10, 'attempted_api': 10, 'successful_api': 9}, 'facebook_processing': {'attempted': 5, 'successful': 5, 'extracted_texts': 5}, 'timings_seconds': {'pdf_extraction': 0.32, 'pdf_text_extraction': 1.35, 'image_download': 23.61, 'html_scraping': 8.6, 'image_api': 328.32, 'facebook_processing': 37.44, 'facebook_text_extraction': 1.35, 'stats_consolidation': 0.0}}
2025-07-21 11:34:09,176 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 11:34:09,176 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 11:34:09,181 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-21 11:34:09,182 - main_orchestrator - INFO - Procesando 9 textos de imágenes para consolidación
2025-07-21 11:34:09,192 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-21 11:34:09,193 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-21 11:34:09,193 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 11:34:09,196 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 11:34:09,196 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 11:34:09,196 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-21 11:34:09,197 - semantic_cleaner - INFO - Extraídos 21 textos de HTML
2025-07-21 11:34:09,197 - semantic_cleaner - INFO - Extraídos 9 textos de imágenes
2025-07-21 11:34:09,197 - semantic_cleaner - INFO - Extraídos 5 textos de Facebook
2025-07-21 11:34:32,613 - semantic_cleaner - INFO - Se identificaron 40 grupos de textos similares
2025-07-21 11:34:32,613 - semantic_cleaner - INFO - Se seleccionaron 40 textos representativos
2025-07-21 11:34:32,613 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 11:34:32,614 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-21 11:34:32,626 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-21 11:34:32,627 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-21 11:34:32,666 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-21 11:34:32,668 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-21 11:34:32,678 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-21 11:34:32,678 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T11:34:09.174566', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 40, 'history_total_urls': 548, 'categories': {'html': 23, 'images': 10, 'social': 7}, 'html_processing': {'attempted': 23, 'processed': 22, 'successful': 21, 'relevant (>=0.3)': 14, 'average_relevance': 0.5380952380952382}, 'image_processing': {'attempted_download': 10, 'successful_download': 10, 'attempted_api': 10, 'successful_api': 9}, 'facebook_processing': {'attempted': 5, 'successful': 5, 'extracted_texts': 5}, 'timings_seconds': {'pdf_extraction': 0.32, 'pdf_text_extraction': 1.35, 'image_download': 23.61, 'html_scraping': 8.6, 'image_api': 328.32, 'facebook_processing': 37.44, 'facebook_text_extraction': 1.35, 'stats_consolidation': 0.0, 'semantic_cleaning': 23.47}}
2025-07-21 11:34:32,678 - main_orchestrator - INFO - Limpieza semántica completada en 23.47 seg.
2025-07-21 11:34:32,679 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 11:34:32,679 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 11:34:32,679 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-21 11:34:32,701 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/1CD31WG7UR/
2025-07-21 11:34:32,711 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 11:34:32,713 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-21 11:34:32,714 - facebook_extractor_fix - INFO - Se han añadido 5 textos de Facebook al archivo limpio
2025-07-21 11:34:32,714 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 11:34:32,714 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 11:34:32,715 - main_orchestrator - INFO - ==================================================
2025-07-21 11:34:32,715 - main_orchestrator - INFO - PIPELINE FINALIZADO en 613.44 segundos.
2025-07-21 11:34:32,715 - main_orchestrator - INFO - ==================================================
2025-07-21 12:37:35,241 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 12:37:35,243 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 12:37:35,244 - main_orchestrator - INFO - Se usará la fecha proporcionada: 15072025
2025-07-21 12:37:35,244 - main_orchestrator - INFO - ==================================================
2025-07-21 12:37:35,244 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 12:37:35,245 - main_orchestrator - INFO - Usando fecha: 15072025
2025-07-21 12:37:35,245 - main_orchestrator - INFO - ==================================================
2025-07-21 12:37:35,249 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 12:37:35,251 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 12:37:35,254 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 12:37:35,258 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 548 URLs.
2025-07-21 12:37:35,259 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 12:37:35,260 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 12:37:35,260 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 12:37:35,260 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 12:37:35,261 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 12:37:35,261 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 12:37:35,303 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-21 12:37:35,597 - lib.pdf_processor - INFO - Se extrajeron 37 enlaces URI (no mailto) de 15072025.pdf.
2025-07-21 12:37:35,598 - main_orchestrator - INFO - PDF procesado en 0.34 seg. Enlaces encontrados: 37
2025-07-21 12:37:35,620 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_15072025.csv
2025-07-21 12:37:35,620 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 12:37:35,621 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-21 12:37:35,681 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-21 12:37:35,682 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-07-21 12:37:35,682 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-21 12:37:35,682 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 12:37:35,683 - main_orchestrator - INFO - URLs nuevas para procesar: 37 (de 37 total)
2025-07-21 12:37:35,683 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 12:37:35,683 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 12:37:35,690 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 12:37:35,690 - content_deduplicator - INFO - Analizando 37 URLs para encontrar duplicados...
2025-07-21 12:37:35,691 - content_deduplicator - INFO - Procesando 3 URLs del dominio elperuano.pe
2025-07-21 12:37:35,692 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2418854-4 (tipo: news)
2025-07-21 12:37:46,208 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2418366-1 (tipo: news)
2025-07-21 12:37:53,452 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2418935-1 (tipo: news)
2025-07-21 12:38:01,166 - content_deduplicator - INFO - Procesando 2 URLs del dominio sharepoint.com
2025-07-21 12:38:01,167 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/:i:/g/personal/esosa_sunass_gob_pe/Ebs9Q75UMTxOvo7g4rPeApkBWBWwqTfrOpWQg0HR2jQRdQ?e=98Qumv (tipo: twitter)
2025-07-21 12:38:10,650 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/:i:/g/personal/esosa_sunass_gob_pe/Edz96pZhot5Og_-10dz5PYsBnbi6yk4ucZpSVYSUi4N6NQ?e=nAgV5z (tipo: twitter)
2025-07-21 12:38:21,511 - content_deduplicator - INFO - Procesando 10 URLs del dominio facebook.com
2025-07-21 12:38:21,511 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid02CaFezmHdDkragpnG8gmmhw56KpsYGs472rPQTP9s3CFEDih6BabxdbxMDU3s5AvKl?locale=es_LA (tipo: facebook)
2025-07-21 12:38:27,495 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diarioprimiciahyo/posts/pfbid02CaFezmHdDkragpnG8gmmhw56KpsYGs472rPQTP9s3CFEDih6BabxdbxMDU3s5AvKl?locale=es_LA
2025-07-21 12:38:27,664 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid026KnU2sgY7tN7cJaLyZBocApEVqqc8myjVadg883wXv5RdiCXt54ynhXC6jJnHBUzl&id=61559613183648&locale=es_LA (tipo: facebook)
2025-07-21 12:38:33,740 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid026KnU2sgY7tN7cJaLyZBocApEVqqc8myjVadg883wXv5RdiCXt54ynhXC6jJnHBUzl&id=61559613183648&locale=es_LA
2025-07-21 12:38:33,889 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02kXsmuQmGbYNob3AJ2L7XEaLtdZYt2kXTPCacmRsSNjFXGiVt4bTPJ9d18kojRY99l&id=100065273659654&locale=es_LA (tipo: facebook)
2025-07-21 12:38:40,968 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02kXsmuQmGbYNob3AJ2L7XEaLtdZYt2kXTPCacmRsSNjFXGiVt4bTPJ9d18kojRY99l&id=100065273659654&locale=es_LA
2025-07-21 12:38:41,367 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02qzNFGjz91fG3cJJYaTGso997Jt1yir9Xp6mkDmh5QNa2EqmH48wuvbzLTZSFjgqol&id=100064089484737&locale=es_LA (tipo: facebook)
2025-07-21 12:38:49,565 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02qzNFGjz91fG3cJJYaTGso997Jt1yir9Xp6mkDmh5QNa2EqmH48wuvbzLTZSFjgqol&id=100064089484737&locale=es_LA
2025-07-21 12:38:49,784 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02nPEHCdfjBgyV5sww9wpPRCCzt5ZZnmtkZXuPsp8YQ1nj2qkAZLbtchVLr1p1vEXZl&id=100072108931277&locale=es_LA (tipo: facebook)
2025-07-21 12:38:57,550 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02nPEHCdfjBgyV5sww9wpPRCCzt5ZZnmtkZXuPsp8YQ1nj2qkAZLbtchVLr1p1vEXZl&id=100072108931277&locale=es_LA
2025-07-21 12:38:57,739 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA (tipo: facebook)
2025-07-21 12:39:05,030 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA
2025-07-21 12:39:05,186 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0ChMQuvc39xayJMjtSpAjxdj8ivpzbj3r5Sg98613qEigPnw6iTNV9XinXKTz6VwZl?locale=es_LA (tipo: facebook)
2025-07-21 12:39:11,137 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0ChMQuvc39xayJMjtSpAjxdj8ivpzbj3r5Sg98613qEigPnw6iTNV9XinXKTz6VwZl?locale=es_LA
2025-07-21 12:39:11,304 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0btPRohwCnnJjb3fUagqvJVpkWdky8dbq1mWnyb8feRxUupjtWDoMc7LzAgjU7hbl&id=100063616446639&locale=es_LA (tipo: facebook)
2025-07-21 12:39:18,987 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0btPRohwCnnJjb3fUagqvJVpkWdky8dbq1mWnyb8feRxUupjtWDoMc7LzAgjU7hbl&id=100063616446639&locale=es_LA
2025-07-21 12:39:19,206 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/guerreradelmicrofono/posts/pfbid0CBycgM94nKssAYb3Jc5TupgKxXPmz5HFrgAprCdQBjwKDLKbrKE9WrEsYh4yJ1Cdl (tipo: facebook)
2025-07-21 12:39:25,283 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/guerreradelmicrofono/posts/pfbid0CBycgM94nKssAYb3Jc5TupgKxXPmz5HFrgAprCdQBjwKDLKbrKE9WrEsYh4yJ1Cdl
2025-07-21 12:39:25,437 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/agenciandina/videos/1874880483357675 (tipo: facebook)
2025-07-21 12:39:34,743 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/agenciandina/videos/1874880483357675
2025-07-21 12:39:34,946 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-07-21 12:39:34,946 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/ceplan/noticias/1208797-comite-multidisciplinario-impulsado-por-ceplan-acuerda-ampliar-trabajo-conjunto-para-enfrentar-desafios-hidricos-en-el-pais (tipo: other)
2025-07-21 12:39:45,199 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/contraloria/noticias/1208462-contraloria-alerta-que-adelanto-de-s-668-mil-para-obra-de-saneamiento-carecia-de-sustento (tipo: other)
2025-07-21 12:39:52,958 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/presidencia/noticias/1208724-gobierno-de-presidenta-boluarte-invirtio-cerca-de-s-6000-millones-para-llevar-agua-potable-a-mas-de-tres-millones-de-peruanos (tipo: other)
2025-07-21 12:40:01,633 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1208771-gobierno-destino-s-2400-millones-para-impulsar-proyectos-habitacionales-en-zonas-urbanas-y-rurales (tipo: other)
2025-07-21 12:40:10,386 - content_deduplicator - INFO - Procesando 2 URLs del dominio radioondaazul.com
2025-07-21 12:40:10,387 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radioondaazul.com/sunass-explicara-esta-tarde-en-audiencia-publica-el-rebalanceo-tarifario-en-puno-que-se-implementara-en-los-proximos-meses-en-la-region/ (tipo: other)
2025-07-21 12:40:18,340 - selenium_extractor - INFO - Extrayendo contenido de URL: https://radioondaazul.com/convocan-a-dirigentes-de-juliaca-para-ver-la-problematica-que-viene-ocurriendo-en-seda-juliaca/ (tipo: other)
2025-07-21 12:40:26,024 - content_deduplicator - INFO - Progreso: 20/37 URLs procesadas en 170.33 seg.
2025-07-21 12:40:26,024 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtube.com
2025-07-21 12:40:26,025 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=lPGJOsbPKtE (tipo: youtube)
2025-07-21 12:40:37,529 - content_deduplicator - INFO - Procesando 9 URLs del dominio imacorpplataforma.com
2025-07-21 12:40:37,617 - content_deduplicator - INFO - Análisis completado en 181.93 segundos
2025-07-21 12:40:37,618 - content_deduplicator - INFO - URLs totales: 37, Únicas: 25, En grupos: 10
2025-07-21 12:40:37,618 - content_deduplicator - INFO - Se realizaron 55 comparaciones (0.3/seg), evitando 0
2025-07-21 12:40:37,619 - content_deduplicator - INFO - Grupos de duplicados encontrados: 4
2025-07-21 12:40:37,621 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-21 12:40:37,621 - main_orchestrator - INFO - Análisis de duplicados completado: 6 URLs duplicadas filtradas
2025-07-21 12:40:37,622 - main_orchestrator - INFO - URLs después de filtrar duplicados: 31
2025-07-21 12:40:37,622 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-21 12:40:37,622 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 12:40:37,622 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 12:40:37,622 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 12:40:37,626 - lib.url_manager - INFO - Clasificación de 31 URLs:
2025-07-21 12:40:37,626 - lib.url_manager - INFO -  - HTML: 15
2025-07-21 12:40:37,626 - lib.url_manager - INFO -  - IMAGES: 9
2025-07-21 12:40:37,626 - lib.url_manager - INFO -  - SOCIAL: 7
2025-07-21 12:40:37,627 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_15072025_unprocessed.json
2025-07-21 12:40:37,629 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_15072025_unprocessed.json
2025-07-21 12:40:37,629 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 12:40:37,630 - lib.image_processor - INFO - Iniciando descarga paralela de 9 imágenes para la fecha 15072025...
2025-07-21 12:40:37,630 - lib.image_processor - WARNING - URL duplicada detectada: http://imacorpplataforma.com/wp-content/uploads/2025/07/DIARIO-UNO-POLITICA-2-GOBIERNO-INVIERTE-6-MILLONES-PARA-LLEVAR-AGUA-POTABLE-A-MAS-PERUANOS-15-07-2025.jpg. Primera ocurrencia: #4, segunda: #5
2025-07-21 12:40:37,637 - lib.image_processor - INFO - Omitiendo URL duplicada #5: http://imacorpplataforma.com/wp-content/uploads/2025/07/DIARIO-UNO-POLITICA-2-GOBIERNO-INVIERTE-6-MILLONES-PARA-LLEVAR-AGUA-POTABLE-A-MAS-PERUANOS-15-07-2025.jpg
2025-07-21 12:40:39,057 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_3108d0a0_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (130189 bytes)
2025-07-21 12:40:39,265 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_d967120b_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (219318 bytes)
2025-07-21 12:40:40,223 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_bec697a8_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (2283135 bytes)
2025-07-21 12:40:40,272 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_38a52744_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (396234 bytes)
2025-07-21 12:40:40,964 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_3e516a2f_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (1022190 bytes)
2025-07-21 12:40:40,981 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_9bfdfd57_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (1045477 bytes)
2025-07-21 12:40:40,996 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_2cd68e18_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (1191911 bytes)
2025-07-21 12:40:41,283 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_bd2c5edc_15072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/15072025 (2176767 bytes)
2025-07-21 12:40:41,741 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_15072025.json
2025-07-21 12:40:41,741 - lib.image_processor - INFO - Descarga de imágenes completada para 8/9 URLs en 4.11 segundos.
2025-07-21 12:40:41,741 - main_orchestrator - INFO - Descarga de imágenes completada en 4.11 seg.
2025-07-21 12:40:41,741 - lib.history_tracker - INFO - Añadidas 8 nuevas URLs al historial.
2025-07-21 12:40:41,749 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 556 URLs.
2025-07-21 12:40:41,749 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 12:40:41,749 - lib.html_scraper - INFO - Iniciando scraping paralelo de 15 URLs...
2025-07-21 12:40:44,710 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)'))': /actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/
2025-07-21 12:40:45,886 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)'))': /actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/
2025-07-21 12:40:48,018 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=3, read=3, redirect=None, status=None)) after connection broken by 'SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)'))': /actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/
2025-07-21 12:40:48,211 - lib.html_scraper - WARNING - Error de red scrapeando https://tudiariohuanuco.pe/actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/: HTTPSConnectionPool(host='tudiariohuanuco.pe', port=443): Max retries exceeded with url: /actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/ (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)')))
2025-07-21 12:40:48,212 - lib.html_scraper - WARNING - Error procesando https://tudiariohuanuco.pe/actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/: Network Error: HTTPSConnectionPool(host='tudiariohuanuco.pe', port=443): Max retries exceeded with url: /actualidad/hasta-la-fecha-obra-del-puesto-de-salud-de-pachas-sin-agua-potable/ (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain (_ssl.c:1007)')))
2025-07-21 12:40:56,465 - lib.html_scraper - INFO - Progreso: 15/15 URLs procesadas en 14.72 seg.
2025-07-21 12:40:56,467 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-21 12:40:56,467 - lib.html_scraper - INFO - Scraping completado para 15/15 URLs en 14.72 segundos.
2025-07-21 12:40:56,467 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-21 12:40:56,468 - main_orchestrator - INFO - Scraping HTML completado en 14.72 seg.
2025-07-21 12:40:56,468 - lib.history_tracker - INFO - Añadidas 15 nuevas URLs al historial.
2025-07-21 12:40:56,469 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 571 URLs.
2025-07-21 12:40:56,470 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 12:40:58,967 - lib.api_client - INFO - Texto extraído de tmpjdmqu6r8.jpg (4 chars).
2025-07-21 12:40:58,968 - lib.image_processor - INFO - Procesando 8 imágenes con API (batch_size=3, pausa=60s)
2025-07-21 12:40:58,968 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-07-21 12:40:58,968 - lib.image_processor - INFO - Procesando imagen con API: img_3_3108d0a0_15072025.jpg
2025-07-21 12:41:04,040 - lib.api_client - INFO - Texto extraído de img_3_3108d0a0_15072025.jpg (1057 chars).
2025-07-21 12:41:06,056 - lib.image_processor - INFO - Imagen procesada exitosamente: img_3_3108d0a0_15072025.jpg
2025-07-21 12:41:06,592 - lib.image_processor - INFO - Procesando imagen con API: img_4_d967120b_15072025.jpg
2025-07-21 12:41:10,019 - lib.api_client - INFO - Texto extraído de img_4_d967120b_15072025.jpg (459 chars).
2025-07-21 12:41:11,138 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_d967120b_15072025.jpg
2025-07-21 12:41:12,024 - lib.image_processor - INFO - Procesando imagen con API: img_6_38a52744_15072025.jpg
2025-07-21 12:41:31,474 - lib.api_client - INFO - Texto extraído de img_6_38a52744_15072025.jpg (5457 chars).
2025-07-21 12:41:33,640 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_38a52744_15072025.jpg
2025-07-21 12:41:34,446 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 12:42:34,497 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-07-21 12:42:34,498 - lib.image_processor - INFO - Procesando imagen con API: img_2_bec697a8_15072025.jpg
2025-07-21 12:42:54,730 - lib.api_client - INFO - Texto extraído de img_2_bec697a8_15072025.jpg (5099 chars).
2025-07-21 12:42:56,826 - lib.image_processor - INFO - Imagen procesada exitosamente: img_2_bec697a8_15072025.jpg
2025-07-21 12:42:57,469 - lib.image_processor - INFO - Procesando imagen con API: img_9_9bfdfd57_15072025.jpg
2025-07-21 12:43:25,177 - lib.api_client - INFO - Texto extraído de img_9_9bfdfd57_15072025.jpg (7128 chars).
2025-07-21 12:43:26,300 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_9bfdfd57_15072025.jpg
2025-07-21 12:43:27,202 - lib.image_processor - INFO - Procesando imagen con API: img_7_3e516a2f_15072025.jpg
2025-07-21 12:43:35,018 - lib.api_client - INFO - Texto extraído de img_7_3e516a2f_15072025.jpg (1485 chars).
2025-07-21 12:43:36,486 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_3e516a2f_15072025.jpg
2025-07-21 12:43:37,119 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 12:44:37,178 - lib.image_processor - INFO - Procesando batch 3 (2 imágenes)
2025-07-21 12:44:37,179 - lib.image_processor - INFO - Procesando imagen con API: img_1_2cd68e18_15072025.jpg
2025-07-21 12:44:41,850 - lib.api_client - INFO - Texto extraído de img_1_2cd68e18_15072025.jpg (421 chars).
2025-07-21 12:44:44,772 - lib.image_processor - INFO - Imagen procesada exitosamente: img_1_2cd68e18_15072025.jpg
2025-07-21 12:44:45,440 - lib.image_processor - INFO - Procesando imagen con API: img_8_bd2c5edc_15072025.jpg
2025-07-21 12:44:57,608 - lib.api_client - INFO - Texto extraído de img_8_bd2c5edc_15072025.jpg (2772 chars).
2025-07-21 12:45:00,024 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_bd2c5edc_15072025.jpg
2025-07-21 12:45:00,947 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/15072025/texto_imagenes_api.json
2025-07-21 12:45:00,948 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/15072025/texto_imagenes_api.json
2025-07-21 12:45:00,948 - lib.image_processor - INFO - Procesamiento API completado para 8/8 imágenes en 241.98 segundos.
2025-07-21 12:45:00,948 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 244.48 seg.
2025-07-21 12:45:00,948 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 12:45:00,949 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15072025: social_links_15072025_unprocessed.json
2025-07-21 12:45:00,949 - main_orchestrator - INFO - Encontradas 5 URLs de Facebook para procesar
2025-07-21 12:45:00,952 - main_orchestrator - INFO - Creado directorio para PDFs: /home/erick/NewsAgent/base/15072025
2025-07-21 12:45:00,952 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 12:45:00,953 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 5 URLs de Facebook para la fecha 15072025...
2025-07-21 12:45:00,954 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid026KnU2sgY7tN7cJaLyZBocApEVqqc8myjVadg883wXv5RdiCXt54ynhXC6jJnHBUzl&id=61559613183648&locale=es_LA
2025-07-21 12:45:00,954 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/diarioprimiciahyo/posts/pfbid02CaFezmHdDkragpnG8gmmhw56KpsYGs472rPQTP9s3CFEDih6BabxdbxMDU3s5AvKl?locale=es_LA
2025-07-21 12:45:00,956 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/permalink.php?story_fbid=pfbid02kXsmuQmGbYNob3AJ2L7XEaLtdZYt2kXTPCacmRsSNjFXGiVt4bTPJ9d18kojRY99l&id=100065273659654&locale=es_LA
2025-07-21 12:45:00,957 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/guerreradelmicrofono/posts/pfbid0CBycgM94nKssAYb3Jc5TupgKxXPmz5HFrgAprCdQBjwKDLKbrKE9WrEsYh4yJ1Cdl
2025-07-21 12:45:00,958 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/agenciandina/videos/1874880483357675
2025-07-21 12:45:43,820 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-4.pdf
2025-07-21 12:45:45,057 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-3.pdf
2025-07-21 12:45:46,161 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-1.pdf
2025-07-21 12:45:47,393 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-2.pdf
2025-07-21 12:45:51,197 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-5.pdf
2025-07-21 12:45:54,327 - lib.facebook_processor - INFO - Progreso Facebook: 5/5 en 53.37 seg.
2025-07-21 12:45:54,329 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_15072025.json
2025-07-21 12:45:54,330 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 5/5 exitosos en 53.38 segundos.
2025-07-21 12:45:54,330 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 53.38 seg.
2025-07-21 12:45:54,331 - lib.history_tracker - INFO - Añadidas 5 nuevas URLs al historial.
2025-07-21 12:45:54,334 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 576 URLs.
2025-07-21 12:45:54,334 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 12:45:55,176 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-4.pdf
2025-07-21 12:45:55,477 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-3.pdf
2025-07-21 12:45:55,846 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-2.pdf
2025-07-21 12:45:56,267 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-1.pdf
2025-07-21 12:45:56,633 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-5.pdf
2025-07-21 12:45:56,634 - lib.facebook_processor - INFO - Texto extraído de 5 PDFs de Facebook
2025-07-21 12:45:56,644 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 2.31 seg.
2025-07-21 12:45:56,644 - main_orchestrator - INFO - Texto extraído de 5 PDFs de Facebook
2025-07-21 12:45:56,651 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-21 12:45:56,651 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-21 12:45:56,651 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 12:45:56,675 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-21 12:45:56,675 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-21 12:45:56,676 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T12:45:56.652179', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 31, 'history_total_urls': 576, 'categories': {'html': 15, 'images': 9, 'social': 7}, 'html_processing': {'attempted': 15, 'processed': 15, 'successful': 14, 'relevant (>=0.3)': 8, 'average_relevance': 0.3642857142857143}, 'image_processing': {'attempted_download': 9, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 8}, 'facebook_processing': {'attempted': 5, 'successful': 5, 'extracted_texts': 5}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 2.31, 'image_download': 4.11, 'html_scraping': 14.72, 'image_api': 244.48, 'facebook_processing': 53.38, 'facebook_text_extraction': 2.31, 'stats_consolidation': 0.0}}
2025-07-21 12:45:56,676 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 12:45:56,677 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 12:45:56,678 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-21 12:45:56,678 - main_orchestrator - INFO - Procesando 8 textos de imágenes para consolidación
2025-07-21 12:45:56,692 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-21 12:45:56,692 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-21 12:45:56,692 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 12:45:56,735 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 12:45:56,735 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 12:45:56,735 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-07-21 12:45:56,736 - semantic_cleaner - INFO - Extraídos 14 textos de HTML
2025-07-21 12:45:56,736 - semantic_cleaner - INFO - Extraídos 8 textos de imágenes
2025-07-21 12:45:56,736 - semantic_cleaner - INFO - Extraídos 5 textos de Facebook
2025-07-21 12:46:15,595 - semantic_cleaner - INFO - Se identificaron 30 grupos de textos similares
2025-07-21 12:46:15,595 - semantic_cleaner - INFO - Se seleccionaron 30 textos representativos
2025-07-21 12:46:15,596 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 12:46:15,596 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-21 12:46:15,600 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-21 12:46:15,601 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-21 12:46:15,625 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-21 12:46:15,630 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-21 12:46:15,631 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-21 12:46:15,631 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T12:45:56.652179', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 31, 'history_total_urls': 576, 'categories': {'html': 15, 'images': 9, 'social': 7}, 'html_processing': {'attempted': 15, 'processed': 15, 'successful': 14, 'relevant (>=0.3)': 8, 'average_relevance': 0.3642857142857143}, 'image_processing': {'attempted_download': 9, 'successful_download': 8, 'attempted_api': 8, 'successful_api': 8}, 'facebook_processing': {'attempted': 5, 'successful': 5, 'extracted_texts': 5}, 'timings_seconds': {'pdf_extraction': 0.34, 'pdf_text_extraction': 2.31, 'image_download': 4.11, 'html_scraping': 14.72, 'image_api': 244.48, 'facebook_processing': 53.38, 'facebook_text_extraction': 2.31, 'stats_consolidation': 0.0, 'semantic_cleaning': 18.94}}
2025-07-21 12:46:15,631 - main_orchestrator - INFO - Limpieza semántica completada en 18.94 seg.
2025-07-21 12:46:15,631 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 12:46:15,632 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 12:46:15,632 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-21 12:46:15,638 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/guerreradelmicrofono/posts/pfbid0CBycgM94nKssAYb3Jc5TupgKxXPmz5HFrgAprCdQBjwKDLKbrKE9WrEsYh4yJ1Cdl
2025-07-21 12:46:15,638 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 12:46:15,639 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-21 12:46:15,639 - facebook_extractor_fix - INFO - Se han añadido 5 textos de Facebook al archivo limpio
2025-07-21 12:46:15,639 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 12:46:15,639 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 12:46:15,639 - main_orchestrator - INFO - ==================================================
2025-07-21 12:46:15,640 - main_orchestrator - INFO - PIPELINE FINALIZADO en 520.40 segundos.
2025-07-21 12:46:15,640 - main_orchestrator - INFO - ==================================================
2025-07-21 14:15:09,953 - main_orchestrator - INFO - Módulos mejorados de clasificación y deduplicación cargados correctamente
2025-07-21 14:15:09,956 - main_orchestrator - INFO - Deduplicador optimizado cargado correctamente
2025-07-21 14:15:09,959 - main_orchestrator - INFO - Se usará la fecha proporcionada: 11072025
2025-07-21 14:15:09,960 - main_orchestrator - INFO - ==================================================
2025-07-21 14:15:09,961 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-21 14:15:09,961 - main_orchestrator - INFO - Usando fecha: 11072025
2025-07-21 14:15:09,961 - main_orchestrator - INFO - ==================================================
2025-07-21 14:15:09,967 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-21 14:15:09,969 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-21 14:15:09,972 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-21 14:15:09,978 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 576 URLs.
2025-07-21 14:15:09,979 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-21 14:15:09,980 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-21 14:15:09,981 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-21 14:15:09,981 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-21 14:15:09,981 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-21 14:15:09,981 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-21 14:15:10,019 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-21 14:15:11,025 - lib.pdf_processor - INFO - Se extrajeron 125 enlaces URI (no mailto) de 11072025.pdf.
2025-07-21 14:15:11,026 - main_orchestrator - INFO - PDF procesado en 1.04 seg. Enlaces encontrados: 125
2025-07-21 14:15:11,050 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_11072025.csv
2025-07-21 14:15:11,050 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-21 14:15:11,052 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-21 14:15:11,147 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-21 14:15:11,147 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-21 14:15:11,147 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-21 14:15:11,147 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-21 14:15:11,148 - lib.history_tracker - INFO - Filtradas 3 URLs ya procesadas del lote actual.
2025-07-21 14:15:11,148 - main_orchestrator - INFO - URLs nuevas para procesar: 122 (de 125 total)
2025-07-21 14:15:11,148 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-21 14:15:11,149 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-21 14:15:11,154 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-21 14:15:11,154 - content_deduplicator - INFO - Analizando 122 URLs para encontrar duplicados...
2025-07-21 14:15:11,162 - content_deduplicator - WARNING - Demasiados dominios (24). Limitando a los 20 más grandes.
2025-07-21 14:15:11,162 - content_deduplicator - INFO - Procesando 75 URLs del dominio facebook.com
2025-07-21 14:15:11,162 - content_deduplicator - WARNING - Dominio facebook.com tiene demasiadas URLs (75). Muestreando para análisis.
2025-07-21 14:15:11,163 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16ngHNLS3G/ (tipo: facebook)
2025-07-21 14:15:21,409 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16ngHNLS3G/
2025-07-21 14:15:21,591 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1F1R7Gg3yY/ (tipo: facebook)
2025-07-21 14:15:28,432 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1F1R7Gg3yY/
2025-07-21 14:15:28,604 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16qcJeRPZC/ (tipo: facebook)
2025-07-21 14:15:35,097 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16qcJeRPZC/
2025-07-21 14:15:35,372 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16q1mu68pn/ (tipo: facebook)
2025-07-21 14:15:41,714 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16q1mu68pn/
2025-07-21 14:15:41,888 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1Fv9DAdXsP/ (tipo: facebook)
2025-07-21 14:15:48,252 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1Fv9DAdXsP/
2025-07-21 14:15:48,513 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1YiSxvt1qi/ (tipo: facebook)
2025-07-21 14:15:54,814 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1YiSxvt1qi/
2025-07-21 14:15:54,996 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1FJA4FJwds/ (tipo: facebook)
2025-07-21 14:16:01,310 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1FJA4FJwds/
2025-07-21 14:16:01,649 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/19db7iti54/ (tipo: facebook)
2025-07-21 14:16:07,805 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/19db7iti54/
2025-07-21 14:16:07,967 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16AVvFmuhA/ (tipo: facebook)
2025-07-21 14:16:14,899 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16AVvFmuhA/
2025-07-21 14:16:15,147 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16obn5hGkF/ (tipo: facebook)
2025-07-21 14:16:21,256 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16obn5hGkF/
2025-07-21 14:16:21,436 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1LD9UYGnVA/ (tipo: facebook)
2025-07-21 14:16:27,599 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1LD9UYGnVA/
2025-07-21 14:16:27,758 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1CDM5LhEFV/ (tipo: facebook)
2025-07-21 14:16:34,099 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1CDM5LhEFV/
2025-07-21 14:16:34,271 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1B34wRbmgN/ (tipo: facebook)
2025-07-21 14:16:41,063 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1B34wRbmgN/
2025-07-21 14:16:41,298 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1B5ZgonNCt/ (tipo: facebook)
2025-07-21 14:16:47,880 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1B5ZgonNCt/
2025-07-21 14:16:48,106 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1S9NzQJEd2/ (tipo: facebook)
2025-07-21 14:16:54,563 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1S9NzQJEd2/
2025-07-21 14:16:54,785 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/19FHME7ext/ (tipo: facebook)
2025-07-21 14:17:01,148 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/19FHME7ext/
2025-07-21 14:17:01,330 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/15pk6DeAzg/ (tipo: facebook)
2025-07-21 14:17:07,632 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/15pk6DeAzg/
2025-07-21 14:17:07,841 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/19x6dCyze3/ (tipo: facebook)
2025-07-21 14:17:14,237 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/19x6dCyze3/
2025-07-21 14:17:14,389 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/1B8rmU5YEx/ (tipo: facebook)
2025-07-21 14:17:21,008 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/1B8rmU5YEx/
2025-07-21 14:17:21,177 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/DIGITALTVPISCO/posts/1310643617737655 (tipo: facebook)
2025-07-21 14:17:27,215 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/DIGITALTVPISCO/posts/1310643617737655
2025-07-21 14:17:27,405 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1Hi3MAA7rq/ (tipo: facebook)
2025-07-21 14:17:33,776 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1Hi3MAA7rq/
2025-07-21 14:17:33,964 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1L9yps6PT8/ (tipo: facebook)
2025-07-21 14:17:40,460 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1L9yps6PT8/
2025-07-21 14:17:40,722 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1AphX6GaLy/ (tipo: facebook)
2025-07-21 14:17:47,220 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1AphX6GaLy/
2025-07-21 14:17:47,405 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16ktnArXi6/ (tipo: facebook)
2025-07-21 14:18:00,121 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16ktnArXi6/
2025-07-21 14:18:00,309 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1G9UEa2C2B/ (tipo: facebook)
2025-07-21 14:18:10,906 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1G9UEa2C2B/
2025-07-21 14:18:11,251 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1As8wVMMMc/ (tipo: facebook)
2025-07-21 14:18:17,565 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1As8wVMMMc/
2025-07-21 14:18:17,772 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16x42jx9Kk/ (tipo: facebook)
2025-07-21 14:18:25,196 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16x42jx9Kk/
2025-07-21 14:18:25,480 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1BrNTA7UhX/ (tipo: facebook)
2025-07-21 14:18:32,691 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1BrNTA7UhX/
2025-07-21 14:18:34,487 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16GuDQpmP1/ (tipo: facebook)
2025-07-21 14:18:41,964 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16GuDQpmP1/
2025-07-21 14:18:42,175 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1BzZttrJHG/ (tipo: facebook)
2025-07-21 14:18:52,606 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1BzZttrJHG/
2025-07-21 14:18:52,917 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/frecuenciapopularnoticias/posts/pfbid09r1RurJ9mL5GjXrXxHbehAAeUybn1uMAauY9MLN9a6oNWsyHyZQCC2qhiLmD5u3Hl (tipo: facebook)
2025-07-21 14:19:00,163 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/frecuenciapopularnoticias/posts/pfbid09r1RurJ9mL5GjXrXxHbehAAeUybn1uMAauY9MLN9a6oNWsyHyZQCC2qhiLmD5u3Hl
2025-07-21 14:19:00,468 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/DiarioRevistaSur/posts/pfbid02D9fsGJxTcyrh3AYSW8YucNoxryfmYuuV4bgFzXQ8JMUDtBP9kJLYUHh3fzVu6xZzl (tipo: facebook)
2025-07-21 14:19:07,344 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/DiarioRevistaSur/posts/pfbid02D9fsGJxTcyrh3AYSW8YucNoxryfmYuuV4bgFzXQ8JMUDtBP9kJLYUHh3fzVu6xZzl
2025-07-21 14:19:07,571 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/AqpMasNoticias/posts/pfbid0Ym6UeKRN2DMyCQaCDXuFCrEYXyU1TvfKTnEw9SyY8qLyfycrffBoPfhnrX6TxiCSl (tipo: facebook)
2025-07-21 14:19:13,712 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/AqpMasNoticias/posts/pfbid0Ym6UeKRN2DMyCQaCDXuFCrEYXyU1TvfKTnEw9SyY8qLyfycrffBoPfhnrX6TxiCSl
2025-07-21 14:19:13,865 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/EBQNOTICIAS/posts/pfbid02p4rzZM83U4pvyc6uN7cH7uYq4aG51JM6qttpEx9RMQ3pxEUCJM33j99wcUz6EMxNl (tipo: facebook)
2025-07-21 14:19:20,091 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/EBQNOTICIAS/posts/pfbid02p4rzZM83U4pvyc6uN7cH7uYq4aG51JM6qttpEx9RMQ3pxEUCJM33j99wcUz6EMxNl
2025-07-21 14:19:20,280 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/RadioLaUnicaOnline/posts/pfbid0YQTKJ1mxZaHS37U93mTqvjttc52joKazAeV3oHHJe4Amzdrf7CsPv3iQcnAK6bFvl (tipo: facebook)
2025-07-21 14:19:26,743 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/RadioLaUnicaOnline/posts/pfbid0YQTKJ1mxZaHS37U93mTqvjttc52joKazAeV3oHHJe4Amzdrf7CsPv3iQcnAK6bFvl
2025-07-21 14:19:26,919 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/ZtvPremiumArequipa/posts/pfbid0dQQae6bbP1F7PKgXtmAGZEwpaNXmtrrwxsFqJBn8Jx9Me8m3Su28X97Fwyj3stbZl (tipo: facebook)
2025-07-21 14:19:33,159 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/ZtvPremiumArequipa/posts/pfbid0dQQae6bbP1F7PKgXtmAGZEwpaNXmtrrwxsFqJBn8Jx9Me8m3Su28X97Fwyj3stbZl
2025-07-21 14:19:33,356 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0XTxZGtARJdwsVwgFpgNUvQBQg5bL6SBhLbpt9zjks91WGRTG3svV174AndTgf4Wdl&id=100093821120408 (tipo: facebook)
2025-07-21 14:19:40,093 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0XTxZGtARJdwsVwgFpgNUvQBQg5bL6SBhLbpt9zjks91WGRTG3svV174AndTgf4Wdl&id=100093821120408
2025-07-21 14:19:40,351 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02Sun6oQZS9Sk5V5VLXr5Rbp3p7cmZwxBEiaTWhXaAWgCvwNpCZc9Z5SYHwdKjs3wcl&id=100071955107270 (tipo: facebook)
2025-07-21 14:19:46,920 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02Sun6oQZS9Sk5V5VLXr5Rbp3p7cmZwxBEiaTWhXaAWgCvwNpCZc9Z5SYHwdKjs3wcl&id=100071955107270
2025-07-21 14:19:47,170 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02cCHyQmA7wGbGnD76wHFWNN9aWoAFNERHU7Ct7F5GD3gp8M2ygEqe71nkumGQUeh9l&id=100091586050927 (tipo: facebook)
2025-07-21 14:19:53,588 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid02cCHyQmA7wGbGnD76wHFWNN9aWoAFNERHU7Ct7F5GD3gp8M2ygEqe71nkumGQUeh9l&id=100091586050927
2025-07-21 14:19:54,441 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/Losprotagonistasdelanoticia/posts/pfbid02aVnY7xPQYnHvrHCamk5cdZ5sqz6SGD279BZfTXHWnE9Z4vQgpXjT6oUBkf1attsUl (tipo: facebook)
2025-07-21 14:20:04,834 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/Losprotagonistasdelanoticia/posts/pfbid02aVnY7xPQYnHvrHCamk5cdZ5sqz6SGD279BZfTXHWnE9Z4vQgpXjT6oUBkf1attsUl
2025-07-21 14:20:05,308 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/arequipametropolitana/posts/pfbid0GL22udrC98Hk91fSQsv6bztRv7nsvwUSWouPjMuyyjEk96zFpqhmns5s89ay15Dcl (tipo: facebook)
2025-07-21 14:20:12,557 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/arequipametropolitana/posts/pfbid0GL22udrC98Hk91fSQsv6bztRv7nsvwUSWouPjMuyyjEk96zFpqhmns5s89ay15Dcl
2025-07-21 14:20:12,979 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/3tv.pe/posts/pfbid0YxZZqbfhW5WRAcynxRsvXMp8XqnSt6dMHWbzWzTH2BwYkqKrqFoesCRa5da65s7Hl (tipo: facebook)
2025-07-21 14:20:21,594 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/3tv.pe/posts/pfbid0YxZZqbfhW5WRAcynxRsvXMp8XqnSt6dMHWbzWzTH2BwYkqKrqFoesCRa5da65s7Hl
2025-07-21 14:20:21,855 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/infonoticiasaqp/posts/pfbid02XMqnNJzst6t5iQVYAyWpuGLBcZZ2VH9DFg1bnYrzJoQTnr22ASi17KdYxGxNrREal (tipo: facebook)
2025-07-21 14:20:29,841 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/infonoticiasaqp/posts/pfbid02XMqnNJzst6t5iQVYAyWpuGLBcZZ2VH9DFg1bnYrzJoQTnr22ASi17KdYxGxNrREal
2025-07-21 14:20:30,572 - content_deduplicator - INFO - Progreso: 20/122 URLs procesadas en 319.42 seg.
2025-07-21 14:20:31,036 - content_deduplicator - INFO - Procesando 10 URLs del dominio imacorpplataforma.com
2025-07-21 14:20:31,189 - content_deduplicator - INFO - Procesando 4 URLs del dominio gob.pe
2025-07-21 14:20:31,190 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1206528-mvcs-fortalece-capacidades-de-las-eps-del-sur-del-pais-para-evaluar-riesgos-por-desastres-naturales-en-servicios-de-agua-y-saneamiento (tipo: other)
2025-07-21 14:20:39,764 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/vivienda/noticias/1206566-ministerio-de-vivienda-impulsa-el-desarrollo-de-la-ptar-cajamarca-y-obras-de-cabecera-para-lima (tipo: other)
2025-07-21 14:20:48,214 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/proinversion/noticias/1206673-gobierno-impulsa-proyectos-de-agua-potable-y-tratamiento-de-aguas-residuales-en-lima-y-cajamarca (tipo: other)
2025-07-21 14:20:56,341 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.gob.pe/institucion/otass/noticias/1206889-mas-de-19-mil-peruanos-acceden-a-mejores-servicios-de-agua-y-saneamiento-gracias-a-la-politica-de-integracion (tipo: other)
2025-07-21 14:21:05,291 - content_deduplicator - INFO - Procesando 3 URLs del dominio elperuano.pe
2025-07-21 14:21:05,292 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2418378-1 (tipo: news)
2025-07-21 14:21:14,000 - selenium_extractor - INFO - Extrayendo contenido de URL: https://busquedas.elperuano.pe/dispositivo/NL/2418373-1 (tipo: news)
2025-07-21 14:21:21,997 - content_deduplicator - INFO - Procesando 3 URLs del dominio sharepoint.com
2025-07-21 14:21:21,998 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/personal/esosa_sunass_gob_pe/_layouts/15/stream.aspx?id=%2Fpersonal%2Fesosa%5Fsunass%5Fgob%5Fpe%2FDocuments%2FCompartido%2FEvidencias%5F2023%2D2024%2FPuno%2F2025%2E07%2E10%20Radio%5FAudiencia%20Rebalanceo%5FEPS%20Aguas%20del%20Altiplano%5FLa%20Decana%2Emp4&referrer=StreamWebApp%2EWeb&referrerScenario=AddressBarCopied%2Eview%2Eaa3f1b0b%2D9c0d%2D4e4b%2Da192%2D71cc3ef22c8d (tipo: twitter)
2025-07-21 14:21:31,066 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/personal/esosa_sunass_gob_pe/_layouts/15/stream.aspx?id=%2Fpersonal%2Fesosa%5Fsunass%5Fgob%5Fpe%2FDocuments%2FCompartido%2FEvidencias%5F2023%2D2024%2FPuno%2F2025%2E07%2E09%2E%20Entrevista%5FRebalanceo%20EPS%20Aguas%20del%20Altiplano%2Emp4&referrer=StreamWebApp%2EWeb&referrerScenario=AddressBarCopied%2Eview%2E50767460%2Ddeba%2D4ddb%2D8c01%2D7bf34c4f8260 (tipo: twitter)
2025-07-21 14:21:39,242 - selenium_extractor - INFO - Extrayendo contenido de URL: https://sunassgobpe-my.sharepoint.com/:b:/g/personal/sramos_sunass_gob_pe/EVhMDQJHwqNAuln-Exy3FKABXKhRVEnMsbslFUy3mCRHVg?e=r3jyzR (tipo: twitter)
2025-07-21 14:21:49,500 - content_deduplicator - INFO - Procesando 3 URLs del dominio youtube.com
2025-07-21 14:21:49,502 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/watch?v=WSAGpuYoMoI (tipo: youtube)
2025-07-21 14:22:01,498 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/live/NLZLkI0G6Qk?si=afItQMi0d1WfgddK (tipo: youtube)
2025-07-21 14:22:13,112 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.youtube.com/live/6kLQr5SCGIo (tipo: youtube)
2025-07-21 14:22:27,312 - content_deduplicator - INFO - Procesando 3 URLs del dominio larepublica.pe
2025-07-21 14:22:27,322 - selenium_extractor - INFO - Extrayendo contenido de URL: https://larepublica.pe/economia/2025/07/09/lima-no-ha-podido-destronar-a-moquegua-como-la-region-mas-competitiva-en-cuatro-anos-ingresos-e-inseguridad-le-pasan-factura-hnews-616086 (tipo: news)
2025-07-21 14:22:40,957 - selenium_extractor - INFO - Extrayendo contenido de URL: https://larepublica.pe/ciencia/2025/07/10/estudiantes-peruanos-crean-un-dispositivo-que-convierte-el-agua-de-mar-en-potable-y-solo-necesita-luz-solar-282540 (tipo: news)
2025-07-21 14:22:48,347 - selenium_extractor - INFO - Extrayendo contenido de URL: https://larepublica.pe/sociedad/2025/07/09/talara-en-crisis-derrame-de-petroleo-viviendas-a-punto-de-colapsar-y-alumnos-abandonados-por-el-estado-hnews-247662 (tipo: news)
2025-07-21 14:22:56,713 - content_deduplicator - INFO - Procesando 2 URLs del dominio gestion.pe
2025-07-21 14:22:56,714 - selenium_extractor - INFO - Extrayendo contenido de URL: https://gestion.pe/economia/megaproyecto-de-agua-y-saneamiento-con-20-anos-de-retraso-se-construira-en-2028-cuando-estaria-listo-esto-dice-proinversion-noticia/?ref=gesr (tipo: other)
2025-07-21 14:23:15,040 - selenium_extractor - INFO - Extrayendo contenido de URL: https://gestion.pe/economia/obras-de-cabecera-proyecto-clave-para-lima-revive-de-su-exito-dependerian-estas-otras-12-app-de-agua-y-saneamiento-noticia/?ref=gesr (tipo: other)
2025-07-21 14:23:26,072 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariolaregion.com
2025-07-21 14:23:26,075 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariolaregion.com/pobladores-del-ah-las-pampas-protestan-frente-a-sedaloreto-por-cobros-excesivos/ (tipo: news)
2025-07-21 14:23:57,132 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariolaregion.com/eps-sedaloreto-sostuvo-reunion-con-dirigentes-del-a-h-las-pampas/ (tipo: news)
2025-07-21 14:24:09,616 - content_deduplicator - INFO - Procesando 2 URLs del dominio andina.pe
2025-07-21 14:24:09,617 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-gobierno-impulsa-proyectos-agua-y-planta-tratamiento-lima-y-cajamarca-1036731.aspx (tipo: news)
2025-07-21 14:24:39,264 - selenium_extractor - INFO - Extrayendo contenido de URL: https://andina.pe/agencia/noticia-mas-19000-peruanos-reciben-mejores-servicios-agua-gracias-a-politica-integracion-1036826.aspx (tipo: news)
2025-07-21 14:24:58,702 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtu.be
2025-07-21 14:24:58,702 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/Ey4aEiP1LLY (tipo: youtube)
2025-07-21 14:25:16,774 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/s__gdzHfkMs?si=Ve0VszRfO9JtgfeN (tipo: youtube)
2025-07-21 14:25:29,216 - content_deduplicator - INFO - Análisis completado en 618.06 segundos
2025-07-21 14:25:29,216 - content_deduplicator - INFO - URLs totales: 122, Únicas: 46, En grupos: 39
2025-07-21 14:25:29,216 - content_deduplicator - INFO - Se realizaron 397 comparaciones (0.6/seg), evitando 0
2025-07-21 14:25:29,217 - content_deduplicator - INFO - Grupos de duplicados encontrados: 7
2025-07-21 14:25:29,217 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-21 14:25:29,218 - main_orchestrator - INFO - Análisis de duplicados completado: 66 URLs duplicadas filtradas
2025-07-21 14:25:29,218 - main_orchestrator - INFO - URLs después de filtrar duplicados: 56
2025-07-21 14:25:29,218 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-21 14:25:29,218 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-21 14:25:29,218 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-21 14:25:29,218 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-21 14:25:29,225 - lib.url_manager - INFO - Clasificación de 56 URLs:
2025-07-21 14:25:29,228 - lib.url_manager - INFO -  - HTML: 24
2025-07-21 14:25:29,232 - lib.url_manager - INFO -  - IMAGES: 9
2025-07-21 14:25:29,232 - lib.url_manager - INFO -  - SOCIAL: 23
2025-07-21 14:25:29,239 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_11072025_unprocessed.json
2025-07-21 14:25:29,241 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_11072025_unprocessed.json
2025-07-21 14:25:29,241 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-21 14:25:29,241 - lib.image_processor - INFO - Iniciando descarga paralela de 9 imágenes para la fecha 11072025...
2025-07-21 14:25:29,964 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0900AM-.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-21 14:25:30,240 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-RADIO-NACIONAL-ENT-A-SHEYLA-ROMAN-ESPECIALISTA-DE-LA-PLATAFORMA-DE-ATENCION-AL-USUARIO-DE-SUNASS.mp3 contiene audio/mpeg, no una imagen. Se descargará pero no se procesará con la API.
2025-07-21 14:25:30,244 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-EXITOSA-AREQUIPA-ENTREVISTA-A-SAUL-ALIRE-JEFE-DE-LA-SUNASS-AREQUIPA.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-21 14:25:30,248 - lib.image_processor - WARNING - URL https://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-RPP-AREQUIPA-ENTREVISTA-A-SAUL-ALIRE-JEFE-SUNASS-AREQUIPA-SOBRE-ABASTECIMIENTO-DE-AGUA-ANTE-PARO-DE-MINEROS-INFORMALES.mp3 contiene audio/mpeg, no una imagen. Se descargará pero no se procesará con la API.
2025-07-21 14:25:30,469 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_c95b8d4a_11072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/11072025 (209783 bytes)
2025-07-21 14:25:30,595 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_e751383d_11072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/11072025 (256782 bytes)
2025-07-21 14:25:30,921 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_e6cb6bfd_11072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/11072025 (771459 bytes)
2025-07-21 14:25:30,973 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_5f3eeace_11072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/11072025 (405294 bytes)
2025-07-21 14:25:31,349 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_5786b738_11072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/11072025 (911953 bytes)
2025-07-21 14:25:33,307 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_efed6e28_11072025.mp3' en /home/erick/NewsAgent/input/Images/downloads/11072025 (3223719 bytes)
2025-07-21 14:25:35,064 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_818053f2_11072025.mp3' en /home/erick/NewsAgent/input/Images/downloads/11072025 (6034913 bytes)
2025-07-21 14:26:22,437 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_927993d7_11072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/11072025 (140064138 bytes)
2025-07-21 14:26:30,355 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_592ea630_11072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/11072025 (171284346 bytes)
2025-07-21 14:26:30,622 - lib.image_processor - INFO - Progreso descarga imágenes: 9/9 en 61.38 seg.
2025-07-21 14:26:30,625 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_11072025.json
2025-07-21 14:26:30,625 - lib.image_processor - INFO - Descarga de imágenes completada para 9/9 URLs en 61.38 segundos.
2025-07-21 14:26:30,625 - main_orchestrator - INFO - Descarga de imágenes completada en 61.38 seg.
2025-07-21 14:26:30,626 - lib.history_tracker - INFO - Añadidas 9 nuevas URLs al historial.
2025-07-21 14:26:30,630 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 585 URLs.
2025-07-21 14:26:30,630 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-21 14:26:30,630 - lib.html_scraper - INFO - Iniciando scraping paralelo de 24 URLs...
2025-07-21 14:26:38,884 - lib.html_scraper - INFO - Progreso: 20/24 URLs procesadas en 8.25 seg.
2025-07-21 14:26:41,558 - lib.html_scraper - INFO - Progreso: 24/24 URLs procesadas en 10.93 seg.
2025-07-21 14:26:41,565 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-21 14:26:41,566 - lib.html_scraper - INFO - Scraping completado para 24/24 URLs en 10.94 segundos.
2025-07-21 14:26:41,566 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-21 14:26:41,566 - main_orchestrator - INFO - Scraping HTML completado en 10.94 seg.
2025-07-21 14:26:41,567 - lib.history_tracker - INFO - Añadidas 23 nuevas URLs al historial.
2025-07-21 14:26:41,578 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 608 URLs.
2025-07-21 14:26:41,579 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-21 14:26:45,001 - lib.api_client - INFO - Texto extraído de tmpz2ap6zlu.jpg (4 chars).
2025-07-21 14:26:45,002 - lib.image_processor - INFO - Procesando 9 imágenes con API (batch_size=3, pausa=60s)
2025-07-21 14:26:45,002 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-07-21 14:26:45,002 - lib.image_processor - INFO - Procesando imagen con API: img_9_e751383d_11072025.jpg
2025-07-21 14:26:53,011 - lib.api_client - INFO - Texto extraído de img_9_e751383d_11072025.jpg (1763 chars).
2025-07-21 14:26:55,571 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_e751383d_11072025.jpg
2025-07-21 14:26:56,393 - lib.image_processor - INFO - Procesando imagen con API: img_5_c95b8d4a_11072025.jpg
2025-07-21 14:27:07,295 - lib.api_client - INFO - Texto extraído de img_5_c95b8d4a_11072025.jpg (2959 chars).
2025-07-21 14:27:09,601 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_c95b8d4a_11072025.jpg
2025-07-21 14:27:10,196 - lib.image_processor - INFO - Procesando imagen con API: img_6_5f3eeace_11072025.jpg
2025-07-21 14:27:33,434 - lib.api_client - INFO - Texto extraído de img_6_5f3eeace_11072025.jpg (5701 chars).
2025-07-21 14:27:35,820 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_5f3eeace_11072025.jpg
2025-07-21 14:27:36,582 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 14:28:36,642 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-07-21 14:28:36,643 - lib.image_processor - INFO - Procesando imagen con API: img_7_e6cb6bfd_11072025.jpg
2025-07-21 14:29:01,301 - lib.api_client - INFO - Texto extraído de img_7_e6cb6bfd_11072025.jpg (6684 chars).
2025-07-21 14:29:03,087 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_e6cb6bfd_11072025.jpg
2025-07-21 14:29:03,668 - lib.image_processor - INFO - Procesando imagen con API: img_8_5786b738_11072025.jpg
2025-07-21 14:29:22,258 - lib.api_client - INFO - Texto extraído de img_8_5786b738_11072025.jpg (5585 chars).
2025-07-21 14:29:24,543 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_5786b738_11072025.jpg
2025-07-21 14:29:25,078 - lib.image_processor - INFO - Procesando imagen con API: img_2_efed6e28_11072025.mp3
2025-07-21 14:29:25,079 - lib.image_processor - WARNING - Archivo multimedia detectado por extensión: /home/erick/NewsAgent/input/Images/downloads/11072025/img_2_efed6e28_11072025.mp3
2025-07-21 14:29:25,079 - lib.image_processor - WARNING - Error procesando imagen img_2_efed6e28_11072025.mp3: File is multimedia content, not an image
2025-07-21 14:29:25,930 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-21 14:30:25,982 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-07-21 14:30:25,982 - lib.image_processor - INFO - Procesando imagen con API: img_1_818053f2_11072025.mp3
2025-07-21 14:30:25,982 - lib.image_processor - WARNING - Archivo multimedia detectado por extensión: /home/erick/NewsAgent/input/Images/downloads/11072025/img_1_818053f2_11072025.mp3
2025-07-21 14:30:25,983 - lib.image_processor - WARNING - Error procesando imagen img_1_818053f2_11072025.mp3: File is multimedia content, not an image
2025-07-21 14:30:26,594 - lib.image_processor - INFO - Procesando imagen con API: img_4_927993d7_11072025.mp4
2025-07-21 14:30:26,595 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/11072025/img_4_927993d7_11072025.mp4 (133.58 MB)
2025-07-21 14:30:26,595 - lib.image_processor - WARNING - Error procesando imagen img_4_927993d7_11072025.mp4: Image file too large
2025-07-21 14:30:27,177 - lib.image_processor - INFO - Procesando imagen con API: img_3_592ea630_11072025.mp4
2025-07-21 14:30:27,177 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/11072025/img_3_592ea630_11072025.mp4 (163.35 MB)
2025-07-21 14:30:27,177 - lib.image_processor - WARNING - Error procesando imagen img_3_592ea630_11072025.mp4: Image file too large
2025-07-21 14:30:27,822 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/11072025/texto_imagenes_api.json
2025-07-21 14:30:27,822 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/11072025/texto_imagenes_api.json
2025-07-21 14:30:27,822 - lib.image_processor - INFO - Procesamiento API completado para 5/9 imágenes en 222.82 segundos.
2025-07-21 14:30:27,823 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 226.24 seg.
2025-07-21 14:30:27,823 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-21 14:30:27,823 - main_orchestrator - INFO - Leyendo archivo social para la fecha 11072025: social_links_11072025_unprocessed.json
2025-07-21 14:30:27,824 - main_orchestrator - INFO - Encontradas 18 URLs de Facebook para procesar
2025-07-21 14:30:27,831 - main_orchestrator - INFO - Creado directorio para PDFs: /home/erick/NewsAgent/base/11072025
2025-07-21 14:30:27,831 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-21 14:30:27,831 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 18 URLs de Facebook para la fecha 11072025...
2025-07-21 14:30:27,832 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16ngHNLS3G/
2025-07-21 14:30:27,835 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1F1R7Gg3yY/
2025-07-21 14:30:27,837 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/16qcJeRPZC/
2025-07-21 14:30:27,838 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/19db7iti54/
2025-07-21 14:30:27,839 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/1B5ZgonNCt/
2025-07-21 14:30:52,247 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-1.pdf
2025-07-21 14:30:54,734 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-2.pdf
2025-07-21 14:30:54,898 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/19x6dCyze3/
2025-07-21 14:30:55,173 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-4.pdf
2025-07-21 14:30:55,779 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-3.pdf
2025-07-21 14:30:56,375 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-5.pdf
2025-07-21 14:30:57,703 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/1B8rmU5YEx/
2025-07-21 14:30:57,911 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/share/p/1Hi3MAA7rq/
2025-07-21 14:30:58,471 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/share/p/1L9yps6PT8/
2025-07-21 14:30:58,595 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/share/p/16ktnArXi6/
2025-07-21 14:30:58,595 - lib.facebook_processor - INFO - Progreso Facebook: 5/18 en 30.76 seg.
2025-07-21 14:31:24,423 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-6.pdf
2025-07-21 14:31:27,910 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/share/p/16ktnArXi6/
2025-07-21 14:31:28,402 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-7.pdf
2025-07-21 14:31:29,884 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-8.pdf
2025-07-21 14:31:30,345 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-10.pdf
2025-07-21 14:31:31,287 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/share/v/1G9UEa2C2B/
2025-07-21 14:31:31,742 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/share/v/1G9UEa2C2B/
2025-07-21 14:31:33,458 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/share/p/16x42jx9Kk/
2025-07-21 14:31:35,325 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-9.pdf
2025-07-21 14:31:37,700 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/share/v/1BrNTA7UhX/
2025-07-21 14:31:37,716 - lib.facebook_processor - INFO - Progreso Facebook: 10/18 en 69.88 seg.
2025-07-21 14:31:52,724 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-11.pdf
2025-07-21 14:31:55,225 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/share/p/16GuDQpmP1/
2025-07-21 14:32:11,928 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-14.pdf
2025-07-21 14:32:14,008 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-12.pdf
2025-07-21 14:32:15,985 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/share/v/1BzZttrJHG/
2025-07-21 14:32:17,062 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/frecuenciapopularnoticias/posts/pfbid09r1RurJ9mL5GjXrXxHbehAAeUybn1uMAauY9MLN9a6oNWsyHyZQCC2qhiLmD5u3Hl
2025-07-21 14:32:18,538 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-13.pdf
2025-07-21 14:32:25,269 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-15.pdf
2025-07-21 14:32:28,010 - lib.facebook_processor - INFO - Progreso Facebook: 15/18 en 120.18 seg.
2025-07-21 14:32:30,343 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-16.pdf
2025-07-21 14:32:41,303 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-18.pdf
2025-07-21 14:32:44,702 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-17.pdf
2025-07-21 14:32:47,390 - lib.facebook_processor - INFO - Progreso Facebook: 18/18 en 139.56 seg.
2025-07-21 14:32:47,391 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_11072025.json
2025-07-21 14:32:47,391 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 16/18 exitosos en 139.56 segundos.
2025-07-21 14:32:47,392 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 139.57 seg.
2025-07-21 14:32:47,392 - lib.history_tracker - INFO - Añadidas 16 nuevas URLs al historial.
2025-07-21 14:32:47,395 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 624 URLs.
2025-07-21 14:32:47,396 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-21 14:32:47,628 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-1.pdf
2025-07-21 14:32:47,793 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-3.pdf
2025-07-21 14:32:47,838 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-4.pdf
2025-07-21 14:32:48,057 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-5.pdf
2025-07-21 14:32:48,428 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-2.pdf
2025-07-21 14:32:48,642 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-6.pdf
2025-07-21 14:32:48,891 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-8.pdf
2025-07-21 14:32:49,052 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-7.pdf
2025-07-21 14:32:49,204 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-11.pdf
2025-07-21 14:32:49,403 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-9.pdf
2025-07-21 14:32:49,938 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-14.pdf
2025-07-21 14:32:50,099 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-13.pdf
2025-07-21 14:32:50,208 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-15.pdf
2025-07-21 14:32:50,385 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-16.pdf
2025-07-21 14:32:50,755 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-18.pdf
2025-07-21 14:32:50,967 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-17.pdf
2025-07-21 14:32:50,967 - lib.facebook_processor - INFO - Texto extraído de 16 PDFs de Facebook
2025-07-21 14:32:50,967 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 3.57 seg.
2025-07-21 14:32:50,967 - main_orchestrator - INFO - Texto extraído de 16 PDFs de Facebook
2025-07-21 14:32:50,969 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-21 14:32:50,969 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-21 14:32:50,969 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-21 14:32:50,970 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-21 14:32:50,971 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-21 14:32:50,971 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T14:32:50.969815', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 56, 'history_total_urls': 624, 'categories': {'html': 24, 'images': 9, 'social': 23}, 'html_processing': {'attempted': 24, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 14, 'average_relevance': 0.5086956521739129}, 'image_processing': {'attempted_download': 9, 'successful_download': 9, 'attempted_api': 9, 'successful_api': 5}, 'facebook_processing': {'attempted': 18, 'successful': 16, 'extracted_texts': 16}, 'timings_seconds': {'pdf_extraction': 1.04, 'pdf_text_extraction': 3.57, 'image_download': 61.38, 'html_scraping': 10.94, 'image_api': 226.24, 'facebook_processing': 139.57, 'facebook_text_extraction': 3.57, 'stats_consolidation': 0.0}}
2025-07-21 14:32:50,971 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-21 14:32:50,971 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-21 14:32:50,974 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-21 14:32:50,975 - main_orchestrator - INFO - Procesando 5 textos de imágenes para consolidación
2025-07-21 14:32:50,990 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-21 14:32:50,991 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-21 14:32:50,991 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-21 14:32:50,999 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-21 14:32:50,999 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-21 14:32:51,000 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-21 14:32:51,000 - semantic_cleaner - INFO - Extraídos 23 textos de HTML
2025-07-21 14:32:51,000 - semantic_cleaner - INFO - Extraídos 5 textos de imágenes
2025-07-21 14:32:51,001 - semantic_cleaner - INFO - Extraídos 16 textos de Facebook
2025-07-21 14:33:27,534 - semantic_cleaner - INFO - Se identificaron 49 grupos de textos similares
2025-07-21 14:33:27,536 - semantic_cleaner - INFO - Se seleccionaron 49 textos representativos
2025-07-21 14:33:27,537 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-21 14:33:27,537 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-21 14:33:27,548 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-21 14:33:27,548 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-21 14:33:27,579 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-21 14:33:27,579 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-21 14:33:27,580 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-21 14:33:27,581 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-21T14:32:50.969815', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 56, 'history_total_urls': 624, 'categories': {'html': 24, 'images': 9, 'social': 23}, 'html_processing': {'attempted': 24, 'processed': 23, 'successful': 23, 'relevant (>=0.3)': 14, 'average_relevance': 0.5086956521739129}, 'image_processing': {'attempted_download': 9, 'successful_download': 9, 'attempted_api': 9, 'successful_api': 5}, 'facebook_processing': {'attempted': 18, 'successful': 16, 'extracted_texts': 16}, 'timings_seconds': {'pdf_extraction': 1.04, 'pdf_text_extraction': 3.57, 'image_download': 61.38, 'html_scraping': 10.94, 'image_api': 226.24, 'facebook_processing': 139.57, 'facebook_text_extraction': 3.57, 'stats_consolidation': 0.0, 'semantic_cleaning': 36.59}}
2025-07-21 14:33:27,581 - main_orchestrator - INFO - Limpieza semántica completada en 36.59 seg.
2025-07-21 14:33:27,581 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-21 14:33:27,581 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-21 14:33:27,582 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-21 14:33:27,595 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16ngHNLS3G/
2025-07-21 14:33:27,595 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-21 14:33:27,596 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-21 14:33:27,597 - facebook_extractor_fix - INFO - Se han añadido 16 textos de Facebook al archivo limpio
2025-07-21 14:33:27,597 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-21 14:33:27,597 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-21 14:33:27,598 - main_orchestrator - INFO - ==================================================
2025-07-21 14:33:27,598 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1097.64 segundos.
2025-07-21 14:33:27,598 - main_orchestrator - INFO - ==================================================
2025-07-22 14:26:46,983 - main_orchestrator - INFO - ==================================================
2025-07-22 14:26:46,985 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-22 14:26:46,985 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-22 14:26:46,985 - main_orchestrator - INFO - ==================================================
2025-07-22 14:26:46,987 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-22 14:26:46,990 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-22 14:26:46,992 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-22 14:26:46,993 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 624 URLs.
2025-07-22 14:26:46,994 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-22 14:26:47,000 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-22 14:26:47,000 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-22 14:26:47,000 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-22 14:26:47,001 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-22 14:26:47,001 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-22 14:26:47,098 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-22 14:26:47,683 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-22 14:26:47,684 - main_orchestrator - INFO - PDF procesado en 0.68 seg. Enlaces encontrados: 51
2025-07-22 14:26:47,705 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-22 14:26:47,705 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-22 14:26:47,708 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-22 14:26:47,814 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 14:26:47,815 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-22 14:26:47,815 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 14:26:47,815 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-22 14:26:47,815 - lib.history_tracker - INFO - Filtradas 1 URLs ya procesadas del lote actual.
2025-07-22 14:26:47,815 - main_orchestrator - INFO - URLs nuevas para procesar: 50 (de 51 total)
2025-07-22 14:26:47,816 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-22 14:26:47,816 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-22 14:26:47,825 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-22 14:26:47,826 - content_deduplicator - INFO - Analizando 50 URLs para encontrar duplicados...
2025-07-22 14:26:47,831 - content_deduplicator - WARNING - Demasiados dominios (21). Limitando a los 20 más grandes.
2025-07-22 14:26:47,832 - content_deduplicator - INFO - Procesando 13 URLs del dominio imacorpplataforma.com
2025-07-22 14:26:48,138 - content_deduplicator - INFO - Procesando 12 URLs del dominio facebook.com
2025-07-22 14:26:48,139 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/diarioprimiciahyo/posts/1148486100635692 (tipo: facebook)
2025-07-22 14:27:09,817 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/diarioprimiciahyo/posts/1148486100635692
2025-07-22 14:27:11,434 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/v/1ALpVMiKUL/ (tipo: facebook)
2025-07-22 14:27:26,341 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/v/1ALpVMiKUL/
2025-07-22 14:27:27,236 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16ry32LuSa/ (tipo: facebook)
2025-07-22 14:27:36,727 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16ry32LuSa/
2025-07-22 14:27:37,201 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/manifiestoayacucho/posts/pfbid034UKYSzV3LT4RaoWUARUKGbhgQfER2TUA8bAtKX7Ctf3hEmbABQRSKbnCfBDf2n9el?rdid=J80nRgY0desM7kps (tipo: facebook)
2025-07-22 14:27:46,121 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/manifiestoayacucho/posts/pfbid034UKYSzV3LT4RaoWUARUKGbhgQfER2TUA8bAtKX7Ctf3hEmbABQRSKbnCfBDf2n9el?rdid=J80nRgY0desM7kps
2025-07-22 14:27:46,739 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16aMk1Rs1A/ (tipo: facebook)
2025-07-22 14:27:57,035 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16aMk1Rs1A/
2025-07-22 14:27:57,593 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1A8DFs7P4B/ (tipo: facebook)
2025-07-22 14:28:06,966 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1A8DFs7P4B/
2025-07-22 14:28:07,432 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/manifiestoayacucho/posts/pfbid0nLPg9parKUxCo845kHstQut3seAuDZGP1symWQVaMGFGVaAUUf4iVCEW3DQ3Npqcl?rdid=GrRuartHgSeOMTqu (tipo: facebook)
2025-07-22 14:28:16,831 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/manifiestoayacucho/posts/pfbid0nLPg9parKUxCo845kHstQut3seAuDZGP1symWQVaMGFGVaAUUf4iVCEW3DQ3Npqcl?rdid=GrRuartHgSeOMTqu
2025-07-22 14:28:17,297 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/16WifBSmH9/ (tipo: facebook)
2025-07-22 14:28:27,200 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-22 14:28:28,700 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-22 14:28:28,701 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/yck9oUP2mP0?si=2GZDXnmlVWaTePP5 (tipo: youtube)
2025-07-22 14:28:58,148 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/Kwgjfb3ZCFc?si=NSb5nHalmxRY1X_Z (tipo: youtube)
2025-07-22 14:29:20,689 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/izivmtznkEg?si=e-tggF8dVLwbZaGp (tipo: youtube)
2025-07-22 14:29:43,274 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/buxS7Ib13b8 (tipo: youtube)
2025-07-22 14:30:02,735 - selenium_extractor - INFO - Extrayendo contenido de URL: https://youtu.be/iOwweC7rkSM (tipo: youtube)
2025-07-22 14:30:26,205 - content_deduplicator - INFO - Procesando 2 URLs del dominio diariocorreo.pe
2025-07-22 14:30:26,205 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/la-libertad/monitorean-calidad-del-agua-en-escuelas-de-la-libertad-peru-trujillo-noticia/ (tipo: news)
2025-07-22 14:30:41,998 - selenium_extractor - INFO - Extrayendo contenido de URL: https://diariocorreo.pe/edicion/lambayeque/epsel-vuelve-a-abrir-vias-en-lugar-de-reponer-pavimento-noticia/ (tipo: news)
2025-07-22 14:30:56,907 - content_deduplicator - INFO - Procesando 2 URLs del dominio enfoquesperu.com
2025-07-22 14:30:56,908 - selenium_extractor - INFO - Extrayendo contenido de URL: https://enfoquesperu.com/joseph-cubas-nunca-me-senti-tan-discriminado-como-ahora-asi-se-sienten-los-altotrujillanos/ (tipo: other)
2025-07-22 14:31:08,070 - selenium_extractor - INFO - Extrayendo contenido de URL: https://enfoquesperu.com/alto-trujillo-exige-que-sedalib-otorgue-la-factibilidad-a-proyecto-para-agua/ (tipo: other)
2025-07-22 14:31:19,567 - content_deduplicator - INFO - Análisis completado en 271.74 segundos
2025-07-22 14:31:19,567 - content_deduplicator - INFO - URLs totales: 50, Únicas: 36, En grupos: 9
2025-07-22 14:31:19,568 - content_deduplicator - INFO - Se realizaron 89 comparaciones (0.3/seg), evitando 0
2025-07-22 14:31:19,568 - content_deduplicator - INFO - Grupos de duplicados encontrados: 3
2025-07-22 14:31:19,569 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-22 14:31:19,570 - main_orchestrator - INFO - Análisis de duplicados completado: 8 URLs duplicadas filtradas
2025-07-22 14:31:19,570 - main_orchestrator - INFO - URLs después de filtrar duplicados: 42
2025-07-22 14:31:19,571 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-22 14:31:19,571 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-22 14:31:19,573 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-22 14:31:19,573 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-22 14:31:19,575 - lib.url_manager - INFO - Clasificación de 42 URLs:
2025-07-22 14:31:19,577 - lib.url_manager - INFO -  - HTML: 19
2025-07-22 14:31:19,578 - lib.url_manager - INFO -  - IMAGES: 11
2025-07-22 14:31:19,578 - lib.url_manager - INFO -  - SOCIAL: 12
2025-07-22 14:31:19,583 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025_unprocessed.json
2025-07-22 14:31:19,584 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-22 14:31:19,584 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-22 14:31:19,584 - lib.image_processor - INFO - Iniciando descarga paralela de 11 imágenes para la fecha 14072025...
2025-07-22 14:31:20,595 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/12-07-2025-C31-EL-ESTADO-A-TU-SERVICIO-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-0600.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-22 14:31:20,754 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/11-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0900-AM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-22 14:31:20,758 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/12-07-2025-RPP-DECLARAN-EN-EMERGENCIA-EL-RIO-UCAYALI.mp3 contiene audio/mpeg, no una imagen. Se descargará pero no se procesará con la API.
2025-07-22 14:31:21,226 - lib.image_processor - INFO - Imagen 5 guardada como 'img_5_fb54ce89_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (438679 bytes)
2025-07-22 14:31:21,316 - lib.image_processor - INFO - Imagen 6 guardada como 'img_6_fd4e5761_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (276587 bytes)
2025-07-22 14:31:21,332 - lib.image_processor - INFO - Imagen 9 guardada como 'img_9_30232c3c_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (242945 bytes)
2025-07-22 14:31:21,334 - lib.image_processor - INFO - Imagen 8 guardada como 'img_8_4187f901_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (263001 bytes)
2025-07-22 14:31:21,419 - lib.image_processor - INFO - Imagen 4 guardada como 'img_4_531e1084_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (122105 bytes)
2025-07-22 14:31:21,569 - lib.image_processor - INFO - Imagen 7 guardada como 'img_7_c9c46de3_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (783809 bytes)
2025-07-22 14:31:21,577 - lib.image_processor - INFO - Imagen 10 guardada como 'img_10_1c978264_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (350959 bytes)
2025-07-22 14:31:21,863 - lib.image_processor - INFO - Imagen 3 guardada como 'img_3_b5a6dda0_14072025.mp3' en /home/erick/NewsAgent/input/Images/downloads/14072025 (803736 bytes)
2025-07-22 14:31:23,041 - lib.image_processor - INFO - Imagen 11 guardada como 'img_11_4968cf1f_14072025.jpg' en /home/erick/NewsAgent/input/Images/downloads/14072025 (1035473 bytes)
2025-07-22 14:31:58,135 - lib.image_processor - INFO - Imagen 2 guardada como 'img_2_fc982f8c_14072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/14072025 (134474576 bytes)
2025-07-22 14:31:58,703 - lib.image_processor - INFO - Progreso descarga imágenes: 10/11 en 39.12 seg.
2025-07-22 14:31:59,373 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_27fed9c0_14072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/14072025 (140064138 bytes)
2025-07-22 14:32:00,064 - lib.image_processor - INFO - Progreso descarga imágenes: 11/11 en 40.48 seg.
2025-07-22 14:32:00,067 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025.json
2025-07-22 14:32:00,067 - lib.image_processor - INFO - Descarga de imágenes completada para 11/11 URLs en 40.48 segundos.
2025-07-22 14:32:00,067 - main_orchestrator - INFO - Descarga de imágenes completada en 40.48 seg.
2025-07-22 14:32:00,068 - lib.history_tracker - INFO - Añadidas 11 nuevas URLs al historial.
2025-07-22 14:32:00,077 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 635 URLs.
2025-07-22 14:32:00,077 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-22 14:32:00,077 - lib.html_scraper - INFO - Iniciando scraping paralelo de 19 URLs...
2025-07-22 14:32:11,521 - lib.html_scraper - INFO - Progreso: 19/19 URLs procesadas en 11.44 seg.
2025-07-22 14:32:11,537 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-22 14:32:11,537 - lib.html_scraper - INFO - Scraping completado para 19/19 URLs en 11.46 segundos.
2025-07-22 14:32:11,538 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-22 14:32:11,539 - main_orchestrator - INFO - Scraping HTML completado en 11.46 seg.
2025-07-22 14:32:11,539 - lib.history_tracker - INFO - Añadidas 19 nuevas URLs al historial.
2025-07-22 14:32:11,553 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 654 URLs.
2025-07-22 14:32:11,554 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-22 14:32:14,587 - lib.api_client - INFO - Texto extraído de tmpo8yvn2pw.jpg (4 chars).
2025-07-22 14:32:14,588 - lib.image_processor - INFO - Procesando 11 imágenes con API (batch_size=3, pausa=60s)
2025-07-22 14:32:14,588 - lib.image_processor - INFO - Procesando batch 1 (3 imágenes)
2025-07-22 14:32:14,589 - lib.image_processor - INFO - Procesando imagen con API: img_6_fd4e5761_14072025.jpg
2025-07-22 14:32:37,693 - lib.api_client - INFO - Texto extraído de img_6_fd4e5761_14072025.jpg (5747 chars).
2025-07-22 14:32:39,200 - lib.image_processor - INFO - Imagen procesada exitosamente: img_6_fd4e5761_14072025.jpg
2025-07-22 14:32:39,808 - lib.image_processor - INFO - Procesando imagen con API: img_5_fb54ce89_14072025.jpg
2025-07-22 14:32:46,055 - lib.api_client - INFO - Texto extraído de img_5_fb54ce89_14072025.jpg (1329 chars).
2025-07-22 14:32:48,352 - lib.image_processor - INFO - Imagen procesada exitosamente: img_5_fb54ce89_14072025.jpg
2025-07-22 14:32:49,065 - lib.image_processor - INFO - Procesando imagen con API: img_10_1c978264_14072025.jpg
2025-07-22 14:32:55,383 - lib.api_client - INFO - Texto extraído de img_10_1c978264_14072025.jpg (990 chars).
2025-07-22 14:32:57,612 - lib.image_processor - INFO - Imagen procesada exitosamente: img_10_1c978264_14072025.jpg
2025-07-22 14:32:58,274 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-22 14:33:58,334 - lib.image_processor - INFO - Procesando batch 2 (3 imágenes)
2025-07-22 14:33:58,334 - lib.image_processor - INFO - Procesando imagen con API: img_8_4187f901_14072025.jpg
2025-07-22 14:34:04,954 - lib.api_client - INFO - Texto extraído de img_8_4187f901_14072025.jpg (1271 chars).
2025-07-22 14:34:06,750 - lib.image_processor - INFO - Imagen procesada exitosamente: img_8_4187f901_14072025.jpg
2025-07-22 14:34:07,657 - lib.image_processor - INFO - Procesando imagen con API: img_4_531e1084_14072025.jpg
2025-07-22 14:34:11,848 - lib.api_client - INFO - Texto extraído de img_4_531e1084_14072025.jpg (846 chars).
2025-07-22 14:34:14,777 - lib.image_processor - INFO - Imagen procesada exitosamente: img_4_531e1084_14072025.jpg
2025-07-22 14:34:15,367 - lib.image_processor - INFO - Procesando imagen con API: img_7_c9c46de3_14072025.jpg
2025-07-22 14:34:30,049 - lib.api_client - INFO - Texto extraído de img_7_c9c46de3_14072025.jpg (3137 chars).
2025-07-22 14:34:31,075 - lib.image_processor - INFO - Imagen procesada exitosamente: img_7_c9c46de3_14072025.jpg
2025-07-22 14:34:31,906 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-22 14:35:31,941 - lib.image_processor - INFO - Procesando batch 3 (3 imágenes)
2025-07-22 14:35:31,941 - lib.image_processor - INFO - Procesando imagen con API: img_9_30232c3c_14072025.jpg
2025-07-22 14:35:38,237 - lib.api_client - INFO - Texto extraído de img_9_30232c3c_14072025.jpg (1225 chars).
2025-07-22 14:35:39,410 - lib.image_processor - INFO - Imagen procesada exitosamente: img_9_30232c3c_14072025.jpg
2025-07-22 14:35:40,282 - lib.image_processor - INFO - Procesando imagen con API: img_3_b5a6dda0_14072025.mp3
2025-07-22 14:35:40,283 - lib.image_processor - WARNING - Archivo multimedia detectado por extensión: /home/erick/NewsAgent/input/Images/downloads/14072025/img_3_b5a6dda0_14072025.mp3
2025-07-22 14:35:40,284 - lib.image_processor - WARNING - Error procesando imagen img_3_b5a6dda0_14072025.mp3: File is multimedia content, not an image
2025-07-22 14:35:41,005 - lib.image_processor - INFO - Procesando imagen con API: img_11_4968cf1f_14072025.jpg
2025-07-22 14:35:53,645 - lib.api_client - INFO - Texto extraído de img_11_4968cf1f_14072025.jpg (2507 chars).
2025-07-22 14:35:56,348 - lib.image_processor - INFO - Imagen procesada exitosamente: img_11_4968cf1f_14072025.jpg
2025-07-22 14:35:57,332 - lib.image_processor - INFO - Pausa de 60s antes del siguiente batch...
2025-07-22 14:36:57,390 - lib.image_processor - INFO - Procesando batch 4 (2 imágenes)
2025-07-22 14:36:57,390 - lib.image_processor - INFO - Procesando imagen con API: img_2_fc982f8c_14072025.mp4
2025-07-22 14:36:57,390 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/14072025/img_2_fc982f8c_14072025.mp4 (128.24 MB)
2025-07-22 14:36:57,391 - lib.image_processor - WARNING - Error procesando imagen img_2_fc982f8c_14072025.mp4: Image file too large
2025-07-22 14:36:58,079 - lib.image_processor - INFO - Procesando imagen con API: img_1_27fed9c0_14072025.mp4
2025-07-22 14:36:58,079 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/14072025/img_1_27fed9c0_14072025.mp4 (133.58 MB)
2025-07-22 14:36:58,079 - lib.image_processor - WARNING - Error procesando imagen img_1_27fed9c0_14072025.mp4: Image file too large
2025-07-22 14:36:58,784 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-22 14:36:58,784 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-22 14:36:58,784 - lib.image_processor - INFO - Procesamiento API completado para 8/11 imágenes en 284.20 segundos.
2025-07-22 14:36:58,785 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 287.23 seg.
2025-07-22 14:36:58,785 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-22 14:36:58,786 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-22 14:36:58,787 - main_orchestrator - INFO - Encontradas 7 URLs de Facebook para procesar
2025-07-22 14:36:58,788 - main_orchestrator - INFO - Creado directorio para PDFs: /home/erick/NewsAgent/base/14072025
2025-07-22 14:36:58,789 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-22 14:36:58,789 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 7 URLs de Facebook para la fecha 14072025...
2025-07-22 14:36:58,794 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/diarioprimiciahyo/posts/1148486100635692
2025-07-22 14:36:58,797 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/diarioprimiciahyo/posts/1148486100635692
2025-07-22 14:36:58,799 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/v/1ALpVMiKUL/
2025-07-22 14:36:58,810 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/share/p/16ry32LuSa/
2025-07-22 14:36:58,826 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/16ry32LuSa/
2025-07-22 14:37:53,775 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-5.pdf
2025-07-22 14:37:54,540 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-22 14:37:54,800 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-2.pdf
2025-07-22 14:37:55,289 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-4.pdf
2025-07-22 14:37:55,913 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/1A8DFs7P4B/
2025-07-22 14:37:57,490 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/p/1A8DFs7P4B/
2025-07-22 14:38:01,627 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-3.pdf
2025-07-22 14:38:04,406 - lib.facebook_processor - INFO - Progreso Facebook: 5/7 en 65.62 seg.
2025-07-22 14:38:18,964 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-6.pdf
2025-07-22 14:38:19,247 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-7.pdf
2025-07-22 14:38:22,733 - lib.facebook_processor - INFO - Progreso Facebook: 7/7 en 83.94 seg.
2025-07-22 14:38:22,735 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_14072025.json
2025-07-22 14:38:22,735 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 4/7 exitosos en 83.95 segundos.
2025-07-22 14:38:22,735 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 83.95 seg.
2025-07-22 14:38:22,735 - lib.history_tracker - INFO - Añadidas 4 nuevas URLs al historial.
2025-07-22 14:38:22,739 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 658 URLs.
2025-07-22 14:38:22,739 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-22 14:38:22,998 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-4.pdf
2025-07-22 14:38:23,318 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-22 14:38:23,591 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-3.pdf
2025-07-22 14:38:23,772 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-6.pdf
2025-07-22 14:38:23,772 - lib.facebook_processor - INFO - Texto extraído de 4 PDFs de Facebook
2025-07-22 14:38:23,773 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.03 seg.
2025-07-22 14:38:23,773 - main_orchestrator - INFO - Texto extraído de 4 PDFs de Facebook
2025-07-22 14:38:23,774 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 14:38:23,774 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 14:38:23,776 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-22 14:38:23,784 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 14:38:23,784 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 14:38:23,784 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-22T14:38:23.778091', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 42, 'history_total_urls': 658, 'categories': {'html': 19, 'images': 11, 'social': 12}, 'html_processing': {'attempted': 19, 'processed': 19, 'successful': 19, 'relevant (>=0.3)': 12, 'average_relevance': 0.4473684210526316}, 'image_processing': {'attempted_download': 11, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 8}, 'facebook_processing': {'attempted': 7, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.68, 'pdf_text_extraction': 1.03, 'image_download': 40.48, 'html_scraping': 11.46, 'image_api': 287.23, 'facebook_processing': 83.95, 'facebook_text_extraction': 1.03, 'stats_consolidation': 0.0}}
2025-07-22 14:38:23,785 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-22 14:38:23,785 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-22 14:38:23,787 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 14:38:23,802 - main_orchestrator - INFO - Procesando 8 textos de imágenes para consolidación
2025-07-22 14:38:23,822 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-22 14:38:23,832 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-22 14:38:23,833 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-22 14:38:23,866 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-22 14:38:23,866 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-22 14:38:23,867 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-22 14:38:23,869 - semantic_cleaner - INFO - Extraídos 19 textos de HTML
2025-07-22 14:38:23,875 - semantic_cleaner - INFO - Extraídos 8 textos de imágenes
2025-07-22 14:38:23,875 - semantic_cleaner - INFO - Extraídos 4 textos de Facebook
2025-07-22 14:38:55,075 - semantic_cleaner - INFO - Se identificaron 36 grupos de textos similares
2025-07-22 14:38:55,076 - semantic_cleaner - INFO - Se seleccionaron 36 textos representativos
2025-07-22 14:38:55,076 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-22 14:38:55,076 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-22 14:38:55,104 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-22 14:38:55,104 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 14:38:55,156 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 14:38:55,157 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 14:38:55,157 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 14:38:55,158 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-22T14:38:23.778091', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 42, 'history_total_urls': 658, 'categories': {'html': 19, 'images': 11, 'social': 12}, 'html_processing': {'attempted': 19, 'processed': 19, 'successful': 19, 'relevant (>=0.3)': 12, 'average_relevance': 0.4473684210526316}, 'image_processing': {'attempted_download': 11, 'successful_download': 11, 'attempted_api': 11, 'successful_api': 8}, 'facebook_processing': {'attempted': 7, 'successful': 4, 'extracted_texts': 4}, 'timings_seconds': {'pdf_extraction': 0.68, 'pdf_text_extraction': 1.03, 'image_download': 40.48, 'html_scraping': 11.46, 'image_api': 287.23, 'facebook_processing': 83.95, 'facebook_text_extraction': 1.03, 'stats_consolidation': 0.0, 'semantic_cleaning': 31.32}}
2025-07-22 14:38:55,158 - main_orchestrator - INFO - Limpieza semántica completada en 31.32 seg.
2025-07-22 14:38:55,158 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-22 14:38:55,158 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-22 14:38:55,159 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 14:38:55,178 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16ry32LuSa/
2025-07-22 14:38:55,179 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-22 14:38:55,180 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 14:38:55,180 - facebook_extractor_fix - INFO - Se han añadido 4 textos de Facebook al archivo limpio
2025-07-22 14:38:55,181 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-22 14:38:55,181 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-22 14:38:55,181 - main_orchestrator - INFO - ==================================================
2025-07-22 14:38:55,181 - main_orchestrator - INFO - PIPELINE FINALIZADO en 728.20 segundos.
2025-07-22 14:38:55,181 - main_orchestrator - INFO - ==================================================
2025-07-22 14:38:58,355 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:38:59,417 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:00,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:01,409 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:02,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:04,127 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:04,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:05,271 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:05,975 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:06,340 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:07,043 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:07,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:08,006 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:08,725 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:09,210 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:10,605 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:14,151 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:15,260 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:16,133 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:17,794 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:18,520 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:19,354 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:20,826 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:21,282 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:21,851 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:22,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:22,953 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:24,878 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:25,338 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:26,291 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:26,711 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:27,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:28,119 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:28,638 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:29,011 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 14:39:29,844 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:07:37,906 - main_orchestrator - INFO - ==================================================
2025-07-22 15:07:37,913 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-22 15:07:37,913 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-22 15:07:37,913 - main_orchestrator - INFO - ==================================================
2025-07-22 15:07:37,933 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-22 15:07:37,934 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-22 15:07:37,935 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-22 15:07:37,936 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 658 URLs.
2025-07-22 15:07:37,936 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-22 15:07:37,937 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-22 15:07:37,937 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-22 15:07:37,937 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-22 15:07:37,937 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-22 15:07:37,938 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-22 15:07:38,005 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-22 15:07:38,812 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-22 15:07:38,812 - main_orchestrator - INFO - PDF procesado en 0.87 seg. Enlaces encontrados: 51
2025-07-22 15:07:38,864 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-22 15:07:38,865 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-22 15:07:38,866 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-22 15:07:39,124 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 15:07:39,124 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-22 15:07:39,124 - main_orchestrator - INFO - Texto del PDF extraído en 0.26 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 15:07:39,125 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-22 15:07:39,125 - lib.history_tracker - INFO - Filtradas 38 URLs ya procesadas del lote actual.
2025-07-22 15:07:39,125 - main_orchestrator - INFO - URLs nuevas para procesar: 13 (de 51 total)
2025-07-22 15:07:39,125 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-22 15:07:39,125 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-22 15:07:39,161 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-22 15:07:39,161 - content_deduplicator - INFO - Analizando 13 URLs para encontrar duplicados...
2025-07-22 15:07:39,162 - content_deduplicator - INFO - Procesando 5 URLs del dominio facebook.com
2025-07-22 15:07:39,225 - content_deduplicator - INFO - Procesando 2 URLs del dominio imacorpplataforma.com
2025-07-22 15:07:39,226 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-22 15:07:39,246 - content_deduplicator - INFO - Análisis completado en 0.08 segundos
2025-07-22 15:07:39,247 - content_deduplicator - INFO - URLs totales: 13, Únicas: 6, En grupos: 6
2025-07-22 15:07:39,247 - content_deduplicator - INFO - Se realizaron 15 comparaciones (176.9/seg), evitando 0
2025-07-22 15:07:39,247 - content_deduplicator - INFO - Grupos de duplicados encontrados: 3
2025-07-22 15:07:39,252 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-22 15:07:39,261 - main_orchestrator - INFO - Análisis de duplicados completado: 4 URLs duplicadas filtradas
2025-07-22 15:07:39,261 - main_orchestrator - INFO - URLs después de filtrar duplicados: 9
2025-07-22 15:07:39,261 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-22 15:07:39,261 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-22 15:07:39,262 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-22 15:07:39,262 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-22 15:07:39,263 - lib.url_manager - INFO - Clasificación de 9 URLs:
2025-07-22 15:07:39,264 - lib.url_manager - INFO -  - HTML: 1
2025-07-22 15:07:39,264 - lib.url_manager - INFO -  - IMAGES: 1
2025-07-22 15:07:39,265 - lib.url_manager - INFO -  - SOCIAL: 7
2025-07-22 15:07:39,266 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025_unprocessed.json
2025-07-22 15:07:39,266 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-22 15:07:39,267 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-22 15:07:39,267 - lib.image_processor - INFO - Iniciando descarga paralela de 1 imágenes para la fecha 14072025...
2025-07-22 15:07:40,041 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/13-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0650PM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-22 15:08:00,727 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_97f8dbd7_14072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/14072025 (140064138 bytes)
2025-07-22 15:08:01,024 - lib.image_processor - INFO - Progreso descarga imágenes: 1/1 en 21.76 seg.
2025-07-22 15:08:01,043 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025.json
2025-07-22 15:08:01,044 - lib.image_processor - INFO - Descarga de imágenes completada para 1/1 URLs en 21.78 segundos.
2025-07-22 15:08:01,044 - main_orchestrator - INFO - Descarga de imágenes completada en 21.78 seg.
2025-07-22 15:08:01,044 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-22 15:08:01,075 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 659 URLs.
2025-07-22 15:08:01,076 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-22 15:08:01,076 - lib.html_scraper - INFO - Iniciando scraping paralelo de 1 URLs...
2025-07-22 15:08:02,955 - lib.html_scraper - INFO - Progreso: 1/1 URLs procesadas en 1.88 seg.
2025-07-22 15:08:02,956 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-22 15:08:02,957 - lib.html_scraper - INFO - Scraping completado para 1/1 URLs en 1.88 segundos.
2025-07-22 15:08:02,957 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-22 15:08:02,957 - main_orchestrator - INFO - Scraping HTML completado en 1.88 seg.
2025-07-22 15:08:02,957 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-22 15:08:02,971 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 660 URLs.
2025-07-22 15:08:02,971 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-22 15:08:05,986 - lib.api_client - INFO - Texto extraído de tmpcsp37cop.jpg (4 chars).
2025-07-22 15:08:05,987 - lib.image_processor - INFO - Procesando 1 imágenes con API (batch_size=3, pausa=60s)
2025-07-22 15:08:05,987 - lib.image_processor - INFO - Procesando batch 1 (1 imágenes)
2025-07-22 15:08:05,987 - lib.image_processor - INFO - Procesando imagen con API: img_1_97f8dbd7_14072025.mp4
2025-07-22 15:08:05,988 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/14072025/img_1_97f8dbd7_14072025.mp4 (133.58 MB)
2025-07-22 15:08:05,988 - lib.image_processor - WARNING - Error procesando imagen img_1_97f8dbd7_14072025.mp4: Image file too large
2025-07-22 15:08:06,825 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-22 15:08:06,826 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-22 15:08:06,826 - lib.image_processor - INFO - Procesamiento API completado para 0/1 imágenes en 0.84 segundos.
2025-07-22 15:08:06,826 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 3.85 seg.
2025-07-22 15:08:06,826 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-22 15:08:06,827 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-22 15:08:06,827 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-07-22 15:08:06,828 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-22 15:08:06,828 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 14072025...
2025-07-22 15:08:06,829 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/manifiestoayacucho/posts/pfbid034UKYSzV3LT4RaoWUARUKGbhgQfER2TUA8bAtKX7Ctf3hEmbABQRSKbnCfBDf2n9el?rdid=J80nRgY0desM7kps
2025-07-22 15:08:06,846 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/manifiestoayacucho/posts/pfbid0nLPg9parKUxCo845kHstQut3seAuDZGP1symWQVaMGFGVaAUUf4iVCEW3DQ3Npqcl?rdid=GrRuartHgSeOMTqu
2025-07-22 15:08:53,113 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-2.pdf
2025-07-22 15:08:54,575 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-22 15:08:57,814 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 50.99 seg.
2025-07-22 15:08:57,815 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_14072025.json
2025-07-22 15:08:57,815 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 50.99 segundos.
2025-07-22 15:08:57,816 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 50.99 seg.
2025-07-22 15:08:57,816 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-07-22 15:08:57,819 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 662 URLs.
2025-07-22 15:08:57,819 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-22 15:08:58,221 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-2.pdf
2025-07-22 15:08:58,615 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-22 15:08:58,616 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-22 15:08:58,616 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.80 seg.
2025-07-22 15:08:58,616 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-22 15:08:58,617 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 15:08:58,617 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 15:08:58,617 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-22 15:08:58,622 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 15:08:58,624 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 15:08:58,630 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-22T15:08:58.617936', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 9, 'history_total_urls': 662, 'categories': {'html': 1, 'images': 1, 'social': 7}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 1, 'average_relevance': 0.4}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.87, 'pdf_text_extraction': 0.8, 'image_download': 21.78, 'html_scraping': 1.88, 'image_api': 3.85, 'facebook_processing': 50.99, 'facebook_text_extraction': 0.8, 'stats_consolidation': 0.0}}
2025-07-22 15:08:58,631 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-22 15:08:58,631 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-22 15:08:58,640 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-22 15:08:58,641 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-22 15:08:58,647 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-22 15:08:58,648 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-22 15:08:58,649 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-22 15:08:58,652 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-22 15:08:58,653 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-22 15:08:58,653 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-22 15:08:58,654 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-22 15:08:58,654 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-22 15:08:58,655 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-07-22 15:08:59,777 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-07-22 15:08:59,778 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-07-22 15:08:59,778 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-22 15:08:59,778 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-22 15:08:59,794 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-22 15:08:59,794 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 15:08:59,802 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 15:08:59,811 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 15:08:59,812 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-22 15:08:59,812 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-22T15:08:58.617936', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 9, 'history_total_urls': 662, 'categories': {'html': 1, 'images': 1, 'social': 7}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 1, 'average_relevance': 0.4}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.87, 'pdf_text_extraction': 0.8, 'image_download': 21.78, 'html_scraping': 1.88, 'image_api': 3.85, 'facebook_processing': 50.99, 'facebook_text_extraction': 0.8, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.15}}
2025-07-22 15:08:59,812 - main_orchestrator - INFO - Limpieza semántica completada en 1.15 seg.
2025-07-22 15:08:59,812 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-22 15:08:59,812 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-22 15:08:59,813 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-22 15:08:59,815 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/manifiestoayacucho/posts/pfbid0nLPg9parKUxCo845kHstQut3seAuDZGP1symWQVaMGFGVaAUUf4iVCEW3DQ3Npqcl?rdid=GrRuartHgSeOMTqu
2025-07-22 15:08:59,815 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-22 15:08:59,816 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-22 15:08:59,816 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-22 15:08:59,816 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-22 15:08:59,816 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-22 15:08:59,817 - main_orchestrator - INFO - ==================================================
2025-07-22 15:08:59,817 - main_orchestrator - INFO - PIPELINE FINALIZADO en 81.91 segundos.
2025-07-22 15:08:59,817 - main_orchestrator - INFO - ==================================================
2025-07-22 15:09:02,569 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:03,783 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:04,262 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:04,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:05,286 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:05,814 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:06,284 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-22 15:09:06,850 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:23:02,071 - main_orchestrator - INFO - ==================================================
2025-07-24 09:23:02,072 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 09:23:02,072 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 09:23:02,072 - main_orchestrator - INFO - ==================================================
2025-07-24 09:23:02,079 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 09:23:02,082 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 09:23:02,083 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 09:23:02,091 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 662 URLs.
2025-07-24 09:23:02,091 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 09:23:02,092 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 09:23:02,092 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 09:23:02,092 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 09:23:02,093 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 09:23:02,093 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 09:23:02,188 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:23:02,541 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 09:23:02,541 - main_orchestrator - INFO - PDF procesado en 0.45 seg. Enlaces encontrados: 51
2025-07-24 09:23:02,560 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 09:23:02,560 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 09:23:02,561 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:23:02,625 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:23:02,626 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 09:23:02,627 - main_orchestrator - INFO - Texto del PDF extraído en 0.07 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:23:02,628 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 09:23:02,628 - lib.history_tracker - INFO - Filtradas 42 URLs ya procesadas del lote actual.
2025-07-24 09:23:02,628 - main_orchestrator - INFO - URLs nuevas para procesar: 9 (de 51 total)
2025-07-24 09:23:02,629 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 09:23:02,632 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 09:23:02,660 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 09:23:02,661 - content_deduplicator - INFO - Analizando 9 URLs para encontrar duplicados...
2025-07-24 09:23:02,661 - content_deduplicator - INFO - Procesando 3 URLs del dominio facebook.com
2025-07-24 09:23:02,674 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 09:23:02,681 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-07-24 09:23:02,681 - content_deduplicator - INFO - URLs totales: 9, Únicas: 8, En grupos: 0
2025-07-24 09:23:02,682 - content_deduplicator - INFO - Se realizaron 11 comparaciones (545.6/seg), evitando 0
2025-07-24 09:23:02,682 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 09:23:02,683 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:23:02,683 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 09:23:02,683 - main_orchestrator - INFO - URLs después de filtrar duplicados: 9
2025-07-24 09:23:02,683 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:23:02,684 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 09:23:02,692 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 09:23:02,693 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 09:23:02,693 - lib.url_manager - INFO - Clasificación de 9 URLs:
2025-07-24 09:23:02,693 - lib.url_manager - INFO -  - IMAGES: 1
2025-07-24 09:23:02,694 - lib.url_manager - INFO -  - SOCIAL: 8
2025-07-24 09:23:02,694 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025_unprocessed.json
2025-07-24 09:23:02,696 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 09:23:02,696 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 09:23:02,696 - lib.image_processor - INFO - Iniciando descarga paralela de 1 imágenes para la fecha 14072025...
2025-07-24 09:23:03,743 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/13-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-1055PM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-24 09:23:26,115 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_3dba88dd_14072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/14072025 (140064138 bytes)
2025-07-24 09:23:26,328 - lib.image_processor - INFO - Progreso descarga imágenes: 1/1 en 23.63 seg.
2025-07-24 09:23:26,330 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_14072025.json
2025-07-24 09:23:26,330 - lib.image_processor - INFO - Descarga de imágenes completada para 1/1 URLs en 23.63 segundos.
2025-07-24 09:23:26,330 - main_orchestrator - INFO - Descarga de imágenes completada en 23.63 seg.
2025-07-24 09:23:26,331 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-24 09:23:26,335 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 663 URLs.
2025-07-24 09:23:26,335 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 09:23:26,335 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 09:23:26,336 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 09:23:29,242 - lib.api_client - INFO - Texto extraído de tmpxgcvlzsl.jpg (4 chars).
2025-07-24 09:23:29,242 - lib.image_processor - INFO - Procesando 1 imágenes con API (batch_size=3, pausa=60s)
2025-07-24 09:23:29,242 - lib.image_processor - INFO - Procesando batch 1 (1 imágenes)
2025-07-24 09:23:29,243 - lib.image_processor - INFO - Procesando imagen con API: img_1_3dba88dd_14072025.mp4
2025-07-24 09:23:29,243 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/14072025/img_1_3dba88dd_14072025.mp4 (133.58 MB)
2025-07-24 09:23:29,243 - lib.image_processor - WARNING - Error procesando imagen img_1_3dba88dd_14072025.mp4: Image file too large
2025-07-24 09:23:29,819 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:23:29,820 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:23:29,820 - lib.image_processor - INFO - Procesamiento API completado para 0/1 imágenes en 0.58 segundos.
2025-07-24 09:23:29,820 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 3.48 seg.
2025-07-24 09:23:29,820 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 09:23:29,821 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 09:23:29,823 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-07-24 09:23:29,824 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-24 09:23:29,824 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 14072025...
2025-07-24 09:23:29,825 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16aMk1Rs1A/
2025-07-24 09:23:29,826 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:23:29,828 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:24:41,514 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-24 09:24:41,699 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-2.pdf
2025-07-24 09:24:43,091 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/14072025/14072025-3.pdf
2025-07-24 09:24:45,959 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 76.13 seg.
2025-07-24 09:24:45,963 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_14072025.json
2025-07-24 09:24:45,963 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/3 exitosos en 76.14 segundos.
2025-07-24 09:24:45,963 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 76.14 seg.
2025-07-24 09:24:45,963 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-07-24 09:24:45,966 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 09:24:45,966 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 09:24:46,115 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-3.pdf
2025-07-24 09:24:46,253 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/14072025/14072025-1.pdf
2025-07-24 09:24:46,253 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-24 09:24:46,254 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.29 seg.
2025-07-24 09:24:46,255 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-24 09:24:46,258 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:24:46,259 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:24:46,259 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 09:24:46,260 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:24:46,260 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:24:46,260 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:24:46.259472', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 9, 'history_total_urls': 665, 'categories': {'images': 1, 'social': 8}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.45, 'pdf_text_extraction': 0.29, 'image_download': 23.63, 'html_scraping': 0, 'image_api': 3.48, 'facebook_processing': 76.14, 'facebook_text_extraction': 0.29, 'stats_consolidation': 0.0}}
2025-07-24 09:24:46,261 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 09:24:46,261 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 09:24:46,262 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 09:24:46,263 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:24:46,263 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 09:24:46,265 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:24:46,265 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:24:46,266 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 09:24:46,288 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 09:24:46,289 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 09:24:46,290 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 09:24:46,290 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 09:24:46,290 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 09:24:46,292 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-07-24 09:24:46,934 - semantic_cleaner - INFO - Se identificaron 8 grupos de textos similares
2025-07-24 09:24:46,935 - semantic_cleaner - INFO - Se seleccionaron 8 textos representativos
2025-07-24 09:24:46,936 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 09:24:46,936 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:24:46,939 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:24:46,939 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:24:46,941 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:24:46,942 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:24:46,942 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:24:46,942 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:24:46.259472', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 9, 'history_total_urls': 665, 'categories': {'images': 1, 'social': 8}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.45, 'pdf_text_extraction': 0.29, 'image_download': 23.63, 'html_scraping': 0, 'image_api': 3.48, 'facebook_processing': 76.14, 'facebook_text_extraction': 0.29, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.68}}
2025-07-24 09:24:46,942 - main_orchestrator - INFO - Limpieza semántica completada en 0.68 seg.
2025-07-24 09:24:46,943 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 09:24:46,943 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 09:24:46,943 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:24:46,948 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:24:46,948 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 09:24:46,950 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:24:46,950 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 09:24:46,951 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 09:24:46,951 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 09:24:46,951 - main_orchestrator - INFO - ==================================================
2025-07-24 09:24:46,952 - main_orchestrator - INFO - PIPELINE FINALIZADO en 104.88 segundos.
2025-07-24 09:24:46,952 - main_orchestrator - INFO - ==================================================
2025-07-24 09:26:34,366 - main_orchestrator - INFO - ==================================================
2025-07-24 09:26:34,367 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 09:26:34,367 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 09:26:34,367 - main_orchestrator - INFO - ==================================================
2025-07-24 09:26:34,371 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 09:26:34,373 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 09:26:34,374 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 09:26:34,375 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 09:26:34,382 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 09:26:34,383 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 09:26:34,383 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 09:26:34,383 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 09:26:34,384 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 09:26:34,384 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 09:26:34,395 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:26:35,215 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 09:26:35,215 - main_orchestrator - INFO - PDF procesado en 0.83 seg. Enlaces encontrados: 51
2025-07-24 09:26:35,233 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 09:26:35,233 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 09:26:35,235 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:26:35,333 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:26:35,334 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 09:26:35,334 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:26:35,334 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 09:26:35,334 - lib.history_tracker - INFO - Filtradas 46 URLs ya procesadas del lote actual.
2025-07-24 09:26:35,335 - main_orchestrator - INFO - URLs nuevas para procesar: 5 (de 51 total)
2025-07-24 09:26:35,335 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 09:26:35,350 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 09:26:35,357 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 09:26:35,357 - content_deduplicator - INFO - Analizando 5 URLs para encontrar duplicados...
2025-07-24 09:26:35,358 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 09:26:35,378 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-07-24 09:26:35,378 - content_deduplicator - INFO - URLs totales: 5, Únicas: 5, En grupos: 0
2025-07-24 09:26:35,379 - content_deduplicator - INFO - Se realizaron 10 comparaciones (499.8/seg), evitando 0
2025-07-24 09:26:35,384 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 09:26:35,387 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:26:35,387 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 09:26:35,387 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-07-24 09:26:35,388 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:26:35,388 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 09:26:35,389 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 09:26:35,391 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 09:26:35,392 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-07-24 09:26:35,393 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 09:26:35,394 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 09:26:35,395 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 09:26:35,395 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 09:26:35,395 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 09:26:35,395 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 09:26:35,395 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 09:26:35,403 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 09:26:35,404 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 09:26:35,409 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 09:26:35,411 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-24 09:26:35,411 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 09:26:35,412 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-24 09:26:35,412 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 09:26:35,412 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:26:35,413 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:26:35,413 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:26:35.412391', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.83, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-07-24 09:26:35,413 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 09:26:35,413 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 09:26:35,414 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 09:26:35,435 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:26:35,435 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:26:35,436 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 09:26:35,438 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:26:35,438 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:26:35,438 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 09:26:35,441 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 09:26:35,442 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 09:26:35,442 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 09:26:35,443 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 09:26:35,444 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 09:26:35,444 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 09:26:35,920 - semantic_cleaner - INFO - Se identificaron 6 grupos de textos similares
2025-07-24 09:26:35,921 - semantic_cleaner - INFO - Se seleccionaron 6 textos representativos
2025-07-24 09:26:35,921 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 09:26:35,922 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:26:35,924 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:26:35,925 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:26:35,928 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:26:35,929 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:26:35,930 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:26:35,930 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:26:35.412391', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.83, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.49}}
2025-07-24 09:26:35,930 - main_orchestrator - INFO - Limpieza semántica completada en 0.49 seg.
2025-07-24 09:26:35,930 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 09:26:35,931 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 09:26:35,931 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:26:35,934 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:26:35,934 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 09:26:35,936 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:26:35,936 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 09:26:35,936 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 09:26:35,937 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 09:26:35,937 - main_orchestrator - INFO - ==================================================
2025-07-24 09:26:35,938 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.57 segundos.
2025-07-24 09:26:35,938 - main_orchestrator - INFO - ==================================================
2025-07-24 09:27:36,927 - main_orchestrator - INFO - ==================================================
2025-07-24 09:27:36,927 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 09:27:36,928 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 09:27:36,928 - main_orchestrator - INFO - ==================================================
2025-07-24 09:27:36,932 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 09:27:36,937 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 09:27:36,938 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 09:27:36,939 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 09:27:36,940 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 09:27:36,942 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 09:27:36,942 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 09:27:36,942 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 09:27:36,943 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 09:27:36,943 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 09:27:36,945 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:27:37,473 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 09:27:37,473 - main_orchestrator - INFO - PDF procesado en 0.53 seg. Enlaces encontrados: 51
2025-07-24 09:27:37,488 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 09:27:37,488 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 09:27:37,500 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:27:37,681 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:27:37,681 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 09:27:37,691 - main_orchestrator - INFO - Texto del PDF extraído en 0.20 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:27:37,691 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 09:27:37,691 - lib.history_tracker - INFO - Filtradas 46 URLs ya procesadas del lote actual.
2025-07-24 09:27:37,692 - main_orchestrator - INFO - URLs nuevas para procesar: 5 (de 51 total)
2025-07-24 09:27:37,692 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 09:27:37,692 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 09:27:37,708 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 09:27:37,710 - content_deduplicator - INFO - Analizando 5 URLs para encontrar duplicados...
2025-07-24 09:27:37,710 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 09:27:37,728 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-07-24 09:27:37,739 - content_deduplicator - INFO - URLs totales: 5, Únicas: 5, En grupos: 0
2025-07-24 09:27:37,740 - content_deduplicator - INFO - Se realizaron 10 comparaciones (562.4/seg), evitando 0
2025-07-24 09:27:37,740 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 09:27:37,740 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:27:37,741 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 09:27:37,741 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-07-24 09:27:37,741 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:27:37,741 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 09:27:37,742 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 09:27:37,743 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 09:27:37,744 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-07-24 09:27:37,744 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 09:27:37,745 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 09:27:37,745 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 09:27:37,745 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 09:27:37,746 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 09:27:37,746 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 09:27:37,746 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 09:27:37,747 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 09:27:37,747 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 09:27:37,754 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 09:27:37,755 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-24 09:27:37,755 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 09:27:37,762 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-24 09:27:37,762 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 09:27:37,764 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:27:37,764 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:27:37,764 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:27:37.763110', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.2, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.2, 'stats_consolidation': 0.0}}
2025-07-24 09:27:37,764 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 09:27:37,765 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 09:27:37,765 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 09:27:37,765 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:27:37,766 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:27:37,776 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 09:27:37,779 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:27:37,779 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:27:37,780 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 09:27:37,793 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 09:27:37,793 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 09:27:37,793 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 09:27:37,794 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 09:27:37,794 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 09:27:37,794 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 09:27:38,360 - semantic_cleaner - INFO - Se identificaron 6 grupos de textos similares
2025-07-24 09:27:38,361 - semantic_cleaner - INFO - Se seleccionaron 6 textos representativos
2025-07-24 09:27:38,361 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 09:27:38,361 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:27:38,362 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:27:38,363 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:27:38,366 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:27:38,376 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:27:38,376 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:27:38,377 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:27:37.763110', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.53, 'pdf_text_extraction': 0.2, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.2, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.59}}
2025-07-24 09:27:38,377 - main_orchestrator - INFO - Limpieza semántica completada en 0.59 seg.
2025-07-24 09:27:38,377 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 09:27:38,377 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 09:27:38,378 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:27:38,394 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:27:38,395 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 09:27:38,395 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:27:38,396 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 09:27:38,396 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 09:27:38,396 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 09:27:38,396 - main_orchestrator - INFO - ==================================================
2025-07-24 09:27:38,396 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.47 segundos.
2025-07-24 09:27:38,397 - main_orchestrator - INFO - ==================================================
2025-07-24 09:51:59,153 - main_orchestrator - INFO - ==================================================
2025-07-24 09:51:59,153 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 09:51:59,154 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 09:51:59,154 - main_orchestrator - INFO - ==================================================
2025-07-24 09:51:59,157 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 09:51:59,159 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 09:51:59,160 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 09:51:59,167 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 09:51:59,168 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 09:51:59,169 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 09:51:59,169 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 09:51:59,169 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 09:51:59,170 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 09:51:59,170 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 09:51:59,172 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:51:59,613 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 09:51:59,613 - main_orchestrator - INFO - PDF procesado en 0.44 seg. Enlaces encontrados: 51
2025-07-24 09:51:59,621 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 09:51:59,622 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 09:51:59,623 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:51:59,819 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:51:59,819 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 09:51:59,819 - main_orchestrator - INFO - Texto del PDF extraído en 0.20 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:51:59,820 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 09:51:59,820 - lib.history_tracker - INFO - Filtradas 46 URLs ya procesadas del lote actual.
2025-07-24 09:51:59,820 - main_orchestrator - INFO - URLs nuevas para procesar: 5 (de 51 total)
2025-07-24 09:51:59,820 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 09:51:59,821 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 09:51:59,837 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 09:51:59,837 - content_deduplicator - INFO - Analizando 5 URLs para encontrar duplicados...
2025-07-24 09:51:59,837 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 09:51:59,868 - content_deduplicator - INFO - Análisis completado en 0.03 segundos
2025-07-24 09:51:59,869 - content_deduplicator - INFO - URLs totales: 5, Únicas: 5, En grupos: 0
2025-07-24 09:51:59,869 - content_deduplicator - INFO - Se realizaron 10 comparaciones (321.2/seg), evitando 0
2025-07-24 09:51:59,869 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 09:51:59,870 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:51:59,870 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 09:51:59,870 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-07-24 09:51:59,870 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:51:59,870 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 09:51:59,882 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 09:51:59,882 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 09:51:59,883 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-07-24 09:51:59,883 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 09:51:59,884 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 09:51:59,884 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 09:51:59,885 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 09:51:59,885 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 09:51:59,885 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 09:51:59,885 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 09:51:59,917 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 09:51:59,917 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 09:51:59,920 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 09:51:59,921 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-24 09:51:59,922 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 09:51:59,929 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-24 09:51:59,930 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 09:51:59,931 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:51:59,931 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:51:59,931 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:51:59.930588', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.44, 'pdf_text_extraction': 0.2, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.2, 'stats_consolidation': 0.0}}
2025-07-24 09:51:59,932 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 09:51:59,932 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 09:51:59,932 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 09:51:59,933 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:51:59,933 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:51:59,933 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 09:51:59,935 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:51:59,937 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:51:59,937 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 09:51:59,950 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 09:51:59,950 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 09:51:59,950 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 09:51:59,951 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 09:51:59,951 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 09:51:59,951 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 09:52:00,641 - semantic_cleaner - INFO - Se identificaron 6 grupos de textos similares
2025-07-24 09:52:00,642 - semantic_cleaner - INFO - Se seleccionaron 6 textos representativos
2025-07-24 09:52:00,642 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 09:52:00,642 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:52:00,644 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:52:00,644 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:52:00,651 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:52:00,656 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:52:00,656 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:52:00,656 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:51:59.930588', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.44, 'pdf_text_extraction': 0.2, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.2, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.72}}
2025-07-24 09:52:00,656 - main_orchestrator - INFO - Limpieza semántica completada en 0.72 seg.
2025-07-24 09:52:00,657 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 09:52:00,657 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 09:52:00,657 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:52:00,659 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:52:00,660 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 09:52:00,660 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:52:00,660 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 09:52:00,661 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 09:52:00,661 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 09:52:00,661 - main_orchestrator - INFO - ==================================================
2025-07-24 09:52:00,661 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.51 segundos.
2025-07-24 09:52:00,661 - main_orchestrator - INFO - ==================================================
2025-07-24 09:52:00,989 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-07-24 09:52:00,995 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 09:52:01,934 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai "HTTP/1.1 200 OK"
2025-07-24 09:54:16,522 - main_orchestrator - INFO - ==================================================
2025-07-24 09:54:16,522 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 09:54:16,523 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 09:54:16,523 - main_orchestrator - INFO - ==================================================
2025-07-24 09:54:16,529 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 09:54:16,532 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 09:54:16,533 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 09:54:16,534 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 09:54:16,535 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 09:54:16,536 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 09:54:16,536 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 09:54:16,536 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 09:54:16,537 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 09:54:16,537 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 09:54:16,540 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:54:17,272 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 09:54:17,273 - main_orchestrator - INFO - PDF procesado en 0.74 seg. Enlaces encontrados: 51
2025-07-24 09:54:17,279 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 09:54:17,280 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 09:54:17,283 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 09:54:17,379 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:54:17,379 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 09:54:17,380 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:54:17,380 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 09:54:17,381 - lib.history_tracker - INFO - Filtradas 46 URLs ya procesadas del lote actual.
2025-07-24 09:54:17,382 - main_orchestrator - INFO - URLs nuevas para procesar: 5 (de 51 total)
2025-07-24 09:54:17,382 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 09:54:17,382 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 09:54:17,395 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 09:54:17,395 - content_deduplicator - INFO - Analizando 5 URLs para encontrar duplicados...
2025-07-24 09:54:17,396 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 09:54:17,401 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-07-24 09:54:17,401 - content_deduplicator - INFO - URLs totales: 5, Únicas: 5, En grupos: 0
2025-07-24 09:54:17,401 - content_deduplicator - INFO - Se realizaron 10 comparaciones (1895.5/seg), evitando 0
2025-07-24 09:54:17,402 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 09:54:17,402 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:54:17,413 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 09:54:17,414 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-07-24 09:54:17,415 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 09:54:17,415 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 09:54:17,417 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 09:54:17,418 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 09:54:17,419 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-07-24 09:54:17,420 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 09:54:17,420 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 09:54:17,421 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 09:54:17,421 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 09:54:17,421 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 09:54:17,421 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 09:54:17,421 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 09:54:17,427 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 09:54:17,427 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 09:54:17,428 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 09:54:17,429 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-24 09:54:17,429 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 09:54:17,430 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-24 09:54:17,430 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 09:54:17,431 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:54:17,432 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:54:17,432 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:54:17.430879', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.74, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0}}
2025-07-24 09:54:17,432 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 09:54:17,433 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 09:54:17,433 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 09:54:17,434 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 09:54:17,436 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 09:54:17,438 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 09:54:17,440 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:54:17,441 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 09:54:17,441 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 09:54:17,444 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 09:54:17,444 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 09:54:17,444 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 09:54:17,445 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 09:54:17,445 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 09:54:17,446 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 09:54:17,922 - semantic_cleaner - INFO - Se identificaron 6 grupos de textos similares
2025-07-24 09:54:17,923 - semantic_cleaner - INFO - Se seleccionaron 6 textos representativos
2025-07-24 09:54:17,923 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 09:54:17,924 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:54:17,925 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 09:54:17,925 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:54:17,929 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:54:17,931 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:54:17,931 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 09:54:17,931 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T09:54:17.430879', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.74, 'pdf_text_extraction': 0.1, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.1, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.49}}
2025-07-24 09:54:17,932 - main_orchestrator - INFO - Limpieza semántica completada en 0.49 seg.
2025-07-24 09:54:17,932 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 09:54:17,932 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 09:54:17,932 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 09:54:17,934 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 09:54:17,934 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 09:54:17,934 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 09:54:17,935 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 09:54:17,935 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 09:54:17,936 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 09:54:17,936 - main_orchestrator - INFO - ==================================================
2025-07-24 09:54:17,936 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.41 segundos.
2025-07-24 09:54:17,936 - main_orchestrator - INFO - ==================================================
2025-07-24 09:54:18,317 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-07-24 09:54:18,326 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 09:54:20,486 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:21,576 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:22,677 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:24,201 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:24,721 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:26,828 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:27,349 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:27,890 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:28,126 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 09:54:43,986 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:44,646 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:45,532 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:46,274 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 09:54:46,281 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/query "HTTP/1.1 404 Not Found"
2025-07-24 10:59:41,134 - main_orchestrator - INFO - ==================================================
2025-07-24 10:59:41,147 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 10:59:41,147 - main_orchestrator - INFO - Usando fecha: 14072025
2025-07-24 10:59:41,148 - main_orchestrator - INFO - ==================================================
2025-07-24 10:59:41,152 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 10:59:41,155 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 10:59:41,155 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 10:59:41,161 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 10:59:41,161 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 10:59:41,162 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 10:59:41,163 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 10:59:41,163 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 10:59:41,163 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 10:59:41,164 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 10:59:41,243 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 10:59:41,929 - lib.pdf_processor - INFO - Se extrajeron 51 enlaces URI (no mailto) de 14072025.pdf.
2025-07-24 10:59:41,929 - main_orchestrator - INFO - PDF procesado en 0.77 seg. Enlaces encontrados: 51
2025-07-24 10:59:41,991 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_14072025.csv
2025-07-24 10:59:41,991 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 10:59:41,992 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/14072025.pdf (5 páginas)
2025-07-24 10:59:42,105 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 10:59:42,105 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 10:59:42,105 - main_orchestrator - INFO - Texto del PDF extraído en 0.11 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 10:59:42,106 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 10:59:42,107 - lib.history_tracker - INFO - Filtradas 46 URLs ya procesadas del lote actual.
2025-07-24 10:59:42,109 - main_orchestrator - INFO - URLs nuevas para procesar: 5 (de 51 total)
2025-07-24 10:59:42,110 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 10:59:42,111 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 10:59:42,158 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 10:59:42,159 - content_deduplicator - INFO - Analizando 5 URLs para encontrar duplicados...
2025-07-24 10:59:42,159 - content_deduplicator - INFO - Procesando 5 URLs del dominio youtu.be
2025-07-24 10:59:42,173 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-07-24 10:59:42,177 - content_deduplicator - INFO - URLs totales: 5, Únicas: 5, En grupos: 0
2025-07-24 10:59:42,178 - content_deduplicator - INFO - Se realizaron 10 comparaciones (710.2/seg), evitando 0
2025-07-24 10:59:42,179 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 10:59:42,179 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 10:59:42,179 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 10:59:42,180 - main_orchestrator - INFO - URLs después de filtrar duplicados: 5
2025-07-24 10:59:42,180 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_14072025.json
2025-07-24 10:59:42,180 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 10:59:42,180 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 10:59:42,180 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 10:59:42,181 - lib.url_manager - INFO - Clasificación de 5 URLs:
2025-07-24 10:59:42,181 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 10:59:42,182 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_14072025_unprocessed.json
2025-07-24 10:59:42,182 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 10:59:42,182 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 10:59:42,182 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 10:59:42,182 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 10:59:42,182 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 10:59:42,826 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 10:59:42,827 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 10:59:42,827 - main_orchestrator - INFO - Leyendo archivo social para la fecha 14072025: social_links_14072025_unprocessed.json
2025-07-24 10:59:42,828 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-24 10:59:42,828 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 10:59:42,836 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-24 10:59:42,836 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 10:59:42,837 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 10:59:42,837 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 10:59:42,838 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T10:59:42.836864', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0}}
2025-07-24 10:59:42,838 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 10:59:42,838 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 10:59:42,844 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_14072025.json
2025-07-24 10:59:42,845 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/14072025/texto_imagenes_api.json
2025-07-24 10:59:42,847 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_14072025/pdf_text_14072025.json
2025-07-24 10:59:42,847 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-24 10:59:42,851 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 10:59:42,851 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_14072025.json
2025-07-24 10:59:42,852 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 10:59:42,881 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 10:59:42,882 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 10:59:42,882 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 10:59:42,882 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 10:59:42,882 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-24 10:59:42,883 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 10:59:43,496 - semantic_cleaner - INFO - Se identificaron 6 grupos de textos similares
2025-07-24 10:59:43,497 - semantic_cleaner - INFO - Se seleccionaron 6 textos representativos
2025-07-24 10:59:43,497 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 10:59:43,498 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 10:59:43,499 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_14072025.json
2025-07-24 10:59:43,500 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 10:59:43,508 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 10:59:43,513 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 10:59:43,521 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_14072025.json
2025-07-24 10:59:43,522 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T10:59:42.836864', 'date_processed': '14072025', 'total_urls_in_pdf': 51, 'new_urls_processed_count': 5, 'history_total_urls': 665, 'categories': {'social': 5}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 0.11, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.11, 'stats_consolidation': 0.0, 'semantic_cleaning': 0.66}}
2025-07-24 10:59:43,522 - main_orchestrator - INFO - Limpieza semántica completada en 0.66 seg.
2025-07-24 10:59:43,522 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 10:59:43,522 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 10:59:43,522 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_14072025.json
2025-07-24 10:59:43,526 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16WifBSmH9/
2025-07-24 10:59:43,527 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 10:59:43,528 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_14072025.md
2025-07-24 10:59:43,529 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 10:59:43,530 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 10:59:43,530 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 10:59:43,530 - main_orchestrator - INFO - ==================================================
2025-07-24 10:59:43,531 - main_orchestrator - INFO - PIPELINE FINALIZADO en 2.40 segundos.
2025-07-24 10:59:43,531 - main_orchestrator - INFO - ==================================================
2025-07-24 10:59:43,999 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-07-24 10:59:44,011 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 10:59:44,929 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai "HTTP/1.1 200 OK"
2025-07-24 10:59:45,693 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:46,365 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:47,025 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:47,923 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:48,546 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:49,063 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:49,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:50,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 10:59:51,026 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 11:00:03,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:00:05,696 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:00:06,472 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:00:06,864 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:00:06,872 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/query "HTTP/1.1 404 Not Found"
2025-07-24 11:21:33,628 - main_orchestrator - INFO - ==================================================
2025-07-24 11:21:33,628 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 11:21:33,629 - main_orchestrator - INFO - Usando fecha: 15072025
2025-07-24 11:21:33,629 - main_orchestrator - INFO - ==================================================
2025-07-24 11:21:33,634 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 11:21:33,641 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 11:21:33,642 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 11:21:33,646 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 665 URLs.
2025-07-24 11:21:33,647 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 11:21:33,648 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 11:21:33,648 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 11:21:33,649 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 11:21:33,649 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 11:21:33,649 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 11:21:33,651 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-24 11:21:34,111 - lib.pdf_processor - INFO - Se extrajeron 37 enlaces URI (no mailto) de 15072025.pdf.
2025-07-24 11:21:34,112 - main_orchestrator - INFO - PDF procesado en 0.46 seg. Enlaces encontrados: 37
2025-07-24 11:21:34,125 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_15072025.csv
2025-07-24 11:21:34,130 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 11:21:34,131 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-24 11:21:34,197 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 11:21:34,197 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-07-24 11:21:34,197 - main_orchestrator - INFO - Texto del PDF extraído en 0.07 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 11:21:34,198 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 11:21:34,198 - lib.history_tracker - INFO - Filtradas 29 URLs ya procesadas del lote actual.
2025-07-24 11:21:34,198 - main_orchestrator - INFO - URLs nuevas para procesar: 8 (de 37 total)
2025-07-24 11:21:34,202 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 11:21:34,203 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 11:21:34,211 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 11:21:34,211 - content_deduplicator - INFO - Analizando 8 URLs para encontrar duplicados...
2025-07-24 11:21:34,213 - content_deduplicator - INFO - Procesando 5 URLs del dominio facebook.com
2025-07-24 11:21:34,235 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtube.com
2025-07-24 11:21:34,236 - content_deduplicator - INFO - Análisis completado en 0.02 segundos
2025-07-24 11:21:34,236 - content_deduplicator - INFO - URLs totales: 8, Únicas: 3, En grupos: 4
2025-07-24 11:21:34,236 - content_deduplicator - INFO - Se realizaron 7 comparaciones (294.1/seg), evitando 0
2025-07-24 11:21:34,237 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-07-24 11:21:34,237 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-24 11:21:34,248 - main_orchestrator - INFO - Análisis de duplicados completado: 2 URLs duplicadas filtradas
2025-07-24 11:21:34,248 - main_orchestrator - INFO - URLs después de filtrar duplicados: 6
2025-07-24 11:21:34,248 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-24 11:21:34,248 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 11:21:34,249 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 11:21:34,251 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 11:21:34,251 - lib.url_manager - INFO - Clasificación de 6 URLs:
2025-07-24 11:21:34,252 - lib.url_manager - INFO -  - HTML: 1
2025-07-24 11:21:34,253 - lib.url_manager - INFO -  - SOCIAL: 5
2025-07-24 11:21:34,257 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_15072025_unprocessed.json
2025-07-24 11:21:34,258 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 11:21:34,258 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 11:21:34,259 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 11:21:34,259 - lib.html_scraper - INFO - Iniciando scraping paralelo de 1 URLs...
2025-07-24 11:21:38,138 - lib.html_scraper - INFO - Progreso: 1/1 URLs procesadas en 3.88 seg.
2025-07-24 11:21:38,139 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-24 11:21:38,140 - lib.html_scraper - INFO - Scraping completado para 1/1 URLs en 3.88 segundos.
2025-07-24 11:21:38,140 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-24 11:21:38,140 - main_orchestrator - INFO - Scraping HTML completado en 3.88 seg.
2025-07-24 11:21:38,140 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-24 11:21:38,154 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 666 URLs.
2025-07-24 11:21:38,154 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 11:21:38,155 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 11:21:38,155 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 11:21:38,155 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15072025: social_links_15072025_unprocessed.json
2025-07-24 11:21:38,156 - main_orchestrator - INFO - Encontradas 3 URLs de Facebook para procesar
2025-07-24 11:21:38,156 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-24 11:21:38,156 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 3 URLs de Facebook para la fecha 15072025...
2025-07-24 11:21:38,158 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid02qzNFGjz91fG3cJJYaTGso997Jt1yir9Xp6mkDmh5QNa2EqmH48wuvbzLTZSFjgqol&id=100064089484737&locale=es_LA
2025-07-24 11:21:38,158 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA
2025-07-24 11:21:38,159 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/radiostudio1huancavelicaoficial2023/posts/pfbid0ChMQuvc39xayJMjtSpAjxdj8ivpzbj3r5Sg98613qEigPnw6iTNV9XinXKTz6VwZl?locale=es_LA
2025-07-24 11:22:27,404 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-3.pdf
2025-07-24 11:22:27,405 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-1.pdf
2025-07-24 11:22:27,473 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/15072025/15072025-2.pdf
2025-07-24 11:22:31,160 - lib.facebook_processor - INFO - Progreso Facebook: 3/3 en 53.00 seg.
2025-07-24 11:22:31,162 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_15072025.json
2025-07-24 11:22:31,163 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 3/3 exitosos en 53.01 segundos.
2025-07-24 11:22:31,163 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 53.01 seg.
2025-07-24 11:22:31,163 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-07-24 11:22:31,173 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 669 URLs.
2025-07-24 11:22:31,173 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 11:22:31,432 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-2.pdf
2025-07-24 11:22:31,616 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-3.pdf
2025-07-24 11:22:31,767 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/15072025/15072025-1.pdf
2025-07-24 11:22:31,768 - lib.facebook_processor - INFO - Texto extraído de 3 PDFs de Facebook
2025-07-24 11:22:31,769 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.59 seg.
2025-07-24 11:22:31,769 - main_orchestrator - INFO - Texto extraído de 3 PDFs de Facebook
2025-07-24 11:22:31,773 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-24 11:22:31,773 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-24 11:22:31,773 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 11:22:31,779 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 11:22:31,779 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 11:22:31,779 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T11:22:31.774012', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 6, 'history_total_urls': 669, 'categories': {'html': 1, 'social': 5}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 0, 'average_relevance': 0.0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.46, 'pdf_text_extraction': 0.59, 'image_download': 0, 'html_scraping': 3.88, 'image_api': 0, 'facebook_processing': 53.01, 'facebook_text_extraction': 0.59, 'stats_consolidation': 0.0}}
2025-07-24 11:22:31,780 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 11:22:31,780 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 11:22:31,783 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/15072025/texto_imagenes_api.json
2025-07-24 11:22:31,786 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 11:22:31,786 - main_orchestrator - INFO - Procesando 8 textos de imágenes para consolidación
2025-07-24 11:22:31,788 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-24 11:22:31,789 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-24 11:22:31,789 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 11:22:31,798 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 11:22:31,799 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 11:22:31,799 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-07-24 11:22:31,799 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 11:22:31,799 - semantic_cleaner - INFO - Extraídos 8 textos de imágenes
2025-07-24 11:22:31,799 - semantic_cleaner - INFO - Extraídos 3 textos de Facebook
2025-07-24 11:22:35,767 - semantic_cleaner - INFO - Se identificaron 15 grupos de textos similares
2025-07-24 11:22:35,769 - semantic_cleaner - INFO - Se seleccionaron 15 textos representativos
2025-07-24 11:22:35,771 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 11:22:35,771 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-24 11:22:35,779 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-24 11:22:35,779 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 11:22:35,797 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 11:22:35,798 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 11:22:35,798 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 11:22:35,798 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T11:22:31.774012', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 6, 'history_total_urls': 669, 'categories': {'html': 1, 'social': 5}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 0, 'average_relevance': 0.0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 3, 'successful': 3, 'extracted_texts': 3}, 'timings_seconds': {'pdf_extraction': 0.46, 'pdf_text_extraction': 0.59, 'image_download': 0, 'html_scraping': 3.88, 'image_api': 0, 'facebook_processing': 53.01, 'facebook_text_extraction': 0.59, 'stats_consolidation': 0.0, 'semantic_cleaning': 4.01}}
2025-07-24 11:22:35,798 - main_orchestrator - INFO - Limpieza semántica completada en 4.01 seg.
2025-07-24 11:22:35,798 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 11:22:35,799 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 11:22:35,799 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-24 11:22:35,803 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA
2025-07-24 11:22:35,804 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 11:22:35,804 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 11:22:35,805 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-07-24 11:22:35,811 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 11:22:35,812 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 11:22:35,813 - main_orchestrator - INFO - ==================================================
2025-07-24 11:22:35,813 - main_orchestrator - INFO - PIPELINE FINALIZADO en 62.19 segundos.
2025-07-24 11:22:35,813 - main_orchestrator - INFO - ==================================================
2025-07-24 11:22:36,363 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 11:22:37,142 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:37,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:38,333 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:39,209 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:39,689 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:40,287 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:40,958 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:41,585 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:42,466 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:42,894 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:43,316 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:43,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:44,352 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:44,979 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:45,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:22:45,749 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 11:23:08,540 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:23:08,849 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:23:09,107 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:23:09,604 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 11:23:09,614 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 11:23:10,633 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 12:10:59,253 - main_orchestrator - INFO - ==================================================
2025-07-24 12:10:59,284 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 12:10:59,284 - main_orchestrator - INFO - Usando fecha: 10072025
2025-07-24 12:10:59,284 - main_orchestrator - INFO - ==================================================
2025-07-24 12:10:59,299 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 12:10:59,302 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 12:10:59,308 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 12:10:59,312 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 669 URLs.
2025-07-24 12:10:59,313 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 12:10:59,322 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 12:10:59,323 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 12:10:59,323 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 12:10:59,323 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 12:10:59,324 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 12:10:59,366 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-24 12:10:59,991 - lib.pdf_processor - INFO - Se extrajeron 50 enlaces URI (no mailto) de 10072025.pdf.
2025-07-24 12:10:59,992 - main_orchestrator - INFO - PDF procesado en 0.67 seg. Enlaces encontrados: 50
2025-07-24 12:11:00,054 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_10072025.csv
2025-07-24 12:11:00,055 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 12:11:00,057 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-24 12:11:00,145 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 12:11:00,145 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 12:11:00,145 - main_orchestrator - INFO - Texto del PDF extraído en 0.09 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 12:11:00,146 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 12:11:00,148 - lib.history_tracker - INFO - Filtradas 39 URLs ya procesadas del lote actual.
2025-07-24 12:11:00,148 - main_orchestrator - INFO - URLs nuevas para procesar: 11 (de 50 total)
2025-07-24 12:11:00,148 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 12:11:00,154 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 12:11:00,178 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 12:11:00,179 - content_deduplicator - INFO - Analizando 11 URLs para encontrar duplicados...
2025-07-24 12:11:00,179 - content_deduplicator - INFO - Procesando 5 URLs del dominio facebook.com
2025-07-24 12:11:00,182 - content_deduplicator - INFO - Procesando 2 URLs del dominio google.com
2025-07-24 12:11:00,182 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-07-24 12:11:00,182 - content_deduplicator - INFO - URLs totales: 11, Únicas: 5, En grupos: 6
2025-07-24 12:11:00,183 - content_deduplicator - INFO - Se realizaron 8 comparaciones (2333.1/seg), evitando 0
2025-07-24 12:11:00,183 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-07-24 12:11:00,194 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-24 12:11:00,195 - main_orchestrator - INFO - Análisis de duplicados completado: 4 URLs duplicadas filtradas
2025-07-24 12:11:00,195 - main_orchestrator - INFO - URLs después de filtrar duplicados: 7
2025-07-24 12:11:00,195 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-24 12:11:00,195 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 12:11:00,198 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 12:11:00,198 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 12:11:00,199 - lib.url_manager - INFO - Clasificación de 7 URLs:
2025-07-24 12:11:00,200 - lib.url_manager - INFO -  - HTML: 3
2025-07-24 12:11:00,200 - lib.url_manager - INFO -  - SOCIAL: 4
2025-07-24 12:11:00,216 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_10072025_unprocessed.json
2025-07-24 12:11:00,216 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 12:11:00,216 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 12:11:00,216 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 12:11:00,217 - lib.html_scraper - INFO - Iniciando scraping paralelo de 3 URLs...
2025-07-24 12:11:03,416 - lib.html_scraper - INFO - Progreso: 3/3 URLs procesadas en 3.20 seg.
2025-07-24 12:11:03,423 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-24 12:11:03,424 - lib.html_scraper - INFO - Scraping completado para 3/3 URLs en 3.21 segundos.
2025-07-24 12:11:03,424 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-24 12:11:03,425 - main_orchestrator - INFO - Scraping HTML completado en 3.21 seg.
2025-07-24 12:11:03,426 - lib.history_tracker - INFO - Añadidas 3 nuevas URLs al historial.
2025-07-24 12:11:03,434 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 672 URLs.
2025-07-24 12:11:03,434 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 12:11:03,444 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 12:11:03,444 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 12:11:03,445 - main_orchestrator - INFO - Leyendo archivo social para la fecha 10072025: social_links_10072025_unprocessed.json
2025-07-24 12:11:03,445 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-07-24 12:11:03,449 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-24 12:11:03,450 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 10072025...
2025-07-24 12:11:03,451 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/photo/?fbid=122144176310693859&set=a.122108624150693859
2025-07-24 12:11:03,451 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/arequipametropolitana/posts/arequipa-sunass-advierte-que-bloqueos-en-la-panamericana-ponen-en-riesgo-y-dejan/1355354806104994/
2025-07-24 12:11:35,750 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-2.pdf
2025-07-24 12:11:37,499 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/10072025/10072025-1.pdf
2025-07-24 12:11:40,467 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 37.02 seg.
2025-07-24 12:11:40,469 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_10072025.json
2025-07-24 12:11:40,469 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 2/2 exitosos en 37.02 segundos.
2025-07-24 12:11:40,469 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 37.02 seg.
2025-07-24 12:11:40,470 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-07-24 12:11:40,484 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 674 URLs.
2025-07-24 12:11:40,484 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 12:11:40,667 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-2.pdf
2025-07-24 12:11:40,881 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/10072025/10072025-1.pdf
2025-07-24 12:11:40,882 - lib.facebook_processor - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-24 12:11:40,882 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.40 seg.
2025-07-24 12:11:40,884 - main_orchestrator - INFO - Texto extraído de 2 PDFs de Facebook
2025-07-24 12:11:40,890 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-24 12:11:40,890 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-24 12:11:40,890 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 12:11:40,897 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 12:11:40,897 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 12:11:40,897 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T12:11:40.890756', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 7, 'history_total_urls': 674, 'categories': {'html': 3, 'social': 4}, 'html_processing': {'attempted': 3, 'processed': 3, 'successful': 3, 'relevant (>=0.3)': 2, 'average_relevance': 0.3333333333333333}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.67, 'pdf_text_extraction': 0.4, 'image_download': 0, 'html_scraping': 3.21, 'image_api': 0, 'facebook_processing': 37.02, 'facebook_text_extraction': 0.4, 'stats_consolidation': 0.01}}
2025-07-24 12:11:40,898 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.01 seg.
2025-07-24 12:11:40,898 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 12:11:40,911 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/10072025/texto_imagenes_api.json
2025-07-24 12:11:40,912 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 12:11:40,913 - main_orchestrator - INFO - Procesando 9 textos de imágenes para consolidación
2025-07-24 12:11:40,918 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-24 12:11:40,918 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-24 12:11:40,918 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 12:11:40,931 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 12:11:40,931 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 12:11:40,931 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 12:11:40,932 - semantic_cleaner - INFO - Extraídos 3 textos de HTML
2025-07-24 12:11:40,932 - semantic_cleaner - INFO - Extraídos 9 textos de imágenes
2025-07-24 12:11:40,932 - semantic_cleaner - INFO - Extraídos 2 textos de Facebook
2025-07-24 12:11:45,370 - semantic_cleaner - INFO - Se identificaron 19 grupos de textos similares
2025-07-24 12:11:45,371 - semantic_cleaner - INFO - Se seleccionaron 19 textos representativos
2025-07-24 12:11:45,371 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 12:11:45,371 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-24 12:11:45,375 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-24 12:11:45,375 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 12:11:45,388 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 12:11:45,389 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 12:11:45,389 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 12:11:45,390 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T12:11:40.890756', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 7, 'history_total_urls': 674, 'categories': {'html': 3, 'social': 4}, 'html_processing': {'attempted': 3, 'processed': 3, 'successful': 3, 'relevant (>=0.3)': 2, 'average_relevance': 0.3333333333333333}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 2, 'extracted_texts': 2}, 'timings_seconds': {'pdf_extraction': 0.67, 'pdf_text_extraction': 0.4, 'image_download': 0, 'html_scraping': 3.21, 'image_api': 0, 'facebook_processing': 37.02, 'facebook_text_extraction': 0.4, 'stats_consolidation': 0.01, 'semantic_cleaning': 4.47}}
2025-07-24 12:11:45,390 - main_orchestrator - INFO - Limpieza semántica completada en 4.47 seg.
2025-07-24 12:11:45,390 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 12:11:45,391 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 12:11:45,391 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-24 12:11:45,396 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=122144176310693859&set=a.122108624150693859
2025-07-24 12:11:45,397 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 12:11:45,397 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 12:11:45,397 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 12:11:45,398 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 12:11:45,398 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 12:11:45,398 - main_orchestrator - INFO - ==================================================
2025-07-24 12:11:45,398 - main_orchestrator - INFO - PIPELINE FINALIZADO en 46.15 segundos.
2025-07-24 12:11:45,399 - main_orchestrator - INFO - ==================================================
2025-07-24 12:11:45,672 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 12:11:46,516 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:47,223 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:47,977 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:48,563 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:49,528 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:49,950 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:50,853 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:51,312 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:51,715 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:52,124 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:52,748 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:53,518 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:53,968 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:54,786 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:55,400 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:55,844 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:56,287 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:56,747 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:57,247 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:11:57,832 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 12:12:08,462 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:12:50,058 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:12:55,086 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:14:39,307 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:16:04,855 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:24:23,053 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:44:25,047 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:44:27,518 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:45:41,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:45:41,874 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:45:42,394 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:45:42,980 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:45:43,092 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:45:44,519 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 12:49:05,468 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:49:06,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:49:06,842 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:49:08,068 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:49:08,109 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:49:09,558 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 12:52:04,609 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:52:05,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:52:05,743 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:52:06,342 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:52:06,378 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:52:08,314 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 12:52:38,447 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 12:58:55,029 - openai._base_client - INFO - Retrying request to /embeddings in 0.463940 seconds
2025-07-24 12:59:05,509 - openai._base_client - INFO - Retrying request to /embeddings in 0.789528 seconds
2025-07-24 12:59:37,096 - openai._base_client - INFO - Retrying request to /embeddings in 0.477125 seconds
2025-07-24 12:59:47,582 - openai._base_client - INFO - Retrying request to /embeddings in 0.912842 seconds
2025-07-24 12:59:55,754 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:59:56,722 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:59:57,327 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:59:58,155 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 12:59:58,259 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 13:00:04,541 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 13:00:59,043 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 13:01:01,718 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:06:14,360 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:06:15,532 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:07:09,957 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:07:49,366 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:07:56,600 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 14:13:07,870 - main_orchestrator - INFO - ==================================================
2025-07-24 14:13:07,871 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 14:13:07,871 - main_orchestrator - INFO - Usando fecha: 11072025
2025-07-24 14:13:07,871 - main_orchestrator - INFO - ==================================================
2025-07-24 14:13:07,878 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 14:13:07,880 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 14:13:07,881 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 14:13:07,886 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 674 URLs.
2025-07-24 14:13:07,886 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 14:13:07,887 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 14:13:07,887 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 14:13:07,887 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 14:13:07,887 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 14:13:07,887 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 14:13:07,931 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-24 14:13:08,892 - lib.pdf_processor - INFO - Se extrajeron 125 enlaces URI (no mailto) de 11072025.pdf.
2025-07-24 14:13:08,892 - main_orchestrator - INFO - PDF procesado en 1.01 seg. Enlaces encontrados: 125
2025-07-24 14:13:08,923 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_11072025.csv
2025-07-24 14:13:08,925 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 14:13:08,927 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-24 14:13:09,022 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-24 14:13:09,022 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 14:13:09,022 - main_orchestrator - INFO - Texto del PDF extraído en 0.10 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-24 14:13:09,023 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 14:13:09,023 - lib.history_tracker - INFO - Filtradas 54 URLs ya procesadas del lote actual.
2025-07-24 14:13:09,023 - main_orchestrator - INFO - URLs nuevas para procesar: 71 (de 125 total)
2025-07-24 14:13:09,023 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 14:13:09,025 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 14:13:09,069 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 14:13:09,069 - content_deduplicator - INFO - Analizando 71 URLs para encontrar duplicados...
2025-07-24 14:13:09,071 - content_deduplicator - INFO - Procesando 57 URLs del dominio facebook.com
2025-07-24 14:13:09,071 - content_deduplicator - WARNING - Dominio facebook.com tiene demasiadas URLs (57). Muestreando para análisis.
2025-07-24 14:13:09,074 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl (tipo: facebook)
2025-07-24 14:18:09,832 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:18:09,833 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl (tipo: facebook)
2025-07-24 14:23:10,289 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:23:10,290 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l (tipo: facebook)
2025-07-24 14:28:10,850 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:28:10,851 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l (tipo: facebook)
2025-07-24 14:33:11,339 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:33:11,343 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl (tipo: facebook)
2025-07-24 14:37:13,517 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:13,518 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851 (tipo: facebook)
2025-07-24 14:37:16,855 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:16,855 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217 (tipo: facebook)
2025-07-24 14:37:17,533 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:17,534 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl (tipo: facebook)
2025-07-24 14:37:17,915 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:17,915 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128 (tipo: facebook)
2025-07-24 14:37:18,103 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:18,103 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128 (tipo: facebook)
2025-07-24 14:37:18,266 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:18,266 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl (tipo: facebook)
2025-07-24 14:37:18,430 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:18,431 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl (tipo: facebook)
2025-07-24 14:37:18,590 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:18,590 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028 (tipo: facebook)
2025-07-24 14:37:18,905 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:18,906 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal (tipo: facebook)
2025-07-24 14:37:19,170 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:19,170 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal (tipo: facebook)
2025-07-24 14:37:19,488 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:19,489 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l (tipo: facebook)
2025-07-24 14:37:19,823 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:19,823 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l (tipo: facebook)
2025-07-24 14:37:20,087 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:20,087 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045 (tipo: facebook)
2025-07-24 14:37:20,334 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:37:20,400 - content_deduplicator - INFO - Realizadas 50 comparaciones (30 evitadas)
2025-07-24 14:37:20,401 - content_deduplicator - INFO - Procesando 3 URLs del dominio youtube.com
2025-07-24 14:37:20,402 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtu.be
2025-07-24 14:37:20,402 - content_deduplicator - INFO - Procesando 2 URLs del dominio larepublica.pe
2025-07-24 14:37:20,402 - content_deduplicator - INFO - Análisis completado en 1451.33 segundos
2025-07-24 14:37:20,403 - content_deduplicator - INFO - URLs totales: 71, Únicas: 28, En grupos: 28
2025-07-24 14:37:20,403 - content_deduplicator - INFO - Se realizaron 52 comparaciones (0.0/seg), evitando 60
2025-07-24 14:37:20,403 - content_deduplicator - INFO - Grupos de duplicados encontrados: 4
2025-07-24 14:37:20,405 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-24 14:37:20,405 - main_orchestrator - INFO - Análisis de duplicados completado: 36 URLs duplicadas filtradas
2025-07-24 14:37:20,405 - main_orchestrator - INFO - URLs después de filtrar duplicados: 35
2025-07-24 14:37:20,405 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-24 14:37:20,406 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 14:37:20,409 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 14:37:20,409 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 14:37:20,411 - lib.url_manager - INFO - Clasificación de 35 URLs:
2025-07-24 14:37:20,411 - lib.url_manager - INFO -  - HTML: 7
2025-07-24 14:37:20,411 - lib.url_manager - INFO -  - IMAGES: 1
2025-07-24 14:37:20,411 - lib.url_manager - INFO -  - SOCIAL: 27
2025-07-24 14:37:20,413 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_11072025_unprocessed.json
2025-07-24 14:37:20,415 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_11072025_unprocessed.json
2025-07-24 14:37:20,416 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 14:37:20,416 - lib.image_processor - INFO - Iniciando descarga paralela de 1 imágenes para la fecha 11072025...
2025-07-24 14:37:21,699 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0355PM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-24 14:44:59,133 - main_orchestrator - INFO - ==================================================
2025-07-24 14:44:59,133 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 14:44:59,133 - main_orchestrator - INFO - Usando fecha: 10072025
2025-07-24 14:44:59,133 - main_orchestrator - INFO - ==================================================
2025-07-24 14:44:59,135 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 14:44:59,137 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 14:44:59,138 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 14:44:59,138 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 674 URLs.
2025-07-24 14:44:59,139 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 14:44:59,140 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 14:44:59,140 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 14:44:59,140 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 14:44:59,140 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 14:44:59,141 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 14:44:59,142 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-24 14:44:59,349 - lib.pdf_processor - INFO - Se extrajeron 50 enlaces URI (no mailto) de 10072025.pdf.
2025-07-24 14:44:59,349 - main_orchestrator - INFO - PDF procesado en 0.21 seg. Enlaces encontrados: 50
2025-07-24 14:44:59,356 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_10072025.csv
2025-07-24 14:44:59,357 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 14:44:59,359 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/10072025.pdf (5 páginas)
2025-07-24 14:44:59,401 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 14:44:59,401 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-24 14:44:59,401 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 14:44:59,401 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 14:44:59,402 - lib.history_tracker - INFO - Filtradas 44 URLs ya procesadas del lote actual.
2025-07-24 14:44:59,402 - main_orchestrator - INFO - URLs nuevas para procesar: 6 (de 50 total)
2025-07-24 14:44:59,402 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 14:44:59,402 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 14:44:59,410 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 14:44:59,410 - content_deduplicator - INFO - Analizando 6 URLs para encontrar duplicados...
2025-07-24 14:44:59,410 - content_deduplicator - INFO - Procesando 3 URLs del dominio facebook.com
2025-07-24 14:44:59,411 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-07-24 14:44:59,412 - content_deduplicator - INFO - URLs totales: 6, Únicas: 3, En grupos: 3
2025-07-24 14:44:59,412 - content_deduplicator - INFO - Se realizaron 2 comparaciones (1518.6/seg), evitando 0
2025-07-24 14:44:59,412 - content_deduplicator - INFO - Grupos de duplicados encontrados: 1
2025-07-24 14:44:59,413 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-24 14:44:59,413 - main_orchestrator - INFO - Análisis de duplicados completado: 2 URLs duplicadas filtradas
2025-07-24 14:44:59,413 - main_orchestrator - INFO - URLs después de filtrar duplicados: 4
2025-07-24 14:44:59,413 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_10072025.json
2025-07-24 14:44:59,413 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 14:44:59,415 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 14:44:59,415 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 14:44:59,415 - lib.url_manager - INFO - Clasificación de 4 URLs:
2025-07-24 14:44:59,415 - lib.url_manager - INFO -  - HTML: 1
2025-07-24 14:44:59,416 - lib.url_manager - INFO -  - SOCIAL: 3
2025-07-24 14:44:59,416 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_10072025_unprocessed.json
2025-07-24 14:44:59,416 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 14:44:59,416 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 14:44:59,416 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 14:44:59,417 - lib.html_scraper - INFO - Iniciando scraping paralelo de 1 URLs...
2025-07-24 14:45:02,855 - lib.html_scraper - INFO - Progreso: 1/1 URLs procesadas en 3.44 seg.
2025-07-24 14:45:02,857 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-24 14:45:02,858 - lib.html_scraper - INFO - Scraping completado para 1/1 URLs en 3.44 segundos.
2025-07-24 14:45:02,858 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_10072025.json
2025-07-24 14:45:02,858 - main_orchestrator - INFO - Scraping HTML completado en 3.44 seg.
2025-07-24 14:45:02,858 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-24 14:45:02,861 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 675 URLs.
2025-07-24 14:45:02,862 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 14:45:02,862 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 14:45:02,863 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 14:45:02,863 - main_orchestrator - INFO - Leyendo archivo social para la fecha 10072025: social_links_10072025_unprocessed.json
2025-07-24 14:45:02,863 - main_orchestrator - INFO - Encontradas 1 URLs de Facebook para procesar
2025-07-24 14:45:02,864 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-24 14:45:02,864 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 1 URLs de Facebook para la fecha 10072025...
2025-07-24 14:45:02,865 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/photo/?fbid=1811536702969445&set=a.1057168758406247
2025-07-24 14:48:21,559 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/photo/?fbid=1811536702969445&set=a.1057168758406247: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 14:48:24,163 - lib.facebook_processor - INFO - Progreso Facebook: 1/1 en 201.30 seg.
2025-07-24 14:48:24,164 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_10072025.json
2025-07-24 14:48:24,164 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 0/1 exitosos en 201.30 segundos.
2025-07-24 14:48:24,164 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 201.30 seg.
2025-07-24 14:48:24,165 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-24 14:48:24,166 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 676 URLs.
2025-07-24 14:48:24,167 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 14:48:24,167 - lib.facebook_processor - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-24 14:48:24,167 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.00 seg.
2025-07-24 14:48:24,167 - main_orchestrator - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-24 14:48:24,168 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 14:48:24,169 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 14:48:24,170 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 14:48:24,170 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T14:48:24.168278', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 4, 'history_total_urls': 676, 'categories': {'html': 1, 'social': 3}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 0, 'average_relevance': 0.0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.21, 'pdf_text_extraction': 0.0, 'image_download': 0, 'html_scraping': 3.44, 'image_api': 0, 'facebook_processing': 201.3, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0}}
2025-07-24 14:48:24,170 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 14:48:24,170 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 14:48:24,173 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/10072025/texto_imagenes_api.json
2025-07-24 14:48:24,173 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_10072025/pdf_text_10072025.json
2025-07-24 14:48:24,174 - main_orchestrator - INFO - Procesando 9 textos de imágenes para consolidación
2025-07-24 14:48:24,175 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-24 14:48:24,175 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_10072025.json
2025-07-24 14:48:24,175 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 14:48:24,181 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 14:48:24,181 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 14:48:24,181 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-24 14:48:24,182 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 14:48:24,182 - semantic_cleaner - INFO - Extraídos 9 textos de imágenes
2025-07-24 14:48:24,182 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 14:48:25,534 - semantic_cleaner - INFO - Se identificaron 15 grupos de textos similares
2025-07-24 14:48:25,534 - semantic_cleaner - INFO - Se seleccionaron 15 textos representativos
2025-07-24 14:48:25,535 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 14:48:25,536 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-24 14:48:25,538 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_10072025.json
2025-07-24 14:48:25,538 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 14:48:25,545 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 14:48:25,546 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 14:48:25,546 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_10072025.json
2025-07-24 14:48:25,546 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T14:48:24.168278', 'date_processed': '10072025', 'total_urls_in_pdf': 50, 'new_urls_processed_count': 4, 'history_total_urls': 676, 'categories': {'html': 1, 'social': 3}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 0, 'average_relevance': 0.0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 1, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.21, 'pdf_text_extraction': 0.0, 'image_download': 0, 'html_scraping': 3.44, 'image_api': 0, 'facebook_processing': 201.3, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.37}}
2025-07-24 14:48:25,547 - main_orchestrator - INFO - Limpieza semántica completada en 1.37 seg.
2025-07-24 14:48:25,547 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 14:48:25,548 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 14:48:25,548 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_10072025.json
2025-07-24 14:48:25,554 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/photo/?fbid=122144176310693859&set=a.122108624150693859
2025-07-24 14:48:25,554 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 14:48:25,556 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_10072025.md
2025-07-24 14:48:25,556 - facebook_extractor_fix - INFO - Se han añadido 2 textos de Facebook al archivo limpio
2025-07-24 14:48:25,556 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 14:48:25,557 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 14:48:25,557 - main_orchestrator - INFO - ==================================================
2025-07-24 14:48:25,557 - main_orchestrator - INFO - PIPELINE FINALIZADO en 206.42 segundos.
2025-07-24 14:48:25,557 - main_orchestrator - INFO - ==================================================
2025-07-24 14:48:25,722 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 14:48:27,409 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:28,399 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:29,056 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:30,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:31,448 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:32,409 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:33,236 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:33,799 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:34,514 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:37,066 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:37,754 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:39,625 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:40,149 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:41,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:43,004 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:44,005 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:45,330 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 14:48:45,491 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 16:46:29,775 - main_orchestrator - INFO - ==================================================
2025-07-24 16:46:29,778 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-24 16:46:29,778 - main_orchestrator - INFO - Usando fecha: 15072025
2025-07-24 16:46:29,778 - main_orchestrator - INFO - ==================================================
2025-07-24 16:46:29,858 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-24 16:46:29,863 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-24 16:46:29,873 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-24 16:46:29,885 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 676 URLs.
2025-07-24 16:46:29,889 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-24 16:46:29,974 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-24 16:46:30,004 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-24 16:46:30,007 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-24 16:46:30,019 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-24 16:46:30,020 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-24 16:46:30,390 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-24 16:46:30,845 - lib.pdf_processor - INFO - Se extrajeron 37 enlaces URI (no mailto) de 15072025.pdf.
2025-07-24 16:46:30,850 - main_orchestrator - INFO - PDF procesado en 0.83 seg. Enlaces encontrados: 37
2025-07-24 16:46:31,177 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_15072025.csv
2025-07-24 16:46:31,177 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-24 16:46:31,183 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-24 16:46:31,240 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 16:46:31,240 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-07-24 16:46:31,240 - main_orchestrator - INFO - Texto del PDF extraído en 0.06 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 16:46:31,241 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-24 16:46:31,241 - lib.history_tracker - INFO - Filtradas 33 URLs ya procesadas del lote actual.
2025-07-24 16:46:31,241 - main_orchestrator - INFO - URLs nuevas para procesar: 4 (de 37 total)
2025-07-24 16:46:31,241 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-24 16:46:31,249 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-24 16:46:31,256 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-24 16:46:31,257 - content_deduplicator - INFO - Analizando 4 URLs para encontrar duplicados...
2025-07-24 16:46:31,257 - content_deduplicator - INFO - Procesando 2 URLs del dominio facebook.com
2025-07-24 16:46:31,270 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtube.com
2025-07-24 16:46:31,271 - content_deduplicator - INFO - Análisis completado en 0.01 segundos
2025-07-24 16:46:31,271 - content_deduplicator - INFO - URLs totales: 4, Únicas: 3, En grupos: 0
2025-07-24 16:46:31,271 - content_deduplicator - INFO - Se realizaron 1 comparaciones (75.0/seg), evitando 0
2025-07-24 16:46:31,271 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-24 16:46:31,272 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-24 16:46:31,272 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-24 16:46:31,273 - main_orchestrator - INFO - URLs después de filtrar duplicados: 4
2025-07-24 16:46:31,273 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-24 16:46:31,273 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-24 16:46:31,274 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-24 16:46:31,274 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-24 16:46:31,277 - lib.url_manager - INFO - Clasificación de 4 URLs:
2025-07-24 16:46:31,277 - lib.url_manager - INFO -  - SOCIAL: 4
2025-07-24 16:46:31,283 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_15072025_unprocessed.json
2025-07-24 16:46:31,283 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-24 16:46:31,283 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-24 16:46:31,283 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-24 16:46:31,283 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-24 16:46:31,284 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-24 16:46:31,286 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-24 16:46:31,286 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-24 16:46:31,287 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15072025: social_links_15072025_unprocessed.json
2025-07-24 16:46:31,287 - main_orchestrator - INFO - Encontradas 2 URLs de Facebook para procesar
2025-07-24 16:46:31,288 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-24 16:46:31,289 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 2 URLs de Facebook para la fecha 15072025...
2025-07-24 16:46:31,307 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/permalink.php?story_fbid=pfbid0btPRohwCnnJjb3fUagqvJVpkWdky8dbq1mWnyb8feRxUupjtWDoMc7LzAgjU7hbl&id=100063616446639&locale=es_LA
2025-07-24 16:46:31,317 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/permalink.php?story_fbid=pfbid02nPEHCdfjBgyV5sww9wpPRCCzt5ZZnmtkZXuPsp8YQ1nj2qkAZLbtchVLr1p1vEXZl&id=100072108931277&locale=es_LA
2025-07-24 16:51:31,883 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid0btPRohwCnnJjb3fUagqvJVpkWdky8dbq1mWnyb8feRxUupjtWDoMc7LzAgjU7hbl&id=100063616446639&locale=es_LA: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 16:51:31,883 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid02nPEHCdfjBgyV5sww9wpPRCCzt5ZZnmtkZXuPsp8YQ1nj2qkAZLbtchVLr1p1vEXZl&id=100072108931277&locale=es_LA: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-24 16:51:34,331 - lib.facebook_processor - INFO - Progreso Facebook: 2/2 en 303.04 seg.
2025-07-24 16:51:34,334 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_15072025.json
2025-07-24 16:51:34,335 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 0/2 exitosos en 303.05 segundos.
2025-07-24 16:51:34,335 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 303.05 seg.
2025-07-24 16:51:34,335 - lib.history_tracker - INFO - Añadidas 2 nuevas URLs al historial.
2025-07-24 16:51:34,338 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 678 URLs.
2025-07-24 16:51:34,338 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-24 16:51:34,340 - lib.facebook_processor - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-24 16:51:34,340 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.00 seg.
2025-07-24 16:51:34,340 - main_orchestrator - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-24 16:51:34,341 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-24 16:51:34,341 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 16:51:34,341 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 16:51:34,342 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T16:51:34.341420', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 4, 'history_total_urls': 678, 'categories': {'social': 4}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.83, 'pdf_text_extraction': 0.0, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 303.05, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0}}
2025-07-24 16:51:34,342 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-24 16:51:34,342 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-24 16:51:34,345 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-24 16:51:34,348 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/15072025/texto_imagenes_api.json
2025-07-24 16:51:34,348 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-24 16:51:34,349 - main_orchestrator - INFO - Procesando 8 textos de imágenes para consolidación
2025-07-24 16:51:34,351 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-24 16:51:34,352 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-24 16:51:34,352 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-24 16:51:34,387 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-24 16:51:34,388 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-24 16:51:34,388 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-07-24 16:51:34,388 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-24 16:51:34,389 - semantic_cleaner - INFO - Extraídos 8 textos de imágenes
2025-07-24 16:51:34,389 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-24 16:51:35,354 - semantic_cleaner - INFO - Se identificaron 12 grupos de textos similares
2025-07-24 16:51:35,354 - semantic_cleaner - INFO - Se seleccionaron 12 textos representativos
2025-07-24 16:51:35,355 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-24 16:51:35,355 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-24 16:51:35,359 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-24 16:51:35,359 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 16:51:35,367 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 16:51:35,368 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 16:51:35,368 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-24 16:51:35,368 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-24T16:51:34.341420', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 4, 'history_total_urls': 678, 'categories': {'social': 4}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 2, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.83, 'pdf_text_extraction': 0.0, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 303.05, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.02}}
2025-07-24 16:51:35,369 - main_orchestrator - INFO - Limpieza semántica completada en 1.02 seg.
2025-07-24 16:51:35,369 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-24 16:51:35,370 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-24 16:51:35,370 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-24 16:51:35,373 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA
2025-07-24 16:51:35,373 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-24 16:51:35,374 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-24 16:51:35,374 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-07-24 16:51:35,374 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-24 16:51:35,376 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-24 16:51:35,377 - main_orchestrator - INFO - ==================================================
2025-07-24 16:51:35,377 - main_orchestrator - INFO - PIPELINE FINALIZADO en 305.60 segundos.
2025-07-24 16:51:35,377 - main_orchestrator - INFO - ==================================================
2025-07-24 16:51:35,514 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-24 16:51:38,499 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:39,955 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:41,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:42,099 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:44,339 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:45,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:46,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:47,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:49,754 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:50,679 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:52,118 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:53,058 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:54,067 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:55,092 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:57,105 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:51:59,461 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-24 16:52:07,241 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:52:33,133 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:52:34,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:52:35,256 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:52:35,720 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:52:36,285 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:52:37,677 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 16:53:01,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:53:01,552 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:53:02,506 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:53:03,700 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:53:03,853 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:53:05,016 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 16:54:17,803 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:54:19,023 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:54:19,727 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:54:20,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:54:20,256 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:20,269 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:20,277 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:20,287 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:20,292 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:20,303 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:54:22,568 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 16:55:07,618 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:55:08,609 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:55:09,253 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:55:09,908 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 16:55:10,111 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 16:55:12,235 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 17:05:18,599 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:08:42,886 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:12:13,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 17:12:13,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 17:12:15,094 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 17:12:16,029 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-24 17:12:16,049 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:12:18,597 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-07-24 17:12:52,439 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:13:03,299 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:17:24,966 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:17:27,484 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:17:28,352 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:27:15,668 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:27:17,486 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-24 17:27:20,168 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 14:13:45,302 - main_orchestrator - INFO - ==================================================
2025-07-25 14:13:45,304 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-25 14:13:45,304 - main_orchestrator - INFO - Usando fecha: 15072025
2025-07-25 14:13:45,304 - main_orchestrator - INFO - ==================================================
2025-07-25 14:13:45,309 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-25 14:13:45,311 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-25 14:13:45,313 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-25 14:13:45,316 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 678 URLs.
2025-07-25 14:13:45,317 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-25 14:13:45,318 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-25 14:13:45,318 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-25 14:13:45,318 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-25 14:13:45,320 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-25 14:13:45,320 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-25 14:13:45,363 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-25 14:13:45,583 - lib.pdf_processor - INFO - Se extrajeron 37 enlaces URI (no mailto) de 15072025.pdf.
2025-07-25 14:13:45,583 - main_orchestrator - INFO - PDF procesado en 0.26 seg. Enlaces encontrados: 37
2025-07-25 14:13:45,603 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_15072025.csv
2025-07-25 14:13:45,603 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-25 14:13:45,604 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/15072025.pdf (3 páginas)
2025-07-25 14:13:45,632 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-25 14:13:45,633 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 3 párrafos
2025-07-25 14:13:45,633 - main_orchestrator - INFO - Texto del PDF extraído en 0.03 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-25 14:13:45,633 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-25 14:13:45,633 - lib.history_tracker - INFO - Filtradas 35 URLs ya procesadas del lote actual.
2025-07-25 14:13:45,633 - main_orchestrator - INFO - URLs nuevas para procesar: 2 (de 37 total)
2025-07-25 14:13:45,634 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-25 14:13:45,634 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-25 14:13:45,640 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-25 14:13:45,641 - content_deduplicator - INFO - Analizando 2 URLs para encontrar duplicados...
2025-07-25 14:13:45,641 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtube.com
2025-07-25 14:13:45,642 - content_deduplicator - INFO - Análisis completado en 0.00 segundos
2025-07-25 14:13:45,642 - content_deduplicator - INFO - URLs totales: 2, Únicas: 1, En grupos: 0
2025-07-25 14:13:45,643 - content_deduplicator - INFO - Se realizaron 0 comparaciones (0.0/seg), evitando 0
2025-07-25 14:13:45,643 - content_deduplicator - INFO - Grupos de duplicados encontrados: 0
2025-07-25 14:13:45,643 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-25 14:13:45,644 - main_orchestrator - INFO - Análisis de duplicados completado: 0 URLs duplicadas filtradas
2025-07-25 14:13:45,644 - main_orchestrator - INFO - URLs después de filtrar duplicados: 2
2025-07-25 14:13:45,644 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_15072025.json
2025-07-25 14:13:45,645 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-25 14:13:45,645 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-25 14:13:45,646 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-25 14:13:45,647 - lib.url_manager - INFO - Clasificación de 2 URLs:
2025-07-25 14:13:45,647 - lib.url_manager - INFO -  - SOCIAL: 2
2025-07-25 14:13:45,648 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_15072025_unprocessed.json
2025-07-25 14:13:45,648 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-25 14:13:45,648 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-25 14:13:45,648 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-25 14:13:45,649 - main_orchestrator - INFO - No hay nuevas URLs HTML para scrapear.
2025-07-25 14:13:45,649 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-25 14:13:45,650 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-25 14:13:45,650 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-25 14:13:45,651 - main_orchestrator - INFO - Leyendo archivo social para la fecha 15072025: social_links_15072025_unprocessed.json
2025-07-25 14:13:45,652 - main_orchestrator - INFO - No hay URLs de Facebook para procesar.
2025-07-25 14:13:45,652 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-25 14:13:45,652 - main_orchestrator - INFO - No hay PDFs de Facebook para extraer texto.
2025-07-25 14:13:45,653 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-25 14:13:45,653 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-25 14:13:45,653 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-25 14:13:45,654 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T14:13:45.653276', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 2, 'history_total_urls': 678, 'categories': {'social': 2}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.03, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.03, 'stats_consolidation': 0.0}}
2025-07-25 14:13:45,654 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-25 14:13:45,654 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-25 14:13:45,655 - main_orchestrator - INFO - Cargando contenido HTML de archivo existente: /home/erick/NewsAgent/input/Out/scraped_texts_15072025.json
2025-07-25 14:13:45,657 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/15072025/texto_imagenes_api.json
2025-07-25 14:13:45,657 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_15072025/pdf_text_15072025.json
2025-07-25 14:13:45,657 - main_orchestrator - INFO - Procesando 8 textos de imágenes para consolidación
2025-07-25 14:13:45,661 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-25 14:13:45,661 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_15072025.json
2025-07-25 14:13:45,661 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-25 14:13:45,665 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-25 14:13:45,666 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-25 14:13:45,667 - semantic_cleaner - INFO - Extraídos 3 textos de PDF
2025-07-25 14:13:45,667 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-25 14:13:45,668 - semantic_cleaner - INFO - Extraídos 8 textos de imágenes
2025-07-25 14:13:45,668 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-25 14:13:46,797 - semantic_cleaner - INFO - Se identificaron 12 grupos de textos similares
2025-07-25 14:13:46,797 - semantic_cleaner - INFO - Se seleccionaron 12 textos representativos
2025-07-25 14:13:46,797 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-25 14:13:46,798 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-25 14:13:46,799 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_15072025.json
2025-07-25 14:13:46,799 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-25 14:13:46,803 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-25 14:13:46,803 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-25 14:13:46,804 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_15072025.json
2025-07-25 14:13:46,804 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T14:13:45.653276', 'date_processed': '15072025', 'total_urls_in_pdf': 37, 'new_urls_processed_count': 2, 'history_total_urls': 678, 'categories': {'social': 2}, 'html_processing': {'attempted': 0, 'processed': 0, 'successful': 0, 'relevant (>=0.3)': 0, 'average_relevance': 0}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 0, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.26, 'pdf_text_extraction': 0.03, 'image_download': 0, 'html_scraping': 0, 'image_api': 0, 'facebook_processing': 0, 'facebook_text_extraction': 0.03, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.14}}
2025-07-25 14:13:46,804 - main_orchestrator - INFO - Limpieza semántica completada en 1.14 seg.
2025-07-25 14:13:46,805 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-25 14:13:46,805 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-25 14:13:46,805 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_15072025.json
2025-07-25 14:13:46,812 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/permalink.php?story_fbid=pfbid02wLR2VMKQVdMWyyZcrH9TtqJraaqojyVo7MhcDxMrHD2NHJJL6WPsVcKMZnNSm3jAl&id=100062993063417&locale=es_LA
2025-07-25 14:13:46,812 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-25 14:13:46,812 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_15072025.md
2025-07-25 14:13:46,813 - facebook_extractor_fix - INFO - Se han añadido 3 textos de Facebook al archivo limpio
2025-07-25 14:13:46,813 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-25 14:13:46,813 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-25 14:13:46,813 - main_orchestrator - INFO - ==================================================
2025-07-25 14:13:46,813 - main_orchestrator - INFO - PIPELINE FINALIZADO en 1.51 segundos.
2025-07-25 14:13:46,813 - main_orchestrator - INFO - ==================================================
2025-07-25 14:13:46,939 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-25 14:13:48,274 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:52,220 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:53,183 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:54,352 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:55,146 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:56,244 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:56,830 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:57,799 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:58,634 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:13:59,591 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:00,258 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:00,759 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:01,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:02,488 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:03,653 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:14:03,926 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-25 14:14:18,980 - main_orchestrator - INFO - ==================================================
2025-07-25 14:14:18,980 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-25 14:14:18,980 - main_orchestrator - INFO - Usando fecha: 11072025
2025-07-25 14:14:18,980 - main_orchestrator - INFO - ==================================================
2025-07-25 14:14:18,982 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-25 14:14:18,984 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-25 14:14:18,985 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-25 14:14:18,986 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 678 URLs.
2025-07-25 14:14:18,986 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-25 14:14:18,987 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-25 14:14:18,987 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-25 14:14:18,987 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-25 14:14:18,988 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-25 14:14:18,994 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-25 14:14:19,760 - lib.pdf_processor - INFO - Se extrajeron 125 enlaces URI (no mailto) de 11072025.pdf.
2025-07-25 14:14:19,760 - main_orchestrator - INFO - PDF procesado en 0.77 seg. Enlaces encontrados: 125
2025-07-25 14:14:19,764 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_11072025.csv
2025-07-25 14:14:19,764 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-25 14:14:19,765 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-25 14:14:19,802 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 14:14:19,802 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-25 14:14:19,803 - main_orchestrator - INFO - Texto del PDF extraído en 0.04 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 14:14:19,803 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-25 14:14:19,803 - lib.history_tracker - INFO - Filtradas 54 URLs ya procesadas del lote actual.
2025-07-25 14:14:19,803 - main_orchestrator - INFO - URLs nuevas para procesar: 71 (de 125 total)
2025-07-25 14:14:19,803 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-25 14:14:19,805 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-25 14:14:19,810 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-25 14:14:19,810 - content_deduplicator - INFO - Analizando 71 URLs para encontrar duplicados...
2025-07-25 14:14:19,811 - content_deduplicator - INFO - Procesando 57 URLs del dominio facebook.com
2025-07-25 14:14:19,811 - content_deduplicator - WARNING - Dominio facebook.com tiene demasiadas URLs (57). Muestreando para análisis.
2025-07-25 14:14:19,811 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl (tipo: facebook)
2025-07-25 14:18:35,391 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:35,392 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl (tipo: facebook)
2025-07-25 14:18:38,864 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:38,864 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l (tipo: facebook)
2025-07-25 14:18:39,710 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:39,711 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l (tipo: facebook)
2025-07-25 14:18:40,535 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:40,535 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl (tipo: facebook)
2025-07-25 14:18:41,038 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:41,039 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851 (tipo: facebook)
2025-07-25 14:18:41,607 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:41,608 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217 (tipo: facebook)
2025-07-25 14:18:42,151 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:42,151 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl (tipo: facebook)
2025-07-25 14:18:44,263 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:44,263 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128 (tipo: facebook)
2025-07-25 14:18:45,207 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:45,207 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128 (tipo: facebook)
2025-07-25 14:18:45,967 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:45,967 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl (tipo: facebook)
2025-07-25 14:18:46,607 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:46,607 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl (tipo: facebook)
2025-07-25 14:18:47,255 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:47,255 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028 (tipo: facebook)
2025-07-25 14:18:47,935 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:47,936 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal (tipo: facebook)
2025-07-25 14:18:48,639 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:48,639 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal (tipo: facebook)
2025-07-25 14:18:49,334 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:49,335 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l (tipo: facebook)
2025-07-25 14:18:50,903 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:50,903 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l (tipo: facebook)
2025-07-25 14:18:51,607 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:51,607 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045 (tipo: facebook)
2025-07-25 14:18:52,183 - selenium_extractor - ERROR - Error extrayendo contenido de https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:18:52,238 - content_deduplicator - INFO - Realizadas 50 comparaciones (30 evitadas)
2025-07-25 14:18:52,238 - content_deduplicator - INFO - Procesando 3 URLs del dominio youtube.com
2025-07-25 14:18:52,239 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtu.be
2025-07-25 14:18:52,239 - content_deduplicator - INFO - Procesando 2 URLs del dominio larepublica.pe
2025-07-25 14:18:52,240 - content_deduplicator - INFO - Análisis completado en 272.43 segundos
2025-07-25 14:18:52,240 - content_deduplicator - INFO - URLs totales: 71, Únicas: 28, En grupos: 28
2025-07-25 14:18:52,241 - content_deduplicator - INFO - Se realizaron 52 comparaciones (0.2/seg), evitando 60
2025-07-25 14:18:52,241 - content_deduplicator - INFO - Grupos de duplicados encontrados: 4
2025-07-25 14:18:52,241 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-25 14:18:52,242 - main_orchestrator - INFO - Análisis de duplicados completado: 36 URLs duplicadas filtradas
2025-07-25 14:18:52,242 - main_orchestrator - INFO - URLs después de filtrar duplicados: 35
2025-07-25 14:18:52,242 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-25 14:18:52,242 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-25 14:18:52,243 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-25 14:18:52,243 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-25 14:18:52,244 - lib.url_manager - INFO - Clasificación de 35 URLs:
2025-07-25 14:18:52,244 - lib.url_manager - INFO -  - HTML: 7
2025-07-25 14:18:52,245 - lib.url_manager - INFO -  - IMAGES: 1
2025-07-25 14:18:52,245 - lib.url_manager - INFO -  - SOCIAL: 27
2025-07-25 14:18:52,245 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_11072025_unprocessed.json
2025-07-25 14:18:52,246 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_11072025_unprocessed.json
2025-07-25 14:18:52,246 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-25 14:18:52,246 - lib.image_processor - INFO - Iniciando descarga paralela de 1 imágenes para la fecha 11072025...
2025-07-25 14:18:52,752 - lib.image_processor - WARNING - URL http://imacorpplataforma.com/wp-content/uploads/2025/07/10-07-2025-C31-TVPERU-POBLADORES-DE-CANETE-Y-HUARAL-DISFRUTAN-DE-MAS-HORAS-DE-AGUA-ESTADO-A-TU-SERVICIO-0355PM.mp4 contiene video/mp4, no una imagen. Se descargará pero no se procesará con la API.
2025-07-25 14:20:58,989 - lib.image_processor - INFO - Imagen 1 guardada como 'img_1_4759cd1a_11072025.mp4' en /home/erick/NewsAgent/input/Images/downloads/11072025 (140064138 bytes)
2025-07-25 14:20:59,680 - lib.image_processor - INFO - Progreso descarga imágenes: 1/1 en 127.43 seg.
2025-07-25 14:20:59,683 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/image_links_11072025.json
2025-07-25 14:20:59,683 - lib.image_processor - INFO - Descarga de imágenes completada para 1/1 URLs en 127.44 segundos.
2025-07-25 14:20:59,683 - main_orchestrator - INFO - Descarga de imágenes completada en 127.44 seg.
2025-07-25 14:20:59,683 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-25 14:20:59,685 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 679 URLs.
2025-07-25 14:20:59,685 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-25 14:20:59,686 - lib.html_scraper - INFO - Iniciando scraping paralelo de 7 URLs...
2025-07-25 14:21:04,266 - lib.html_scraper - INFO - Progreso: 7/7 URLs procesadas en 4.58 seg.
2025-07-25 14:21:04,270 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-25 14:21:04,270 - lib.html_scraper - INFO - Scraping completado para 7/7 URLs en 4.58 segundos.
2025-07-25 14:21:04,270 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-25 14:21:04,270 - main_orchestrator - INFO - Scraping HTML completado en 4.58 seg.
2025-07-25 14:21:04,271 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-07-25 14:21:04,272 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 686 URLs.
2025-07-25 14:21:04,273 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-25 14:21:06,688 - lib.api_client - INFO - Texto extraído de tmp8c70711e.jpg (4 chars).
2025-07-25 14:21:06,688 - lib.image_processor - INFO - Procesando 1 imágenes con API (batch_size=3, pausa=60s)
2025-07-25 14:21:06,688 - lib.image_processor - INFO - Procesando batch 1 (1 imágenes)
2025-07-25 14:21:06,688 - lib.image_processor - INFO - Procesando imagen con API: img_1_4759cd1a_11072025.mp4
2025-07-25 14:21:06,689 - lib.image_processor - WARNING - Archivo demasiado grande para procesar eficientemente: /home/erick/NewsAgent/input/Images/downloads/11072025/img_1_4759cd1a_11072025.mp4 (133.58 MB)
2025-07-25 14:21:06,689 - lib.image_processor - WARNING - Error procesando imagen img_1_4759cd1a_11072025.mp4: Image file too large
2025-07-25 14:21:07,414 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Images/downloads/11072025/texto_imagenes_api.json
2025-07-25 14:21:07,415 - lib.image_processor - INFO - Resultados de API guardados en: /home/erick/NewsAgent/input/Images/downloads/11072025/texto_imagenes_api.json
2025-07-25 14:21:07,415 - lib.image_processor - INFO - Procesamiento API completado para 0/1 imágenes en 0.73 segundos.
2025-07-25 14:21:07,415 - main_orchestrator - INFO - Procesamiento API de imágenes completado en 3.14 seg.
2025-07-25 14:21:07,415 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-25 14:21:07,416 - main_orchestrator - INFO - Leyendo archivo social para la fecha 11072025: social_links_11072025_unprocessed.json
2025-07-25 14:21:07,416 - main_orchestrator - INFO - Encontradas 22 URLs de Facebook para procesar
2025-07-25 14:21:07,417 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-25 14:21:07,417 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 22 URLs de Facebook para la fecha 11072025...
2025-07-25 14:21:07,418 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1AphX6GaLy/
2025-07-25 14:21:07,419 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/16q1mu68pn/
2025-07-25 14:21:07,421 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/DiarioRevistaSur/posts/pfbid02D9fsGJxTcyrh3AYSW8YucNoxryfmYuuV4bgFzXQ8JMUDtBP9kJLYUHh3fzVu6xZzl
2025-07-25 14:21:07,422 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/RadioLaUnicaOnline/posts/pfbid0YQTKJ1mxZaHS37U93mTqvjttc52joKazAeV3oHHJe4Amzdrf7CsPv3iQcnAK6bFvl
2025-07-25 14:21:07,423 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl
2025-07-25 14:22:44,760 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/share/p/1AphX6GaLy/: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:44,760 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/DiarioRevistaSur/posts/pfbid02D9fsGJxTcyrh3AYSW8YucNoxryfmYuuV4bgFzXQ8JMUDtBP9kJLYUHh3fzVu6xZzl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:44,760 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/peruanosinforman/posts/pfbid021oaGBzaWkZkLUVQWDM1pPNLxYp8qHr4Qkqg9cVx1PMmRpZhMrmHUKnVPEaHZ6zhl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:44,761 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/RadioLaUnicaOnline/posts/pfbid0YQTKJ1mxZaHS37U93mTqvjttc52joKazAeV3oHHJe4Amzdrf7CsPv3iQcnAK6bFvl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:44,761 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/share/p/16q1mu68pn/: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:46,075 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl
2025-07-25 14:22:46,493 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l
2025-07-25 14:22:46,575 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l
2025-07-25 14:22:46,759 - lib.facebook_processor - INFO - Procesando URL de Facebook (9): https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl
2025-07-25 14:22:47,226 - lib.facebook_processor - INFO - Progreso Facebook: 5/22 en 99.81 seg.
2025-07-25 14:22:47,227 - lib.facebook_processor - INFO - Procesando URL de Facebook (10): https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851
2025-07-25 14:22:51,824 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:51,824 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid0UNR9whNw4gcHQdm9NNWKedaSVUXjsdKQuJtRovQcZFX4FAAsojutQmQGAi81CAGdl&id=100063532901851: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:51,825 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/joedsonpolancopezo/posts/pfbid02XibH6pQ4GsHaqwfabPvn1jsjjnWZBAE6kE2xP6avCW9R1sxQxVSAbda6PHgyscwsl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:51,826 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/lineadirecta.arequipa/posts/pfbid025iwqUzHL8X4rE7kKZwcfgKwkHtZbaDQafMyAod2iSCtpqi9KW3eGE28Dr252v44Dl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:51,827 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/PJHNoticias/posts/pfbid02kgq8RZNb3WAGvKp4unucbEJMRnWpqSRqQo3ZdfEmS1b5a1KYtKdG2knkH3JynMM8l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:52,891 - lib.facebook_processor - INFO - Procesando URL de Facebook (11): https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217
2025-07-25 14:22:53,502 - lib.facebook_processor - INFO - Procesando URL de Facebook (12): https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl
2025-07-25 14:22:53,906 - lib.facebook_processor - INFO - Procesando URL de Facebook (13): https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128
2025-07-25 14:22:54,298 - lib.facebook_processor - INFO - Procesando URL de Facebook (14): https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128
2025-07-25 14:22:54,642 - lib.facebook_processor - INFO - Progreso Facebook: 10/22 en 107.23 seg.
2025-07-25 14:22:54,642 - lib.facebook_processor - INFO - Procesando URL de Facebook (15): https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl
2025-07-25 14:22:56,096 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/Arequipa.pe/posts/pfbid0bv2Eqnbs3UEHo3QCBhwLtFSg6SS5dPXLkT1v5QHjezctxZdF2cmnWtM5MqUTtLTpl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:56,097 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:56,098 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/apprimicia/posts/pfbid02cJr2NvSbe6TcBdhk5mFDvmSHYrRHozYd1BX8j6Bt5YzZSwLS7KhKsoqDDvKQLBURl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:56,098 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid034k3faBAb24xRsyEDiB25dfAkiLamsvs6R9qxsijsQ8PYhswNYDEdSfRdUnGwYDQ1l&id=100075936831217: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:56,099 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid0rsUgTaTj5he8aq2b1rApVDf9ZR7Gj5bfcgN3AQsV6VvErjrnRr2My7Vz9mDWVY3kl&id=100025626690128: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:22:57,707 - lib.facebook_processor - INFO - Procesando URL de Facebook (16): https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl
2025-07-25 14:22:57,782 - lib.facebook_processor - INFO - Procesando URL de Facebook (17): https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028
2025-07-25 14:22:57,909 - lib.facebook_processor - INFO - Procesando URL de Facebook (18): https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal
2025-07-25 14:22:58,850 - lib.facebook_processor - INFO - Procesando URL de Facebook (19): https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal
2025-07-25 14:22:58,962 - lib.facebook_processor - INFO - Progreso Facebook: 15/22 en 111.55 seg.
2025-07-25 14:22:58,963 - lib.facebook_processor - INFO - Procesando URL de Facebook (20): https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l
2025-07-25 14:23:01,023 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:23:01,023 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/polemicaynoticiasaqpoficial/posts/pfbid0rijyGbirejUCGGspFtRux2hV5MvwTYAbTkPLtctfYqMZBQn354zcNyE5jaCZMG99l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:23:01,024 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/AltoVoltajeNoticias/posts/pfbid0JAPXm2xgNcRJi2UXDaw3YeKvCxbqUHSxJEAZcpZ6fsK85rn3ijwbqqQZEVzXpWNQl: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:23:01,024 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid031VfCEaFMagudjYuQYQXMaT644w7G9DQprBSaiYwgZ1YR8L3wY2CqgYBwpkg3oG6Ml&id=61559070232028: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:23:01,025 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/NexoCanalOnline/posts/pfbid02r5AvgRZ827jgPiMaj846AEU54uPq1mxTfaadd2CpT4Gx97XU9MSLv7AVn1yaPsGal: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:23:02,391 - lib.facebook_processor - INFO - Procesando URL de Facebook (21): https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l
2025-07-25 14:23:02,478 - lib.facebook_processor - INFO - Procesando URL de Facebook (22): https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045
2025-07-25 14:23:03,720 - lib.facebook_processor - INFO - Progreso Facebook: 20/22 en 116.30 seg.
2025-07-25 14:24:13,423 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/permalink.php?story_fbid=pfbid029KeU2HaeFBvkewhuCvqua9J4GdJUeBfwt1i956why9n8XAws2XgndT5w6MxuCyFNl&id=61553963683045: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:24:13,424 - lib.facebook_processor - WARNING - Error de WebDriver para https://www.facebook.com/UniversalNoticiasArequipa/posts/pfbid07p4XvCpey3N46YxCFd7uqRk4svvTbkr9twaoqDa15XWg9F8P5jbwepFgig1g8vh7l: Message: Unable to obtain driver for chrome; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location

2025-07-25 14:24:15,749 - lib.facebook_processor - INFO - Progreso Facebook: 22/22 en 188.33 seg.
2025-07-25 14:24:15,751 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_11072025.json
2025-07-25 14:24:15,751 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 0/22 exitosos en 188.33 segundos.
2025-07-25 14:24:15,752 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 188.34 seg.
2025-07-25 14:24:15,752 - lib.history_tracker - INFO - Añadidas 19 nuevas URLs al historial.
2025-07-25 14:24:15,754 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 705 URLs.
2025-07-25 14:24:15,755 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-25 14:24:15,755 - lib.facebook_processor - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-25 14:24:15,755 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 0.00 seg.
2025-07-25 14:24:15,756 - main_orchestrator - INFO - Texto extraído de 0 PDFs de Facebook
2025-07-25 14:24:15,756 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-25 14:24:15,756 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 14:24:15,756 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 14:24:15,757 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T14:24:15.756408', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 35, 'history_total_urls': 705, 'categories': {'html': 7, 'images': 1, 'social': 27}, 'html_processing': {'attempted': 7, 'processed': 7, 'successful': 7, 'relevant (>=0.3)': 3, 'average_relevance': 0.2857142857142857}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 0.0, 'image_download': 127.44, 'html_scraping': 4.58, 'image_api': 3.14, 'facebook_processing': 188.34, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0}}
2025-07-25 14:24:15,757 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-25 14:24:15,757 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-25 14:24:15,757 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 14:24:15,758 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-25 14:24:15,760 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-25 14:24:15,761 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-25 14:24:15,762 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-25 14:24:15,763 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-25 14:24:15,763 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-25 14:24:15,763 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-25 14:24:15,764 - semantic_cleaner - INFO - Extraídos 7 textos de HTML
2025-07-25 14:24:15,764 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-25 14:24:15,764 - semantic_cleaner - INFO - Extraídos 0 textos de Facebook
2025-07-25 14:24:17,140 - semantic_cleaner - INFO - Se identificaron 12 grupos de textos similares
2025-07-25 14:24:17,140 - semantic_cleaner - INFO - Se seleccionaron 12 textos representativos
2025-07-25 14:24:17,141 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-25 14:24:17,141 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-25 14:24:17,143 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-25 14:24:17,143 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 14:24:17,146 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 14:24:17,147 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 14:24:17,147 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 14:24:17,148 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T14:24:15.756408', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 35, 'history_total_urls': 705, 'categories': {'html': 7, 'images': 1, 'social': 27}, 'html_processing': {'attempted': 7, 'processed': 7, 'successful': 7, 'relevant (>=0.3)': 3, 'average_relevance': 0.2857142857142857}, 'image_processing': {'attempted_download': 1, 'successful_download': 1, 'attempted_api': 1, 'successful_api': 0}, 'facebook_processing': {'attempted': 22, 'successful': 0, 'extracted_texts': 0}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 0.0, 'image_download': 127.44, 'html_scraping': 4.58, 'image_api': 3.14, 'facebook_processing': 188.34, 'facebook_text_extraction': 0.0, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.38}}
2025-07-25 14:24:17,148 - main_orchestrator - INFO - Limpieza semántica completada en 1.38 seg.
2025-07-25 14:24:17,148 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-25 14:24:17,148 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-25 14:24:17,149 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-25 14:24:17,152 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/share/p/16ngHNLS3G/
2025-07-25 14:24:17,152 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-25 14:24:17,153 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 14:24:17,153 - facebook_extractor_fix - INFO - Se han añadido 16 textos de Facebook al archivo limpio
2025-07-25 14:24:17,153 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-25 14:24:17,154 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-25 14:24:17,154 - main_orchestrator - INFO - ==================================================
2025-07-25 14:24:17,154 - main_orchestrator - INFO - PIPELINE FINALIZADO en 598.17 segundos.
2025-07-25 14:24:17,154 - main_orchestrator - INFO - ==================================================
2025-07-25 14:24:17,305 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-25 14:24:18,371 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:19,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:19,804 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:20,595 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:21,184 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:21,567 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:21,960 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:23,330 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:24,495 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:25,177 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:25,747 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:26,352 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:26,744 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:27,172 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:27,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:27,887 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:28,759 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:29,298 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:29,657 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:30,137 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:30,577 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:30,979 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:31,498 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:32,014 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:32,390 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:32,760 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:33,405 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:33,713 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 14:24:33,830 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-25 14:24:33,912 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 14:39:29,928 - main_orchestrator - INFO - ==================================================
2025-07-25 14:39:29,930 - main_orchestrator - INFO - INICIANDO PIPELINE DE SCRAPING
2025-07-25 14:39:29,930 - main_orchestrator - INFO - Usando fecha: 11072025
2025-07-25 14:39:29,930 - main_orchestrator - INFO - ==================================================
2025-07-25 14:39:29,934 - lib.config_manager - INFO - Configuración cargada desde /home/erick/NewsAgent/config.yaml
2025-07-25 14:39:29,935 - lib.config_manager - INFO - Clave API de Google cargada desde /home/erick/NewsAgent/credentials/api_keys.yaml
2025-07-25 14:39:29,937 - main_orchestrator - INFO - Configuración y rutas cargadas.
2025-07-25 14:39:29,939 - lib.history_tracker - INFO - Historial cargado desde /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 705 URLs.
2025-07-25 14:39:29,940 - main_orchestrator - INFO - Deduplicador optimizado inicializado correctamente
2025-07-25 14:39:29,940 - lib.request_utils - INFO - Sesión global con reintentos inicializada
2025-07-25 14:39:29,940 - lib.api_client - INFO - API Gemini configurada con modelo: gemini-1.5-pro-latest
2025-07-25 14:39:29,940 - lib.image_processor - INFO - Cliente Gemini API inicializado con modelo gemini-1.5-pro-latest
2025-07-25 14:39:29,941 - main_orchestrator - INFO - Componentes inicializados (History, Scraper, ImageProcessor, FacebookProcessor).
2025-07-25 14:39:29,941 - main_orchestrator - INFO - --- Paso 1: Extrayendo enlaces del PDF ---
2025-07-25 14:39:29,975 - lib.pdf_processor - INFO - Abriendo PDF: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-25 14:39:30,706 - lib.pdf_processor - INFO - Se extrajeron 125 enlaces URI (no mailto) de 11072025.pdf.
2025-07-25 14:39:30,707 - main_orchestrator - INFO - PDF procesado en 0.77 seg. Enlaces encontrados: 125
2025-07-25 14:39:30,716 - lib.file_manager - INFO - Datos guardados en CSV: /home/erick/NewsAgent/input/In/links_extracted_11072025.csv
2025-07-25 14:39:30,717 - main_orchestrator - INFO - --- Paso 1.1: Extrayendo texto del PDF por secciones ---
2025-07-25 14:39:30,718 - lib.text_extractor - INFO - Abriendo PDF para extracción de texto: /home/erick/NewsAgent/base/11072025.pdf (5 páginas)
2025-07-25 14:39:30,762 - lib.text_extractor - INFO - Texto del PDF extraído y guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 14:39:30,762 - lib.text_extractor - INFO - Se encontraron 1 secciones con un total de 5 párrafos
2025-07-25 14:39:30,763 - main_orchestrator - INFO - Texto del PDF extraído en 0.05 seg. Guardado en: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 14:39:30,763 - main_orchestrator - INFO - --- Paso 2: Filtrando URLs por historial ---
2025-07-25 14:39:30,764 - lib.history_tracker - INFO - Filtradas 84 URLs ya procesadas del lote actual.
2025-07-25 14:39:30,764 - main_orchestrator - INFO - URLs nuevas para procesar: 41 (de 125 total)
2025-07-25 14:39:30,764 - main_orchestrator - INFO - --- Paso 2.1: Analizando duplicados basados en contenido ---
2025-07-25 14:39:30,767 - selenium_extractor - INFO - SeleniumContentExtractor inicializado con caché en: /home/erick/NewsAgent/cache/dedup/content
2025-07-25 14:39:30,774 - content_deduplicator - INFO - ContentDeduplicator inicializado con caché en: /home/erick/NewsAgent/cache/dedup
2025-07-25 14:39:30,774 - content_deduplicator - INFO - Analizando 41 URLs para encontrar duplicados...
2025-07-25 14:39:30,775 - content_deduplicator - INFO - Procesando 35 URLs del dominio facebook.com
2025-07-25 14:39:30,775 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0hvcxkhiUQ1pNpjZRP8SdURAeGqdc3Q3U8SegBYKtxLDeHjkmtDP3icacmhoZ8iRCl&id=100083119487359 (tipo: facebook)
2025-07-25 14:44:31,111 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 14:44:37,926 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0hvcxkhiUQ1pNpjZRP8SdURAeGqdc3Q3U8SegBYKtxLDeHjkmtDP3icacmhoZ8iRCl&id=100083119487359
2025-07-25 14:44:38,111 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0SdBPX4NxJhzs23ZksFBJxP8QejvupqF3iYB8NhDsdqvkc4v5S1JbXdQYQA13qPCsl&id=61550907352006 (tipo: facebook)
2025-07-25 14:49:38,284 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 14:49:43,537 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/permalink.php?story_fbid=pfbid0SdBPX4NxJhzs23ZksFBJxP8QejvupqF3iYB8NhDsdqvkc4v5S1JbXdQYQA13qPCsl&id=61550907352006
2025-07-25 14:49:43,822 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1Angugo3Dh/ (tipo: facebook)
2025-07-25 14:54:44,139 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 14:54:50,204 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1Angugo3Dh/
2025-07-25 14:54:50,324 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/p/1CDCNnvR9h/ (tipo: facebook)
2025-07-25 14:59:50,497 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 14:59:57,381 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/p/1CDCNnvR9h/
2025-07-25 14:59:57,497 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/share/r/1CM1BvLYYA/ (tipo: facebook)
2025-07-25 15:04:57,659 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:05:03,437 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/share/r/1CM1BvLYYA/
2025-07-25 15:05:03,563 - selenium_extractor - INFO - Extrayendo contenido de URL: https://www.facebook.com/photo?fbid=705024775749143&set=a.109152658669694&locale=es_LA (tipo: facebook)
2025-07-25 15:10:03,741 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:10:08,235 - selenium_extractor - WARNING - Facebook requiere inicio de sesión para URL: https://www.facebook.com/photo?fbid=705024775749143&set=a.109152658669694&locale=es_LA
2025-07-25 15:10:08,402 - content_deduplicator - INFO - Realizadas 50 comparaciones (0 evitadas)
2025-07-25 15:10:08,417 - content_deduplicator - INFO - Procesando 3 URLs del dominio youtube.com
2025-07-25 15:10:08,418 - content_deduplicator - INFO - Procesando 2 URLs del dominio youtu.be
2025-07-25 15:10:08,419 - content_deduplicator - INFO - Análisis completado en 1837.65 segundos
2025-07-25 15:10:08,420 - content_deduplicator - INFO - URLs totales: 41, Únicas: 11, En grupos: 24
2025-07-25 15:10:08,420 - content_deduplicator - INFO - Se realizaron 66 comparaciones (0.0/seg), evitando 0
2025-07-25 15:10:08,420 - content_deduplicator - INFO - Grupos de duplicados encontrados: 2
2025-07-25 15:10:08,420 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-25 15:10:08,421 - main_orchestrator - INFO - Análisis de duplicados completado: 27 URLs duplicadas filtradas
2025-07-25 15:10:08,421 - main_orchestrator - INFO - URLs después de filtrar duplicados: 14
2025-07-25 15:10:08,421 - main_orchestrator - INFO - Estadísticas de duplicados guardadas en /home/erick/NewsAgent/output/duplicates_analysis_11072025.json
2025-07-25 15:10:08,421 - main_orchestrator - INFO - --- Paso 3: Clasificando URLs ---
2025-07-25 15:10:08,422 - url_classifier - INFO - URLClassifier inicializado con umbrales: {'facebook': 0.85, 'youtube': 0.95, 'news': 0.9, 'document': 0.98, 'image': 0.99, 'media': 0.95, 'government': 0.9, 'other': 0.85, 'default': 0.88}
2025-07-25 15:10:08,422 - main_orchestrator - WARNING - Error en clasificación avanzada: 'dict' object has no attribute 'lower'. Usando clasificación estándar.
2025-07-25 15:10:08,423 - lib.url_manager - INFO - Clasificación de 14 URLs:
2025-07-25 15:10:08,423 - lib.url_manager - INFO -  - HTML: 1
2025-07-25 15:10:08,423 - lib.url_manager - INFO -  - SOCIAL: 13
2025-07-25 15:10:08,424 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Social/social_links_11072025_unprocessed.json
2025-07-25 15:10:08,424 - main_orchestrator - INFO - --- Paso 4: Procesando Imágenes (Descarga) ---
2025-07-25 15:10:08,424 - main_orchestrator - INFO - No hay nuevas URLs de imágenes para descargar.
2025-07-25 15:10:08,424 - main_orchestrator - INFO - --- Paso 5: Procesando HTML (Scraping) ---
2025-07-25 15:10:08,424 - lib.html_scraper - INFO - Iniciando scraping paralelo de 1 URLs...
2025-07-25 15:10:09,912 - lib.html_scraper - INFO - Progreso: 1/1 URLs procesadas en 1.49 seg.
2025-07-25 15:10:09,913 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-25 15:10:09,913 - lib.html_scraper - INFO - Scraping completado para 1/1 URLs en 1.49 segundos.
2025-07-25 15:10:09,914 - lib.html_scraper - INFO - Resultados guardados en: /home/erick/NewsAgent/input/Out/scraped_texts_11072025.json
2025-07-25 15:10:09,914 - main_orchestrator - INFO - Scraping HTML completado en 1.49 seg.
2025-07-25 15:10:09,915 - lib.history_tracker - INFO - Añadidas 1 nuevas URLs al historial.
2025-07-25 15:10:09,918 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 706 URLs.
2025-07-25 15:10:09,918 - main_orchestrator - INFO - --- Paso 6: Procesando Imágenes Descargadas (API) ---
2025-07-25 15:10:09,920 - main_orchestrator - INFO - No hubo imágenes descargadas o ya están procesadas.
2025-07-25 15:10:09,920 - main_orchestrator - INFO - --- Paso 7: Procesando URLs de Facebook ---
2025-07-25 15:10:09,921 - main_orchestrator - INFO - Leyendo archivo social para la fecha 11072025: social_links_11072025_unprocessed.json
2025-07-25 15:10:09,921 - main_orchestrator - INFO - Encontradas 8 URLs de Facebook para procesar
2025-07-25 15:10:09,921 - main_orchestrator - INFO - Asegurando que exista el directorio de salida: /home/erick/NewsAgent/output
2025-07-25 15:10:09,922 - lib.facebook_processor - INFO - Iniciando procesamiento paralelo de 8 URLs de Facebook para la fecha 11072025...
2025-07-25 15:10:09,923 - lib.facebook_processor - INFO - Procesando URL de Facebook (1): https://www.facebook.com/share/p/1Fv9DAdXsP/
2025-07-25 15:10:09,923 - lib.facebook_processor - INFO - Procesando URL de Facebook (2): https://www.facebook.com/share/p/1As8wVMMMc/
2025-07-25 15:10:09,924 - lib.facebook_processor - INFO - Procesando URL de Facebook (3): https://www.facebook.com/AqpMasNoticias/posts/pfbid0Ym6UeKRN2DMyCQaCDXuFCrEYXyU1TvfKTnEw9SyY8qLyfycrffBoPfhnrX6TxiCSl
2025-07-25 15:10:09,925 - lib.facebook_processor - INFO - Procesando URL de Facebook (4): https://www.facebook.com/AqpMasNoticias/posts/pfbid0Ym6UeKRN2DMyCQaCDXuFCrEYXyU1TvfKTnEw9SyY8qLyfycrffBoPfhnrX6TxiCSl
2025-07-25 15:10:09,929 - lib.facebook_processor - INFO - Procesando URL de Facebook (5): https://www.facebook.com/share/p/1Angugo3Dh/
2025-07-25 15:15:10,133 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:15:10,133 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:15:10,142 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:15:10,152 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:15:10,164 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:15:30,060 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-3.pdf
2025-07-25 15:15:31,619 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-5.pdf
2025-07-25 15:15:32,013 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-1.pdf
2025-07-25 15:15:32,689 - lib.facebook_processor - INFO - Procesando URL de Facebook (6): https://www.facebook.com/share/p/1CDCNnvR9h/
2025-07-25 15:15:33,715 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-2.pdf
2025-07-25 15:15:33,861 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-4.pdf
2025-07-25 15:15:34,739 - lib.facebook_processor - INFO - Procesando URL de Facebook (7): https://www.facebook.com/share/r/1CM1BvLYYA/
2025-07-25 15:15:34,966 - lib.facebook_processor - INFO - Procesando URL de Facebook (8): https://www.facebook.com/photo?fbid=705024775749143&set=a.109152658669694&locale=es_LA
2025-07-25 15:15:36,291 - lib.facebook_processor - INFO - Progreso Facebook: 5/8 en 326.37 seg.
2025-07-25 15:20:33,317 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:20:34,938 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:20:35,209 - selenium.webdriver.common.selenium_manager - WARNING - There was an error managing chromedriver (error sending request for url (https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json)); using driver found in the cache
2025-07-25 15:20:49,662 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-6.pdf
2025-07-25 15:20:50,606 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-8.pdf
2025-07-25 15:20:52,032 - lib.facebook_processor - INFO - PDF guardado exitosamente: /home/erick/NewsAgent/base/11072025/11072025-7.pdf
2025-07-25 15:20:54,403 - lib.facebook_processor - INFO - Progreso Facebook: 8/8 en 644.48 seg.
2025-07-25 15:20:54,405 - lib.facebook_processor - INFO - Resultados de Facebook guardados en: /home/erick/NewsAgent/output/facebook_results_11072025.json
2025-07-25 15:20:54,405 - lib.facebook_processor - INFO - Procesamiento de Facebook completado: 7/8 exitosos en 644.48 segundos.
2025-07-25 15:20:54,405 - main_orchestrator - INFO - Procesamiento de URLs de Facebook completado en 644.48 seg.
2025-07-25 15:20:54,406 - lib.history_tracker - INFO - Añadidas 7 nuevas URLs al historial.
2025-07-25 15:20:54,408 - lib.history_tracker - INFO - Historial guardado en /home/erick/NewsAgent/codigo/lib/history/processed_urls.json con 713 URLs.
2025-07-25 15:20:54,408 - main_orchestrator - INFO - --- Paso 9: Extrayendo Texto de PDFs de Facebook ---
2025-07-25 15:20:54,515 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-4.pdf
2025-07-25 15:20:54,982 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-5.pdf
2025-07-25 15:20:55,854 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-1.pdf
2025-07-25 15:20:55,946 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-2.pdf
2025-07-25 15:20:56,121 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-6.pdf
2025-07-25 15:20:56,187 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-8.pdf
2025-07-25 15:20:56,237 - lib.facebook_processor - INFO - Texto extraído exitosamente del PDF: /home/erick/NewsAgent/base/11072025/11072025-7.pdf
2025-07-25 15:20:56,237 - lib.facebook_processor - INFO - Texto extraído de 7 PDFs de Facebook
2025-07-25 15:20:56,237 - main_orchestrator - INFO - Extracción de texto de PDFs de Facebook completada en 1.83 seg.
2025-07-25 15:20:56,237 - main_orchestrator - INFO - Texto extraído de 7 PDFs de Facebook
2025-07-25 15:20:56,238 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-25 15:20:56,239 - main_orchestrator - INFO - Textos de PDFs de Facebook guardados en: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-25 15:20:56,240 - main_orchestrator - INFO - --- Paso 10: Generando Estadísticas y Consolidando ---
2025-07-25 15:20:56,241 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 15:20:56,242 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 15:20:56,242 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T15:20:56.241144', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 14, 'history_total_urls': 713, 'categories': {'html': 1, 'social': 13}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 1, 'average_relevance': 0.4}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 7, 'extracted_texts': 7}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 1.83, 'image_download': 0, 'html_scraping': 1.49, 'image_api': 0, 'facebook_processing': 644.48, 'facebook_text_extraction': 1.83, 'stats_consolidation': 0.0}}
2025-07-25 15:20:56,242 - main_orchestrator - INFO - Estadísticas generadas y guardadas en 0.00 seg.
2025-07-25 15:20:56,242 - main_orchestrator - INFO - --- Paso 9: Verificando contenido HTML e imágenes existentes ---
2025-07-25 15:20:56,244 - main_orchestrator - INFO - Cargando contenido de imágenes de archivo existente: /home/erick/NewsAgent/input/Images/downloads/11072025/texto_imagenes_api.json
2025-07-25 15:20:56,246 - main_orchestrator - INFO - Texto del PDF cargado para consolidación desde: /home/erick/NewsAgent/input/Out/scraped_pdf_11072025/pdf_text_11072025.json
2025-07-25 15:20:56,246 - main_orchestrator - INFO - Procesando 0 textos de imágenes para consolidación
2025-07-25 15:20:56,249 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-25 15:20:56,249 - main_orchestrator - INFO - Resultados consolidados guardados en: /home/erick/NewsAgent/output/consolidated_11072025.json
2025-07-25 15:20:56,250 - main_orchestrator - INFO - --- Paso 12: Realizando Limpieza Semántica ---
2025-07-25 15:20:56,261 - main_orchestrator - INFO - Realizando limpieza semántica...
2025-07-25 15:20:56,261 - semantic_cleaner - INFO - Iniciando limpieza semántica del archivo consolidado...
2025-07-25 15:20:56,261 - semantic_cleaner - INFO - Extraídos 5 textos de PDF
2025-07-25 15:20:56,262 - semantic_cleaner - INFO - Extraídos 1 textos de HTML
2025-07-25 15:20:56,262 - semantic_cleaner - INFO - Extraídos 0 textos de imágenes
2025-07-25 15:20:56,262 - semantic_cleaner - INFO - Extraídos 7 textos de Facebook
2025-07-25 15:20:57,428 - semantic_cleaner - INFO - Se identificaron 13 grupos de textos similares
2025-07-25 15:20:57,428 - semantic_cleaner - INFO - Se seleccionaron 13 textos representativos
2025-07-25 15:20:57,429 - semantic_cleaner - INFO - Limpieza semántica completada con éxito
2025-07-25 15:20:57,429 - main_orchestrator - INFO - Guardando JSON limpio en: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-25 15:20:57,431 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/output/clean/clean_11072025.json
2025-07-25 15:20:57,431 - main_orchestrator - INFO - Convirtiendo a formato Markdown y guardando en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 15:20:57,436 - markdown_converter - INFO - Archivo Markdown guardado en: /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 15:20:57,436 - lib.file_manager - INFO - Datos guardados en JSON: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 15:20:57,438 - lib.file_manager - INFO - Estadísticas guardadas: /home/erick/NewsAgent/input/Stats/stats_11072025.json
2025-07-25 15:20:57,439 - lib.file_manager - INFO - Contenido estadísticas: {'run_timestamp': '2025-07-25T15:20:56.241144', 'date_processed': '11072025', 'total_urls_in_pdf': 125, 'new_urls_processed_count': 14, 'history_total_urls': 713, 'categories': {'html': 1, 'social': 13}, 'html_processing': {'attempted': 1, 'processed': 1, 'successful': 1, 'relevant (>=0.3)': 1, 'average_relevance': 0.4}, 'image_processing': {'attempted_download': 0, 'successful_download': 0, 'attempted_api': 0, 'successful_api': 0}, 'facebook_processing': {'attempted': 8, 'successful': 7, 'extracted_texts': 7}, 'timings_seconds': {'pdf_extraction': 0.77, 'pdf_text_extraction': 1.83, 'image_download': 0, 'html_scraping': 1.49, 'image_api': 0, 'facebook_processing': 644.48, 'facebook_text_extraction': 1.83, 'stats_consolidation': 0.0, 'semantic_cleaning': 1.19}}
2025-07-25 15:20:57,439 - main_orchestrator - INFO - Limpieza semántica completada en 1.19 seg.
2025-07-25 15:20:57,439 - main_orchestrator - INFO - --- Paso 12.1: Integrando textos de Facebook en archivos limpios ---
2025-07-25 15:20:57,439 - facebook_extractor_fix - INFO - Ruta del proyecto: /home/erick/NewsAgent
2025-07-25 15:20:57,439 - facebook_extractor_fix - INFO - Buscando archivo de Facebook en: /home/erick/NewsAgent/output/facebook_texts_11072025.json
2025-07-25 15:20:57,443 - facebook_extractor_fix - INFO - Estructura de los datos de Facebook: https://www.facebook.com/AqpMasNoticias/posts/pfbid0Ym6UeKRN2DMyCQaCDXuFCrEYXyU1TvfKTnEw9SyY8qLyfycrffBoPfhnrX6TxiCSl
2025-07-25 15:20:57,443 - facebook_extractor_fix - INFO - Claves en la primera entrada: ['extracted_text', 'pdf_path', 'processed_date']
2025-07-25 15:20:57,444 - facebook_extractor_fix - INFO - Sección de Facebook añadida al archivo /home/erick/NewsAgent/output/clean/clean_11072025.md
2025-07-25 15:20:57,444 - facebook_extractor_fix - INFO - Se han añadido 7 textos de Facebook al archivo limpio
2025-07-25 15:20:57,444 - main_orchestrator - INFO - Textos de Facebook integrados correctamente en archivos limpios
2025-07-25 15:20:57,445 - main_orchestrator - INFO - --- Limpieza Final ---
2025-07-25 15:20:57,445 - main_orchestrator - INFO - ==================================================
2025-07-25 15:20:57,445 - main_orchestrator - INFO - PIPELINE FINALIZADO en 2487.52 segundos.
2025-07-25 15:20:57,445 - main_orchestrator - INFO - ==================================================
2025-07-25 15:20:57,641 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-07-25 15:20:58,329 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:20:59,137 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:20:59,944 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:00,485 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:00,988 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:01,646 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:02,383 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:03,641 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:04,246 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:04,948 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:05,456 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:06,077 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:06,613 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-07-25 15:21:06,781 - httpx - INFO - HTTP Request: PUT http://localhost:6333/collections/sunass_news_openai/points?wait=true "HTTP/1.1 200 OK"
2025-07-25 15:21:19,602 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 15:22:46,871 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 15:22:49,004 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 15:23:32,960 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 15:25:28,204 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
2025-07-25 15:26:11,284 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/sunass_news_openai/points/search "HTTP/1.1 200 OK"
